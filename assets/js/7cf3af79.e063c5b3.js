"use strict";(self.webpackChunkninjee=self.webpackChunkninjee||[]).push([[1779],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return c}});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var p=a.createContext({}),u=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=u(e.components);return a.createElement(p.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,p=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),m=u(n),c=l,d=m["".concat(p,".").concat(c)]||m[c]||k[c]||r;return n?a.createElement(d,i(i({ref:t},s),{},{components:n})):a.createElement(d,i({ref:t},s))}));function c(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=m;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var u=2;u<r;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},38482:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return o},metadata:function(){return u},toc:function(){return k}});var a=n(87462),l=n(63366),r=(n(67294),n(3905)),i=["components"],o={title:"React",sidebar_position:11,date:new Date("2022-08-05T00:00:00.000Z"),tags:["React"]},p=void 0,u={unversionedId:"interview/summary/React",id:"interview/summary/React",title:"React",description:"React \u8bbe\u8ba1\u7406\u5ff5",source:"@site/docs/interview/summary/React.md",sourceDirName:"interview/summary",slug:"/interview/summary/React",permalink:"/docs/interview/summary/React",tags:[{label:"React",permalink:"/docs/tags/react"}],version:"current",sidebarPosition:11,frontMatter:{title:"React",sidebar_position:11,date:"2022-08-05T00:00:00.000Z",tags:["React"]},sidebar:"\u524d\u7aef",previous:{title:"git",permalink:"/docs/interview/summary/git"},next:{title:"Typescript",permalink:"/docs/interview/summary/Typescript"}},s={},k=[{value:"React \u8bbe\u8ba1\u7406\u5ff5",id:"react-\u8bbe\u8ba1\u7406\u5ff5",level:2},{value:"\u95ee\u9898\uff1aReact \u8fd0\u884c\u673a\u5236 / \u67b6\u6784",id:"\u95ee\u9898react-\u8fd0\u884c\u673a\u5236--\u67b6\u6784",level:3},{value:"\u8bbe\u8ba1\u7406\u5ff5",id:"\u8bbe\u8ba1\u7406\u5ff5",level:5},{value:"\u5f02\u6b65\u53ef\u4e2d\u65ad",id:"\u5f02\u6b65\u53ef\u4e2d\u65ad",level:5},{value:"1 \u8c03\u5ea6\u9636\u6bb5",id:"1-\u8c03\u5ea6\u9636\u6bb5",level:4},{value:"2 \u534f\u8c03\u9636\u6bb5",id:"2-\u534f\u8c03\u9636\u6bb5",level:4},{value:"\u8be5\u9636\u6bb5\u7684\u7279\u70b9\uff1a",id:"\u8be5\u9636\u6bb5\u7684\u7279\u70b9",level:5},{value:"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c\uff1a",id:"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c",level:5},{value:"3 \u6e32\u67d3\u9636\u6bb5",id:"3-\u6e32\u67d3\u9636\u6bb5",level:4},{value:"\u95ee\u9898\uff1aalgebraic effects",id:"\u95ee\u9898algebraic-effects",level:3},{value:"algebraic effects \u7684\u7531\u6765",id:"algebraic-effects-\u7684\u7531\u6765",level:4},{value:"Algebraic Effects \u89e3\u51b3\u7684\u95ee\u9898",id:"algebraic-effects-\u89e3\u51b3\u7684\u95ee\u9898",level:4},{value:"React Hooks \u601d\u60f3",id:"react-hooks-\u601d\u60f3",level:4},{value:"\u95ee\u9898\uff1a\u521d\u6b21\u6e32\u67d3 / \u66f4\u65b0 \u7684\u533a\u522b",id:"\u95ee\u9898\u521d\u6b21\u6e32\u67d3--\u66f4\u65b0-\u7684\u533a\u522b",level:3},{value:"\u521d\u6b21\u6e32\u67d3",id:"\u521d\u6b21\u6e32\u67d3",level:5},{value:"\u66f4\u65b0 Update",id:"\u66f4\u65b0-update",level:5},{value:"\u518d\u6b21\u66f4\u65b0",id:"\u518d\u6b21\u66f4\u65b0",level:5},{value:"\u95ee\u9898\uff1a\u54ea\u4e9b\u65b9\u5f0f\u53ef\u4ee5\u89e6\u53d1 update \u66f4\u65b0\uff1f",id:"\u95ee\u9898\u54ea\u4e9b\u65b9\u5f0f\u53ef\u4ee5\u89e6\u53d1-update-\u66f4\u65b0",level:3},{value:"diff",id:"diff",level:2},{value:"\u95ee\u9898\uff1a\u4ec0\u4e48\u662f virtual DOM",id:"\u95ee\u9898\u4ec0\u4e48\u662f-virtual-dom",level:3},{value:"\u95ee\u9898\uff1avirtual DOM \u7684\u4f18\u52bf",id:"\u95ee\u9898virtual-dom-\u7684\u4f18\u52bf",level:3},{value:"1. \u63d0\u9ad8\u6548\u7387",id:"1-\u63d0\u9ad8\u6548\u7387",level:5},{value:"2. \u63d0\u5347\u6027\u80fd",id:"2-\u63d0\u5347\u6027\u80fd",level:5},{value:"3. \u589e\u5f3a\u517c\u5bb9\u6027",id:"3-\u589e\u5f3a\u517c\u5bb9\u6027",level:5},{value:"\u95ee\u9898\uff1adiff \u539f\u7406",id:"\u95ee\u9898diff-\u539f\u7406",level:3},{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:5},{value:"tree diff",id:"tree-diff",level:5},{value:"component diff",id:"component-diff",level:5},{value:"element diff",id:"element-diff",level:5},{value:"\u95ee\u9898\uff1a\u53cc\u7f13\u5b58\u6a21\u578b",id:"\u95ee\u9898\u53cc\u7f13\u5b58\u6a21\u578b",level:3},{value:"Fiber",id:"fiber",level:2},{value:"\u95ee\u98981 \u4e3a\u4ec0\u4e48\u8981\u5f15\u5165 Fiber \u67b6\u6784\uff1f",id:"\u95ee\u98981-\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165-fiber-\u67b6\u6784",level:3},{value:"\u95ee\u98982 \u4ec0\u4e48\u662f Fiber",id:"\u95ee\u98982-\u4ec0\u4e48\u662f-fiber",level:3},{value:"1 \u6d41\u7a0b\u63a7\u5236\u673a\u5236",id:"1-\u6d41\u7a0b\u63a7\u5236\u673a\u5236",level:4},{value:"2 \u6267\u884c\u5355\u5143",id:"2-\u6267\u884c\u5355\u5143",level:4},{value:"3 \u4e00\u79cd\u6570\u636e\u7ed3\u6784",id:"3-\u4e00\u79cd\u6570\u636e\u7ed3\u6784",level:4},{value:"\u95ee\u98983 Fiber \u7684\u7ed3\u6784",id:"\u95ee\u98983-fiber-\u7684\u7ed3\u6784",level:3},{value:"\u95ee\u9898\uff1aFiber \u66f4\u65b0\u673a\u5236",id:"\u95ee\u9898fiber-\u66f4\u65b0\u673a\u5236",level:3},{value:"\u751f\u547d\u5468\u671f hooks",id:"\u751f\u547d\u5468\u671f-hooks",level:2},{value:"\u95ee\u9898\uff1auseEffect \u548c useLayoutEffect \u7684\u533a\u522b",id:"\u95ee\u9898useeffect-\u548c-uselayouteffect-\u7684\u533a\u522b",level:3},{value:"\u95ee\u9898\uff1aReact \u751f\u547d\u5468\u671f\uff088\uff09",id:"\u95ee\u9898react-\u751f\u547d\u5468\u671f8",level:3},{value:"\u534f\u8c03\u9636\u6bb5 render",id:"\u534f\u8c03\u9636\u6bb5-render",level:4},{value:"\u6e32\u67d3\u9636\u6bb5 commit",id:"\u6e32\u67d3\u9636\u6bb5-commit",level:4},{value:"\u95ee\u9898\uff1aReact 17 \u4e3a\u4ec0\u4e48\u4f1a\u5e9f\u5f03 3 \u4e2a\u751f\u547d\u5468\u671f",id:"\u95ee\u9898react-17-\u4e3a\u4ec0\u4e48\u4f1a\u5e9f\u5f03-3-\u4e2a\u751f\u547d\u5468\u671f",level:4},{value:"\u95ee\u9898\uff1a\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u6267\u884c\u987a\u5e8f",id:"\u95ee\u9898\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u6267\u884c\u987a\u5e8f",level:3},{value:"\u95ee\u9898\uff1aReact hooks",id:"\u95ee\u9898react-hooks",level:3},{value:"Hooks \u7684\u7279\u70b9",id:"hooks-\u7684\u7279\u70b9",level:4},{value:"Hooks \u4ecb\u7ecd (9)",id:"hooks-\u4ecb\u7ecd-9",level:4},{value:"useState",id:"usestate",level:4},{value:"useReducer",id:"usereducer",level:4},{value:"useEffect",id:"useeffect",level:4},{value:"useLayoutEffect",id:"uselayouteffect",level:4},{value:"useContext",id:"usecontext",level:4},{value:"useRef",id:"useref",level:4},{value:"useImperativeHandle",id:"useimperativehandle",level:4},{value:"useMemo",id:"usememo",level:4},{value:"useCallback",id:"usecallback",level:4},{value:"State",id:"state",level:2},{value:"\u95ee\u9898\uff1astate API",id:"\u95ee\u9898state-api",level:3},{value:"\u95ee\u9898\uff1astate \u7684\u6279\u91cf\u66f4\u65b0",id:"\u95ee\u9898state-\u7684\u6279\u91cf\u66f4\u65b0",level:3},{value:"\u51fd\u6570\u7ec4\u4ef6 \u6ce8\u610f1",id:"\u51fd\u6570\u7ec4\u4ef6-\u6ce8\u610f1",level:4},{value:"\u51fd\u6570\u7ec4\u4ef6 \u6ce8\u610f2",id:"\u51fd\u6570\u7ec4\u4ef6-\u6ce8\u610f2",level:4},{value:"\u95ee\u9898\uff1auseState \u548c setState \u533a\u522b",id:"\u95ee\u9898usestate-\u548c-setstate-\u533a\u522b",level:3},{value:"\u95ee\u9898\uff1astate \u4e2d\u7684\u66f4\u65b0\u987a\u5e8f",id:"\u95ee\u9898state-\u4e2d\u7684\u66f4\u65b0\u987a\u5e8f",level:3},{value:"\u95ee\u9898\uff1a\u51fd\u6570\u7ec4\u4ef6\u4e2d\uff0c\u76d1\u542c state \u7684\u53d8\u5316",id:"\u95ee\u9898\u51fd\u6570\u7ec4\u4ef6\u4e2d\u76d1\u542c-state-\u7684\u53d8\u5316",level:3},{value:"\u4e8b\u4ef6\u673a\u5236",id:"\u4e8b\u4ef6\u673a\u5236",level:2},{value:"\u95ee\u9898\uff1a\u4e8b\u4ef6\u673a\u5236",id:"\u95ee\u9898\u4e8b\u4ef6\u673a\u5236",level:3},{value:"\u95ee\u9898\uff1a\u4e00\u6b21\u70b9\u51fb\u4e8b\u4ef6\u89e6\u53d1\u7684\u6d41\u7a0b",id:"\u95ee\u9898\u4e00\u6b21\u70b9\u51fb\u4e8b\u4ef6\u89e6\u53d1\u7684\u6d41\u7a0b",level:3},{value:"\u95ee\u9898\uff1aComponent\u3001PureComponent \u3001memo()",id:"\u95ee\u9898componentpurecomponent-memo",level:3},{value:"\u5176\u4ed6",id:"\u5176\u4ed6",level:2},{value:"\u95ee\u9898\uff1aJSX, element, fiber, dom \u7684\u5173\u7cfb",id:"\u95ee\u9898jsx-element-fiber-dom-\u7684\u5173\u7cfb",level:3},{value:"\u95ee\u9898\uff1a\u4ec0\u4e48\u662f\u53d7\u63a7\u7ec4\u4ef6\uff1f",id:"\u95ee\u9898\u4ec0\u4e48\u662f\u53d7\u63a7\u7ec4\u4ef6",level:3},{value:"\u95ee\u9898\uff1a\u4ec0\u4e48\u662f\u65e0\u72b6\u6001\u7ec4\u4ef6\uff1f",id:"\u95ee\u9898\u4ec0\u4e48\u662f\u65e0\u72b6\u6001\u7ec4\u4ef6",level:3},{value:"\u95ee\u9898\uff1aHOC / \u9ad8\u9636\u7ec4\u4ef6",id:"\u95ee\u9898hoc--\u9ad8\u9636\u7ec4\u4ef6",level:3},{value:"\ud83c\udf4a \u7ec4\u4ef6\u95f4\u7684\u901a\u4fe1\u65b9\u5f0f\uff088\u79cd\uff09",id:"-\u7ec4\u4ef6\u95f4\u7684\u901a\u4fe1\u65b9\u5f0f8\u79cd",level:3},{value:"\u81ea\u5b9a\u4e49 hook",id:"\u81ea\u5b9a\u4e49-hook",level:2},{value:"\u95ee\u9898\uff1a\u963b\u6b62 useEffect \u521d\u59cb\u5316\u8c03\u7528",id:"\u95ee\u9898\u963b\u6b62-useeffect-\u521d\u59cb\u5316\u8c03\u7528",level:3},{value:"React Router",id:"react-router",level:2},{value:"\ud83c\udf4a redux \u4e0e react-router \u6574\u5408",id:"-redux-\u4e0e-react-router-\u6574\u5408",level:3},{value:"\ud83c\udf4a React Router \u6d41\u7a0b",id:"-react-router-\u6d41\u7a0b",level:3},{value:"\ud83c\udf4a \u6587\u4ef6\u7ed3\u6784 / \u542f\u52a8\u6d41\u7a0b\uff1a",id:"-\u6587\u4ef6\u7ed3\u6784--\u542f\u52a8\u6d41\u7a0b",level:3},{value:"\ud83c\udf4a \u94fe\u63a5\u5982\u4f55\u8df3\u8f6c",id:"-\u94fe\u63a5\u5982\u4f55\u8df3\u8f6c",level:3},{value:"\ud83c\udf4a SPA \u5b9a\u4e49",id:"-spa-\u5b9a\u4e49",level:3},{value:"\ud83c\udf4a BrowserHistory \u548c HashHistory \u7684\u533a\u522b",id:"-browserhistory-\u548c-hashhistory-\u7684\u533a\u522b",level:3},{value:"\ud83c\udf4a NavLink \u548c Link \u7ec4\u4ef6\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f",id:"-navlink-\u548c-link-\u7ec4\u4ef6\u6709\u4ec0\u4e48\u4e0d\u540c",level:3},{value:"\ud83c\udf4a \u8def\u7531\u7684\u6a21\u7cca\u5339\u914d\u4e0e\u4e25\u683c\u5339\u914d",id:"-\u8def\u7531\u7684\u6a21\u7cca\u5339\u914d\u4e0e\u4e25\u683c\u5339\u914d",level:3},{value:"\u95ee\u9898\uff1aReact\u4e2d\u8def\u7531\u4f20\u9012\u53c2\u6570\u6709\u51e0\u79cd\u65b9\u6cd5\uff1f",id:"\u95ee\u9898react\u4e2d\u8def\u7531\u4f20\u9012\u53c2\u6570\u6709\u51e0\u79cd\u65b9\u6cd5",level:3},{value:"\u8bbe\u8ba1",id:"\u8bbe\u8ba1",level:2},{value:"\ud83c\udf4a \u5b9e\u73b0\u4e00\u4e2a\u6253\u661f\u7ec4\u4ef6",id:"-\u5b9e\u73b0\u4e00\u4e2a\u6253\u661f\u7ec4\u4ef6",level:3},{value:"\ud83c\udf4a \u5b9e\u73b0\u4e00\u4e2a\u8f6e\u64ad\u56fe\u7ec4\u4ef6",id:"-\u5b9e\u73b0\u4e00\u4e2a\u8f6e\u64ad\u56fe\u7ec4\u4ef6",level:3},{value:"\u5176\u4ed6",id:"\u5176\u4ed6-1",level:2},{value:"\u95ee\u98981\uff1a\u6784\u5efa React \u9879\u76ee\uff1f\u4ec0\u4e48\u662f\u524d\u7aef\u5de5\u7a0b\u5316\uff1f",id:"\u95ee\u98981\u6784\u5efa-react-\u9879\u76ee\u4ec0\u4e48\u662f\u524d\u7aef\u5de5\u7a0b\u5316",level:3},{value:"\u95ee\u98983\uff1aReact 15 16 17\u533a\u522b",id:"\u95ee\u98983react-15-16-17\u533a\u522b",level:3},{value:"\u95ee\u9898\uff1a\u5355\u5411\u6570\u636e\u6d41",id:"\u95ee\u9898\u5355\u5411\u6570\u636e\u6d41",level:3}],m={toc:k};function c(e){var t=e.components,o=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"react-\u8bbe\u8ba1\u7406\u5ff5"},"React \u8bbe\u8ba1\u7406\u5ff5"),(0,r.kt)("h3",{id:"\u95ee\u9898react-\u8fd0\u884c\u673a\u5236--\u67b6\u6784"},"\u95ee\u9898\uff1aReact \u8fd0\u884c\u673a\u5236 / \u67b6\u6784"),(0,r.kt)("h5",{id:"\u8bbe\u8ba1\u7406\u5ff5"},"\u8bbe\u8ba1\u7406\u5ff5"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u7684\u6027\u80fd\u74f6\u9888\u5728 CPU \u548c IO\u3002"),(0,r.kt)("p",null,"React \u89e3\u51b3 CPU / IO \u7684\u74f6\u9888\uff1a",(0,r.kt)("strong",{parentName:"p"},"\u5f02\u6b65\u53ef\u4e2d\u65ad\u7684\u66f4\u65b0"),"\u3002"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u7684\u5237\u65b0\u7387\u901a\u5e38\u4e3a 60Hz/s\uff0c\u4e5f\u5c31\u662f 16.6ms \u5237\u65b0\u4e00\u6b21\u9875\u9762\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"16.6ms \u4e2d\uff0c\u6d4f\u89c8\u5668\u9700\u8981\u5b8c\u6210\uff1aJS\u811a\u672c\u6267\u884c\u3001\u6837\u5f0f\u5e03\u5c40\u3001\u6837\u5f0f\u7ed8\u5236\u3002")),(0,r.kt)("p",null,"\u5f53\u6e32\u67d3\u7684\u5904\u7406\u65f6\u95f4\u8d85\u8fc7 16.6ms\uff0c\u9875\u9762\u5c31\u4f1a\u5361\u987f\u3002\u901a\u5e38\u4f7f\u7528\u8282\u6d41\uff08\u95f4\u9694\u89e6\u53d1\uff09\u3001\u9632\u6296\uff08\u6700\u540e\u4e00\u4e2a\u89e6\u53d1\uff09\uff0c\u90fd\u662f\u901a\u8fc7\u9650\u5236\u66f4\u65b0\u9891\u7387\u6765\u63d0\u5347\u6027\u80fd\u3002"),(0,r.kt)("p",null,"React \u628a\u540c\u6b65\u66f4\u65b0\uff0c\u53d8\u4e3a\u5f02\u6b65\u53ef\u4e2d\u65ad\u8fdb\u884c\u66f4\u65b0\u3002React \u901a\u8fc7 fiber \u628a\u6e32\u67d3\u4efb\u52a1\u5207\u5206\u4e3a\u591a\u4e2a\u5c0f\u6bb5\uff0c\u6bcf\u4e2a\u5c0f\u6bb5\u6267\u884c\u5b8c\u6bd5\u540e\u4f1a\u628a\u4e3b\u52a8\u6743\u4ea4\u8fd8\u6d4f\u89c8\u5668\uff0c\u6d4f\u89c8\u5668\u5219\u53ef\u6839\u636e\u5f53\u524d\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\uff0c\u628a\u5269\u4f59\u65f6\u95f4\u5206\u914d\u7ed9\u66f4\u91cd\u8981\u7684\u4efb\u52a1\uff0c\u4ee5\u786e\u4fdd\u5c3d\u53ef\u80fd\u7684\u54cd\u5e94\u53ca\u65f6\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"16.6ms \u4e2d\uff0c\u5f53\u6d4f\u89c8\u5668\u6267\u884c\u5b8c\u91cd\u8981\u4efb\u52a1\u540e\uff0c\u4f1a\u628a\u5269\u4f59\u65f6\u95f4\u4ea4\u7ed9 React \u53d6\u6267\u884c\u5c1a\u672a\u5904\u7406\u5b8c\u7684\u4efb\u52a1\uff0c\u5982\u679c\u5269\u4f59\u65f6\u95f4\u4e0d\u591f\uff0c\u5c31\u4f1a\u628a\u5269\u4f59\u4efb\u52a1\u5728\u4e0b\u4e00\u4e2a 16.6ms \u5468\u671f\u4e2d\u6267\u884c\u3002")),(0,r.kt)("p",null,"\u8fd9\u6837\uff0c\u6d4f\u89c8\u5668\u5c31\u6709\u5145\u8db3\u7684\u65f6\u95f4\u8fdb\u884c\u6837\u5f0f\u5e03\u5c40\u548c\u9875\u9762\u7ed8\u5236\uff0c\u800c React \u4e5f\u53ef\u4ee5\u5728\u5206\u914d\u7ed9\u81ea\u5df1\u7684\u65f6\u95f4\u5185\u6267\u884c\u5b8c\u4efb\u52a1\u3002"),(0,r.kt)("h5",{id:"\u5f02\u6b65\u53ef\u4e2d\u65ad"},"\u5f02\u6b65\u53ef\u4e2d\u65ad"),(0,r.kt)("p",null,"React 15+ \u5b9e\u73b0\u4e86\u5f02\u6b65\u53ef\u4e2d\u65ad\u7684\u67b6\u6784\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Scheduler \u8c03\u5ea6\u5668\uff1a\u8c03\u5ea6\u66f4\u65b0\uff0c\u7ed9\u66f4\u65b0\u4efb\u52a1\u5b89\u6392\u4f18\u5148\u7ea7\u3002"),(0,r.kt)("li",{parentName:"ul"},"Reconcoler \u534f\u8c03\u5668\uff1a\u51b3\u5b9a\u9700\u8981\u66f4\u65b0\u4ec0\u4e48\u7ec4\u4ef6\uff0c\u5f53\u66f4\u9ad8\u4f18\u4efb\u52a1\u6765\u5230\u65f6\uff0c\u53ef\u4e2d\u65ad\u5f53\u524d\u4efb\u52a1\u3002"),(0,r.kt)("li",{parentName:"ul"},"Renderer \u6e32\u67d3\u5668\uff1a\u5c06\u7ec4\u4ef6\u66f4\u65b0\u5230\u89c6\u56fe\u4e2d\uff0c\u6e32\u67d3\u8fc7\u7a0b\u662f\u540c\u6b65\u4e14\u4e0d\u53ef\u4e2d\u65ad\u7684\uff0c\u9700\u8981\u4e00\u6c14\u5475\u6210\u3002")),(0,r.kt)("p",null,"\u5728 render \u51fd\u6570\u7684\u6267\u884c\u5468\u671f\u4e2d\uff0c\u6709\u8c03\u5ea6\uff08\u4e8b\u4ef6\u89e6\u53d1\uff09\u3001\u534f\u8c03\uff08render\uff09\u3001\u6e32\u67d3\uff08commit\uff09\u4e09\u4e2a\u9636\u6bb5\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220806230807382",src:n(73335).Z,width:"1412",height:"602"})),(0,r.kt)("h4",{id:"1-\u8c03\u5ea6\u9636\u6bb5"},"1 \u8c03\u5ea6\u9636\u6bb5"),(0,r.kt)("p",null,"\u5f53 React \u9700\u8981\u66f4\u65b0\u65f6\uff0c\u66f4\u65b0\u4efb\u52a1\u9996\u5148\u88ab Scheduler \u8c03\u5ea6\u5668 \u5904\u7406\u3002"),(0,r.kt)("p",null,"\u5904\u7406\u7684\u5de5\u4f5c\u6709\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u521b\u5efa\u9879\u76ee\u6839 Fiber \u8282\u70b9"),"\u3002\u9996\u6b21\u6e32\u67d3\u9875\u9762\u65f6\uff0c\u4f1a\u521b\u5efa\u552f\u4e00\u7684\u6839\u8282\u70b9 FiberRoot Node\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u521b\u5efa\u5e94\u7528\u6839 Fiber \u8282\u70b9"),"\u3002\u6bcf\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"ReactDOM.render()")," \u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a rootFiber\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u521d\u59cb\u5316\u4e8b\u4ef6"),"\u3002Scheduler \u4f1a\u628a\u4efb\u52a1\u6309\u7167\u4f18\u5148\u7ea7\u6392\u5e8f\uff0c\u8ba9\u66f4\u9ad8\u4f18\u7684\u4efb\u52a1\u9996\u5148\u8fdb\u5165 Reconciler \u534f\u8c03\u5668\u8fdb\u884c\u4e0b\u4e00\u6b65\u5904\u7406\u3002")),(0,r.kt)("h4",{id:"2-\u534f\u8c03\u9636\u6bb5"},"2 \u534f\u8c03\u9636\u6bb5"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u534f\u8c03\u9636\u6bb5\u662f Reconcoler \u534f\u8c03\u5668\u5728\u53c2\u4e0e\uff0c\u4e5f\u88ab\u79f0\u4e3a render \u9636\u6bb5"),"\uff0c\u5982\u4e0b\u56fe renderRootSync \u90fd\u4e3a\u534f\u8c03\u9636\u6bb5\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220806231908259",src:n(9958).Z,width:"680",height:"386"})),(0,r.kt)("p",null,"Scheduler \u8c03\u5ea6\u5668\u4f1a\u901a\u8fc7 diff \u7b97\u6cd5\uff0c\u5904\u7406\u4f20\u5165\u7684\u66f4\u65b0\u4efb\u52a1\u3002diff \u5b8c\u6bd5\u540e\uff0c\u4f1a\u7531 fiber \u6784\u6210\u4e00\u9897\u65b0\u7684 fiber \u6811\uff0c\u7136\u540e\u63d0\u4ea4\u7ed9 Renderer \u6e32\u67d3\u5668\u8fdb\u4e00\u6b65\u5904\u7406\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5173\u4e8e virtual DOM \u7684\u6982\u5ff5\uff0c\u6709\u4e24\u79cd\u8bf4\u6cd5\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5e7f\u4e49\u7684\u8bf4\uff0c\u7531 fiber \u7ec4\u6210\u7684\u6811\u4e3a fiber \u6811\uff0c\u4e5f\u662f\u4e00\u4e2a virtual DOM \u6811\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u72ed\u4e49\u7684\u8bf4\uff0c\u901a\u8fc7 React element \u7ec4\u6210\u7684\u6811\uff0c\u662f virtual DOM \u6811\uff0c\u5728\u534f\u8c03\u9636\u6bb5\uff0c\u4f1a\u628a virtual DOM \u8f6c\u5316\u4e3a fiber tree\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u5173\u4e8e\u7ec4\u4ef6\u4e2d\u7684 render \u51fd\u6570\u7684\u4f5c\u7528\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728\u8c03\u548c\u9636\u6bb5\u7684\u6574\u4f53\u4efb\u52a1\uff0c\u662f\u901a\u8fc7 fiber \u8282\u70b9\u6784\u5efa\u4e00\u68f5 workInProgress fiber tree\u3002\u8fd9\u4e2a\u6784\u5efa\u8fc7\u7a0b\u662f\u4ece\u6839\u8282\u70b9\u5411\u5b50\u8282\u70b9\u6df1\u5ea6\u4f18\u5148\u904d\u5386\u5b8c\u6210\u7684\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u9047\u5230\uff0c\u67d0\u4e2a\u7ec4\u4ef6\uff0c\u4f1a\u6267\u884c\u5176\u8c03\u548c\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u7136\u540e\u8c03\u7528\u7ec4\u4ef6\u7684 render\u3002 render \u4f1a\u6839\u636e\u672c\u6b21\u66f4\u65b0\u4e2d\u7684 state \u53d8\u5316\uff0c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"React.createElement")," \u751f\u6210\u65b0\u7684 React Element \u5bf9\u8c61\uff0c\u5728\u65b0\u7684\u5bf9\u8c61\u4e0a\u4fdd\u5b58\u4e86\u65b0\u7684 state + props \u72b6\u6001\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8be5\u7ec4\u4ef6\u7684 fiber \u8282\u70b9\u4f1a\u6839\u636e\u5bf9\u5e94\u7684 React element \u5b8c\u6210\u6784\u5efa\u3002\u540c\u65f6\u5bf9\u526f\u4f5c\u7528\u53d8\u5316\u6253\u4e0a\u6807\u8bb0\u3002")))),(0,r.kt)("h5",{id:"\u8be5\u9636\u6bb5\u7684\u7279\u70b9"},"\u8be5\u9636\u6bb5\u7684\u7279\u70b9\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u53ef\u6682\u505c"),"\u3002\u800c\u5728 Reconciler \u5728\u8fdb\u884c diff \u7b97\u6cd5\u65f6\uff0c\u5982\u679c\u8c03\u5ea6\u5668\u4f20\u6765\u4e00\u4e2a\u66f4\u9ad8\u4f18\u7684\u4efb\u52a1\uff0c\u90a3\u4e48\u5f53\u524d\u5904\u7406\u7684\u66f4\u65b0\u4efb\u52a1\u4f1a\u88ab\u6682\u505c\uff0c\u8ba9\u8c03\u5ea6\u5668\u653e\u5165\u4efb\u52a1\u961f\u5217\u4e2d\uff0c\u4f18\u5148\u5904\u7406\u4f20\u5165\u7684\u66f4\u9ad8\u4f18\u4efb\u52a1\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u7528\u6237\u900f\u660e"),"\u3002\u7531\u4e8e\u8c03\u5ea6\u5668\u548c\u534f\u8c03\u5668\u662f\u5728\u5185\u5b58\u4e2d\u5de5\u4f5c\uff0c\u5373\u4f7f diff \u4e2d\u65ad\uff0c\u7528\u6237\u4e5f\u65e0\u6cd5\u611f\u77e5\u5230\u9875\u9762\u6e32\u67d3\u88ab\u4e2d\u65ad / \u5361\u987f\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6784\u5efa work In Progres \u6811"),"\u3002diff \u7b97\u6cd5\u4f1a\u6784\u5efa\u4e00\u9897\u865a\u62df dom \u6811\uff0c\u89c6\u56fe\u4e0a\u771f\u5b9e\u5b58\u5728\u7684\u8282\u70b9\uff0c\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u8282\u70b9\u5728\u865a\u62df dom \u4e0a\u3002\u9700\u8981\u66f4\u65b0\u7684\u8282\u70b9\u4f1a\u88ab\u6253\u4e0a\u6807\u8bb0 Update\u3002\u88ab\u6253\u4e86\u6807\u8bb0\u7684\u865a\u62df dom \u4f1a\u4ea4\u7ed9\u6e32\u67d3\u5668\u3002")),(0,r.kt)("h5",{id:"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c"},"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8c03\u548c work IN Progress Tree"),"\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u6784\u5efa work IN Progress Tree\u3002"),(0,r.kt)("p",null,"\u6784\u5efa\u8fc7\u7a0b\u662f\u4e00\u4e2a\u9012\u5f52\u8fc7\u7a0b\uff0c\u4ece  ",(0,r.kt)("inlineCode",{parentName:"p"},"rootFiber"),"  \u5f00\u59cb\u5411\u4e0b\u6df1\u5ea6\u4f18\u5148\u904d\u5386\u7684\uff0c\u5177\u4f53\u53ef\u4ee5\u5206\u4e3a n \u4e2a\uff1a\u9012\u9636\u6bb5 + \u5f52\u9636\u6bb5\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff081\uff09\u9012\u9636\u6bb5")),(0,r.kt)("p",null,"\u9012\u9636\u6bb5\uff0c\u662f\u5411\u4e0b\u8c03\u548c\u7684\u8fc7\u7a0b\u3002"),(0,r.kt)("p",null,"\u8c03\u7528 ",(0,r.kt)("strong",{parentName:"p"},"beginWork")," \u65b9\u6cd5\uff0c\u4ece  ",(0,r.kt)("inlineCode",{parentName:"p"},"rootFiber"),"  \u5f00\u59cb\u5411\u4e0b\u6df1\u5ea6\u4f18\u5148\u904d\u5386\uff0c\u4e3a\u904d\u5386\u5230\u7684\u6bcf\u4e2a fiber \u8282\u70b9\u3002"),(0,r.kt)("p",null,"\u8be5\u65b9\u6cd5\u4f1a\u6839\u636e\u4f20\u5165\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber\u8282\u70b9")," \u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5b50Fiber\u8282\u70b9"),"\uff0c\u5e76\u5c06\u8fd9\u4e24\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber\u8282\u70b9")," \u8fde\u63a5\u8d77\u6765\uff08",(0,r.kt)("strong",{parentName:"p"},"fiber.child")," \u6307\u9488\uff09\u3002\u5f53\u904d\u5386\u5230\u53f6\u5b50\u8282\u70b9\uff08\u5373\u6ca1\u6709\u5b50\u7ec4\u4ef6\u7684\u7ec4\u4ef6\uff09\u65f6\u5c31\u4f1a\u8fdb\u5165 \u201c\u5f52\u201d \u9636\u6bb5\u3002"),(0,r.kt)("p",null,"\u5982\u679c\u4e0d\u662f\u521d\u6b21\u6e32\u67d3\uff0c\u800c\u662f\u66f4\u65b0\u9875\u9762\uff0c\u6b64\u65f6\u5df2\u7ecf\u5b58\u5728\u4e00\u4e2a\u6784\u5efa\u597d\u7684 ",(0,r.kt)("strong",{parentName:"p"},"Current Tree"),"\uff0c",(0,r.kt)("strong",{parentName:"p"},"beginWork")," \u65b9\u6cd5\u4f1a\u7531 fiberRoot \u6839\u8282\u70b9\uff0c\u6309\u7167 ",(0,r.kt)("strong",{parentName:"p"},"child")," \u6307\u9488\u9010\u5c42\u5411\u4e0b\u8c03\u548c\u3002"),(0,r.kt)("p",null,"beginWork \u5177\u4f53\u7684\u5de5\u4f5c\u5982\u4e0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u7ec4\u4ef6\uff0c\u6267\u884c\u90e8\u5206\u751f\u547d\u5468\u671f\uff0c\u6267\u884c render \uff0c\u5f97\u5230\u6700\u65b0\u7684 children\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5411\u4e0b\u904d\u5386\u8c03\u548c children \uff0c\u590d\u7528 oldFiber ( diff \u7b97\u6cd5)\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6253\u4e0d\u540c\u7684\u526f\u4f5c\u7528\u6807\u7b7e effectTag \uff0c\u6bd4\u5982\u7c7b\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\uff0c\u6216\u8005\u5143\u7d20\u7684\u589e\u52a0\uff0c\u5220\u9664\uff0c\u66f4\u65b0\u3002\u8fd9\u4e9b\u88ab\u6807\u8bb0\u7684\u8282\u70b9\uff0c\u4f1a\u5728\u5f52\u9636\u6bb5\u6536\u96c6\u8d77\u6765\uff0c\u5f62\u6210\u5355\u9879\u94fe\u8868 effectList\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// \u751f\u547d\u5468\u671f\u94a9\u5b50\u4f1a\u5728\u534f\u8c03\u9636\u6bb5\u88ab\u8c03\u7528\uff1a\nconstructor\ncomponentWillMount \u5e9f\u5f03\ncomponentWillReceiveProps \u5e9f\u5f03\nstatic getDerivedStateFromProps\nshouldComponentUpdate\ncomponentWillUpdate \u5e9f\u5f03\nrender\n\n\n// \u5e38\u89c1\u7684 effect tag\nexport const Placement = /*             */ 0b0000000000010;  // \u63d2\u5165\u8282\u70b9\nexport const Update = /*                */ 0b0000000000100;  // \u66f4\u65b0fiber\nexport const Deletion = /*              */ 0b0000000001000;  // \u5220\u9664fiebr\nexport const Snapshot = /*              */ 0b0000100000000;  // \u5feb\u7167\nexport const Passive = /*               */ 0b0001000000000;  // useEffect\u7684\u526f\u4f5c\u7528\nexport const Callback = /*              */ 0b0000000100000;  // setState\u7684 callback\nexport const Ref = /*                   */ 0b0000010000000;  // ref\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff082\uff09\u5f52\u9636\u6bb5")),(0,r.kt)("p",null,"\u5f52\u9636\u6bb5\uff0c\u662f\u5411\u4e0a\u5e76\u5f52\u7684\u8fc7\u7a0b\u3002"),(0,r.kt)("p",null,"\u8c03\u7528 ",(0,r.kt)("strong",{parentName:"p"},"completeWork")," \u65b9\u6cd5\uff0c\u6765\u5904\u7406\u5f53\u524d\u7684 Fiber \u8282\u70b9\u3002"),(0,r.kt)("p",null,"\u5f53\u67d0\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber\u8282\u70b9")," \u6267\u884c\u5b8c ",(0,r.kt)("inlineCode",{parentName:"p"},"completeWork"),"\uff0c\u5982\u679c\u5176\u5b58\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5144\u5f1fFiber\u8282\u70b9"),"\uff08",(0,r.kt)("strong",{parentName:"p"},"fiber.sibling")," \u6307\u9488 \uff09\uff0c\u4f1a\u8fdb\u5165\u5176 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5144\u5f1fFiber")," \u7684 \u201c\u9012\u201d\u9636\u6bb5\u3002\u5982\u679c\u4e0d\u5b58\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5144\u5f1fFiber"),"\uff0c\u4f1a\u8fdb\u5165 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u7236\u7ea7Fiber")," \u7684\u201c\u5f52\u201d\u9636\u6bb5\uff08",(0,r.kt)("strong",{parentName:"p"},"fiber.return")," \u6307\u9488\uff09\u3002"),(0,r.kt)("p",null,"\u5728\u6b64\u671f\u95f4\u4f1a\u5f62\u6210 effectList \u5355\u9879\u526f\u4f5c\u7528\u94fe\u8868\u3002\u5982\u679c\u662f\u521d\u6b21\u6e32\u67d3\u7684\u521d\u59cb\u5316\u6d41\u7a0b\uff0c\u4f1a\u521b\u5efa DOM \uff0c\u5bf9\u4e8e DOM \u5143\u7d20\u8fdb\u884c\u4e8b\u4ef6\u6536\u96c6\uff0c\u5904\u7406 style\uff0cclassName \u7b49\u5de5\u4f5c\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"completeUnitOfWork\n\u4f1a\u5c06 effectTag \u7684 Fiber \u8282\u70b9\u4f1a\u88ab\u4fdd\u5b58\u5728\u4e00\u6761\u88ab\u79f0\u4e3a effectList \u7684\u5355\u5411\u94fe\u8868\u4e2d\u3002\u5728 \u4e4b\u540e\u7684 commit \u9636\u6bb5\uff0c\u5c06\u4e0d\u518d\u9700\u8981\u904d\u5386\u6bcf\u4e00\u4e2a fiber \uff0c\u53ea\u9700\u8981\u6267\u884c\u66f4\u65b0 effectList \u5c31\u53ef\u4ee5\u4e86\u3002"),(0,r.kt)("li",{parentName:"ul"},"completeWork \u9636\u6bb5\n\u5bf9\u4e8e\u7ec4\u4ef6\uff0c\u4f1a\u5904\u7406 context \uff1b\n\u5bf9\u4e8e\u5143\u7d20\u6807\u7b7e\u521d\u59cb\u5316\uff0c\u4f1a\u521b\u5efa\u771f\u5b9e DOM \uff0c\u5c06\u5b50\u5b59 DOM \u8282\u70b9\u63d2\u5165\u521a\u751f\u6210\u7684 DOM \u8282\u70b9\u4e2d\uff1b\n\u4f1a\u89e6\u53d1 diffProperties \u5904\u7406 props \uff0c\u6bd4\u5982\u4e8b\u4ef6\u6536\u96c6\uff0cstyle\uff0cclassName \u5904\u7406\uff0c\u572815\u7ae0\u8bb2\u5230\u8fc7\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff083\uff09\u8fdb\u5165\u5faa\u73af")),(0,r.kt)("p",null,"\u201c\u9012\u201d\u548c\u201c\u5f52\u201d\u9636\u6bb5\u4f1a\u4ea4\u9519\u6267\u884c\uff0c\u76f4\u5230 \u201c\u5f52\u201d \u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"rootFiber")," \u6839\u7ed3\u70b9\u3002\u81f3\u6b64\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"render\u9636\u6bb5")," \u7684\u5de5\u4f5c\u5c31\u7ed3\u675f\u4e86\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6784\u6210\uff08\u8c03\u548c\uff09\u4e86\u7531 fiber \u8282\u70b9\u6784\u6210\u7684 work IN Progress Tree \u6811\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6784\u6210\u4e86\u63a5\u4e0b\u6765 commit \u9636\u6bb5\u9700\u8981\u6267\u884c\u66f4\u65b0\u7684 effectList \u526f\u4f5c\u7528\u94fe\u8868\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 00.27.04",src:n(22411).Z,width:"2130",height:"1826"})),(0,r.kt)("h4",{id:"3-\u6e32\u67d3\u9636\u6bb5"},"3 \u6e32\u67d3\u9636\u6bb5"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6e32\u67d3\u5668\u5de5\u4f5c\u7684\u9636\u6bb5\uff0c\u662f Renderer \u6e32\u67d3\u5668\u5728\u53c2\u4e0e\uff0c\u88ab\u79f0\u4e3a commit \u9636\u6bb5"),"\uff0c\u4e0b\u56fe\u4e2d\uff0ccommitRoot \u5c31\u662f commit \u9636\u6bb5\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220806232428977",src:n(25483).Z,width:"980",height:"420"})),(0,r.kt)("p",null,"\u672c\u6b21\u66f4\u65b0\u7531\u54ea\u4e9b\u7ec4\u4ef6\u9700\u8981\u66f4\u65b0\u89c6\u56fe\uff0c\u4f1a\u8ba9\u6e32\u67d3\u5668\u6765\u5206\u522b\u6267\u884c\u8fd9\u4e9b\u89c6\u56fe\u66f4\u65b0\u64cd\u4f5c\u3002"),(0,r.kt)("p",null,"\u6bcf\u4e00\u4e2a\u5b50\u9636\u6bb5\u90fd\u662f\u4e00\u4e2a while \u5faa\u73af\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u4ece\u5934\u5f00\u59cb")," \u904d\u5386\u526f\u4f5c\u7528\u94fe\u8868\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u89c6\u56fe\u66f4\u65b0\u64cd\u4f5c\uff1a\u5bf9 DOM \u8282\u70b9\u7684\u589e\u3001\u5220\u3001\u67e5\u3001\u6539\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u5668\u628a\u88ab\u6253\u4e86\u6807\u8bb0\u7684\u865a\u62df dom \u5bf9\u5e94\u7684\u771f\u5b9e dom \u8282\u70b9\u6267\u884c\u66f4\u65b0 dom \u7684\u64cd\u4f5c\u3002"),(0,r.kt)("li",{parentName:"ul"},"Mutation \u7a81\u53d8\uff0c\u5bf9\u4e8e\u6d4f\u89c8\u5668\u6765\u8bf4\uff0c\u5c31\u662f DOM \u64cd\u4f5c\u3002")),(0,r.kt)("p",null,"\u8be5\u9636\u6bb5\u89e6\u53d1\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u6709\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// before mutation \u9636\u6bb5\ngetSnapshotBeforeUpdate\n\n// mutation \u9636\u6bb5\ncomponentWillUnmount\n\n// layout \u9636\u6bb5\ncomponentDidMount\ncomponentDidUpdate\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff081\uff09mutation \u524d\u9636\u6bb5")),(0,r.kt)("p",null,"\u901a\u5e38\u88ab\u79f0\u4e4b\u4e3a before mutation \u9636\u6bb5\uff0c\u8c03\u7528\u51fd\u6570 ",(0,r.kt)("inlineCode",{parentName:"p"},"commitBeforeMutationEffects"),"\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"class \u7ec4\u4ef6"),"\u3002\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"getSnapshotBeforeUpdate")," \u751f\u547d\u5468\u671f\u51fd\u6570\u3002\u56e0\u4e3a Before mutation \u8fd8\u6ca1\u4fee\u6539\u771f\u5b9e\u7684 DOM \u6240\u4ee5\u6b64\u65f6\u7c7b\u7ec4\u4ef6\u53ef\u4ee5\u83b7\u5f97\u66f4\u65b0 DOM \u524d\u7684\u5feb\u7167\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u51fd\u6570\u7ec4\u4ef6"),"\u3002\u521b\u5efa\u5fae\u4efb\u52a1\uff0c\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"li"},"useEffect")," \u7684\u56de\u8c03\u51fd\u6570\u8bbe\u5b9a normal Scheduler Priority\uff0c\u7136\u540e\u7b49\u5f85 commit \u5b8c\u6210\u540e\uff0c\u518d ",(0,r.kt)("strong",{parentName:"li"},"\u5f02\u6b65\u6267\u884c"),"\u3002\u9632\u6b62\u540c\u6b65\u6267\u884c\u65f6\u963b\u585e\u6d4f\u89c8\u5668\u505a\u89c6\u56fe\u6e32\u67d3\uff08\u5982\u679c\u5bf9 dom \u64cd\u4f5c\uff0c\u5219\u53c8\u8981\u91cd\u534f\u8c03\uff09\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff082\uff09mutaiton \u9636\u6bb5")),(0,r.kt)("p",null,"\u901a\u5e38\u88ab\u79f0\u4e4b\u4e3a mutation \u9636\u6bb5\uff0c\u8c03\u7528\u51fd\u6570 ",(0,r.kt)("inlineCode",{parentName:"p"},"commitMutationEffects"),"\u3002"),(0,r.kt)("p",null,"\u904d\u5386\u5305\u542b EffectTag \u7684 fiber \u8282\u70b9\uff0c\u6240\u7ec4\u6210\u7684 effectList \u94fe\u8868\u3002\u5904\u7406\u6bcf\u4e00\u4e2a fiber \u8282\u70b9\u7684\u526f\u4f5c\u7528\uff0c\u8fd9\u4e9b\u526f\u4f5c\u7528\u6709\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"DOM \u76f8\u5173\u64cd\u4f5c"),"\uff1a\u589e\u5220\u6539\u3002Placement \u63d2\u5165\uff0cUpdate \u66f4\u65b0 DOM \u5c5e\u6027\uff0cDeletion \u5220\u9664\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"class \u7ec4\u4ef6"),"\u3002\u8c03\u7528 class \u7ec4\u4ef6 componentWillUnmount \u751f\u547d\u5468\u671f\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u51fd\u6570\u7ec4\u4ef6"),"\u3002\u6267\u884c useLayoutEffect \u7684\u9500\u6bc1\u51fd\u6570\uff0cuseLayoutEffect \u662f ",(0,r.kt)("strong",{parentName:"li"},"\u540c\u6b65\u6267\u884c")," \u7684\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Ref \u5c5e\u6027"),"\u3002\u89e3\u7ed1/\u66f4\u65b0 Ref \u5c5e\u6027\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff082.1\uff09\u66f4\u6539 current \u6307\u9488")),(0,r.kt)("p",null,"\u5728\u8fdb\u5165 layout \u8282\u70b9\u524d\uff0c\u4f1a\u6267\u884c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"root.current = finishedWork;\n")),(0,r.kt)("p",null,"\u8fd9\u5c31\u662f React \u67b6\u6784\u7684\u53cc\u7f13\u5b58\u673a\u5236\u4e2d\uff0cWork In Progress Fiber \u6811\u5b8c\u6210\u6e32\u67d3\uff0c\u6b64\u65f6 ",(0,r.kt)("inlineCode",{parentName:"p"},"fiberRoot.current")," \u6307\u9488\u4f1a\u4ece\u4e4b\u524d\u7684 current Fiber \u6811\uff0c\u6307\u5411\u73b0\u5728\u7684 Work In Progress Fiber \u6811\u3002\u6b64\u65f6\uff0cWork In Progress Fiber \u6811\uff0c\u5c31\u53d8\u6210\u4e86\u65b0\u7684 Current Fiber \u6811\u3002"),(0,r.kt)("p",null,"\u5728\u8be5\u5b9e\u9645\u89e6\u53d1\uff0c\u662f\u56e0\u4e3a\u5728 layout \u9636\u6bb5\u4f1a\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"componentDidMount")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"componentDidUpdate "),"\u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u6b64\u65f6\uff0cCurrent Fiber \u6811\u5df2\u7ecf\u6307\u5411\u4e86\u672c\u6b21\u5b8c\u6210\u7684 Work In Progress Fiber \u6811\uff0c\u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u4f1a\u5bf9\u65b0\u7684 Current Fiber \u6811\u8fdb\u884c\u64cd\u4f5c\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff083\uff09mutation \u540e\u9636\u6bb5")),(0,r.kt)("p",null,"\u901a\u5e38\u88ab\u79f0\u4e4b\u4e3a layout \u9636\u6bb5\uff0c\u8c03\u7528\u51fd\u6570 ",(0,r.kt)("inlineCode",{parentName:"p"},"commitLayoutEffects"),"\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u51fd\u6570\u7ec4\u4ef6"),"\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6267\u884c useLayoutEffect \u7684\u56de\u8c03\u51fd\u6570\uff0c\u662f ",(0,r.kt)("strong",{parentName:"li"},"\u540c\u6b65\u6267\u884c")," \u7684\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7ed1\u5b9a useEffect \u7684\u9500\u6bc1 + \u56de\u8c03\u51fd\u6570\uff0c\u4ee5\u4fbf\u5728 commit \u9636\u6bb5\u5b8c\u6210\u540e\uff0c",(0,r.kt)("strong",{parentName:"li"},"\u5f02\u6b65\u6267\u884c")," useEffect \u9500\u6bc1 + \u56de\u8c03\u51fd\u6570\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u7c7b\u7ec4\u4ef6"),"\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6839\u636e\u7ec4\u4ef6\u72b6\u6001\uff0c\u540c\u6b65\u6267\u884c\uff0c\u8c03\u7528 class \u751f\u547d\u5468\u671f\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"ComponentDidMount\uff08\u7ec4\u4ef6\u6302\u8f7d\uff09\u3001ComponentDidUpdate\uff08\u7ec4\u4ef6\u5378\u8f7d\uff09"))),(0,r.kt)("li",{parentName:"ul"},"\u540c\u6b65\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"this.setState(arg, callback)")," \u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"callback"),"\u56de\u8c03\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u5904\u7406 Ref \u5c5e\u6027\u3002")),(0,r.kt)("h3",{id:"\u95ee\u9898algebraic-effects"},"\u95ee\u9898\uff1aalgebraic effects"),(0,r.kt)("p",null,"Process \u8fdb\u7a0b\u3001Thread \u7ebf\u7a0b\u3001Coroutine \u534f\u7a0b\u3001Fiber \u7ea4\u7a0b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"JavaScript \u901a\u8fc7 Generator\uff0c\u5728\u534f\u7a0b\u5c42\u9762\u5b9e\u73b0\u4e86\u5f02\u6b65\u53ef\u4e2d\u65ad\u66f4\u65b0\u3002")),(0,r.kt)("p",null,"algebraic effects \u4ee3\u6570\u6548\u5e94\uff1a\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u4e2d\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u5c06\u526f\u4f5c\u7528\u4ece\u51fd\u6570\u8c03\u7528\u4e2d\u5206\u79bb\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/380855727"},"https://zhuanlan.zhihu.com/p/380855727"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6844903976299675662"},"https://juejin.cn/post/6844903976299675662"))))),(0,r.kt)("h4",{id:"algebraic-effects-\u7684\u7531\u6765"},"algebraic effects \u7684\u7531\u6765"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u5f02\u6b65\u7f16\u7a0b\u4e2d\uff0c\u5982\u679c\u60f3\u7528\u540c\u6b65\u7684\u601d\u7ef4\u7f16\u5199\u4ee3\u7801\uff0c\u5c31\u8981\u4f7f\u7528 async/await\u3002\u4f46 async \u51fd\u6570\u5177\u6709\u4f20\u67d3\u6027\uff0c\u8c03\u7528 async \u7684\u51fd\u6570\u4e5f\u5fc5\u987b\u8981\u7528 async \u5b9a\u4e49\u3002\u8fd9\u6837\u9010\u6e10\u4f20\u67d3\u51fa\u53bb\uff0c\u6240\u6709\u7684\u51fd\u6570\u90fd\u9700\u8981\u53d8\u6210\u5f02\u6b65\u51fd\u6570\uff0c\u9020\u6210\u4e86\u5927\u8303\u56f4\u5f71\u54cd\uff0c\u540c\u6b65\u5f02\u6b65\u4ee3\u7801\u4e5f\u4e0d\u6613\u533a\u5206\u3002")),(0,r.kt)("p",null,"\u65b0\u7684\u9700\u6c42\uff1a\u5728\u540c\u6b65\u4ee3\u7801\u4e2d\uff0c\u53ef\u4ee5\u8c03\u7528\u5f02\u6b65\u51fd\u6570\u5e76\u83b7\u5f97\u7ed3\u679c\u3002\u4f46\u4e0d\u5f71\u54cd\u540c\u6b65\u51fd\u6570\u7684\u903b\u8f91\uff08\u540c\u6b65\u51fd\u6570\u4e0d\u8981 async \u5b9a\u4e49\uff09"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"try/catch  + throw \u5177\u6709\u8df3\u51fa\u5f53\u524d\u4ee3\u7801\u5757\uff08throw \u533a\uff09\uff0c\u7136\u540e\u5192\u6ce1\u5230 try/catch \u88ab\u6355\u83b7\uff0c\u5728 catch \u7ee7\u7eed\u6267\u884c\u4ee3\u7801\u7684\u80fd\u529b\u3002")),(0,r.kt)("p",null,"\u65b0\u7684\u9700\u6c42\uff1aJs \u4e2d\uff0c\u5177\u6709\u4ece\u540c\u6b65\u4ee3\u7801\u8df3\u51fa\u7684\u903b\u8f91\uff0c\u5c31\u662f try/catch \u4e86\uff0c\u4f46\u53ea\u80fd\u4ece throw \u8df3\u51fa\u5230 catch\uff0c\u4e0d\u53ef\u4ee5\u518d\u643a\u5e26\u7ed3\u679c\u56de\u5230 throw \u4e2d\u3002\u6211\u4eec\u5982\u4f55\u5b9a\u4e49\u8fd9\u6837\u7684\u529f\u80fd\u5462\uff1f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6b64\u65f6\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u53ef\u4ee5\u5728 throw \u533a\u6682\u505c\u6267\u884c\uff0c\u4ece catch \u533a\u57df\u83b7\u53d6\u7b54\u6848\uff0c\u518d\u8df3\u56de throw \u5904\u7ee7\u7eed\u6267\u884c\u4ee3\u7801\u7684 \u201c\u5f02\u6b65\u201d \u80fd\u529b\u3002\u8fd9\u5c31\u662f\u8bb8\u591a\u6587\u7ae0\u4e2d\u8bf4\u7684\u5b9a\u4e49\u4e00\u4e2a\u8bed\u6cd5\uff1aperform\uff0ctry/handle\uff0cresume with\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"function getName(user) {\n  let name = user.name;\n  if (name === null) {\n    // 1. \u6211\u4eec\u5728\u8fd9\u91cc perform \u4e86\u4e00\u4e2a effect\uff1aname = perform 'ask_name';\n    name = perform 'ask_name';\n    // 4. \u2026\u2026 \u7136\u540e\u6700\u7ec8\u56de\u5230\u4e86\u8fd9\u91cc\uff08name \u73b0\u5728\u662f\u300cArya Stark\u300d\u4e86 \n  }\n  return name;\n}\n\nfunction makeFriends(user1, user2) {\n  user1.friendNames.add(getName(user2));\n  user2.friendNames.add(getName(user1));\n}\n\nconst arya = { name: null };\nconst gendry = { name: 'Gendry' };\n\ntry {\n  makeFriends(arya, gendry);\n} handle (effect) {\n  // 2. \u6211\u4eec\u8df3\u5230\u4e86handler\uff08\u5c31\u50cf try/catch\uff09\n  if (effect === 'ask_name') {\n    // 3. \u7136\u800c\u6211\u4eec\u53ef\u4ee5 resume with \u4e00\u4e2a\u503c\uff08\u8fd9\u5c31\u4e0d\u50cf try / catch \u4e86\uff01\uff09\n    resume with 'Arya Stark';\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7 perform + resume with \u5b9e\u73b0\u5bf9\u540e\u7eed\u6d41\u7a0b\u7684\u63a7\u5236\uff0c\u63a7\u5236\u53cd\u8f6c + \u63a7\u5236\u6062\u590d\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7 try/handle \u5b9e\u73b0\u8de8\u8c03\u7528\u6808\u6355\u83b7\u5f53\u524d continuation\uff08\u5ef6\u7eed\u2014\uff09\uff0c\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5c31\u662f\u8ba9\u540c\u6b65\u4ee3\u7801\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u4e0b\u53bb\u7684\u90a3\u4e2a\u503c\uff08name\uff09\u3002resume with \u53ef\u4ee5\u66ff\u6362 \u5f53\u524d\u7684 continuaiton\uff0c\u8ba9 perform \u5904\u6062\u590d\u6267\u884c\u3002")),(0,r.kt)("p",null,"\u9700\u6c42\u6ee1\u8db3\uff1a\u901a\u8fc7\u4e0a\u8ff0\u7684\u8bed\u6cd5\u7cd6\uff0c\u5b9e\u73b0\u4e86\u5728\u540c\u6b65\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570\u4f46\u4e0d\u5f71\u54cd\u540c\u6b65\u4ee3\u7801\u533a\u7684\u76ee\u7684\u3002"),(0,r.kt)("h4",{id:"algebraic-effects-\u89e3\u51b3\u7684\u95ee\u9898"},"Algebraic Effects \u89e3\u51b3\u7684\u95ee\u9898"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},'\u5206\u79bb\u4e86 "\u4e3b\u903b\u8f91\u505a\u4ec0\u4e48" \u548c "\u526f\u4f5c\u7528\u5b9e\u73b0"'),"\u3002"),(0,r.kt)("p",null,"\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4e3b\u903b\u8f91")," \u5c31\u662f getName \u51fd\u6570\u8981\u901a\u8fc7 user \u5bf9\u8c61\u83b7\u5f97\u5e76\u8fd4\u56de name\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u526f\u4f5c\u7528")," \u5c31\u662f\u5f53\u51fa\u73b0\u627e\u4e0d\u5230\u540d\u5b57\u65f6\uff0c\u901a\u8fc7 perform \u62ff\u5230\u4e00\u4e2a\u540d\u5b57\u3002")),(0,r.kt)("p",null,"\u6240\u4ee5\uff0c\u526f\u4f5c\u7528\u7684\u5b9e\u73b0\uff1aperform \u5904\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"ask_name")," \u6362\u6765\u4e86 resume with \u5904\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Arya Stark"),"\u3002\u5c31\u662f\u4ee3\u6570\u6548\u5e94\u9700\u8981\u89e3\u51b3\u7684\u6838\u5fc3\u95ee\u9898\u3002\u901a\u8fc7\u7a7f\u900f\u8c03\u7528\u6808\u7684\u6362\u5143\u6cd5\u5b9e\u73b0\u526f\u4f5c\u7528\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Algebraic: \u4ee3\u6570\u5f0f\uff0c\u53ef\u4ee5\u7406\u89e3\u6210\u521d\u4e2d\u6570\u5b66\u7684 ",(0,r.kt)("strong",{parentName:"li"},"\u6362\u5143\u6cd5"),"\u3002"),(0,r.kt)("li",{parentName:"ul"},"Effect\uff1a\u526f\u4f5c\u7528\u3002")),(0,r.kt)("p",null,"\u603b\u7ed3\u6765\u8bf4\uff0c\u4ee3\u6570\u6548\u5e94\u89e3\u51b3\u4e86 ",(0,r.kt)("strong",{parentName:"p"},'\u5206\u79bb\u4e86 "\u4e3b\u903b\u8f91\u505a\u4ec0\u4e48" \u548c "\u526f\u4f5c\u7528\u5b9e\u73b0"'),"\uff0c\u4e5f\u5c31\u662f\u786e\u4fdd\u4e3b\u903b\u8f91\u548c\u4ee3\u7801\u4e0d\u53d7\u5f71\u54cd\u7684\u60c5\u51b5\u4e0b\uff0c\u5b9e\u73b0\u526f\u4f5c\u7528\u3002\u8fd9\u9700\u8981\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u7a7f\u900f\u80fd\u529b\uff1a\u53ef\u4ee5\u8de8\u8c03\u7528\u6808\u83b7\u53d6\u5f53\u524d Continuation\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u6062\u590d\u6267\u884c\uff1a\u53ef\u4ee5\u66ff\u6362\u5f53\u524d Continuation \u5185 Effect \u7684\u5b9e\u73b0\u3002")),(0,r.kt)("h4",{id:"react-hooks-\u601d\u60f3"},"React Hooks \u601d\u60f3"),(0,r.kt)("p",null,"React Hooks \u7684\u4ee3\u7801\u793a\u4f8b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function useLog(id) { \n  useEffect(() => { \n    console.log(id, 'mount') \n    return () => { \n      console.log(id, 'unmount') \n    } \n  }, []) \n} \n \nfunction Foo() { \n  useLog('Example') \n  return <div>Foo</div> \n} \n \nfunction Bar() { \n  useLog('Bar') \n  return <div>Bar</div> \n} \n")),(0,r.kt)("p",null,"\u7a7f\u900f\u80fd\u529b\uff1a"),(0,r.kt)("p",null,"useHook \u5b9e\u73b0\u4e86\u7a7f\u900f\u8c03\u7528\u6808\u7684\u6548\u679c\u3002\u4e0d\u8bba hooks \u5982\u4f55\u5d4c\u5957\u5728\u4f5c\u7528\u57df\u4e2d\uff0c\u53ea\u8981\u4fdd\u8bc1\u662f\u540c\u6b65\u8c03\u7528 hooks\uff0c\u90fd\u80fd\u6b63\u786e\u4f5c\u7528\u4e8e\u5bf9\u5e94\u7ec4\u4ef6\u3002"),(0,r.kt)("p",null,"\u6bcf\u4e00\u4e2a Function Component \u770b\u4f5c\u662f React \u91cc\u7684 Continuation\uff0c\u5bf9 Continuation \u7684\u8c03\u5ea6\u662f\u4ea4\u7ed9 React Fiber \u63a7\u5236\u7684\uff0c\u4e5f\u5c31\u662f fiber \u5b9e\u73b0\u4e86\u4ee3\u6570\u6548\u5e94\u3002"),(0,r.kt)("p",null,"\u6062\u590d\u6267\u884c\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"useHook(callback)")," \u4e2d\uff0ccallback \u662f\u8be5\u7ec4\u4ef6\u526f\u4f5c\u7528\u7684\u5b9e\u73b0\uff0chook \u62bd\u8c61\u51fa\u4e86 React \u7ec4\u4ef6\u91cc\u7684\u526f\u4f5c\u7528\u3002\u8ba9\u7ec4\u4ef6\u5185\u7684\u4e3b\u903b\u8f91\u4e0d\u53d7\u5f71\u54cd\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898\u521d\u6b21\u6e32\u67d3--\u66f4\u65b0-\u7684\u533a\u522b"},"\u95ee\u9898\uff1a\u521d\u6b21\u6e32\u67d3 / \u66f4\u65b0 \u7684\u533a\u522b"),(0,r.kt)("h5",{id:"\u521d\u6b21\u6e32\u67d3"},"\u521d\u6b21\u6e32\u67d3"),(0,r.kt)("p",null,"\u521d\u6b21\u6e32\u67d3\u65f6\uff0c\u6ca1\u6709\u4e24\u9897\u76f8\u540c\u7684 fiber tree\u3002 FiberRootNode.current \u4f1a\u6307\u5411\u4e00\u4e2a\u5355\u72ec\u7684 RootFiberNode \u8282\u70b9\uff0c\u5176\u8282\u70b9\u4e0b\u6ca1\u6709\u4efb\u4f55\u5b50\u8282\u70b9\uff08\u5373",(0,r.kt)("inlineCode",{parentName:"p"},"current Fiber\u6811"),"\u4e3a\u7a7a\uff09\u3002"),(0,r.kt)("p",null,"\u4e8e\u6b64\u540c\u65f6\uff0c\u4f1a\u5728\u5185\u5b58\u4e2d\u6784\u5efa Work In Progress Fiber Tree\u3002WIP \u6811\u548c CUR \u6811\u7684 FiberNode \u8282\u70b9\u4f1a\u901a\u8fc7 .alternate \u76f8\u4e92\u6307\u5411\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-07 22.42.10",src:n(40122).Z,width:"2286",height:"1828"})),(0,r.kt)("p",null,"\u5f53 workInProgress \u6811\u6784\u5efa\u5b8c\u6210\u540e\uff0c\u4ee3\u7801\u4e2d\u79f0\u4e4b\u4e3a finishedTree\uff0c\u6b64\u65f6 ",(0,r.kt)("inlineCode",{parentName:"p"},".current")," \u6307\u9488\u6307\u5411 finishedTree\uff0c\u4f7f\u5176\u53d8\u4e3a current fiber tree\uff0c\u521d\u59cb\u5316\u6d41\u7a0b\u5728\u534f\u8c03\u9636\u6bb5\u7684\u4efb\u52a1\u5b8c\u6210\u3002"),(0,r.kt)("h5",{id:"\u66f4\u65b0-update"},"\u66f4\u65b0 Update"),(0,r.kt)("p",null,"\u57fa\u4e8e\u4e0a\u8ff0 tree\uff0c\u5f53\u7528\u6237\u70b9\u51fb\u4e00\u6b21\u6309\u94ae\uff0c\u53d1\u751f\u9875\u9762\u66f4\u65b0\u65f6\uff0c\u4f1a\u91cd\u65b0\u521b\u5efa\u4e00\u9897 workInProgress tree\u3002"),(0,r.kt)("p",null,"\u901a\u8fc7 diff \u7b97\u6cd5\uff0cworkInProgress tree \u4f1a\u51b3\u5b9a\u662f\u5426\u590d\u7528 current fiber tree \u540c\u4e00\u5c42\u7ea7\u7684 fiber \u8282\u70b9\u6570\u636e\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u80fd\u88ab\u590d\u7528\uff0c\u672c\u6b21\u66f4\u65b0\u4e2d\uff0c\u9700\u8981\u505a\u7ec4\u4ef6\u7684 update\u3001\u5143\u7d20\u7684 move \u548c update \u7b49\u64cd\u4f5c\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u80fd\u590d\u7528\uff0c\u672c\u6b21\u66f4\u65b0\u4e2d\uff0c\u9700\u8981\u505a\u7ec4\u4ef6\u7684 mount \u548c umount\u3001\u5143\u7d20\u7684 insert \u548c delete \u7b49\u64cd\u4f5c\u3002")),(0,r.kt)("p",null,"\u5728\u6784\u5efa workInProgress Fiber \u6811\u65f6,  ",(0,r.kt)("strong",{parentName:"p"},"\u4f1a\u5c1d\u8bd5\u590d\u7528 current Fiber \u6811\u4e2d\u5df2\u6709\u7684 Fiber \u8282\u70b9\u5185\u7684\u5c5e\u6027"),"\u3002\u5728 ",(0,r.kt)("strong",{parentName:"p"},"\u9996\u5c4f\u6e32\u67d3")," \u65f6\uff0c\u53ea\u6709 rootFiber \u5b58\u5728\u5bf9\u5e94\u7684 current fiber\uff08\u5373 rootFiber.alternate\uff09\uff0c\u65e0\u6cd5\u590d\u7528\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5904\u4e8e\u540c\u4e00\u5c42\u6b21\u7684\u8282\u70b9\uff0c\u4f1a\u901a\u8fc7 .alternate \u5c5e\u6027\u76f8\u4e92\u6307\u5411\uff0cworkInProgress tree \u4e5f\u4f1a\u4f18\u5148\u590d\u7528 current fiber tree  \u5904\u5728\u540c\u4e00\u5c42\u6b21\u8282\u70b9\u7684\u5c5e\u6027\u3002"))),(0,r.kt)("p",null,"RootFiber \u5df2\u7ecf\u521b\u5efa\u4e0d\u9700\u8981\u590d\u5236\uff0c\u4f46\u5176\u5b50\u8282\u70b9\u7531\u4e8e\u5c1a\u4e0d\u5b58\u5728\uff0c \u5219 react \u9700\u8981\u91cd\u65b0\u521b\u5efa\u4e00\u4efd\uff0c\u548c current \u6811\u4e0a\u7684 fiber \u5efa\u7acb\u8d77 alternate \u5173\u8054\uff0c\u7136\u540e\u590d\u5236 current \u6811\u4e0a\u8282\u70b9\u7684\u5c5e\u6027\u3002\u6e32\u67d3\u5b8c\u6bd5\u540e\uff0cworkInProgresss \u518d\u6b21\u53d8\u6210 current \u6811\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-07 22.49.01",src:n(81832).Z,width:"2502",height:"1458"})),(0,r.kt)("h5",{id:"\u518d\u6b21\u66f4\u65b0"},"\u518d\u6b21\u66f4\u65b0"),(0,r.kt)("p",null,"\u5982\u679c\u8fdb\u884c\u4e0b\u4e00\u6b21\u66f4\u65b0\uff0c\u90a3\u4e48\u4f1a\u5c06 current \u7684 alternate \u4f5c\u4e3a\u57fa\u7840\uff08\u5982\u56fe\u53f3\u6811\uff09\uff0c\u590d\u5236\u4e00\u4efd\u4f5c\u4e3a workInProgresss \uff0c\u7136\u540e\u8fdb\u884c\u66f4\u65b0\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6240\u8c13 \u201c\u590d\u5236\u201d\uff0c\u5177\u4f53\u662f\u6307\u5728\u6784\u5efa workInProgress Fiber \u6811\u65f6\u4f1a\u5c1d\u8bd5\u590d\u7528 current Fiber \u6811\u4e2d\u5df2\u6709\u7684 Fiber \u8282\u70b9\uff08.alternate \u53ef\u4ee5\u76f8\u4e92\u6307\u5411\u7684\uff0c\u540c\u4e00\u5c42\u6b21\u7684\u8282\u70b9\uff09\u5185\u7684\u5c5e\u6027\u3002\u800c\u51b3\u5b9a\u662f\u5426\u590d\u7528\u8fc7\u7a0b\uff0c\u5c31\u662f diff \u7b97\u6cd5\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7118259566868955167"},"https://juejin.cn/post/7118259566868955167")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/lizuncong/mini-react/blob/master/docs/render/%E6%B7%B1%E5%85%A5%E6%A6%82%E8%BF%B0%20React%E5%88%9D%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%8F%8A%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%E4%B8%BB%E6%B5%81%E7%A8%8B.md"},"https://github.com/lizuncong/mini-react/blob/master/docs/render/%E6%B7%B1%E5%85%A5%E6%A6%82%E8%BF%B0%20React%E5%88%9D%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%8F%8A%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%E4%B8%BB%E6%B5%81%E7%A8%8B.md")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://www.jianshu.com/p/6660d3ab0394"},"https://www.jianshu.com/p/6660d3ab0394"))),(0,r.kt)("h3",{id:"\u95ee\u9898\u54ea\u4e9b\u65b9\u5f0f\u53ef\u4ee5\u89e6\u53d1-update-\u66f4\u65b0"},"\u95ee\u9898\uff1a\u54ea\u4e9b\u65b9\u5f0f\u53ef\u4ee5\u89e6\u53d1 update \u66f4\u65b0\uff1f"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u7528\u6237\u6765\u8bf4\uff0c\u5bf9 UI \u7684\u64cd\u4f5c\u90fd\u6709\u53ef\u80fd\u89e6\u53d1 update \u66f4\u65b0\uff1a\u62d6\u52a8\u7ec4\u4ef6\u3001\u8f93\u5165\u6587\u672c\u3001\u70b9\u51fb\u6309\u94ae\u6539\u53d8 state \u7b49\u7b49\u3002"),(0,r.kt)("p",null,"\u5bf9 React \u5185\u90e8\u6765\u8bf4\uff0c\u901a\u8fc7\u5bf9 DOM \u4e8b\u4ef6\u76d1\u542c\uff0c\u4f1a\u89e6\u53d1\u5bf9\u5e94\u7684\u56de\u8c03\u51fd\u6570\uff0c\u6309\u7167\u53ef\u4ee5\u89e6\u53d1\u66f4\u65b0\u7684\u65b9\u6cd5\u6240\u96b6\u5c5e\u7684\u7ec4\u4ef6\u5206\u7c7b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ReactDOM.render()")," \u2014\u2014 HostRoot"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"this.setState()")," \u2014\u2014 ClassComponent"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"this.forceUpdate()")," \u2014\u2014 ClassComponent"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useState()")," \u2014\u2014 FunctionComponent"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useReducer()")," \u2014\u2014 FunctionComponent")),(0,r.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0c\u4e00\u5171\u4e09\u79cd\u7ec4\u4ef6\uff08",(0,r.kt)("inlineCode",{parentName:"p"},"HostRoot")," | ",(0,r.kt)("inlineCode",{parentName:"p"},"ClassComponent")," | ",(0,r.kt)("inlineCode",{parentName:"p"},"FunctionComponent"),"\uff09\u53ef\u4ee5\u89e6\u53d1 update \u66f4\u65b0\u3002"),(0,r.kt)("h2",{id:"diff"},"diff"),(0,r.kt)("h3",{id:"\u95ee\u9898\u4ec0\u4e48\u662f-virtual-dom"},"\u95ee\u9898\uff1a\u4ec0\u4e48\u662f virtual DOM"),(0,r.kt)("p",null,"\u4ece\u7ed3\u6784\u6765\u770b\uff1a\u865a\u62df DOM \u662f\u4e00\u4e2a JavaScript \u5bf9\u8c61\u3002\u5176\u4fdd\u5b58\u4e86\u6bcf\u4e00\u4e2a\u8282\u70b9\u7684 type\u3001props\u3001key\u3001ref\u3001children \u7b49\u4fe1\u606f\uff08\u5177\u4f53\u770b fiber \u7ed3\u6784\uff09\u3002"),(0,r.kt)("p",null,"\u4ece\u672c\u8d28\u6765\u770b\uff1a\u5728 React \u8fd0\u884c\u65f6\uff0c\u6709\u4e24\u9897 virtual DOM\uff08\u53cc\u7f13\u5b58\u673a\u5236\uff09\uff1acurrent fiber \u6811 + work in progress fiber \u6811\u3002\u5176\u662f\u7531\u4e8e fiber \u5bf9\u8c61\u6240\u7ec4\u6210\u7684\u3002"),(0,r.kt)("p",null,"\u4ece\u6765\u6e90\u6765\u770b\uff1a\u865a\u62df DOM \u662f\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"React.creatElement()")," \u521b\u5efa\u7684 React Element \u6784\u5efa\u7684 DOM \u6811\u3002"),(0,r.kt)("p",null,"\u5bf9\u6bd4\u771f\u5b9eDOM\u6765\u770b\uff1avirtual DOM\u8981\u6bd4\u771f\u5b9e DOM \u8f7b\u7684\u591a\uff0c\u5c11\u4e86\u5f88\u591a\u7528\u4e0d\u5230\u7684\u9ed8\u8ba4\u5c5e\u6027\u548c\u65b9\u6cd5\u3002"),(0,r.kt)("p",null,"\u6d4b\u8bd5\uff1a"),(0,r.kt)("p",null,"\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"React.createElement")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"document.createElement")," \u521b\u5efa\u8282\u70b9\u5e76\u6253\u5370\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const VDOM = React.createElement('div', {}, '\u5c0f\u675c\u675c');\nconst DOM = document.createElement(\"div\");\nDOM.innerHTML = '\u5c0f\u675c\u675c';\n\nconsole.log(`\u865a\u62dfDOM\uff1a`, VDOM);\nconsole.log(`\u771f\u5b9eDOM\uff1a`, DOM);\n")),(0,r.kt)("p",null,"\u7ed3\u679c\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1.png",src:n(34809).Z,width:"1166",height:"482"})),(0,r.kt)("p",null,"\u865a\u62df DOM \u662f\u4e00\u4e2a js \u5bf9\u8c61\uff0c\u800c\u771f\u5b9e DOM \u4e0a\u8fd8\u6302\u5728\u4e86\u8bb8\u591a\u9ed8\u8ba4\u5c5e\u6027\u548c\u65b9\u6cd5\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"2.png",src:n(88473).Z,width:"970",height:"730"})),(0,r.kt)("p",null,"\u865a\u62df DOM \u7684\u7ed3\u6784\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"type\uff1a\u5b9e\u9645\u7684\u6807\u7b7e"),(0,r.kt)("li",{parentName:"ul"},"props\uff1a\u6807\u7b7e\u5185\u90e8\u7684\u5c5e\u6027\uff08\u9664 ",(0,r.kt)("inlineCode",{parentName:"li"},"key")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"ref")," \uff0c\u4f1a\u5f62\u6210\u5355\u72ec\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"key")," \u540d\uff09"),(0,r.kt)("li",{parentName:"ul"},"children: \u4e3a\u8282\u70b9\u5185\u5bb9")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// \u8f6c\u5316\u524d\n<div className='Index'>\n  <div>Hello World 123</div>\n  <ul>\n    <li>React</li>\n    <li>Vue</li>\n  </ul>\n</div>\n\n// \u8f6c\u5316\u540e\n{\n  type: 'div',\n    props: { class: 'Index' },\n      children: [\n        {\n          type: 'div',\n          children: 'Hello World 123'\n        },\n        {\n          type: 'ul',\n          children: [\n            {\n              type: 'li',\n              children: 'React'\n            },\n            {\n              type: 'li',\n              children: 'Vue'\n            },\n          ]\n        }\n      ]\n}\n")),(0,r.kt)("h3",{id:"\u95ee\u9898virtual-dom-\u7684\u4f18\u52bf"},"\u95ee\u9898\uff1avirtual DOM \u7684\u4f18\u52bf"),(0,r.kt)("p",null,"\u4e3b\u8981\u6709\u4e09\uff1a\u63d0\u9ad8\u6548\u7387\u3001\u63d0\u5347\u6027\u80fd\u3001\u589e\u5f3a\u517c\u5bb9\u6027\u3002"),(0,r.kt)("h5",{id:"1-\u63d0\u9ad8\u6548\u7387"},"1. \u63d0\u9ad8\u6548\u7387"),(0,r.kt)("p",null,"\u4f7f\u7528\u539f\u751f JS \u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u7684\u5173\u6ce8\u70b9\u5728 ",(0,r.kt)("strong",{parentName:"p"},"\u64cd\u4f5cDOM")," \u4e0a\uff0c\u800c ",(0,r.kt)("inlineCode",{parentName:"p"},"React")," \u4f1a\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"virtual DOM")," \u6765\u786e\u4fdd ",(0,r.kt)("inlineCode",{parentName:"p"},"DOM")," \u7684\u5339\u914d\u3002\u7a0b\u5e8f\u5458\u53ea\u9700\u4f7f\u7528 JSX \u6765\u8fdb\u884c\u58f0\u660e\u5f0f\u7f16\u7a0b\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u7a0b\u5e8f\u5458\u4e0d\u9700\u5173\u7cfb dom \u662f\u5982\u4f55\u6784\u5efa / \u64cd\u4f5c / \u66f4\u65b0\u7684\uff0cReact \u4f1a\u5904\u7406\u4e00\u5207\uff0c\u800c\u53ea\u9700\u8981\u5173\u7cfb\u4e1a\u52a1\u903b\u8f91\u3002"),(0,r.kt)("h5",{id:"2-\u63d0\u5347\u6027\u80fd"},"2. \u63d0\u5347\u6027\u80fd"),(0,r.kt)("p",null,"\u865a\u62df DOM \u901a\u8fc7 diff \u7b97\u6cd5 + \u57fa\u4e8e\u53cc\u7f13\u5b58\u7684\u6279\u91cf\u5904\u7406\u673a\u5236\uff0c\u4f18\u5316\u4e86\u6bcf\u6b21\u66f4\u65b0\u771f\u5b9e DOM \u5f97\u64cd\u4f5c\uff0c\u4f7f\u66f4\u65b0\u5c3d\u53ef\u80fd\u7684\u5c40\u90e8\u3001\u6539\u52a8\u5c3d\u53ef\u80fd\u7684\u5c11\uff0c\u4ece\u800c\u51cf\u5c11\u5bf9\u771f\u5b9e DOM \u7684\u64cd\u4f5c\uff0c\u6700\u7ec8\u63d0\u5347\u6027\u80fd\u3002"),(0,r.kt)("h5",{id:"3-\u589e\u5f3a\u517c\u5bb9\u6027"},"3. \u589e\u5f3a\u517c\u5bb9\u6027"),(0,r.kt)("p",null,"\u57fa\u4e8e virtual DOM\uff0c\u8ba9 React \u53ef\u4ee5\u517c\u5bb9\u5404\u79cd\u6d4f\u89c8\u5668\uff0c\u751a\u81f3\u8de8\u5e73\u53f0\u517c\u5bb9\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"React")," \u57fa\u4e8e\u865a\u62df DOM \u5b9e\u73b0\u4e86\u4e00\u5957\u81ea\u5df1\u7684\u4e8b\u4ef6\u673a\u5236\uff0c\u5e76\u4e14\u6a21\u62df\u4e86\u4e8b\u4ef6\u5192\u6ce1\u548c\u6355\u83b7\u7684\u8fc7\u7a0b\uff0c\u91c7\u53d6 ",(0,r.kt)("strong",{parentName:"li"},"\u4e8b\u4ef6\u4ee3\u7406"),"\u3001",(0,r.kt)("strong",{parentName:"li"},"\u6279\u91cf\u66f4\u65b0")," \u7b49\u65b9\u6cd5\uff0c\u4ece\u800c\u78e8\u5e73\u4e86\u5404\u4e2a\u6d4f\u89c8\u5668\u7684\u4e8b\u4ef6\u517c\u5bb9\u6027\u95ee\u9898\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u8de8\u5e73\u53f0\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"React")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"React Native")," \u90fd\u662f\u6839\u636e ",(0,r.kt)("strong",{parentName:"li"},"\u865a\u62dfDOM")," \u6e32\u67d3\u51fa\u76f8\u5e94\u5e73\u53f0\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"UI")," \u5c42\uff0c\u53ea\u4e0d\u8fc7\u4e0d\u540c\u7684\u5e73\u53f0\u6709\u4e0d\u540c\u7684\u6e32\u67d3\u5f15\u64ce\u800c\u5df2\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://juejin.cn/post/7116326409961734152"},"https://juejin.cn/post/7116326409961734152")))),(0,r.kt)("h3",{id:"\u95ee\u9898diff-\u539f\u7406"},"\u95ee\u9898\uff1adiff \u539f\u7406"),(0,r.kt)("h5",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,r.kt)("p",null,"\u4ece React \u7684\u8fd0\u884c\u539f\u7406\u6765\u8bf4\uff0cReact diff \u662f\u534f\u8c03\uff08",(0,r.kt)("strong",{parentName:"p"},"reconciliation"),"\uff09\u9636\u6bb5\u7684\u4e3b\u8981\u4efb\u52a1\uff0c\u534f\u8c03\u9636\u6bb5\u4e5f\u79f0 render \u9636\u6bb5\u3002React diff \u4f1a\u8ba1\u7b97\u51fa Virtual DOM \u4e2d\u771f\u6b63\u53d8\u5316\u7684\u90e8\u5206\uff0c\u5e76\u6784\u5efa\u597d\u4e00\u9897 Work In Progress Fiber Tree \u548c\u4e00\u4e2a EffectList \u5355\u9879\u7b26\u4f5c\u7528\u94fe\u8868\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u6307\u540d\u54ea\u4e9b\u8282\u70b9\u9700\u8981\u88ab\u66f4\u65b0"),"\u3002\u5728\u6e32\u67d3\u9636\u6bb5\uff08commit \u9636\u6bb5\uff09\uff0cReact \u4f1a\u53ea\u9488\u5bf9 effectList \u4e0a\u7684 fiber \u8282\u70b9\u8fdb\u884c DOM \u64cd\u4f5c\uff0c\u800c\u4e0d\u662f\u5bf9\u6574\u4e2a\u9875\u9762\uff08\u6811\uff09\u8fdb\u884c\u91cd\u65b0\u6e32\u67d3\u3002"),(0,r.kt)("p",null,"\u4f20\u7edf diff \u7b97\u6cd5\u4f7f\u7528\u5faa\u73af\u9012\u5f52\u5bf9\u8282\u70b9\u4e00\u6b21\u5bf9\u6bd4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a ",(0,r.kt)("em",{parentName:"p"},"O(n^3)")," \u3002React \u6539\u8fdb\u540e\u5c06\u65f6\u95f4\u590d\u6742\u5ea6\u964d\u4e3a ",(0,r.kt)("em",{parentName:"p"},"O(n)"),"\u3002"),(0,r.kt)("p",null,"React diff \u7684\u7b56\u7565\u6709\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Web UI \u4e2d DOM \u8282\u70b9\u8de8\u5c42\u7ea7\u7684\u79fb\u52a8\u64cd\u4f5c\u7279\u522b\u5c11\uff0c\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u62e5\u6709\u76f8\u540c\u7c7b\u7684\u4e24\u4e2a\u7ec4\u4ef6\u5c06\u4f1a\u751f\u6210\u76f8\u4f3c\u7684\u6811\u5f62\u7ed3\u6784\uff0c\u62e5\u6709\u4e0d\u540c\u7c7b\u7684\u4e24\u4e2a\u7ec4\u4ef6\u5c06\u4f1a\u751f\u6210\u4e0d\u540c\u7684\u6811\u5f62\u7ed3\u6784\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5bf9\u4e8e\u540c\u4e00\u5c42\u7ea7\u7684\u4e00\u7ec4\u5b50\u8282\u70b9\uff0c\u5b83\u4eec\u53ef\u4ee5\u901a\u8fc7\u552f\u4e00 id \u8fdb\u884c\u533a\u5206\u3002")),(0,r.kt)("p",null,"\u57fa\u4e8e\u4ee5\u4e0a\u4e09\u4e2a\u524d\u63d0\u7b56\u7565\uff0cReact \u5206\u522b\u5bf9 tree diff\u3001component diff \u4ee5\u53ca element diff \u8fdb\u884c\u7b97\u6cd5\u4f18\u5316\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"tree diff\u3001component diff\u3001element diff")),(0,r.kt)("h5",{id:"tree-diff"},"tree diff"),(0,r.kt)("p",null,"\u57fa\u4e8e\u7b56\u7565\u4e00\uff0cReact \u5bf9\u6811\u7684 diff \u7b97\u6cd5\u8fdb\u884c\u4f18\u5316\uff0c\u5373\u4e24\u68f5\u6811\u53ea\u4f1a\u5bf9\u540c\u4e00\u5c42\u6b21\u7684\u8282\u70b9\u8fdb\u884c\u6bd4\u8f83\uff0c\u800c\u4e0d\u8003\u8651\u8de8\u7b49\u6b21\u7684\u8282\u70b9\u6bd4\u8f83\u3002\u800c\u5728\u521d\u6b21\u6784\u5efa fiber tree \u65f6\uff0c\u57fa\u4e8e\u53cc\u7f13\u5b58\u7684\u601d\u60f3\uff0c\u5df2\u7ecf\u6784\u5efa\u597d\u4e86 work in progress fiber tree \u548c current fiber tree\uff0c\u4e14\u4e24\u68f5\u6811\u7684\u7edf\u4e00\u5c42\u7ea7\u7684 fiber \u8282\u70b9\u4f1a\u7528 fiber.alternate \u76f8\u4e92\u8fde\u63a5\u3002\u8fd9\u6837\u5bf9\u4e00\u68f5\u6811\u53ea\u9700\u904d\u5386\u4e00\u6b21\uff0c\u4fbf\u80fd\u5b8c\u6210\u6574\u4e2a DOM \u6811\u7684\u6bd4\u8f83\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u8de8\u5c42\u7ea7\u79fb\u52a8\u64cd\u4f5c\u7684\u5904\u7406"),"\u3002React \u5bf9\u8282\u70b9\u8de8\u5c42\u7ea7\u7684\u79fb\u52a8\u64cd\u4f5c\u4e0d\u4f1a diff \u6bd4\u8f83\uff0c\u53ea\u6709\u9500\u6bc1\u65e7\u8282\u70b9\u548c\u91cd\u65b0\u521b\u5efa\u3002\u6240\u4ee5\u901a\u8fc7\u540c\u5c42\u904d\u5386\uff0cReact \u53d1\u73b0\u540c\u7ea7\u8282\u70b9\u5df2\u7ecf\u53d1\u751f\u53d8\u5316\uff0c\u5219\u4f1a\u628a\u8be5\u8282\u70b9\u548c\u5176\u5b50\u8282\u70b9\u5168\u90e8\u9500\u6bc1\uff0c\u7136\u540e\u91cd\u65b0\u521b\u5efa\u65b0\u8282\u70b9\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\ud83d\ude80 \u6027\u80fd\u4f18\u5316"),"\uff1a\u5728\u9875\u9762\u4e2d\u4f7f\u7528 antd \u7684 model \u6a21\u6001\u6846\u65f6\uff0c\u5c3d\u53ef\u80fd\u4e0d\u8981\u79fb\u9664\u8be5\u8282\u70b9\uff0c\u800c\u662f\u4f7f\u7528 css \u9690\u85cf\u6389\u3002"),(0,r.kt)("h5",{id:"component-diff"},"component diff"),(0,r.kt)("p",null,"React \u662f\u57fa\u4e8e\u7ec4\u4ef6\u6784\u5efa\u5e94\u7528\u7684\uff0cdiff \u7b97\u6cd5\u4f1a\u5728\u7ec4\u4ef6\u95f4\u4e5f\u6709\u4f18\u5316\uff0c\u57fa\u4e8e\u7b56\u7565 2\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u662f\u4e0d\u540c\u7c7b\u578b\u7684\u7ec4\u4ef6\u8fdb\u884c diff\uff0c\u548c \u201c\u8de8\u5c42\u7ea7\u7684\u79fb\u52a8\u64cd\u4f5c\u201d \u4e00\u6837\uff0c\u4f1a\u76f4\u63a5\u9500\u6bc1\u6574\u4e2a\u65e7\u7ec4\u4ef6\uff0c\u91cd\u65b0\u521b\u5efa\u65b0\u7ec4\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u662f\u540c\u4e00\u7c7b\u578b\u7684\u7ec4\u4ef6\u8fdb\u884c diff\uff0c\u5219 DOM \u7ed3\u6784\u5927\u81f4\u76f8\u4f3c\uff0c\u4f1a\u6309\u7167 tree diff \u7b97\u6cd5\u8fdb\u884c\u6bd4\u8f83\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\ud83d\ude80 \u6027\u80fd\u4f18\u5316"),"\uff1a\u5982\u679c\u662f\u540c\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u672c\u6b21\u66f4\u65b0\u65f6 Virtual DOM \u6ca1\u6709\u4efb\u4f55\u53d8\u5316\uff08props\u3001state \u4e5f\u6ca1\u6709\u53d8\u5316\uff09\uff0c\u90a3\u4e48\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6027\u80fd\u4f18\u5316\u544a\u77e5 React \uff0cdiff \u4f1a\u8df3\u8fc7\u8be5\u7ec4\u4ef6\u7684\u5bf9\u6bd4\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e class \u7ec4\u4ef6\u6765\u8bf4\uff0c\u901a\u8fc7 shouldComponentUpdate + shallowEqual\uff0c\u6216\u76f4\u63a5\u4f7f\u7528 PureComponent\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e function \u7ec4\u4ef6\u6765\u8bf4\uff0c\u901a\u8fc7 React.memo \u5305\u88f9\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"shouldComponentUpdate")," "),(0,r.kt)("p",{parentName:"blockquote"},"render \uff08\u8c03\u5408\uff09\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u3002",(0,r.kt)("strong",{parentName:"p"},"\u7528\u4e8e\u62e6\u622a\u7ec4\u4ef6\u6e32\u67d3"),"\u3002"),(0,r.kt)("ol",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ol"},"\u7236\u7ec4\u4ef6\u66f4\u65b0\uff0c\u5b50\u7ec4\u4ef6\u5fc5\u987b\u66f4\u65b0\u3002")),(0,r.kt)("p",{parentName:"blockquote"},"\u5f53\u4f7f\u7528component\u65f6\uff0c\u7236\u7ec4\u4ef6\u7684state\u6216prop\u66f4\u65b0\u65f6\uff0c\u65e0\u8bba\u5b50\u7ec4\u4ef6\u7684state\u3001prop\u662f\u5426\u66f4\u65b0\uff0c\u90fd\u4f1a\u89e6\u53d1\u5b50\u7ec4\u4ef6\u7684\u66f4\u65b0\uff0c\u8fd9\u4f1a\u5f62\u6210\u5f88\u591a\u6ca1\u5fc5\u8981\u7684render\uff0c\u6d6a\u8d39\u5f88\u591a\u6027\u80fd\u3002"),(0,r.kt)("ol",{parentName:"blockquote",start:2},(0,r.kt)("li",{parentName:"ol"},"shallowEqual \u53ef\u4ee5\u6d45\u5bf9\u6bd4\u7ec4\u4ef6\u7684 props \u548c state \u662f\u5426\u53d1\u751f\u53d8\u5316\uff0c\u4ece\u800c\u907f\u514d\u65e0\u610f\u4e49\u7684 render\u3002")),(0,r.kt)("p",{parentName:"blockquote"},"\u5728 shouldComponentUpdate \u4e2d\uff0c\u4f7f\u7528 shallowEqual \u6bd4\u8f83\u7ec4\u4ef6\u7684 props \u548c state \u662f\u5426\u53d1\u751f\u53d8\u5316\uff0c\u6700\u540e\u8fd4\u56de true \u7684\u65f6\u5019\uff0c\u5f53\u524d\u7ec4\u4ef6\u8fdb\u884c render\uff1b\u8fd4\u56de false \u5219\u4e0d\u8fdb\u884c render\u3002"),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"PureComponent / React.memo")),(0,r.kt)("p",{parentName:"blockquote"},"PureComponent \u662f\u9488\u5bf9\u7c7b\u7ec4\u4ef6\u7684\u8bed\u6cd5\u7cd6\uff0c\u800c React.memo \u8ba9\u51fd\u6570\u7ec4\u4ef6\u4e5f\u53ef\u4ee5\u4f7f\u7528\uff0c\u901a\u8fc7 React.memo \u5305\u88f9\u51fd\u6570\u7ec4\u4ef6\uff0c\u56de\u8fd4\u56de\u4e00\u4e2a\u9ad8\u9636\u7ec4\u4ef6\u3002"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"\u53e6\uff1a\u51fd\u6570\u7ec4\u4ef6\u6ca1\u6709 shouldComponentUpdate \u5468\u671f\u3002")),(0,r.kt)("p",{parentName:"blockquote"},"React \u7ed9\u51fa\u4e86\u5b98\u65b9\u7684\u5b9a\u4e49\uff1a\u4f7f\u7528 PureComponent \u5b9a\u4e49\u7ec4\u4ef6\u3002\u53ef\u4ee5\u5b8c\u6210\u4e0a\u8ff0 2 \u7684\u64cd\u4f5c\u3002PureComponent \u4f1a\u5728 shouldComponentUpdate \u5468\u671f\u8fdb\u884c\u4e00\u6b21 shallowEqual \u6d45\u5bf9\u6bd4\uff0c\u4ece\u800c\u5c3d\u53ef\u80fd\u907f\u514d render\u3002")),(0,r.kt)("h5",{id:"element-diff"},"element diff"),(0,r.kt)("p",null,"\u5f53 fiber \u8282\u70b9\u5904\u4e8e\u540c\u4e00\u5c42\u7ea7\u65f6\uff0cReact diff \u63d0\u4f9b\u4e86\u4e09\u79cd\u8282\u70b9\u64cd\u4f5c\uff0c\u5206\u522b\u4e3a\uff1a",(0,r.kt)("strong",{parentName:"p"},"INSERT_MARKUP"),"\uff08\u63d2\u5165\uff09\u3001",(0,r.kt)("strong",{parentName:"p"},"MOVE_EXISTING"),"\uff08\u79fb\u52a8\uff09\u548c ",(0,r.kt)("strong",{parentName:"p"},"REMOVE_NODE"),"\uff08\u5220\u9664\uff09\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u63d2\u5165"),"\uff1a\u5f53\u524d\u8282\u70b9\u6240\u5728\u7684\u7ec4\u4ef6\uff0c\u4e0d\u5728\u539f\u6765\u7684\u96c6\u5408\u4e2d\u5b58\u5728\uff0c\u5373\u662f\u5168\u65b0\u7684\u8282\u70b9\uff0c\u6267\u884c\u63d2\u5165\u64cd\u4f5c\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u79fb\u52a8"),"\uff1a\u5f53\u524d\u8282\u70b9\u6240\u5728\u7684\u7ec4\u4ef6\uff0c\u5b58\u5728\u4e8e\u539f\u6765\u7684\u96c6\u5408\u4e2d\uff0c\u4e14\u8282\u70b9\u5185\u53ef\u66f4\u65b0\uff08 DOM \u7ed3\u6784\u76f8\u4f3c\u7b49\u9012\u5f52\u5224\u65ad\uff09\uff0c\u5219\u6839\u636e React \u552f\u4e00 key \u8fdb\u884c\u533a\u5206\uff0c\u5e76\u4e14\u6267\u884c\u79fb\u52a8\u64cd\u4f5c\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982\uff1a(A,B,C,D) \u2192 (A,D,B,C)\uff0c\u4f20\u7edf diff \u4f1a\u628a B,C,D \u5168\u90e8\u9500\u6bc1\u5e76\u91cd\u65b0\u521b\u5efa\uff0c\u800c React \u4ec5\u79fb\u52a8\u4f4d\u7f6e\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5220\u9664"),"\uff1a\u5f53\u524d\u8282\u70b9\u7684\u6240\u5728\u7ec4\u4ef6\u867d\u7136\u5b58\u5728\u5728\u539f\u6765\u7684\u96c6\u5408\u4e2d\uff0c\u4f46\u8282\u70b9\u4e0d\u80fd\u76f4\u63a5\u590d\u7528\u548c\u66f4\u65b0\uff0c\u6240\u4ee5\u9700\u8981\u5220\u9664\u65e7\u8282\u70b9\u3002\u6216\u65e7\u8282\u70b9\u5df2\u7ecf\u4e0d\u518d\u9700\u8981\uff0c\u6267\u884c\u9500\u6bc1\u3002")),(0,r.kt)("p",null,"\u8282\u70b9\u95f4\u7684\u79fb\u52a8\u7b56\u7565\uff0c\u662f\u901a\u8fc7\u8282\u70b9\u4e0b\u6807 lastIndex/_mountIndex \u5224\u65ad\uff0c\u8fd9\u91cc\u4e0d\u7ec6\u8bf4\u4e86\u3002"),(0,r.kt)("p",null,"\u53ef\u5426\u590d\u7528\u7684\u539f\u5219\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c key \u672a\u5b9a\u4e49\uff0c\u5219\u9ed8\u8ba4 key = null\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u66f4\u65b0\u540e\uff0c\u5224\u65ad key \u662f\u5426\u6539\u53d8\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"key \u6539\u53d8\uff0c\u4e0d\u80fd\u590d\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"key \u6ca1\u6539\u53d8\uff0c\u7ee7\u7eed\u5224\u65ad type \u662f\u5426\u6539\u53d8\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"type \u6539\u53d8\uff0c\u4e0d\u80fd\u590d\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"type \u6ca1\u53d8\uff0c\u5f53\u524d\u8282\u70b9\u53ef\u4ee5\u590d\u7528\u3002\u9700\u8981\u5224\u65ad\u5176 children \u4e0b\u7684\u8282\u70b9\u662f\u5426\u9700\u8981\u66f4\u65b0\u3002")))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\ud83d\ude80 \u6027\u80fd\u4f18\u5316"),"\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5bf9\u540c\u4e00\u5c42\u7ea7\u7684\u4e00\u7ec4\u5b50\u8282\u70b9\uff0c\u53ef\u4ee5\u7ed9\u5b83\u4eec\u6dfb\u52a0\u552f\u4e00\u7684 key \u8fdb\u884c\u533a\u5206\uff0c\u5219 React \u53ef\u4ee5\u5728\u66f4\u65b0\u524d\u540e\u901a\u8fc7 key \u53bb\u5224\u65ad\u8be5\u8282\u70b9\u53ca\u5176\u5b50\u8282\u70b9\u662f\u5426\u53d1\u751f\u66f4\u65b0\uff0c\u63d0\u5347\u6027\u80fd\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5c3d\u53ef\u80fd\u4fdd\u6301 DOM \u7ed3\u6784\u7a33\u5b9a\uff0c\u51cf\u5c11\u5927\u91cf\u79fb\u52a8\u540c\u7ea7\u8282\u70b9\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u4ece\u961f\u5934\u63d2\u5165\u65b0\u8282\u70b9 / \u5c06\u5bf9\u5c3e\u5df4\u7684\u8282\u70b9\u79fb\u52a8\u5230\u961f\u5934\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u53c2\u8003\uff1a"),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7116326409961734152"},"https://juejin.cn/post/7116326409961734152")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6844903944796258317"},"https://juejin.cn/post/6844903944796258317")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/20346379"},"https://zhuanlan.zhihu.com/p/20346379")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/book/6945998773818490884/section/6959807335720026150"},"https://juejin.cn/book/6945998773818490884/section/6959807335720026150"))),(0,r.kt)("h3",{id:"\u95ee\u9898\u53cc\u7f13\u5b58\u6a21\u578b"},"\u95ee\u9898\uff1a\u53cc\u7f13\u5b58\u6a21\u578b"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4ea7\u751f\u539f\u56e0"),"\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u53cc\u7f13\u5b58\u6a21\u578b\u662f\u4e00\u4e2a\u89e3\u51b3\u56fe\u5f62\u7f16\u7a0b\u4e2d \u201c",(0,r.kt)("strong",{parentName:"li"},"\u95ea\u70c1\u95ee\u9898"),"\u201d \u7684\u65b9\u6848\u3002\u5176\u57fa\u672c\u539f\u7406\u662f\u5728\u5185\u5b58\u4e2d\u7ed8\u5236\u5f53\u524d\u5e27\uff0c\u7ed8\u5236\u5b8c\u6bd5\u540e\u76f4\u63a5\u7528\u5f53\u524d\u5e27\u66ff\u6362\u4e0a\u4e00\u5e27\uff0c\u7531\u4e8e\u7701\u6389\u4e86\u5e27\u4e0e\u5e27\u4e4b\u95f4\u66ff\u6362\u7684\u65f6\u95f4\u56e0\u6b64\u53ef\u4ee5\u6709\u6548\u7684\u907f\u514d\u95ea\u70c1\u95ee\u9898\u3002 "),(0,r.kt)("li",{parentName:"ol"},"react 15+ \u7684\u65b0\u67b6\u6784\uff0c\u534f\u8c03\u9636\u6bb5\u7684\u5f02\u6b65\u53ef\u4e2d\u65ad\u3002\u901a\u8fc7\u53cc\u7f13\u5b58\uff0c\u5f53\u66f4\u9ad8\u4f18\u4efb\u52a1\u6765\u5230\uff0c\u9700\u8981\u4e2d\u65ad\u5f53\u524d diff \u7684\u6811\u65f6\uff0c\u7531\u4e8e\u5b58\u5728 current fiber tree \u6b63\u5e38\u5de5\u4f5c\u3002\u6240\u4ee5 workInProgress fiber tree \u7684\u4e2d\u65ad\u5e76\u91cd\u65b0\u6784\u5efa\uff0c\u4e0d\u4f1a\u5f71\u54cd\u9875\u9762\u7684\u6b63\u5e38\u5c55\u793a\uff0c\u5bf9\u7528\u6237\u900f\u660e\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u65bd\u9636\u6bb5"),"\uff1a\u5728\u534f\u8c03\u9636\u6bb5\uff0creact \u901a\u8fc7 \u53cc\u7f13\u5b58\u673a\u5236\u8f93\u51fa\u4e24\u9897 fiber tree\uff08work in progress fiber tree \u5185\u5b58\u4e2d\u7684\u6811\uff0ccurrent fiber tree \u6e32\u67d3\u6811\uff09\u3002\u8fd9\u4e24\u68f5\u6811\u4e2d\uff0c\u540c\u7ea7\u8282\u70b9\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"fiber.alternate")," \u6307\u9488\u76f8\u4e92\u8fde\u63a5\u3002current fiber tree \u4ee3\u8868\u4e86\u9875\u9762\u6b63\u5728\u5c55\u793a\u7684 DOM \u5185\u5bb9\uff0c\u800c work in progress fiber tree \u662f\u5185\u5b58\u4e2d react \u6b63\u5728\u6784\u5efa\u7684 fiber tree\uff0c\u662f\u672c\u6b21\u66f4\u65b0\u4e4b\u540e\u9875\u9762\u5c55\u793a\u7684 DOM \u5185\u5bb9\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u65bd\u8fc7\u7a0b"),"\uff1a\u5f53\u89e6\u53d1\u66f4\u65b0\u65f6\uff0creact \u4f1a\u901a\u8fc7 diff \u7b97\u6cd5\uff08\u5b98\u65b9\u79f0 Reconciliation\uff09\u5bf9\u6bd4 current fiber tree\uff0c\u6784\u5efa\u4e00\u9897 work in progress fiber tree\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u6784\u5efa workInProgress Fiber \u6811\u65f6,  ",(0,r.kt)("strong",{parentName:"li"},"\u4f1a\u5c1d\u8bd5\u590d\u7528 current Fiber \u6811\u4e2d\u5df2\u6709\u7684 Fiber \u8282\u70b9\u5185\u7684\u5c5e\u6027"),"\u3002\u5728 ",(0,r.kt)("strong",{parentName:"li"},"\u9996\u5c4f\u6e32\u67d3")," \u65f6\uff0c\u53ea\u6709 rootFiber \u5b58\u5728\u5bf9\u5e94\u7684 current fiber\uff08\u5373 rootFiber.alternate\uff09\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u66f4\u591a\u89c1\u95ee\u9898\uff1a\u521d\u6b21\u6e32\u67d3 / \u66f4\u65b0\u7684\u533a\u522b\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u5f15\u5165\u534f\u8c03\u9636\u6bb5\u7684\u5de5\u4f5c\u5185\u5bb9\uff1a\u6df1\u5ea6\u904d\u5386\u4f18\u5148\u3001\u9012\u9636\u6bb5\u3001\u5f52\u9636\u6bb5\u3001\u6784\u5efa effectList \u526f\u4f5c\u7528\u94fe\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u9636\u6bb5\uff1a\u5728\u4e0b\u4e00\u6b21\u6e32\u67d3\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u590d\u7528\u7f13\u5b58\u6811\u505a\u4e3a\u4e0b\u4e00\u6b21\u6e32\u67d3\u6811\uff0c\u4e0a\u4e00\u6b21\u7684\u6e32\u67d3\u6811\u53c8\u4f5c\u4e3a\u7f13\u5b58\u6811\uff0c\u8fd9\u6837\u53ef\u4ee5\u9632\u6b62\u53ea\u7528\u4e00\u9897\u6811\u66f4\u65b0\u72b6\u6001\u7684\u4e22\u5931\u7684\u60c5\u51b5\uff0c\u53c8\u52a0\u5feb\u4e86 DOM \u8282\u70b9\u7684\u66ff\u6362\u4e0e\u66f4\u65b0\u3002")),(0,r.kt)("p",null,"\u603b\u7ed3\uff1a\u4e00\u4e2a\u5143\u7d20\u6700\u591a\u5b58\u5728\u4e24\u4e2a\u7248\u672c\u7684 fiber \u8282\u70b9\uff0c\u4e00\u4e2a current \u7248\u672c\u548c\u5f53\u524d\u6d4f\u89c8\u5668\u9875\u9762\u5bf9\u5e94\uff0c\u4e00\u4e2a WorkInProgress \u7248\u672c\uff0cWorkInProgress \u7248\u672c\u662f\u6b63\u5728\u534f\u8c03\u7684\u8282\u70b9\u3002"),(0,r.kt)("h2",{id:"fiber"},"Fiber"),(0,r.kt)("h3",{id:"\u95ee\u98981-\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165-fiber-\u67b6\u6784"},"\u95ee\u98981 \u4e3a\u4ec0\u4e48\u8981\u5f15\u5165 Fiber \u67b6\u6784\uff1f"),(0,r.kt)("p",null,"fiber \u662f\u9488\u5bf9\u5355\u8fdb\u7a0b\u7684\u4e00\u79cd\u8c03\u5ea6\u7b56\u7565\u3002"),(0,r.kt)("p",null,"\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u4ecb\u7ecd\u8fc7\u5e38\u89c1\u7684\u5355\u5904\u7406\u8fdb\u7a0b\u8c03\u5ea6\u7b56\u7565\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5148\u5230\u5148\u5f97(First-Come-First-Served, FCFS)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f18\u70b9\uff1a\u7b80\u5355\uff0c\u6613\u5b9e\u73b0"),(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a\u5bf9\u77ed\u8fdb\u7a0b\u4e0d\u5229\u3001\u5bf9 I/O \u5bc6\u96c6\u578b\u8fdb\u7a0b\u4e0d\u7406\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u8f6e\u8f6c",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u62a2\u5360\u7b56\u7565\u3002\u786e\u5b9a\u5408\u7406\u7684\u65f6\u95f4\u7247\u957f\u5ea6\uff0c\u516c\u5e73\u5730\u7ed9\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u4e00\u5b9a\u7684\u6267\u884c\u65f6\u95f4\uff0c\u5f53\u65f6\u95f4\u6d88\u8017\u5b8c\u6bd5\u6216\u963b\u585e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c31\u4f1a\u8c03\u5ea6\u5176\u4ed6\u8fdb\u7a0b\uff0c\u5c06\u6267\u884c\u6743\u62a2\u5360\u8fc7\u6765\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u6700\u77ed\u8fdb\u7a0b\u4f18\u5148(Shortest Process Next, SPN)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a\u5bf9\u957f\u8fdb\u7a0b\u4e0d\u5229\uff0c\u4f1a\u9965\u997f\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u6700\u77ed\u5269\u4f59\u65f6\u95f4(Shortest Remaining Time, SRT)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6839\u636e\u5269\u4f59\u65f6\u95f4\u7684\u957f\u77ed\uff0c\u4f18\u5148\u6267\u884c\u53ef\u6700\u5feb\u5b8c\u6210\u7684\u8fdb\u7a0b\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a\u5bf9\u957f\u8fdb\u7a0b\u4e0d\u5229\uff0c\u4f1a\u9965\u997f\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u6700\u9ad8\u54cd\u5e94\u6bd4\u4f18\u5148(HRRN)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u54cd\u5e94\u6bd4 = \uff08\u7b49\u5f85\u6267\u884c\u65f6\u95f4 + \u8fdb\u7a0b\u6267\u884c\u65f6\u95f4\uff09 / \u8fdb\u7a0b\u6267\u884c\u65f6\u95f4"),(0,r.kt)("li",{parentName:"ul"},"\u89e3\u51b3\u957f\u8fdb\u7a0b\u9965\u997f\u95ee\u9898\uff0c\u5f15\u5165\u4e86\u7b49\u5f85\u6267\u884c\u65f6\u95f4\uff0c\u8ba9\u7b49\u5f85\u65f6\u95f4\u8f83\u957f\u7684\u53ef\u4ee5\u5c3d\u53ef\u80fd\u4f18\u5148\u6267\u884c\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u53cd\u9988\u6cd5\uff0c\u591a\u961f\u5217",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u8fdb\u7a0b\u4e00\u5f00\u59cb\u90fd\u6709\u76f8\u540c\u7684\u4f18\u5148\u7ea7\uff0c\u6bcf\u6b21\u88ab\u62a2\u5360(\u9700\u8981\u914d\u5408\u5176\u4ed6\u62a2\u5360\u7b56\u7565\u4f7f\u7528\uff0c\u5982\u8f6e\u8f6c)\uff0c\u4f18\u5148\u7ea7\u5c31\u4f1a\u964d\u4f4e\u4e00\u7ea7\u3002\u56e0\u6b64\u901a\u5e38\u5b83\u4f1a\u6839\u636e\u4f18\u5148\u7ea7\u5212\u5206\u591a\u4e2a\u961f\u5217")))),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u4e2d\uff0cJavaScript \u7684\u6267\u884c\u4e5f\u662f\u5355\u7ebf\u7a0b\u7684\u3002Javascript \u5f15\u64ce\u548c\u9875\u9762\u6e32\u67d3\u5f15\u64ce\u5728\u540c\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"\u6e32\u67d3\u7ebf\u7a0b"),"\uff0cGUI \u6e32\u67d3\u548c Javascript\u6267\u884c \u4e24\u8005\u662f\u4e92\u65a5\u7684\u3002\u5982\u679c\u8ba9 js\u6267\u884c\u957f\u671f\u5360\u636e\u6e32\u67d3\u8fdb\u7a0b\uff0c\u6d4f\u89c8\u5668\u5c31\u4f1a\u5448\u73b0 \u201c\u5361\u6b7b\u201d \u72b6\u6001\uff0c\u9875\u9762\u65e0\u6cd5\u5237\u65b0\u3002"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u2019\u524d\u7aef\u6846\u67b6\u2018\u6765\u8bf4\uff0c\u89e3\u51b3\u8fd9\u79cd\u95ee\u9898\u6709\u4e09\u4e2a\u65b9\u5411:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"1\ufe0f\u20e3 \u4f18\u5316\u6bcf\u4e2a\u4efb\u52a1\uff0c\u8ba9\u5b83\u6709\u591a\u5feb\u5c31\u591a\u5feb\u3002\u6324\u538bCPU\u8fd0\u7b97\u91cf"),(0,r.kt)("li",{parentName:"ul"},"2\ufe0f\u20e3 \u5feb\u901f\u54cd\u5e94\u7528\u6237\uff0c\u8ba9\u7528\u6237\u89c9\u5f97\u591f\u5feb\uff0c\u4e0d\u80fd\u963b\u585e\u7528\u6237\u7684\u4ea4\u4e92"),(0,r.kt)("li",{parentName:"ul"},"3\ufe0f\u20e3 \u5c1d\u8bd5 Worker \u591a\u7ebf\u7a0b")),(0,r.kt)("p",null,"Vue \u4ece1\u20e3\ufe0f\u89d2\u5ea6\u5165\u624b\uff0c\u901a\u8fc7\u6a21\u7248 + \u54cd\u5e94\u5f0f\u673a\u5236\uff0c\u63d0\u5347\u4efb\u52a1\u8fd0\u884c\u901f\u5ea6\u3002"),(0,r.kt)("p",null,"React \u4ece2\u20e3\ufe0f\u89d2\u5ea6\u5165\u624b\uff0c\u901a\u8fc7 fiber \u67b6\u6784\uff0c\u628a\u4efb\u52a1\u5207\u5206\uff0c\u63d0\u5347\u6d4f\u89c8\u5668\u54cd\u5e94\u901f\u5ea6\u3002"),(0,r.kt)("p",null,"\u5177\u4f53\u4e3a\uff1a"),(0,r.kt)("p",null,"React \u6709\u4e09\u5927\u6a21\u5757\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Scheduler \u8c03\u5ea6\u5668\uff1a\u8c03\u5ea6\u66f4\u65b0.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Reconcoler \u534f\u8c03\u5668\uff1a\u51b3\u5b9a\u9700\u8981\u66f4\u65b0\u4ec0\u4e48\u7ec4\u4ef6.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Renderer \u6e32\u67d3\u5668\uff1a\u5c06\u7ec4\u4ef6\u66f4\u65b0\u5230\u89c6\u56fe\u4e2d."))),(0,r.kt)("p",null,"\u5176\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Reconcilation")," \u534f\u8c03\u9636\u6bb5\u662f CPU \u5bc6\u96c6\u578b\u64cd\u4f5c\uff0cfiber \u628a\u8be5\u73af\u8282\u5207\u5206\uff0c\u4f7f ",(0,r.kt)("inlineCode",{parentName:"p"},"Reconcilation")," \u8fc7\u7a0b\u53d8\u6210\u53ef\u4e2d\u65ad\uff0c\u9002\u65f6\u7684\u8ba9\u51fa CPU \u6267\u884c\u6743\uff0816.6ms\uff09\uff0c\u597d\u5904\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u518d\u4e00\u6b21\u6027\u64cd\u4f5c\u5927\u91cf DOM \u8282\u70b9\uff0c\u800c\u662f\u5206\u6279\u5ef6\u65f6\u5bf9 DOM \u8fdb\u884c\u64cd\u4f5c\u3002\u63d0\u5347\u4e86\u6d4f\u89c8\u5668\u7684\u54cd\u5e94\u901f\u5ea6\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7ed9\u6d4f\u89c8\u5668\u4e00\u70b9\u5598\u606f\u7684\u673a\u4f1a\uff0c\u4ed6\u4f1a\u5bf9\u4ee3\u7801\u8fdb\u884c\u7f16\u8bd1\u4f18\u5316\uff08JIT\uff09\u53ca\u8fdb\u884c\u70ed\u4ee3\u7801\u4f18\u5316\uff0c\u6216\u8005\u5bf9reflow\u8fdb\u884c\u4fee\u6b63")),(0,r.kt)("h3",{id:"\u95ee\u98982-\u4ec0\u4e48\u662f-fiber"},"\u95ee\u98982 \u4ec0\u4e48\u662f Fiber"),(0,r.kt)("p",null,"\u662f\u4e00\u79cd\u6d41\u7a0b\u63a7\u5236\u673a\u5236\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u52a8\u6001\u6267\u884c\u5355\u5143\uff08\u5f02\u6b65\u53ef\u4e2d\u65ad + \u63a7\u5236\u6743\u8ba9\u51fa\uff09"),(0,r.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u6267\u884c\u5355\u5143\uff08",(0,r.kt)("inlineCode",{parentName:"li"},"requestIdleCallback"),")"),(0,r.kt)("li",{parentName:"ul"},"\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff08 fibfer \u8282\u70b9\uff09")),(0,r.kt)("h4",{id:"1-\u6d41\u7a0b\u63a7\u5236\u673a\u5236"},"1 \u6d41\u7a0b\u63a7\u5236\u673a\u5236"),(0,r.kt)("p",null,"Fiber \u4e5f\u79f0\u534f\u7a0b\u3001\u6216\u8005\u7ea4\u7a0b\u3002 \u662f\u4e00\u79cd\u63a7\u5236\u6d41\u7a0b\u7684\u8ba9\u51fa\u673a\u5236\u3002\u534f\u7a0b\u548c\u7ebf\u7a0b\u5e76\u4e0d\u4e00\u6837\uff0c\u534f\u7a0b\u672c\u8eab\u662f\u6ca1\u6709\u5e76\u53d1\u6216\u8005\u5e76\u884c\u80fd\u529b\u7684\uff08\u9700\u8981\u914d\u5408\u7ebf\u7a0b\uff09\u3002"),(0,r.kt)("p",null,"Fiber \u5b9e\u73b0\u4e86\u4ee3\u6570\u6548\u5e94\uff08\u770b\u4ee3\u6570\u6548\u5e94\u7684\u4f8b\u5b50\uff09\uff0c\u53ef\u4ee5\u8fd1\u4f3c\u7684\u7406\u89e3\u4e3a\u662f async/await + try/catch \u7684\u7ed3\u5408\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u666e\u901a\u51fd\u6570\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\u65e0\u6cd5\u88ab\u4e2d\u65ad\u548c\u6062\u590d\uff1aasync/await \u5b9e\u73b0\u4e86\u4e2d\u65ad\u548c\u6062\u590d\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4f46\u56e0\u6b64\u5bfc\u81f4\u4e86\u526f\u4f5c\u7528\uff1aasync\u5177\u6709\u4f20\u67d3\u6027\uff0c\u9700\u8981\u5168\u90e8\u7684\u51fd\u6570\u90fd\u4e3a async\u3002\u5982\u679c\u53ef\u4ee5\u7c7b\u4f3c try/catch \u7684\u6548\u679c\uff0c\u8ba9\u526f\u4f5c\u7528\u548c\u4e3b\u903b\u8f91\u5206\u79bb\uff0c\u5219\u4ee3\u7801\u903b\u8f91\u66f4\u6e05\u6670\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"React \u6e32\u67d3\u7684\u8fc7\u7a0b\u53ef\u4ee5\u88ab\u4e2d\u65ad\uff0c\u53ef\u4ee5\u5c06\u63a7\u5236\u6743\u4ea4\u56de\u6d4f\u89c8\u5668\uff0c\u8ba9\u4f4d\u7ed9\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\uff0c\u6d4f\u89c8\u5668\u7a7a\u95f2\u540e\u518d\u6062\u590d\u6e32\u67d3")),(0,r.kt)("p",null,"\u5408\u4f5c\u5f0f\u8c03\u5ea6 Cooperative Scheduling\uff1a\u6d4f\u89c8\u5668\u4e2d\u6ca1\u6709\u62a2\u5360\u673a\u5236\uff0c\u65e0\u6cd5\u4e2d\u65ad\u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1\uff0c\u6240\u4ee5 React \u9700\u8981\u5177\u5907\u8ba9\u51fa\u673a\u5236\uff0c\u4e3b\u52a8\u8ba9\u51fa\u63a7\u5236\u6743\u3002"),(0,r.kt)("p",null,"\u8fd9\u662f\u4e00\u79cd\u7ed9\u4e88\u4fe1\u4efb\u7684\u5951\u7ea6\u5408\u4f5c\u673a\u5236\uff1aReact \u4f1a\u6839\u636e\u81ea\u5df1\u7684\u4efb\u52a1\u91cf\uff0c\u5411\u6d4f\u89c8\u5668\u7533\u8bf7\u9002\u91cf\u7684\u65f6\u95f4\u7247\u3002\u800c\u6d4f\u89c8\u5668\u4f1a\u5148\u6267\u884c\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\uff0c\u518d\u628a\u5269\u4f59\u65f6\u95f4\u5206\u7ed9 React\uff0cReact \u4e5f\u4f1a\u5728\u89c4\u5b9a\u7684\u65f6\u95f4\u5185\u5b8c\u6210\u4efb\u52a1\u6267\u884c\uff0c\u5f52\u8fd8\u63a7\u5236\u6743\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-26 00.07.36",src:n(87936).Z,width:"1588",height:"678"})),(0,r.kt)("p",null,"\u90a3\u4e48\uff0c\u5982\u4f55\u786e\u5b9a\u5269\u4f59\u65f6\u95f4\u5462\uff1f\u6216\u8005\u54ea\u4e9b\u4efb\u52a1\u662f\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u5462\uff1f"),(0,r.kt)("p",null,"\u5728\u4e00\u5e27\uff0816.6 ms\uff09\u4e2d\uff0c\u6d4f\u89c8\u5668\u4f1a\u6267\u884c\u4ee5\u4e0b\u4efb\u52a1\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5904\u7406\u7528\u6237\u8f93\u5165\u4e8b\u4ef6"),(0,r.kt)("li",{parentName:"ul"},"Javascript\u6267\u884c"),(0,r.kt)("li",{parentName:"ul"},"requestAnimation \u8c03\u7528"),(0,r.kt)("li",{parentName:"ul"},"\u5e03\u5c40 Layout"),(0,r.kt)("li",{parentName:"ul"},"\u7ed8\u5236 Paint")),(0,r.kt)("p",null,"\u5982\u679c\u5728\u6267\u884c\u5b8c\u8fd9\u4e9b\u5fc5\u987b\u4efb\u52a1\u540e\uff0c\u8fd8\u6709\u5269\u4f59\u7684\u65f6\u95f4\uff0c\u5c31\u53ef\u7ed9 React \u53bb\u4f7f\u7528\uff1a"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," \u7684\u56de\u8c03\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(96121).Z,width:"737",height:"139"})),(0,r.kt)("p",null,"\u4e3a\u4e86\u907f\u514d\u5269\u4f59\u65f6\u95f4\u4e0d\u8db3\uff0c\u4efb\u52a1\u88ab\u997f\u6b7b\uff0cReact \u5b9a\u4e49\u4e86\u4e00\u4e2a\u8d85\u65f6\u65f6\u95f4\u3002\u5982\u679c\u4efb\u52a1\u7b49\u5f85\u65f6\u95f4\u5230\u8fbe\u8d85\u65f6\u65f6\u95f4\u540e\uff0c\u5c31\u4f1a\u63d0\u5347\u4f18\u5148\u7ea7\uff0c\u7acb\u5373\u6267\u884c\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Immediate"),"(-1) - \u8fd9\u4e2a\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u4f1a\u540c\u6b65\u6267\u884c, \u6216\u8005\u8bf4\u8981\u9a6c\u4e0a\u6267\u884c\u4e14\u4e0d\u80fd\u4e2d\u65ad"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"UserBlocking"),"(250ms) \u8fd9\u4e9b\u4efb\u52a1\u4e00\u822c\u662f\u7528\u6237\u4ea4\u4e92\u7684\u7ed3\u679c, \u9700\u8981\u5373\u65f6\u5f97\u5230\u53cd\u9988"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Normal")," (5s) \u5e94\u5bf9\u54ea\u4e9b\u4e0d\u9700\u8981\u7acb\u5373\u611f\u53d7\u5230\u7684\u4efb\u52a1\uff0c\u4f8b\u5982\u7f51\u7edc\u8bf7\u6c42"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Low")," (10s) \u8fd9\u4e9b\u4efb\u52a1\u53ef\u4ee5\u653e\u540e\uff0c\u4f46\u662f\u6700\u7ec8\u5e94\u8be5\u5f97\u5230\u6267\u884c. \u4f8b\u5982\u5206\u6790\u901a\u77e5"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Idle")," (\u6ca1\u6709\u8d85\u65f6\u65f6\u95f4) \u4e00\u4e9b\u6ca1\u6709\u5fc5\u8981\u505a\u7684\u4efb\u52a1 (e.g. \u6bd4\u5982\u9690\u85cf\u7684\u5185\u5bb9), \u53ef\u80fd\u4f1a\u88ab\u997f\u6b7b")),(0,r.kt)("h4",{id:"2-\u6267\u884c\u5355\u5143"},"2 \u6267\u884c\u5355\u5143"),(0,r.kt)("p",null,"\u5c06\u5b83\u89c6\u4f5c\u4e00\u4e2a\u6267\u884c\u5355\u5143\uff0c\u6bcf\u6b21\u6267\u884c\u5b8c\u4e00\u4e2a '\u6267\u884c\u5355\u5143'\uff0cReact \u5c31\u4f1a\u68c0\u67e5\u73b0\u5728\u8fd8\u5269\u591a\u5c11\u65f6\u95f4\uff0c\u5982\u679c\u6ca1\u6709\u65f6\u95f4\u5c31\u5c06\u63a7\u5236\u6743\u8ba9\u51fa\u53bb\u3002"),(0,r.kt)("p",null,"\u6d41\u7a0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5047\u8bbe\u7528\u6237\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"setState")," \u66f4\u65b0\u7ec4\u4ef6, \u8fd9\u4e2a\u5f85\u66f4\u65b0\u7684\u4efb\u52a1\u4f1a\u5148\u653e\u5165\u961f\u5217\u4e2d\uff0c\u7136\u540e\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," \u8bf7\u6c42\u6d4f\u89c8\u5668\u8c03\u5ea6\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6d4f\u89c8\u5668\u6709\u7a7a\u95f2\u65f6\u95f4\uff0c\u6216\u8005\u4efb\u52a1\u8d85\u65f6\uff0c\u5c31\u4f1a\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"performWork")," \u6765\u5faa\u73af\u904d\u5386\uff0c\u5e76\u6267\u884c\u961f\u5217\u4e2d\u7684\u4efb\u52a1\u3002"))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"workLoop")," \uff1a\u5b83\u4f1a\u4ece\u66f4\u65b0\u961f\u5217 (updateQueue) \u4e2d\u5f39\u51fa\u66f4\u65b0\u4efb\u52a1\u6765\u6267\u884c\uff0c\u6bcf\u6267\u884c\u5b8c\u4e00\u4e2a \u2018",(0,r.kt)("inlineCode",{parentName:"p"},"\u6267\u884c\u5355\u5143"),"\u2018 \uff0c\u5c31\u68c0\u67e5\u4e00\u4e0b\u5269\u4f59\u65f6\u95f4\u662f\u5426\u5145\u8db3\uff0c\u5982\u679c\u5145\u8db3\u5c31\u8fdb\u884c\u6267\u884c\u4e0b\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"\u6267\u884c\u5355\u5143"),"\uff0c\u53cd\u4e4b\u5219\u505c\u6b62\u6267\u884c\uff0c\u4fdd\u5b58\u73b0\u573a\uff0c\u7b49\u4e0b\u4e00\u6b21\u6709\u6267\u884c\u6743\u65f6\u6062\u590d\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-26 00.08.11",src:n(54817).Z,width:"1586",height:"1510"})),(0,r.kt)("h4",{id:"3-\u4e00\u79cd\u6570\u636e\u7ed3\u6784"},"3 \u4e00\u79cd\u6570\u636e\u7ed3\u6784"),(0,r.kt)("p",null,"\u67e5\u770b\u95ee\u98983."),(0,r.kt)("h3",{id:"\u95ee\u98983-fiber-\u7684\u7ed3\u6784"},"\u95ee\u98983 Fiber \u7684\u7ed3\u6784"),(0,r.kt)("p",null,"\u5728 React 16\u4ee5\u524d\uff0cReconcilation \u662f\u540c\u6b65\u7684\u3001\u9012\u5f52\u6267\u884c\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cDom \u7684\u6784\u5efa\u57fa\u4e8e ",(0,r.kt)("strong",{parentName:"p"},"\u51fd\u6570\u8c03\u7528\u6808")," \u7684Reconcilation\u7b97\u6cd5\uff0c\u56e0\u6b64\u901a\u5e38\u4e5f\u79f0\u5b83\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"Stack Reconcilation"),"\u3002"),(0,r.kt)("p",null,"\u4f46\u57fa\u4e8e\u8c03\u7528\u6808\u7684\u65b9\u5f0f\u4e0d\u80fd\u968f\u610f\u4e2d\u65ad / \u6062\u590d\u73b0\u573a\uff0c\u4e5f\u4e0d\u5229\u4e8e\u5f02\u6b65\u5904\u7406\u7684\u4ee3\u6570\u6548\u5e94\u5b9e\u73b0\u3002 \u5982\u679c\u8981\u6062\u590d\u9012\u5f52\u73b0\u573a\uff0c\u53ef\u80fd\u9700\u8981\u4ece\u5934\u5f00\u59cb\uff0c\u6062\u590d\u5230\u4e4b\u524d\u7684\u8c03\u7528\u6808\u3002"),(0,r.kt)("p",null,"\u6240\u4ee5\uff0cReact 16 \u901a\u8fc7\u6a21\u62df\u51fd\u6570\u8c03\u7528\u6808\uff0c\u5c06\u9012\u5f52\u8f6c\u5316\u6210\u8fed\u4ee3\uff0c\u4f7f\u7528 ",(0,r.kt)("strong",{parentName:"p"},"\u94fe\u8868")," \u6784\u5efa\u3002"),(0,r.kt)("p",null," \u6bcf\u4e2a VirtualDOM \u8282\u70b9\uff0c\u90fd\u4f7f\u7528\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber")," \u8868\u793a\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"interface Fiber {\n  /**\n   * \u269b\ufe0f \u8282\u70b9\u7684\u7c7b\u578b\u4fe1\u606f\n   */\n  // \u6807\u8bb0 Fiber \u7c7b\u578b: \u51fd\u6570/\u7c7b\u7ec4\u4ef6\u3001\u6839\u5143\u7d20\u3001dom\u5143\u7d20\u3001\u6587\u672c\u8282\u70b9\u3001Fragment\u3001MemoComponent\u7b49\n  tag: WorkTag,\n  // \u8282\u70b9\u5143\u7d20\u7c7b\u578b, \u662f\u5177\u4f53\u7684\u7c7b\u7ec4\u4ef6\u3001\u51fd\u6570\u7ec4\u4ef6\u3001\u5bbf\u4e3b\u7ec4\u4ef6(\u5b57\u7b26\u4e32)\n  type: any,\n\n  /**\n   * \u269b\ufe0f \u7ed3\u6784\u4fe1\u606f\n   */ \n  // \u6307\u5411\u7236\u8282\u70b9\uff0c\u6216\u8005render\u8be5\u8282\u70b9\u7684\u7ec4\u4ef6\n  return: Fiber | null,\n  // \u6307\u5411\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9\n  child: Fiber | null,\n  // \u6307\u5411\u4e0b\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9\n  sibling: Fiber | null,\n    \n  /**\n   * \u269b\ufe0f \u8282\u70b9\u72b6\u6001 state\n   */\n  // \u8282\u70b9\u5b9e\u4f8b(\u72b6\u6001)\uff1a\n  //        \u5bf9\u4e8e\u5bbf\u4e3b\u7ec4\u4ef6\uff0c\u8fd9\u91cc\u4fdd\u5b58\u5bbf\u4e3b\u7ec4\u4ef6\u7684\u5b9e\u4f8b, \u4f8b\u5982DOM\u8282\u70b9\u3002\n  //        \u5bf9\u4e8e\u7c7b\u7ec4\u4ef6\u6765\u8bf4\uff0c\u8fd9\u91cc\u4fdd\u5b58\u7c7b\u7ec4\u4ef6\u7684\u5b9e\u4f8b\n  //        \u5bf9\u4e8e\u51fd\u6570\u7ec4\u4ef6\u8bf4\uff0c\u8fd9\u91cc\u4e3a\u7a7a\uff0c\u56e0\u4e3a\u51fd\u6570\u7ec4\u4ef6\u6ca1\u6709\u5b9e\u4f8b\n  stateNode: any,\n  // \u65b0\u7684\u3001\u5f85\u5904\u7406\u7684props\n  pendingProps: any,\n  // \u4e0a\u4e00\u6b21\u6e32\u67d3\u7684props\n  memoizedProps: any, // props\u3001events\n  // \u4e0a\u4e00\u6b21\u6e32\u67d3\u7684\u7ec4\u4ef6\u72b6\u6001 \n  memoizedState: any, // state\u3001hooks\n\n  /**\n   * \u269b\ufe0f \u526f\u4f5c\u7528\n   */\n  // \u5f53\u524d\u8282\u70b9\u7684\u526f\u4f5c\u7528\u7c7b\u578b\uff0c\u4f8b\u5982\u8282\u70b9\u66f4\u65b0\u3001\u5220\u9664\u3001\u79fb\u52a8\n  effectTag: SideEffectTag,\n  // \u548c\u8282\u70b9\u5173\u7cfb\u4e00\u6837\uff0cReact \u540c\u6837\u4f7f\u7528\u94fe\u8868\u6765\u5c06\u6240\u6709\u6709\u526f\u4f5c\u7528\u7684Fiber\u8fde\u63a5\u8d77\u6765\n  nextEffect: Fiber | null,\n\n  /**\n   * \u269b\ufe0f \u66ff\u8eab\n   * \u6307\u5411\u65e7\u6811\u4e2d\u7684\u8282\u70b9\uff0cWorkInProgress\u4f1a\u628aalternate\u5bf9\u5e94\u7684fiber\u5c5e\u6027\u5b8c\u6574\u7684\u590d\u5236\u8fc7\u6765\n   */\n  alternate: Fiber | null,\n}\n")),(0,r.kt)("p",null,"Fiber \u5305\u542b\u7684\u5c5e\u6027\u53ef\u4ee5\u5212\u5206\u4e3a 5 \u4e2a\u90e8\u5206:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\ud83c\udd95 \u7ed3\u6784\u4fe1\u606f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Fiber \u4f7f\u7528\u94fe\u8868\u7684\u5f62\u5f0f\u6765\u8868\u793a\u8282\u70b9\u5728\u6811\u4e2d\u7684\u5b9a\u4f4d\uff0c\u5c06 virtualDom \u6784\u5efa\u8d77\u6765\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u8282\u70b9\u7c7b\u578b\u4fe1\u606f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"tag \u8868\u793a\u8282\u70b9\u7684\u5206\u7c7b\u3001type \u4fdd\u5b58\u5177\u4f53\u7684\u7c7b\u578b\u503c\uff0c\u5982div\u3001Component\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u8282\u70b9\u7684\u72b6\u6001"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u8282\u70b9\u7684\u7ec4\u4ef6\u5b9e\u4f8b\u3001props\u3001state \u7b49\uff0c\u5b83\u4eec\u5c06\u5f71\u54cd\u7ec4\u4ef6\u7684\u8f93\u51fa\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\ud83c\udd95 \u526f\u4f5c\u7528"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728 Reconciliation \u8fc7\u7a0b\u4e2d\u53d1\u73b0\u7684 '\u526f\u4f5c\u7528'(",(0,r.kt)("strong",{parentName:"li"},"\u53d8\u66f4\u9700\u6c42"),") \u5c31\u4fdd\u5b58\u5728\u8282\u70b9\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"effectTag")," \u4e2d(\u60f3\u8c61\u4e3a\u6253\u4e0a\u4e00\u4e2a\u6807\u8bb0)\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u94fe\u8868\u7ed3\u6784\uff0c\u5c06\u672c\u6b21\u6e32\u67d3\u7684\u6240\u6709\u8282\u70b9\u526f\u4f5c\u7528\u90fd\u6536\u96c6\u8d77\u6765\u3002\u5728\u904d\u5386\u8fc7\u7a0b\u4e2d React \u4f1a\u5c06\u6240\u6709\u6709 \u2018\u526f\u4f5c\u7528\u2019 \u7684\u8282\u70b9\u90fd\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"nextEffect")," \u8fde\u63a5\u8d77\u6765\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\ud83c\udd95 \u66ff\u8eab")," ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"React \u5728 Reconciliation \u8fc7\u7a0b\u4e2d\u4f1a\u6784\u5efa\u4e00\u9897\u65b0\u7684 virtualDOM (\u5b98\u65b9\u79f0\u4e3a",(0,r.kt)("strong",{parentName:"li"},"workInProgress tree"),"\uff0c",(0,r.kt)("strong",{parentName:"li"},"WIP\u6811"),")\u3002\u662f\u4e00\u9897\u8868\u793a\u5f53\u524d\u5de5\u4f5c\u8fdb\u5ea6\u7684\u6811\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8fd8\u6709\u4e00\u9897\u8868\u793a\u5df2\u6e32\u67d3\u754c\u9762\u7684",(0,r.kt)("strong",{parentName:"li"},"\u65e7\u6811\uff08current tree\uff09"),"\uff0c\u8fd9\u68f5\u6811\u4ee3\u8868\u4e86\u5df2\u7ecf\u6e32\u67d3\u7684\u5e76\u6b63\u5728\u663e\u793a\u7684\u9875\u9762\u3002"),(0,r.kt)("li",{parentName:"ul"},"React\u5c31\u662f\u4e00\u8fb9\u548c\u65e7\u6811\u6bd4\u5bf9\uff0c\u4e00\u8fb9\u6784\u5efaWIP\u6811\u7684\u3002 alternate \u6307\u5411\u65e7\u6811\u7684\u540c\u7b49\u8282\u70b9\u3002")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(72066).Z,width:"915",height:"690"})),(0,r.kt)("p",null,"\u4e0a\u56fe\u662f Reconciliation \u5b8c\u6210\u540e\u7684\u72b6\u6001\uff0c\u5de6\u8fb9\u662f\u65e7\u6811\uff0c\u53f3\u8fb9\u662fWIP\u6811\u3002\u5bf9\u4e8e\u9700\u8981\u53d8\u66f4\u7684\u8282\u70b9\uff0c\u90fd\u6253\u4e0a\u4e86'\u6807\u7b7e'\u3002 \u5728\u63d0\u4ea4\u9636\u6bb5\uff0cReact \u5c31\u4f1a\u5c06\u8fd9\u4e9b\u6253\u4e0a\u6807\u7b7e\u7684\u8282\u70b9\u5e94\u7528\u53d8\u66f4\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898fiber-\u66f4\u65b0\u673a\u5236"},"\u95ee\u9898\uff1aFiber \u66f4\u65b0\u673a\u5236"),(0,r.kt)("p",null,"\u521d\u59cb\u5316\u66f4\u65b0\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa fiberRoot \u548c rootFiber")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fiberRoot"),"\uff1a\u9996\u6b21\u6784\u5efa\u5e94\u7528\uff0c \u521b\u5efa\u552f\u4e00\u7684 fiberRoot \u8282\u70b9\uff0c\u662f\u6574\u4e2a React \u5e94\u7528\u7684\u6839\u57fa\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"rootFiber"),"\uff1a \u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"ReactDOM.render()")," \u6e32\u67d3\u51fa\u6765\u7684\u3002\u4e00\u4e2a React \u5e94\u7528\u53ef\u4ee5\u6709\u591a ReactDOM.render \u521b\u5efa\u7684 rootFiber \uff0c\u4f46\u662f\u53ea\u80fd\u6709\u4e00\u4e2a fiberRoot\uff08\u5e94\u7528\u6839\u8282\u70b9\uff09\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// rootFiber\nReactDOM.render(<Index/>, document.getElementById('app'));\n")),(0,r.kt)("p",null,"\u7b2c\u4e00\u6b21\u6302\u8f7d\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5c06 fiberRoot \u548c rootFiber \u5efa\u7acb\u8d77\u5173\u8054\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fiberRoot.current = rootFiber;"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-26 00.08.50",src:n(84986).Z,width:"2574",height:"800"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6b65\uff1aworkInProgress \u548c current")),(0,r.kt)("p",null,"\u5f85\u7eed\u3002"),(0,r.kt)("h2",{id:"\u751f\u547d\u5468\u671f-hooks"},"\u751f\u547d\u5468\u671f hooks"),(0,r.kt)("h3",{id:"\u95ee\u9898useeffect-\u548c-uselayouteffect-\u7684\u533a\u522b"},"\u95ee\u9898\uff1auseEffect \u548c useLayoutEffect \u7684\u533a\u522b"),(0,r.kt)("p",null,"useEffect \u662f\u5f02\u6b65\u8c03\u7528\u7684\uff0cuseLayoutEffect \u662f\u540c\u6b65\u8c03\u7528\u7684\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"useEffect \u5728 before mutation \u9636\u6bb5\u7ed9\u5b83\u5b9a\u4e49 mormal \u4f18\u5148\u7ea7\uff0c\u7136\u540e\u7ed1\u5b9a\u8c03\u7528\u65f6\u673a\uff0c\u5728 commit \u9636\u6bb5\u5b8c\u6210\u540e\u5f02\u6b65\u8c03\u7528\u3002\u5728 layout \u9636\u6bb5\uff0c\u4f1a\u7ed1\u5b9a useEffect \u7684 \u9500\u6bc1\u51fd\u6570\u3001\u56de\u8c03\u51fd\u6570\u3002\u5728 commit \u9636\u6bb5\u5b8c\u6210\u540e\uff0c\u6309\u7167\u4f18\u5148\u7ea7\uff0c\u6700\u7ec8\u4f1a\u5f02\u6b65\u6267\u884c \u9500\u6bc1\u51fd\u6570\u3001\u56de\u8c03\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ul"},"useLayoutEffect \u5728 muation \u9636\u6bb5\u4f1a\u6267\u884c\u9500\u6bc1\u51fd\u6570\uff0c\u5728layout \u9636\u6bb5\u4f1a\u6267\u884c\u56de\u8c03\u51fd\u6570\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-07 00.18.02",src:n(29190).Z,width:"2202",height:"1218"})),(0,r.kt)("h3",{id:"\u95ee\u9898react-\u751f\u547d\u5468\u671f8"},"\u95ee\u9898\uff1aReact \u751f\u547d\u5468\u671f\uff088\uff09"),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/"},"https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/")))),(0,r.kt)("p",null,"\u7c7b\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\uff0c\u4ece React \u8fd0\u884c\u9636\u6bb5 + \u7ec4\u4ef6\u5904\u7406\u7c7b\u578b\u6765\u5206\u6790\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"React \u8fd0\u884c\u6709\u4e09\u4e2a\u9636\u6bb5\uff1a\u8c03\u5ea6\u3001\u534f\u8c03\u3001\u6e32\u67d3\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7ec4\u4ef6\u7684\u5904\u7406\u6709\u4e09\u4e2a\u7c7b\u578b\uff1a\u6302\u8f7d\u3001\u66f4\u65b0\u3001\u5378\u8f7d\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 15.34.10",src:n(87402).Z,width:"2232",height:"1476"})),(0,r.kt)("p",null,"\u7ec4\u4ef6\u6302\u8f7d\u4f1a\u6267\u884c\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u534f\u8c03\u9636\u6bb5\uff1aconstructor\u3001static getDerivedStateFrpmProps\u3001render")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6e32\u67d3\u9636\u6bb5\uff1acomponentDidMount"))),(0,r.kt)("p",null,"\u7ec4\u4ef6\u66f4\u65b0\u4f1a\u6267\u884c\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u534f\u8c03\u9636\u6bb5\uff1astatic getDerivedStateFrpmProps\u3001shouldComponentUpdate\uff08forceUpdate\u4e0d\u6267\u884c\uff09\u3001render"),(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u9636\u6bb5\uff1agetSnapshotBeforeUpdate\u3001componentDidUpdate")),(0,r.kt)("p",null,"\u7ec4\u4ef6\u5378\u8f7d\u4f1a\u6267\u884c\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u9636\u6bb5\uff1acomponentWillUnmount")),(0,r.kt)("h4",{id:"\u534f\u8c03\u9636\u6bb5-render"},"\u534f\u8c03\u9636\u6bb5 render"),(0,r.kt)("p",null,"\u534f\u8c03\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u662f\u4e0d\u5305\u542b\u526f\u4f5c\u7528\u7684\u3002"),(0,r.kt)("p",null,"\u7ec4\u4ef6\u6302\u8f7d\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"constructor(props)")),"\n\u7c7b\u7ec4\u4ef6\u7684\u7ee7\u627f\u3001props \u4f20\u9012\u3001\u521d\u59cb\u5316 state\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u521d\u59cb\u5316\u9636\u6bb5\u6267\u884c\uff0c\u53ef\u76f4\u63a5\u5bf9 ",(0,r.kt)("inlineCode",{parentName:"li"},"this.state")," \u8d4b\u503c\u3002\u5176\u4ed6\u751f\u547d\u5468\u671f\u51fd\u6570\u4e2d\u53ea\u80fd\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"this.setState")," \u4fee\u6539 state\uff0c\u4e0d\u80fd\u76f4\u63a5\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"this.state")," \u8d4b\u503c\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"constructor(props) {\n  super(props);\n  this.state = {number: 0};\n  this.handlexxx = this.handlexxx.bind(this);\n}\n")),(0,r.kt)("p",null,"\u5171\u6709\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"static get\xadDerived\xadState\xadFrom\xadProps\uff08props, state)"))),(0,r.kt)("p",null,"\u505a\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"componentWillMount"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"componentWillUpdate")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"componentWillReceiveProps")," \u7684\u66ff\u4ee3\u65b9\u6848\u3002\u5728\u8c03\u7528 render \u524d\uff0c\u6700\u540e\u4e00\u6b21\u4fee\u6539 state \u7684\u673a\u4f1a\u3002\u5b83\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7528\u6765\u66f4\u65b0 state\uff1b\u8fd4\u56de null \u5219\u4e0d\u66f4\u65b0\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u505a\u4e3a\u9759\u6001\u65b9\u6cd5\uff0c\u5176\u5185\u90e8\u4f7f\u7528 this \u62ff\u4e0d\u5230\u7ec4\u4ef6\u5b9e\u4f8b\u3002")),(0,r.kt)("p",null,"\u7ec4\u4ef6\u66f4\u65b0\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"shouldComponentUpdate(nextProps, nextState)"))),(0,r.kt)("p",null,"\u53ea\u6709\u5728\u901a\u8fc7\u4fee\u6539 props \u6216 state \u65f6\u624d\u4f1a\u89e6\u53d1\u3002\u9996\u6b21\u6e32\u67d3\u548c forceUpdate \u4e0d\u4f1a\u89e6\u53d1\u3002\u8fd9\u91cc\u662f React \u7ed9\u7528\u6237\u5224\u65ad\uff0c\u7ec4\u4ef6\u662f\u5426\u5e94\u5f53\u66f4\u65b0\u7684\u65f6\u673a\u3002\u5982\u679c\u8fd4\u56de flase\uff0c\u5219\u7ec4\u4ef6\u4e0d\u4f1a\u8c03\u7528 render \u53ca\u4ee5\u540e\u7684\u65b9\u6cd5\uff0c\u4e0d\u4f1a\u66f4\u65b0\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6027\u80fd\u4f18\u5316"),"\u3002\u901a\u8fc7\u5c06  ",(0,r.kt)("inlineCode",{parentName:"li"},"this.props")," \u548c nextProps \u6bd4\u8f83\uff0c\u4ee5\u53ca\u5c06 ",(0,r.kt)("inlineCode",{parentName:"li"},"this.state")," \u4e0e nextState \u6bd4\u8f83\uff0c\u5e76\u8fd4\u56de false\uff0c\u8ba9\u7ec4\u4ef6\u8df3\u8fc7\u66f4\u65b0\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5173\u8054\u77e5\u8bc6"),"\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"Diff"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"PureComponent"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"React.memo()"),"\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"render"))),(0,r.kt)("p",null,"render \u51fd\u6570\u5fc5\u987b\u5b9e\u73b0\uff0c\u5b83\u7684\u8fd4\u56de\u503c\u5c06\u6784\u5efa\u4e3a fiber node\uff0c\u53c2\u4e0e\u5230 WorkInProgress Fiber Tree \u7684\u6784\u5efa\u3002"),(0,r.kt)("p",null,"render \u51fd\u6570\u662f\u7eaf\u51fd\u6570\uff0c\u76f8\u540c\u7684 state \u548c props\uff0c\u5b83\u603b\u662f\u8fd4\u56de\u76f8\u540c\u7684\u6e32\u67d3\u7ed3\u679c\u3002"),(0,r.kt)("p",null,"render \u4f1a\u8fd4\u56de\uff1aReact Element\u3001Fragments\u3001string / number\uff08\u4f1a\u5f53\u4f5c\u6587\u672c\u8282\u70b9\uff09\u3001false / null\uff08\u7a7a\uff09\u3002"),(0,r.kt)("h4",{id:"\u6e32\u67d3\u9636\u6bb5-commit"},"\u6e32\u67d3\u9636\u6bb5 commit"),(0,r.kt)("p",null,"\u6e32\u67d3\u9636\u6bb5\u53c8\u6709\u4e09\u4e2a\u9636\u6bb5\uff1abefore mutation\u3001mutation\u3001layout\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"(1) \u5728 before mutation \u65f6")),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"getSnapshotBeforeUpdate(prevProps, prevState)")," \u7ec4\u4ef6\u66f4\u65b0")," "),(0,r.kt)("p",null,"\u5728\u9875\u9762\u5373\u5c06\u6e32\u67d3\u3001DOM \u6811\u5c1a\u672a\u6539\u53d8\u65f6\u89e6\u53d1\u3002\u53ef\u4ee5\u5728\u8fd9\u91cc\u83b7\u53d6 DOM \u6539\u53d8\u524d\u7684\u4fe1\u606f\u3002"),(0,r.kt)("p",null,"\u5b83\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\uff1a\u4e0a\u4e00\u4e2a\u72b6\u6001\u7684 props \u548c\u4e0a\u4e00\u4e2a\u72b6\u6001\u7684 state\u3002\u5b83\u7684\u8fd4\u56de\u503c\u5c06\u4f1a\u4f20\u9012\u7ed9 componentDidUpdate \u751f\u547d\u5468\u671f\u94a9\u5b50\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f\uff1a"),"\u83b7\u53d6\u66f4\u65b0\u524d DOM \u7684\u4fe1\u606f\u65f6\u3002\u4f8b\u5982\uff1a\u9700\u8981\u4ee5\u7279\u6b8a\u65b9\u5f0f\u5904\u7406\u6eda\u52a8\u4f4d\u7f6e\u7684\u804a\u5929\u7ebf\u7a0b\u7b49\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"(2) \u5728 mutaiton \u65f6")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"componentWillUnmount")," \u7ec4\u4ef6\u5378\u8f7d")),(0,r.kt)("p",null,"\u4f1a\u5728\u7ec4\u4ef6\u5378\u8f7d\u4ee5\u53ca\u9500\u6bc1\u4e4b\u524d\u8c03\u7528\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f"),"\uff1a\u6267\u884c\u7ec4\u4ef6\u7684\u6e05\u7406\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a\u6e05\u9664 timer\u3001\u53d6\u6d88\u7f51\u7edc\u8bf7\u6c42\u3001\u6e05\u9664\u8ba2\u9605\u7b49\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"(3) \u5728 layout \u65f6")),(0,r.kt)("p",null,"layout \u9636\u6bb5\uff0c\u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u7684\u8c03\u7528\u65f6\u673a\u662f\u76f8\u540c\u7684\uff0c\u4e00\u4e2a\u662f\u9488\u5bf9\u7ec4\u4ef6\u9996\u6b21\u6302\u8f7d\uff0c\u4e00\u4e2a\u662f\u9488\u5bf9\u7ec4\u4ef6\u66f4\u65b0\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"componentDidMount")," \u7ec4\u4ef6\u6302\u8f7d")),(0,r.kt)("p",null,"\u8be5\u751f\u547d\u5468\u671f\u65b9\u6cd5\u4f1a\u5728\u7ec4\u4ef6\u6302\u8f7d\u4e4b\u540e\u6267\u884c\uff0c\u4e5f\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u4e5f\u5c31\u662f\u5c06\u7ec4\u4ef6\u5bf9\u5e94\u7684 DOM \u63d2\u5165 DOM \u6811\u4e2d\u4e4b\u540e\u8c03\u7528\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6ce8\u610f\u907f\u514d"),"\uff1a\u5b83\u4f1a\u5728\u6d4f\u89c8\u5668\u66f4\u65b0\u89c6\u56fe\u4e4b\u524d\u8c03\u7528\uff0c\u5982\u679c\u5728 componentDidMount \u4e2d",(0,r.kt)("strong",{parentName:"li"},"\u76f4\u63a5\u8c03\u7528")," ",(0,r.kt)("inlineCode",{parentName:"li"},"this.setState"),"\uff0c\u5b83\u4f1a\u89e6\u53d1\u989d\u5916\u7684\u6e32\u67d3\uff0c\u4f1a\u518d\u4e00\u6b21\u8c03\u7528 render \u51fd\u6570\uff0c\u4f46\u662f\u6d4f\u89c8\u5668\u4e2d\u89c6\u56fe\u7684\u66f4\u65b0\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4f7f\u7528\u573a\u666f"),"\uff1a\u4f9d\u8d56\u4e8e DOM \u7684\u521d\u59cb\u5316\u64cd\u4f5c\u3002\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\u3001\u76d1\u542c\u4e8b\u4ef6\u3001\u83b7\u53d6\u5230\u771f\u5b9e DOM\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"componentDidMount(){\n  fetch('https://api.github.com/users').then(res=>res.json()).then(users=>{\n    console.log(users);\n    this.setState({users});\n  });\n}\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"componentDidUpdate(prevProps, PrevState, snapshot) ")," \u7ec4\u4ef6\u66f4\u65b0")),(0,r.kt)("p",null,"\u8be5\u751f\u547d\u5468\u671f\u65b9\u6cd5\u4f1a\u5728\u7ec4\u4ef6\u66f4\u65b0\u4e4b\u540e\u6267\u884c\uff0c\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\u3002"),(0,r.kt)("p",null,"\u8be5\u51fd\u6570\u6709\u4e09\u4e2a\u53c2\u6570\uff1a\u524d\u4e00\u4e2a\u72b6\u6001\u7684 props\uff0c\u524d\u4e00\u4e2a\u72b6\u6001\u7684 state\u3001getSnapshotBeforeUpdate \u7684\u8fd4\u56de\u503c\u3002"),(0,r.kt)("p",null,"\u53ef\u4ee5\uff08\u4e0d\u5efa\u8bae\uff09\u5728\u751f\u547d\u5468\u671f\u4e2d\u76f4\u63a5\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"this.setState"),"\u3002\u4f46\u5fc5\u987b\u5305\u88f9\u5728\u4e00\u4e2a\u6761\u4ef6\u8bed\u53e5\u4e2d\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6b7b\u5faa\u73af\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f\uff1a"),"\u5bf9 DOM \u8fdb\u884c\u64cd\u4f5c\uff0c\u6216\u8005\u8fdb\u884c\u7f51\u7edc\u8bf7\u6c42\u3002"),(0,r.kt)("h4",{id:"\u95ee\u9898react-17-\u4e3a\u4ec0\u4e48\u4f1a\u5e9f\u5f03-3-\u4e2a\u751f\u547d\u5468\u671f"},"\u95ee\u9898\uff1aReact 17 \u4e3a\u4ec0\u4e48\u4f1a\u5e9f\u5f03 3 \u4e2a\u751f\u547d\u5468\u671f"),(0,r.kt)("p",null,"componentWillMount\u3001componentWillReceiveProps\u3001componentWillUpdate \u8fd9\u4e09\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u5728 React 17 \u7248\u672c\u88ab\u5e9f\u5f03\u3002\u800c React \u6dfb\u52a0\u9759\u6001\u65b9\u6cd5 static getDerivedStateFromProps \u6765\u4ee3\u66ff\u3002"),(0,r.kt)("p",null,"React 16 \u66f4\u65b0\u4e86 fiber \u67b6\u6784\uff0c\u63d0\u51fa\u4e86\u8c03\u5ea6\u3001\u534f\u8c03\u3001\u6e32\u67d3\u4e09\u5927\u9636\u6bb5\u3002\u5176\u4e2d\u534f\u8c03\u9636\u6bb5\u662f\u5f02\u6b65\u53ef\u4e2d\u65ad\u7684\uff0c\u5982\u679c\u8c03\u5ea6\u9636\u6bb5\u5b89\u6392\u4e86\u4f18\u5148\u7ea7\u66f4\u9ad8\u7684\u4efb\u52a1\uff0c\u5f53\u524d\u534f\u8c03\u7684\u4efb\u52a1\u53ef\u88ab\u4e2d\u65ad\u3002"),(0,r.kt)("p",null,"\u8fd9\u5bfc\u81f4\u534f\u8c03\uff08render\uff09\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u53ef\u80fd\u4f1a\u88ab\u591a\u6b21\u6267\u884c\uff0c\u6240\u4ee5\u8fd9\u4e9b\u51fd\u6570\u9700\u8981\u5b9e\u73b0\u65e0\u526f\u4f5c\u7528\u7684\u7eaf\u51fd\u6570\u3002\u5982\u679c\u4f7f\u7528\u65e7\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u5728\u8fd9\u91cc\u5b9a\u4e49\u4e86\u7f51\u7edc\u8bf7\u6c42\uff0c\u90a3\u4e48\u6709\u53ef\u80fd\u4f1a\u6267\u884c\u591a\u6b21\u7f51\u7edc\u8bf7\u6c42\u3002\u800c\u901a\u8fc7\u65b0\u7684\u9759\u6001\u65b9\u6cd5 getDerivedStateFromProps\uff0c\u5f00\u53d1\u8005\u65e0\u6cd5\u4ece this \u6b63\u5e38\u83b7\u53d6\u7ec4\u4ef6\u5b9e\u4f8b\uff0c\u90a3\u4e48\u5c31\u4e0d\u80fd\u4fee\u6539 state \u548c\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\u4e86\u3002\u907f\u514d\u751f\u547d\u5468\u671f\u7684\u4e0d\u5b89\u5168\u4f7f\u7528\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u6267\u884c\u987a\u5e8f"},"\u95ee\u9898\uff1a\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u6267\u884c\u987a\u5e8f"),(0,r.kt)("p",null,"\u7236\u5b50\u7ec4\u4ef6\u95f4\uff0c\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u89e6\u53d1\u987a\u5e8f\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(59126).Z,width:"316",height:"251"})),(0,r.kt)("p",null,"\u603b\u7ed3\uff1a"),(0,r.kt)("p",null,"\u5728 render \u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u81ea\u4e0a\u800c\u4e0b\u8c03\u7528\uff0c\u5373\u7236\u7ec4\u4ef6\u5148\u8c03\u7528\uff0c\u5b50\u7ec4\u4ef6\u540e\u8c03\u7528\u3002"),(0,r.kt)("p",null,"\u7136\u540e\u662f commit \u9636\u6bb5\u4e2d\uff0c\u5212\u5206\u6bcf\u4e00\u4e2a\u5b50\u9636\u6bb5\u3002\u6bcf\u4e2a\u5728\u9636\u6bb5\u90fd\u662f\u5b50\u7ec4\u4ef6\u5148\u8c03\u7528\uff0c\u540e\u7236\u7ec4\u4ef6\u8c03\u7528\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"before mutation\uff1agetSnapshotBeforeUpdate\uff08\u66f4\u65b0\uff09"),(0,r.kt)("li",{parentName:"ul"},"mutation\uff1acomponentWillUnmoun (\u5378\u8f7d)"),(0,r.kt)("li",{parentName:"ul"},"layout\uff1acomponentDidMount\uff08\u6302\u8f7d\uff09\u6216 componentDidUpdate\uff08\u66f4\u65b0\uff09")),(0,r.kt)("p",null,"\u6700\u540e\u7684\u751f\u547d\u5468\u671f\u51fd\u6570"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {count: 0,}\n    console.log('App constructor');\n  }\n\n  static getDerivedStateFromProps() {\n    console.log('App static getDerivedStateFromProps');\n    return null;\n  }\n\n  shouldComponentUpdate(nextProps) {\n    console.log('App shouldComponentUpdate');\n    return true;\n  }\n\n  getSnapshotBeforeUpdate(prevProps) {\n    console.log('App getSnapshotBeforeUpdate');\n    return null;\n  }\n  \n  componentDidMount() {\n    console.log('App componentDidMount');\n  }\n\n  componentDidUpdate() {\n    console.log('App componentDidUpdate');\n  }\n\n  render() {\n    console.log('App render');\n    return (\n      <div>\n        <div onClick={() => this.setState((count) => ({ count: count + 1 }))}>App</div>\n        <Child order={1} />\n        <Child order={2} />\n      </div>\n    )\n  }\n}\n\nclass Child extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {count: 0}\n    console.log(`Child${this.props.order} constructor`);\n  }\n\n  static getDerivedStateFromProps(props) {\n    console.log(`Child${props.order} static getDerivedStateFromProps`);\n    return null;\n  }\n\n  shouldComponentUpdate(nextProps) {\n    console.log(`Child${nextProps.order} shouldComponentUpdate`);\n    return true;\n  }\n\n  getSnapshotBeforeUpdate(prevProps) {\n    console.log(`Child${prevProps.order} getSnapshotBeforeUpdate`);\n    return null;\n  }\n  \n  componentDidMount() {\n    console.log(`Child${this.props.order} componentDidMount`);\n  }\n  \n  componentDidUpdate() {\n    console.log(`Child${this.props.order} componentDidUpdate`);\n  }\n\n  render() {\n    console.log(`Child${this.props.order} render`);\n    return (\n      <div onClick={() => this.setState((count) => ({ count: count + 1 }))}>\n        Child{this.props.order}\n      </div>\n    )\n  }\n}\n\nexport default App;\n")),(0,r.kt)("p",null,"\u9996\u6b21\u6e32\u67d3\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 16.24.03",src:n(9012).Z,width:"2556",height:"1132"})),(0,r.kt)("p",null,"\u5b50\u7ec4\u4ef6\u72b6\u6001\u6539\u53d8\uff1a\u5f53\u70b9\u51fb\u6587\u5b57 Child1 \u65f6\uff0c\u5176\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 16.30.47",src:n(8757).Z,width:"1502",height:"312"})),(0,r.kt)("p",null,"\u7236\u7ec4\u4ef6\u72b6\u6001\u6539\u53d8\uff1a\u70b9\u51fb\u7236\u7ec4\u4ef6\u6587\u5b57\uff0c\u8ba9 ",(0,r.kt)("inlineCode",{parentName:"p"},"this.seteState")," \u89e6\u53d1"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 16.34.02",src:n(9661).Z,width:"1500",height:"720"})),(0,r.kt)("h3",{id:"\u95ee\u9898react-hooks"},"\u95ee\u9898\uff1aReact hooks"),(0,r.kt)("p",null,"React 16+ \u5f00\u59cb\uff0c\u901a\u8fc7 fiber \u7ed3\u6784\u5b9e\u73b0\u4e86\u534f\u8c03\u9636\u6bb5\u7684\u5f02\u6b65\u53ef\u4e2d\u65ad\u3002\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u4f1a\u88ab\u8f6c\u5316\u4e3a fiber node\uff0c\u53c2\u4e0e WorkInProgress fiber tree \u7684\u6784\u5efa\u3002"),(0,r.kt)("h4",{id:"hooks-\u7684\u7279\u70b9"},"Hooks \u7684\u7279\u70b9"),(0,r.kt)("p",null,"\u5728\u8c03\u548c\u9636\u6bb5\uff0chooks \u4f1a\u88ab\u521d\u59cb\u5316\u5e76\u7ed1\u5b9a\u5728\u51fd\u6570\u7ec4\u4ef6 fiber.memoizedState \u4e0a\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u7c7b\u7ec4\u4ef6 fiber \uff0c\u7528 memoizedState \u4fdd\u5b58 state \u4fe1\u606f\uff1b",(0,r.kt)("strong",{parentName:"li"},"\u5bf9\u4e8e\u51fd\u6570\u7ec4\u4ef6 fiber \uff0c\u7528 memoizedState \u4fdd\u5b58 hooks \u4fe1\u606f"),"\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u94fe\u8868"),"\u3002\u5728 memoizedState \u5c5e\u6027\u4e2d\uff0chooks \u901a\u8fc7 .next \u5c5e\u6027\u628a\u7ed1\u5b9a\u5728\u5f53\u524d\u51fd\u6570\u7ec4\u4ef6\u7684 hooks \u8fde\u63a5\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u94fe\u8868\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u521b\u5efa"),"\u3002\u51fd\u6570\u7ec4\u4ef6\u7684 hooks \u5728\u6302\u8f7d\u4f1a\u8c03\u7528 Mount \u51fd\u6570\uff0c\u5728\u66f4\u65b0\u65f6\u4f1a\u8c03\u7528 update\u51fd\u6570\u3002\u6bd4\u5982\u7b2c\u4e00\u6b21\u8c03\u7528 useState \u4f1a\u6267\u884c mountState\uff0c\u540e\u9762\u518d\u8c03\u7528 useState \u4f1a\u6267\u884c updateState\u3002\u800c\u8fd9\u4e2a\u51fd\u6570\u7684\u6267\u884c\uff0c\u4f1a\u6839\u636e\u4e0d\u540c\u7684 hooks \u4f1a\u751f\u6210\u5bf9\u5e94\u7684 hooks \u5bf9\u8c61\uff0c\u7ed1\u5b9a\u5728 next \u94fe\u4e0a\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"updateQueue \u5b58\u653e\u6bcf\u4e2a useEffect/useLayoutEffect \u4ea7\u751f\u7684\u526f\u4f5c\u7528\u7ec4\u6210\u7684\u94fe\u8868\u3002\u5728 commit \u9636\u6bb5\u66f4\u65b0\u8fd9\u4e9b\u526f\u4f5c\u7528\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6709\u5e8f"),"\u3002\u6240\u4ee5\uff0cReact \u7528\u94fe\u8868\u6765\u4e25\u683c\u4fdd\u8bc1 hooks \u7684\u987a\u5e8f\u3002\u5982\u679c\u6211\u4eec\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u5bf9 hooks \u7684\u6dfb\u52a0\u4f7f\u7528 if \u5224\u65ad\u8bed\u53e5\u3002\u8fd9\u4f1a\u5bfc\u81f4\u4e00\u6b21\u66f4\u65b0\u7684\u524d\u540e hooks \u94fe\u4e0d\u4e00\u81f4\uff0c\u5177\u4f53\u6765\u8bf4\uff0ccurrent tree \u548c  WorkInProgress \u4e2d\uff0c\u5bf9\u540c\u4e00\u4e2a\u51fd\u6570\u7ec4\u4ef6\u7684 hooks \u94fe\u4fdd\u5b58\u7684\u5185\u5bb9\u4e0d\u4e00\u81f4\u3002\u5982\u679c\u6b64\u65f6 WorkIn Progress \u8981\u4ece current \u4e2d\u8bfb\u53d6 ",(0,r.kt)("inlineCode",{parentName:"p"},"state"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"ref")," \u7b49\u4fe1\u606f\uff0c\u539f\u672c\u6309\u7167 next \u94fe\u6761\u53bb\u5bf9\u7b49\u8bfb\u53d6\uff08\u7c7b\u4f3c\u6570\u7ec4\u4e0b\u6807\u8bfb\u53d6\uff09\uff0c\u4f46\u56e0\u4e3a\u524d\u540e\u4e24\u6b21 hooks \u94fe\u5df2\u7ecf\u53d1\u751f\u6539\u53d8\uff0c\u5bf9\u7b49\u4f4d\u7684 hooks \u5bf9\u8c61\u4e0d\u4e00\u81f4\uff0c\u6240\u4ee5\u53d1\u751f\u9519\u8bef\uff0cReact \u9632\u6b62\u9519\u8bef\u53d1\u751f\uff0c\u4f1a\u629b\u51fa\u9519\u8bef\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48 Hooks \u4e0d\u53ef\u4ee5\u5728\u6761\u4ef6\u8bed\u53e5\u5b9a\u4e49\u4e86\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 17.20.09",src:n(15535).Z,width:"2352",height:"1770"})),(0,r.kt)("h4",{id:"hooks-\u4ecb\u7ecd-9"},"Hooks \u4ecb\u7ecd (9)"),(0,r.kt)("p",null,"\u6570\u636e\u66f4\u65b0\u9a71\u52a8\uff1auseState\u3001useReducer"),(0,r.kt)("p",null,"\u6267\u884c\u526f\u4f5c\u7528\uff1auseEffect\u3001useLayoutEffect"),(0,r.kt)("p",null,"\u72b6\u6001\u83b7\u53d6/\u4f20\u9012\uff1auseContext\u3001useRef\u3001useImperativeHandle"),(0,r.kt)("p",null,"\u72b6\u6001\u6d3e\u751f/\u4fdd\u5b58\uff1auseMemo\u3001useCallback"),(0,r.kt)("h4",{id:"usestate"},"useState"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const [ state , setState ] = useState(initData);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"state\uff1a\u76ee\u7684\u63d0\u4f9b\u7ed9 UI \uff0c\u4f5c\u4e3a\u6e32\u67d3\u89c6\u56fe\u7684\u6570\u636e\u6e90\u3002"),(0,r.kt)("li",{parentName:"ul"},"setState\uff1a\u6539\u53d8 state \u7684\u51fd\u6570\uff0c\u63a8\u52a8\u51fd\u6570\u7ec4\u4ef6\u6e32\u67d3\u7684\u89e6\u53d1\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ul"},"initData\uff1a\u83b7\u5f97 state \u7684\u521d\u59cb\u503c\u3002\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u5982\u679c\u662f\u5177\u4f53\u503c\uff0c\u76f4\u63a5\u4f5c\u4e3a\u521d\u59cb\u503c\u3002 \u5982\u679c\u662f\u51fd\u6570\uff0c\u6267\u884c\u51fd\u6570\u7684\u8fd4\u56de\u503c\u505a\u4e3a\u521d\u59cb\u5316\u503c\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6ce8\u610f\u4e8b\u9879"),"\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u201c\u6240\u8c13\u5f02\u6b65\u201d"),"\uff0c\u5728\u51fd\u6570\u7ec4\u4ef6\u4e00\u6b21\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\uff0cstate \u7684\u503c\u662f\u56fa\u5b9a\u4e0d\u53d8\u7684\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4e14\u5f53\u524d\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\u83b7\u53d6\u4e0d\u5230 setState \u6539\u53d8\u7684\u503c\uff0c\u53ea\u6709\u5728\u4e0b\u4e00\u6b21 render \u540e\u624d\u80fd\u83b7\u53d6\u5230\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6d45\u5bf9\u6bd4"),"\uff0c\u5982\u679c setState \u4f20\u5165\u4e86\u76f8\u540c\u7684\u503c\uff0c\u7ec4\u4ef6\u5c31\u4e0d\u4f1a\u89e6\u53d1 render \u66f4\u65b0\u3002")),(0,r.kt)("h4",{id:"usereducer"},"useReducer"),(0,r.kt)("p",null,"useReducer \u662f react-hooks \u63d0\u4f9b\u7684\u80fd\u591f\u5728\u65e0\u72b6\u6001\u7ec4\u4ef6\u4e2d\u8fd0\u884c\u7684\uff0c\u7c7b\u4f3c redux \u7684\u529f\u80fd api\u3002"),(0,r.kt)("p",null,"useReducer \u662f useState hooks \u7684\u6269\u5c55\u3002\u5728\u903b\u8f91\u76f8\u5bf9\u590d\u6742\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u7528 reducer \u7684 switch \u8fdb\u884c\u5224\u65ad\uff0c\u901a\u8fc7 dispatch \u8fbe\u5230\u5bf9\u540c\u4e00\u4e2a state \u6709\u4e0d\u540c\u7684\u66f4\u65b0\u65b9\u6cd5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const [ state , dispatch ] = useReducer((state, action) => {\n  switch(action.type) {\n      //\u589e\u52a0\u3001\u51cf\u5c11\u3001\u6e05\u7a7a\u3001\u8d4b\u503c..\n      return newState;\n  }\n});\n\n// \u4f7f\u7528\uff1a\ndispatch({ type: "increment" });\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"state\uff1a\u76ee\u7684\u63d0\u4f9b\u7ed9 UI \uff0c\u4f5c\u4e3a\u6e32\u67d3\u89c6\u56fe\u7684\u6570\u636e\u6e90\u3002"),(0,r.kt)("li",{parentName:"ul"},"dispatch\uff1a\u6539\u53d8 state \u7684\u51fd\u6570\uff0c\u63a8\u52a8\u51fd\u6570\u7ec4\u4ef6\u6e32\u67d3\u7684\u89e6\u53d1\u51fd\u6570\u3002\u548c useState \u7684 setState \u4e00\u6837\u3002"),(0,r.kt)("li",{parentName:"ul"},"reducer\uff1a\u76f8\u5f53\u4e8e redux \u7684 reducer\u3002\u662f\u4e00\u4e2a\u5165\u53c2\u6709 \u65e7state + action\u3001\u5185\u90e8\u6709 switch \u7684\u7eaf\u51fd\u6570\u3002\u51fd\u6570\u5185\u90e8\u5b9e\u73b0\u4e86\u6839\u636e\u4e0d\u540c\u7684 type\uff0c\u5bf9 state \u8fdb\u884c\u64cd\u4f5c\u5e76\u8fd4\u56de\uff0c\u4ece\u800c\u66f4\u65b0 state\u3002")),(0,r.kt)("p",null,"\u4f7f\u7528\u65b9\u5f0f\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u5c01\u88c5"),"\u3002\u5f53\u5bf9 state \u66f4\u65b0\u7684\u903b\u8f91\u76f8\u5bf9\u590d\u6742\uff0c\u53ef\u4ee5\u901a\u8fc7 useReducer \u5305\u88c5\u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u590d\u7528"),"\u3002\u5982\u679c\u591a\u4e2a\u7ec4\u4ef6\u5747\u6709\u4e00\u4e2a\u76f8\u540c\u7684\u5224\u65ad\u65b9\u5f0f\uff08\u53ef\u4ee5\u7528\u540c\u4e00\u4e2a switch \u5224\u65ad\uff09\uff0c\u90a3\u4e48\u5355\u72ec\u5b9a\u4e49\u4e00\u4e2a reducer \u7eaf\u51fd\u6570\uff0c\u7136\u540e\u4e0d\u540c\u7684\u7ec4\u4ef6 import \u5f15\u5165\u8fd9\u4e2a reducer \u5373\u53ef\u3002")),(0,r.kt)("h4",{id:"useeffect"},"useEffect"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"useEffect(()=>{\n  // code..\n  return destory;\n},[dep1, dep2])\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a callback\uff0c\u4e3b\u4f53\u4e3a useEffect \u7684\u56de\u8c03\u51fd\u6570\uff0c\u5f53\u4f9d\u8d56\u53d1\u751f\u53d8\u5316\u65f6\u6267\u884c\u3002"),(0,r.kt)("li",{parentName:"ul"},"return destory \u9500\u6bc1\u51fd\u6570\uff0c\u4f5c\u4e3a\u4e0b\u4e00\u6b21 callback \u6267\u884c\u4e4b\u524d\u8c03\u7528\uff0c\u7528\u4e8e\u6e05\u9664\u4e0a\u4e00\u6b21 callback \u4ea7\u751f\u7684\u526f\u4f5c\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u4f9d\u8d56\uff0c\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5f53\u4f9d\u8d56\u9879\u6539\u53d8\uff0c\u5c31\u4f1a\u6267\u884c\u4e0a\u4e00\u6b21\u7684\u9500\u6bc1\u51fd\u6570\uff0c\u65b0\u7684\u56de\u8c03\u51fd\u6570\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e0d\u6dfb\u52a0\u4efb\u4f55\u4f9d\u8d56\uff0c\u7ec4\u4ef6 render \u5c31\u4f1a\u89e6\u53d1\uff0c\u6302\u8f7d / \u66f4\u65b0\u90fd\u4f1a\u89e6\u53d1\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u6dfb\u52a0\u7a7a\u6570\u7ec4 ",(0,r.kt)("inlineCode",{parentName:"li"},"[]"),"\uff0c\u7ec4\u4ef6\u53ea\u6709\u5728\u6302\u8f7d\u65f6\u89e6\u53d1\u3002")))),(0,r.kt)("p",null,"useEffect \u662f ",(0,r.kt)("strong",{parentName:"p"},"\u5f02\u6b65\u8c03\u7528")," \u7684\u3002\u5173\u8054\u77e5\u8bc6\uff1a\u6e32\u67d3\uff08commit\u9636\u6bb5\u5de5\u4f5c\u6d41\u7a0b\uff09\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"before mutation\uff1a\u521b\u5efa\u5fae\u4efb\u52a1\uff0c\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"li"},"useEffect")," \u7684\u56de\u8c03\u51fd\u6570\u8bbe\u5b9a normal Scheduler Priority\uff0c\u52a0\u5165\u4efb\u52a1\u961f\u5217\u3002"),(0,r.kt)("li",{parentName:"ul"},"layout\uff1a\u7ed1\u5b9a useEffect \u7684\u9500\u6bc1 + \u56de\u8c03\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ul"},"commit \u5b8c\u6210\uff0c\u7b49\u5f85\u4e3b\u7ebf\u7a0b\u4efb\u52a1\u5b8c\u6210\uff08DOM \u66f4\u65b0\uff0c\u89c6\u56fe\u7ed8\u5236\u5b8c\u6bd5\uff09\u3002\u5f02\u6b65\u6267\u884c useEffect \u7684\uff08\u4e0a\u4e00\u6b21\uff09\u9500\u6bc1\u51fd\u6570 + \uff08\u672c\u6b21\uff09\u56de\u8c03\u51fd\u6570\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"useEffect \u56de\u8c03\u51fd\u6570\u4e0d\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u7ed8\u5236\u89c6\u56fe\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u65b9\u5f0f"),"\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u56de\u8c03\u51fd\u6570\uff1a\u521d\u59cb\u5316 state\u3001\u5f02\u6b65\u6570\u636e\u8bf7\u6c42\u3001\u6ce8\u518c\u4e8b\u4ef6\u76d1\u542c\u3001\u8bbe\u7f6e\u5b9a\u65f6\u5668\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u9500\u6bc1\u51fd\u6570\uff1a\u6ce8\u9500\u4e8b\u4ef6\u76d1\u542c\u3001\u6e05\u695a\u5b9a\u65f6\u5668\u3002")),(0,r.kt)("h4",{id:"uselayouteffect"},"useLayoutEffect"),(0,r.kt)("p",null,"\u53c2\u6570\u903b\u8f91\u548c useEffect \u76f8\u540c\uff0c\u53ea\u662f\u89e6\u53d1\u65f6\u673a\u4e0d\u540c\uff0cuseLayoutEffect \u540c\u6b65\u8c03\u7528\u3002\u5728\u6e32\u67d3\u9636\u6bb5\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"mutation \u9636\u6bb5\uff1a\u6267\u884c useLayoutEffecta \u7684\u9500\u6bc1\u51fd\u6570\uff1b"),(0,r.kt)("li",{parentName:"ul"},"layout \u9636\u6bb5\uff1a\u6267\u884c useLayoutEffect \u7684\u56de\u8c03\u51fd\u6570\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u65b9\u5f0f\uff1a")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u56de\u8c03\u51fd\u6570\uff1a\u5728\u6700\u540e\u7ed8\u5236 dom \u524d\uff0c\u9700\u8981\u5bf9 dom \u8fdb\u884c\u8c03\u6574\uff0c\u6ce8\u610f\u4e0d\u8981\u6b7b\u5faa\u73af\u3002")),(0,r.kt)("p",null,"useEffect \u548c useLayoutEffect \u7684\u533a\u522b\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u524d\u8005\u5f02\u6b65\u8c03\u7528\uff0c\u540e\u8005\u540c\u6b65\u8c03\u7528\uff08\u53c2\u8003\u5728 commit \u9636\u6bb5\u7684\u5904\u7406\u6d41\u7a0b\uff09\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u524d\u8005\u4e0d\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u7ed8\u5236\uff0c\u540e\u8005\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u7ed8\u5236\u3002")),(0,r.kt)("p",null,"\u6240\u4ee5\uff0c\u5982\u679c\u8981\u5bf9 DOM \u8fdb\u884c\u4fee\u6539\uff0c\u5219\u4e0d\u53ef\u4ee5\u5728 useEffect \u4e2d\u8bbe\u7f6e\uff0c useEffect \u6267\u884c\u662f\u5728\u6d4f\u89c8\u5668\u7ed8\u5236\u89c6\u56fe\u4e4b\u540e\uff0c\u63a5\u4e0b\u6765\u53c8\u6539 DOM \uff0c\u4f1a\u5bfc\u81f4\u6d4f\u89c8\u5668\u518d\u6b21\u56de\u6d41\u548c\u91cd\u7ed8\u3002\u800c useLayoutEffect \u5728 commit \u9636\u6bb5\u540c\u6b65\u6267\u884c\uff0c\u963b\u585e\u6d4f\u89c8\u5668\u7684\u7ed8\u5236\uff0c\u91cd\u65b0\u8fdb\u5165\u534f\u8c03\u9636\u6bb5\uff0c\u5219\u9875\u9762\u4e0d\u4f1a\u53d1\u751f\u753b\u9762\u95ea\u73b0\uff0c\u6296\u52a8\u7684\u95ee\u9898\u3002"),(0,r.kt)("h4",{id:"usecontext"},"useContext"),(0,r.kt)("p",null,"useContext \u53ef\u4ee5\u4ee3\u66ff ",(0,r.kt)("inlineCode",{parentName:"p"},"context.Consumer")," \u6765\u83b7\u53d6 Provider \u4e2d\u4fdd\u5b58\u7684 value \u503c\uff0c\u800c\u4e0d\u9700\u8981\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"comsumer"),"\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"Context")," \u53ef\u4ee5\u907f\u514d\u7684\u7ec4\u4ef6\u7684\u5c42\u5c42 ",(0,r.kt)("inlineCode",{parentName:"li"},"props")," \u5d4c\u5957\u7684\u95ee\u9898\u3002\u4f46\u662f\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"context.Consumer")," \u62ff\u503c\u65f6\uff0c\u4f1a\u5305\u88f9\u4e00\u5c42 ",(0,r.kt)("inlineCode",{parentName:"li"},"<Comsumer>")," \u7ec4\u4ef6\u3002")),(0,r.kt)("p",null,"\u4f7f\u7528 useContext hook \u53ef\u4ee5\u4e0d\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"<Consumer>")," \u5d4c\u5957\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u65b9\u5f0f"),"\uff1a\u83b7\u53d6\u5168\u5c40\u7684class \u524d\u7f00\uff0c\u6216\u8005\u56fd\u9645\u5316\uff0cUI \u4e3b\u9898\u989c\u8272\u7b49\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"/* \u7528useContext\u65b9\u5f0f */\nconst DemoContext1 = ()=> {\n  const value = useContext(Context);\n  return <div> my name is { value.name }</div>\n}\n\n/* \u7528Context.Consumer \u65b9\u5f0f */\nconst DemoContext2 = ()=>{\n  return <Context.Consumer>\n    { (value)=> <div> my name is { value.name }</div> }\n  </Context.Consumer>\n}\n\nexport default ()=>{\n  return <div>\n    <Context.Provider value={{ name:'alien' , age:18 }} >\n      <DemoContext1 />\n      <DemoContext2 />\n    </Context.Provider>\n  </div>\n}\n")),(0,r.kt)("h4",{id:"useref"},"useRef"),(0,r.kt)("p",null,"useRef \u7528\u6765\u4fdd\u6301\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u63a5\u53d7\u4e00\u4e2a\u72b6\u6001 initState \u4f5c\u4e3a\u521d\u59cb\u503c\uff0c\u8fd4\u56de\u4e00\u4e2a ref \u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},".current")," \u5c5e\u6027\u5c31\u662f ref \u5bf9\u8c61\u4fdd\u6301\u5f15\u7528\u7684\u5bf9\u8c61\uff08initState\uff09\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},".current")," \u6765\u6539\u53d8\u5f15\u7528\u72b6\u6001\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const cur = React.useRef(initState);\ncur.current  // ref element\n")),(0,r.kt)("p",null,"\u7279\u70b9\uff1a\u4e0d\u8bba\u8be5\u7ec4\u4ef6\u5982\u4f55\u66f4\u65b0\uff0c\u8be5\u5f15\u7528\u90fd\u4e0d\u4f1a\u88ab\u9500\u6bc1\uff0c\u800c\u4e00\u76f4\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\u4e0d\u53d8\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u65b9\u5f0f"),"\uff1a\u901a\u5e38\u7528\u6765\u4fdd\u6301\u5bf9 DOM \u5143\u7d20\u7684\u5f15\u7528\uff0c\u6216\u5bf9\u4e00\u4e2a\u56fa\u5b9a\u72b6\u6001\u7684\u5f15\u7528\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const DemoUseRef = () =>{\n  const dom = useRef(null);\n  const handerSubmit = () =>{\n    console.log(dom.current);\n    //  \u6253\u5370dom\u8282\u70b9\uff1a<div>\u8868\u5355\u7ec4\u4ef6</div>  \n  }\n  return <div>\n    <div ref={dom}>\u8868\u5355\u7ec4\u4ef6</div>\n    {/* ref \u6807\u8bb0\u5f53\u524ddom\u8282\u70b9 */}\n    <button onClick={()=>handerSubmit()}>\u63d0\u4ea4</button> \n  </div>\n}\n")),(0,r.kt)("h4",{id:"useimperativehandle"},"useImperativeHandle"),(0,r.kt)("p",null,"\u7528\u4e8e\u7236\u7ec4\u4ef6\u8c03\u7528\u5b50\u7ec4\u4ef6\u7684\u5c5e\u6027/\u65b9\u6cd5\u3002\u5b50\u7ec4\u4ef6\u5bf9\u5916\u66b4\u9732 / \u63d0\u4f9b\u90e8\u5206\u529f\u80fd\uff0c\u4f9b\u7236\u7ec4\u4ef6\u8c03\u7528\u3002"),(0,r.kt)("p",null,"\u5f15\uff1a",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"React.forwardRef()"))," \u7528\u4e8e\u8f6c\u53d1 ref\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u628a\u4e00\u4e2a\u51fd\u6570\u7ec4\u4ef6\uff08\u6709 props, ref \u4e24\u4e2a\u53c2\u6570\uff09\u4f20\u5165 forwardRef\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a \u7ed1\u5b9a\u597d ref \u7684\u65b0\u7ec4\u4ef6\u3002")),(0,r.kt)("p",null,"\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u901a\u8fc7 forwardRef\uff0cFather \u4f20\u9012\u7ed9 Son \u4e00\u4e2a sonRef \u5bf9\u8c61\u3002\u800c Son \u63a5\u6536\u5230 sonRef \u540e\uff0c\u628a\u5b83\u7ed1\u5b9a\u5728 input DOM \u5143\u7d20\u4e0a\u3002\u8fd9\u6837\uff0c\u7236\u7ec4\u4ef6\u5c31\u6301\u6709\u4e86\u4e00\u4e2a\u5b50\u7ec4\u4ef6\u4e2d input \u5143\u7d20\u7684\u5f15\u7528\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'import React,{useRef,forwardRef} from \'react\'\n\nconst Son = forwardRef((props, ref) => {\n  return <div>\n    <input type="text" defaultValue={props.value} ref={ref} />\n  </div>\n})\n\nconst Father = () => {\n  const sonRef = useRef(null);\n  return <div>\n    <Son ref={sonRef} value=\'\u5b50\u7ec4\u4ef6\' />\n    <button onClick={() => console.log(sonRef.current)}>\u70b9\u51fb\u6253\u5370 sonRef</button>\n   \n  </div>\n}\n\n// \u70b9\u51fb\u5b50\u7ec4\u4ef6\u7684 button \u540e\uff0c\u63a7\u5236\u680f\u8f93\u51fa\uff1a<input type="text" value="\u5b50\u7ec4\u4ef6"></input>\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u4ee3\u7801\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://codesandbox.io/s/festive-elion-4w514b?file=/src/App.js"},"https://codesandbox.io/s/festive-elion-4w514b?file=/src/App.js"))),(0,r.kt)("p",null,"\u4e0a\u9762\u7684\u4f8b\u5b50\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e Son \u6765\u8bf4\uff0c\u5165\u53c2 ",(0,r.kt)("inlineCode",{parentName:"p"},"ref")," \u5c31\u662f\u7236\u7ec4\u4ef6\u53d1\u6765\u7684\uff0c\u7528\u4e8e\u8c03\u7528\u5b50\u7ec4\u4ef6\u7684\u5f15\u7528\u3002\u4f46\u6709\u65f6\u5b50\u7ec4\u4ef6\u9700\u8981\u5bf9\u7236\u7ec4\u4ef6\u66b4\u9732\u66f4\u591a\u6307\u5b9a\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u8fd9\u662f\u5c31\u9700\u8981 ",(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle")," \u5bf9\u5176\u6253\u5305\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"useImperativeHandle"),"  \u63a5\u6536\u4e09\u4e2a\u53c2\u6570\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ref\uff1a\u7236\u7ec4\u4ef6\u4f20\u9012\u8fc7\u6765\u7684 ref\uff0c\u4e5f\u5c31\u662f\u5c06\u8981\u7ed1\u5b9a\u7684 ref \u5f15\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"callback\uff1a\u521d\u59cb\u5316\u65f6\u4f1a\u8c03\u7528\u8be5\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u4f1a\u7ed1\u5b9a\u5728 ref \u5f15\u7528\u4e0a\uff0c\u88ab\u7236\u7ec4\u4ef6\u5f15\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"deps\uff1a\u6570\u7ec4\uff0c\u6210\u5458\u662f\u4f9d\u8d56\u9879\uff0c\u5f53\u4f9d\u8d56\u53d1\u751f\u6539\u53d8\uff0c\u5c31\u4f1a\u91cd\u65b0\u6267\u884c callback\uff0c\u91cd\u65b0\u6dfb\u52a0\u7ed1\u5b9a\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const SonComponent = forwardRef((props, ref) => {\n\n  useImperativeHandle(ref,() => {\n    return {\n      handle1: () => {},\n      handle2: () => {}\n      // ..\n    }\n  }, deps);\n\n}\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f"),"\uff1a\u5f53\u7236\u7ec4\u4ef6\u9700\u8981\u4f7f\u7528\u5b50\u7ec4\u4ef6\u90e8\u5206\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u800c\u5b50\u7ec4\u4ef6\u4e0d\u5e0c\u671b\u628a\u81ea\u5df1\u5168\u90e8\u5185\u5bb9\u90fd\u5bf9\u5916\u66b4\u9732\u65f6\uff0c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"forward.Ref")," + ",(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle")," \u7684\u914d\u5408\uff0c\u53ef\u4ee5\u9488\u5bf9\u6027\u7684\u66b4\u9732\u90e8\u5206\u529f\u80fd\u3002\u5b9e\u73b0\u7236\u7ec4\u4ef6\u8c03\u7528\u5b50\u7ec4\u4ef6\u7684\u90e8\u5206\u65b9\u6cd5\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7236\u7ec4\u4ef6\u662f\u4e00\u4e2a\u63d0\u4ea4\u7ec4\u4ef6\uff0cn \u4e2a\u5b50\u7ec4\u4ef6\u662f\u8868\u5355\u3002\u7236\u7ec4\u4ef6\u9700\u8981\u8c03\u7528\u5168\u90e8\u5b50\u7ec4\u4ef6\u7684\u63d0\u4ea4\u51fd\u6570\uff0c\u8ba9\u5b50\u7ec4\u4ef6\u628a\u8868\u5355\u4fe1\u606f\u63d0\u4ea4\u7ed9\u7236\u7ec4\u4ef6\u3002")),(0,r.kt)("h4",{id:"usememo"},"useMemo"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const memoizedValue = useMemo(() => { \n  // function \n}, deps);\n")),(0,r.kt)("p",null,"\u6027\u80fd\u4f18\u5316\u3002useMemo \u4f1a\u7f13\u5b58\u4e00\u4e2a ",(0,r.kt)("strong",{parentName:"p"},"\u5f15\u7528"),"\uff0c\u8fd9\u4e2a\u5f15\u7528\u53ef\u4ee5\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u503c\u3001\u5bf9\u8c61\u3001\u51fd\u6570\u3002\u5728\u521d\u59cb\u5316\u7ec4\u4ef6\u65f6\uff0c\u4f1a\u8c03\u7528\u56de\u8c03\u51fd\u6570\uff0c\u5e76\u8ba9 ",(0,r.kt)("inlineCode",{parentName:"p"},"memoizedValue")," \u7f13\u5b58\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002\u5f53 deps \u4f9d\u8d56\u9879\u4e0d\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5373\u4f7f\u53d1\u751f\u591a\u6b21 render\uff0c\u4e5f\u4e0d\u4f1a\u91cd\u65b0\u6267\u884c\u56de\u8c03\u51fd\u6570\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"memoizedValue")," \u4f1a\u4e00\u76f4\u6301\u76f8\u540c\u7684\u5f15\u7528\uff0c\u4ece\u800c\u8282\u7701\u76f8\u540c\u4ee3\u7801\u7684\u6267\u884c\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e0d\u6dfb\u52a0\u4f9d\u8d56\uff0c\u5219 ",(0,r.kt)("inlineCode",{parentName:"li"},"useMemo")," \u5728\u6bcf\u6b21\u6e32\u67d3\u65f6\u90fd\u4f1a\u8ba1\u7b97\u65b0\u7684\u503c\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f"),"\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u590d\u6742\u8ba1\u7b97\uff0c\u5f53\u521b\u5efa\u4e00\u4e2a\u503c\uff0c\u4f1a\u4ea7\u751f\u9ad8\u6602\u7684\u5f00\u9500\uff08\u6bd4\u5982\u8ba1\u7b97\u4e0a\u5343\u6b21\u624d\u4f1a\u751f\u6210\u53d8\u91cf\u503c\uff09\uff0c\u6709\u5fc5\u8981\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"useMemo"),"\uff0c\u5f53\u7136\u8fd9\u79cd\u573a\u666f\u5c11\u4e4b\u53c8\u5c11\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7 props \uff0c\u7236\u7ec4\u4ef6\u7ed9\u5b50\u7ec4\u4ef6\u4f20\u9012\u5c40\u90e8\u53d8\u91cf\u3002\u7236\u7ec4\u4ef6\u628a\u8fd9\u4e2a\u5c40\u90e8\u53d8\u91cf\u901a\u8fc7 useMemo \u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u3002\u4e0d\u8bba\u7236\u7ec4\u4ef6\u5982\u4f55 rerender\uff0c\u8be5\u53d8\u91cf\u4e0d\u4f1a\u53d1\u751f\u6539\u53d8\u3002\u6240\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"memo()")," \u7684\u5305\u88f9\u7684\u5b50\u7ec4\u4ef6\uff0c\u4f1a\u5bf9\u4f20\u5165\u7684\u53d8\u91cf shallow equal\uff0c\u987a\u5229\u7684\u907f\u514d\u91cd\u65b0\u6e32\u67d3\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u4f20\u5165\u53d8\u91cf\u5728\u7236\u7ec4\u4ef6\u4e2d\uff0c\u6ca1\u6709\u901a\u8fc7 useMemo \u5305\u88f9\uff0c\u4ec5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"memo()"),"\u5305\u88f9\u81ea\u7ec4\u4ef6\u662f\u6ca1\u7528\u7684\u3002\u52a0\u5165\u4f20\u5165\u53d8\u91cf\u662f\u4e00\u4e2a\u5bf9\u8c61 object\uff0c\u7236\u7ec4\u4ef6\u6bcf\u6b21 render \u90fd\u4f1a\u5bfc\u81f4\u8be5 object \u91cd\u65b0\u521b\u5efa\uff0c\u5b50\u7ec4\u4ef6\u7684 shallow equal \u4f1a\u53d1\u73b0\u524d\u540e object \u5730\u5740\u4e0d\u4e00\u81f4\uff0c\u4ece\u800c\u5224\u5b9a\u4e3a props \u53d1\u751f\u6539\u53d8\uff0c\u800c\u91cd\u65b0 render\u3002")))),(0,r.kt)("h4",{id:"usecallback"},"useCallback"),(0,r.kt)("p",null,"\u548c useMemo \u7684\u529f\u80fd\u3001\u89e6\u53d1\u673a\u5236\u76f8\u540c\uff0c\u5728\u4f9d\u8d56\u9879\u53d8\u5316\u540e\uff0c\u4f1a\u8ba9 ",(0,r.kt)("inlineCode",{parentName:"p"},"memoizedValue")," \u91cd\u65b0\u7f13\u5b58\u5f15\u7528\u3002\u4e0d\u540c\u7684\u662f\uff0cuseMemo \u4f1a\u6267\u884c\u56de\u8c03\u51fd\u6570\uff0c\u5e76\u7f13\u5b58\u5f97\u5230\u7684\u51fd\u6570\u8fd4\u56de\u503c\uff1b\u800c useCallback \u76f4\u63a5\u7f13\u5b58\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5e76\u4e0d\u4f1a\u6267\u884c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const memoizedValue = useCallback(() => { \n  // function \n}, deps);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\u5e76\u4e0d\u4f1a\u6267\u884c\uff0c\u800c\u662f\u76f4\u63a5\u7f13\u5b58\u3002"),(0,r.kt)("li",{parentName:"ul"},"useCallback \u662f useMemo \u7684\u4e00\u79cd\u7279\u4f8b\uff0c\u56e0\u4e3a useMemo \u53ef\u4ee5\u5f15\u7528/\u7f13\u5b58\u4efb\u4f55\u503c\uff08\u5bf9\u8c61\u3001\u51fd\u6570\uff09\uff0c\u800c useCallback \u53ea\u80fd\u5f15\u7528/\u7f13\u5b58\u51fd\u6570\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f"),"\uff1a\u7236\u7ec4\u4ef6\u7ed9\u5b50\u7ec4\u4ef6\u4f20\u9012\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u65f6\uff0c\u4f1a\u628a\u8be5\u56de\u8c03\u51fd\u6570\u901a\u8fc7 useCallback \u5305\u88f9\u540e\u518d\u8fd4\u56de\u3002\u539f\u7406\u540c useMemo \u4e00\u6837\uff0c\u5b50\u7ec4\u4ef6\u9700\u8981\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"memo()")," \u5305\u88f9\u3002\u8fd9\u6837\uff0c\u5373\u4f7f\u7236\u7ec4\u4ef6 render\uff0c\u4f46\u88ab useCallback \u5305\u88f9\u7684\u56de\u8c03\u51fd\u6570\u4e0d\u4f1a\u53d1\u751f\u6539\u53d8\uff0c\u6240\u4ee5\u5b50\u7ec4\u4ef6\u901a\u8fc7 shallow equal\uff0c\u987a\u5229\u907f\u514d\u91cd\u65b0\u6e32\u67d3\u3002"),(0,r.kt)("p",null,"useMemo \u548c useCallback \u7684\u533a\u522b\uff1a"),(0,r.kt)("p",null,"\u76f8\u540c\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4ece\u903b\u8f91\u4e0a\u6765\u8bf4\uff0c\u89e6\u53d1\u903b\u8f91\u76f8\u540c\uff0c\u4e24\u4e2a hooks \u7684\u8fd4\u56de\u503c ",(0,r.kt)("inlineCode",{parentName:"li"},"memoizedValue")," \u4f1a\u5bf9\u4e00\u4e2a\u503c\u4fdd\u6301\u5f15\u7528(\u7f13\u5b58)\u3002\u5728\u4f9d\u8d56\u9879\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0d\u8bba\u7ec4\u4ef6 render \u591a\u5c11\u6b21\uff0c\u90fd\u4e0d\u8be5\u5f15\u7528(\u7f13\u5b58)\u90fd\u4e0d\u4f1a\u66f4\u65b0\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4ece\u76ee\u7684\u4e0a\u6765\u8bf4\uff0c\u4e24\u8005\u90fd\u662f\u6027\u80fd\u4f18\u5316\uff0c\u5c3d\u53ef\u80fd\u51cf\u5c11\u5b50\u7ec4\u4ef6\u7684 render\u3002")),(0,r.kt)("p",null,"\u4e0d\u540c\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4ece\u4ee3\u7801\u4e0a\u6765\u8bf4\uff0cuseMemo \u7684\u56de\u8c03\u51fd\u6570\u4f1a\u88ab\u6267\u884c\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"memoizedValue")," \u7f13\u5b58\u88ab\u6267\u884c\u7684\u8fd4\u56de\u503c\uff1buseCallback \u7684\u56de\u8c03\u51fd\u6570\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u800c\u662f\u88ab ",(0,r.kt)("inlineCode",{parentName:"li"},"memoizedValue")," \u76f4\u63a5\u7f13\u5b58\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4ece\u6548\u679c\u4e0a\u6765\u8bf4\uff0cuseMemo \u53ef\u4ee5\u7f13\u5b58\u4efb\u4f55\u503c\uff08\u57fa\u672c\u503c\u3001\u5bf9\u8c61\u3001\u51fd\u6570\uff09\uff0c\u800c useCallback \u4ec5\u80fd\u7f13\u5b58\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4ece\u539f\u7406\u4e0a\u6765\u8bf4\uff0cuseCallback \u662f useMemo \u7684\u8bed\u6cd5\u7cd6\uff0c\u662f\u4e00\u4e2a\u7279\u4f8b\u3002useMemo \u9664\u4e86\u53ef\u4ee5\u907f\u514d\u5b50\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u5916\uff0c\u8fd8\u53ef\u4ee5\u5305\u88f9\u8ba1\u7b97\u590d\u6742\u7684\u51fd\u6570\uff0c\u51cf\u5c11\u590d\u6742\u8ba1\u7b97\u7684\u6267\u884c\u6b21\u6570\u3002")),(0,r.kt)("h2",{id:"state"},"State"),(0,r.kt)("h3",{id:"\u95ee\u9898state-api"},"\u95ee\u9898\uff1astate API"),(0,r.kt)("p",null,"\u7c7b\u7ec4\u4ef6\u7684 state\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"setState(obj, callback);\n\n/* \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3aobject\u7c7b\u578b */\nthis.setState({ number:1 },()=>{\n  console.log(this.state.number) //\u83b7\u53d6\u6700\u65b0\u7684number\n})\n\n/* \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3afunction\u7c7b\u578b */\nthis.setState((state, props)=>{\n  return { number:1 } \n})\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1a\nobj \u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5219\u4e3a\u5373\u5c06\u5408\u5e76\u7684 state \uff1b\nobj \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u90a3\u4e48\u5f53\u524d\u7ec4\u4ef6\u7684 state \u548c props \u5c06\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u503c\u7528\u4e8e\u5408\u5e76\u65b0\u7684 state\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u4e2a\u53c2\u6570 callback \uff1a\u51fd\u6570\u5185\u7684 state \u4e3a setState \u66f4\u65b0\u540e\u7684\u6700\u65b0\u503c\uff0c\u4f5c\u4e3a\u4f9d\u8d56 state \u53d8\u5316\u7684\u526f\u4f5c\u7528\u51fd\u6570\u3002")),(0,r.kt)("p",null,"\u4e00\u6b21\u4e8b\u4ef6\u4e2d\uff0c\u89e6\u53d1\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"setState()"),"\uff0cReact \u5e95\u5c42\u4f1a\u505a\u5982\u4e0b\u4e8b\u60c5\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u8c03\u5ea6\u9636\u6bb5\uff1asetState \u4f1a\u4ea7\u751f\u5f53\u524d\u66f4\u65b0\u7684\u4f18\u5148\u7ea7\uff08\u57fa\u4e8e lane\uff09"),(0,r.kt)("li",{parentName:"ol"},"\u534f\u8c03\u9636\u6bb5\uff1a\u4ece\u6839\u90e8 fiber \u8282\u70b9 (fiber Root)\uff0c\u5411\u4e0b\u8c03\u548c\u5b50\u8282\u70b9\uff1a\u53d1\u73b0\u66f4\u65b0\u7684\u7ec4\u4ef6\uff0c\u5408\u5e76 state\uff0c\u89e6\u53d1\u7ec4\u4ef6 render \u51fd\u6570\u3002\u6700\u7ec8\u5f97\u5230 finished fiber tree (work in progress) + effectList\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u6e32\u67d3 mutation \u9636\u6bb5\uff1a\u8fdb\u5165 commit \u9636\u6bb5\uff0c\u901a\u8fc7 effectList \u5355\u9879\u526f\u4f5c\u7528\u94fe\uff0c\u5b8c\u6210\u5bf9\u771f\u5b9e DOM \u7684\u64cd\u4f5c\u3002\u66f4\u65b0\u6d41\u7a0b\u5b8c\u6210"),(0,r.kt)("li",{parentName:"ol"},"\u6e32\u67d3 layout \u9636\u6bb5\uff1a\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"setState(obj, callback)")," \u4e2d callback\u3002\u6240\u4ee5\u6b64\u65f6\u83b7\u53d6\u7684 state \u662f\u66f4\u65b0\u540e\u7684\u503c\u3002")),(0,r.kt)("p",null,"\u51fd\u6570\u7ec4\u4ef6\u7684 state"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"[state, dispatch] = useState(initData);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"state\uff1a\u6570\u636e\u6e90\uff0c"),(0,r.kt)("li",{parentName:"ul"},"dispatch\uff1a\u7c7b\u4f3c setState \u51fd\u6570\uff0c\u63a8\u52a8\u51fd\u6570\u7ec4\u4ef6\u6e32\u67d3\u7684\u6e32\u67d3\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ul"},"initData\uff1a\u53ef\u4ee5\u662f\u521d\u59cb\u503c / \u51fd\u6570\u3002\u5982\u679c\u662f\u51fd\u6570\uff0c\u5219\u6267\u884c\u540e\u8fd4\u56de\u7684\u503c\u4e3a\u521d\u59cb\u503c\u3002")),(0,r.kt)("p",null,"\u6ce8\u610f\uff1adispatch \u7684\u53c2\u6570\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\uff0c\u5165\u53c2\u4e3a\u5bf9\u5e94 state \u4e0a\u4e00\u6b21\u66f4\u65b0\u540e\u7684\u6700\u65b0\u503c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const [number , setNumbsr] = React.useState(0);\nconst handleClick=()=>{\n   setNumber((state) => state + 1)  // state - > 0 + 1 = 1\n   setNumber(8)  // state - > 8\n   setNumber((state) => state + 1)  // state - > 8 + 1 = 9\n}\n")),(0,r.kt)("h3",{id:"\u95ee\u9898state-\u7684\u6279\u91cf\u66f4\u65b0"},"\u95ee\u9898\uff1astate \u7684\u6279\u91cf\u66f4\u65b0"),(0,r.kt)("p",null,"\u5173\u8054\u95ee\u9898\uff1asetState \u7684\u66f4\u65b0\u6d41\u7a0b\u3001state \u662f\u540c\u6b65\u66f4\u65b0 (\u540c\u6b65\u6267\u884c) \u8fd8\u662f\u5f02\u6b65\u66f4\u65b0\uff1f"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5173\u4e8e\u66f4\u65b0\u6d41\u7a0b\uff1a")),(0,r.kt)("p",null,"setState \u4f1a\u8c03\u7528 dispathAction\uff0c\u521b\u5efa\u4e00\u4e2a update \u5bf9\u8c61\u653e\u5230\u5bf9\u5e94\u5143\u7d20 fiber \u8282\u70b9\u7684 updateQueue \u4e0a\uff0c\u7136\u540e\u8c03\u5ea6\u6e32\u67d3\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5173\u4e8e\u540c\u6b65\u8fd8\u662f\u5f02\u6b65\uff1a")),(0,r.kt)("p",null,"\u6211\u7684\u7406\u89e3\uff1a\u5982\u679c\u6ca1\u6709\u5f02\u6b65\u73af\u5883\u66f4\u65b0 state\uff0cstate \u662f\u5728\u540c\u4e00\u4e2a\u6267\u884c\u4e0a\u4e0b\u6587\uff08\u8c03\u7528\u6808\uff09\u6267\u884c\u7684\u3002\u6240\u4ee5\u7406\u8bba\u4e0a\u6765\u8bf4\u662f\u540c\u6b65\u6267\u884c\u7684\u3002\u901a\u5e38\u8ba8\u8bba\u7684\u70b9\u662f state \u662f\u6279\u91cf\u66f4\u65b0\uff0c\u8fd8\u662f\u975e\u6279\u91cf\u66f4\u65b0\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u867d\u7136\u6211\u4eec\u8ba8\u8bba\u7684\u662f setState \u7684\u540c\u6b65\u5f02\u6b65\uff0c\u4f46\u8fd9\u4e2a\u4e0d\u662f setTimeout\u3001Promise \u90a3\u79cd\u5f02\u6b65\u8c03\u7528\uff0c\u800c\u662f\u6307 setState \u6267\u884c\u540e\uff0cstate \u662f\u5426\u7acb\u523b\u6539\u53d8\u4e86\uff0c\u662f\u5426\u53ef\u4ee5\u5728\u5f53\u524d\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\u5f97\u5230\u6539\u53d8\u7684\u503c\uff0c\u7ec4\u4ef6\u662f\u5426 render \u4e86\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u56de\u7b54\u6279\u91cf\u66f4\u65b0\u7684\u8981\u70b9\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5148\u8bf4 state \u7684\u66f4\u65b0\u987a\u5e8f\uff1aflushSync \u53ef\u4ee5\u63d0\u524d\u6279\u91cf\u66f4\u65b0\uff0c\u76f4\u63a5 render\u3002\u7136\u540e\u662f\u6279\u91cf\u66f4\u65b0\uff0c\u6700\u540e\u4e00\u4e2a setState \u6267\u884c\u5e76 render\u3002\u6700\u540e\u662f\u5f02\u6b65\u73af\u5883\uff08\u5fae\u4efb\u52a1/\u5b8f\u4efb\u52a1\uff09\u9047\u5230\u4e00\u4e2a setState\uff0c\u5c31\u7acb\u5373 render\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u518d\u8bf4\u7c7b\u7ec4\u4ef6\u548c\u51fd\u6570\u7ec4\u4ef6\u7684\u533a\u522b\uff1a\uff081\uff09\u7c7b\u7ec4\u4ef6 api \u53ef\u4ee5\u56de\u8c03\u76d1\u542c\u5230 state \u66f4\u65b0\uff0c\u51fd\u6570\u7ec4\u4ef6\u53ea\u80fd\u7528 useEffect \u526f\u4f5c\u7528\u76d1\u542c\u3002\uff082\uff09\u7c7b\u7ec4\u4ef6\u5f02\u6b65\u66f4\u65b0 state\uff0c\u53ef\u5728\u5f53\u524d\u6267\u884c\u4e0a\u4e0b\u6587\u83b7\u53d6\u5230\u66f4\u65b0\u540e\u7684\u503c\uff08\u770b\u8d77\u6765\u50cf\u540c\u6b65\u7684\uff09\uff0c\u51fd\u6570\u7ec4\u4ef6\u5728\u5f53\u524d\u6267\u884c\u4e0a\u4e0b\u6587\u7684 state \u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\u3002")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5173\u4e8e\u6279\u91cf\u66f4\u65b0\uff1a")),(0,r.kt)("p",null,"\u7528\u6237\u89e6\u53d1\u4e8b\u4ef6\uff0c\u4f1a\u63a8\u52a8 React \u7684\u7ec4\u4ef6\u66f4\u65b0\u3002\u6240\u4ee5 state \u66f4\u65b0\u7684\u6e90\u5934\u8fd8\u662f\u89e6\u53d1\u4e8b\u4ef6\u3002React \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u4e8b\u4ef6\u673a\u5236\uff08\u5173\u8054\uff1aReact \u4e8b\u4ef6\u77e5\u8bc6\uff09\u3002"),(0,r.kt)("p",null,"React \u4f7f\u7528 dispatchEvent \u540c\u4e00\u8c03\u5ea6\u6240\u6709\u5143\u7d20 fiber \u4e0a\u7ed1\u5b9a\u7684\u4e8b\u4ef6\uff0c\u5728 dispatchEvent \u4e2d\uff0c\u4f1a\u5f00\u542f state \u6279\u91cf\u66f4\u65b0\uff0c\u5f85 ",(0,r.kt)("strong",{parentName:"p"},"\u540c\u6b65")," \u66f4\u65b0\u5b8c\u6bd5\u540e\uff0c\u5173\u95ed\u6279\u91cf\u66f4\u65b0\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u6ca1\u6709\u5b9a\u4e49\u5f02\u6b65 state \u64cd\u4f5c\uff08\u6ca1\u6709\u5728 setTimeout\u3001promise \u4e2d\u66f4\u65b0 state\uff09\uff0c\u8fde\u7eed\u7684 setState \u66f4\u65b0\u64cd\u4f5c\u4f1a\u88ab\u7edf\u4e00\u7684\u6279\u91cf\u66f4\u65b0\u3002\u4e5f\u5c31\u662f\u8bf4\u591a\u4e2a setState \u53ea\u4f1a\u6267\u884c\u6700\u540e\u4e00\u4e2a\uff0c\u5f97\u5230\u4e00\u4e2a state \u7ed3\u679c\u540e\uff0c\u624d",(0,r.kt)("strong",{parentName:"li"},"\u6267\u884c\u4e00\u6b21 render \u51fd\u6570"),"\u3002")),(0,r.kt)("p",null,"\u5f53\u5f02\u6b65\u73af\u5883\u65f6\uff0c\u6279\u91cf\u66f4\u65b0\u662f\u9ed8\u8ba4\u5173\u95ed\u7684\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u5b9a\u4e49\u5f02\u6b65 state \u64cd\u4f5c\uff0c\u5982\u5728\u540c\u4e00\u4e2a setTimeout \u4e2d\u8fde\u7eed\u5b9a\u4e49\u4e09\u4e2a setState\uff0c\u56e0\u4e3a\u6b64\u65f6\u6ca1\u6709\u6279\u91cf\u66f4\u65b0\uff0c\u5c31\u4f1a\u9047\u5230\u4e00\u4e2a setState\uff0c\u5c31\u5148\u6267\u884c\uff0c\u7136\u540e\u89e6\u53d1 render\uff0c\u89e6\u53d1 setState \u56de\u8c03\uff0c\u63a5\u7740\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\u5176\u4ed6 setState\u3002\u6700\u7ec8\u4f1a ",(0,r.kt)("strong",{parentName:"li"},"\u6267\u884c 3 \u6b21 render \u51fd\u6570"),"\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6240\u4ee5\uff0c\u5982\u679c\u91c7\u7528\u5f02\u6b65\u73af\u5883\u66f4\u65b0 state\uff0c\u5c31\u4f1a\u5bfc\u81f4\u591a\u6b21\u7684 render \u8c03\u7528\uff0c\u4e5f\u4f1a\u5bfc\u81f4\u89c6\u56fe\u7684\u591a\u6b21\u6e32\u67d3\uff0c\u5f71\u54cd\u6027\u80fd\u3002")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"unstable_batchedUpdates")," \u5305\u88f9\u53ef\u4ee5\u624b\u52a8\u5f00\u542f\u6279\u91cf\u66f4\u65b0\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6279\u91cf\u66f4\u65b0\u4e3e\u4f8b"),"\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"handleClick= () => {\n  this.setState({ number:this.state.number + 1 },()=>{   \n    console.log( 'callback1', this.state.number);  \n  });\n  console.log(this.state.number);\n  this.setState({ number:this.state.number + 1 },()=>{   \n    console.log( 'callback2', this.state.number);  \n  });\n  console.log(this.state.number);\n  this.setState({ number:this.state.number + 1 },()=>{   \n    console.log( 'callback3', this.state.number);  \n  });\n  console.log(this.state.number);\n}\n// \u70b9\u51fb\u6309\u94ae\uff0c\u89e6\u53d1\u4e8b\u4ef6\u540e\u7684\u6253\u5370\uff1a\n// 0, 0, 0, callback1 1 ,callback2 1 ,callback3 1\n")),(0,r.kt)("p",null,"React \u66f4\u65b0\u6d41\u7a0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u6279\u91cf\u66f4\u65b0\u73af\u5883\u4e0b\uff1a"),(0,r.kt)("li",{parentName:"ul"},"\u7f13\u5b58\u7b2c 1 \u4e2a setState \u4f46\u4e0d\u66f4\u65b0 state\uff1b\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"console.log()")," \u6253\u5370\uff1a0\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u7f13\u5b58\u7b2c 2 \u4e2a setState \u4f46\u4e0d\u66f4\u65b0 state\uff1b\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"console.log()")," \u6253\u5370\uff1a0\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u7f13\u5b58\u7b2c 3 \u4e2a setState \u4f46\u4e0d\u66f4\u65b0 state\uff1b\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"console.log()")," \u6253\u5370\uff1a0\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u5408\u5e76 state\uff0c\u89e6\u53d1\u6700\u540e\u4e00\u4e2a setState\uff0cstate \u66f4\u65b0\u4e3a 1\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u8c03\u7528 render\uff0c\u66f4\u65b0 state\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u4f9d\u6b21\u8c03\u7528 3 \u4e2a setState \u7684\u56de\u8c03\u51fd\u6570\uff0c\u6253\u5370 ",(0,r.kt)("inlineCode",{parentName:"li"},"callback1/2/3   1"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5f02\u6b65\u73af\u5883\u66f4\u65b0\u4e3e\u4f8b"),"\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"handleClick = () => {\n  // setTimeout \u5305\u88f9\n  setTimeout(() => {\n    this.setState({ number:this.state.number + 1 },()=>{   \n      console.log( 'callback1', this.state.number);  \n    });\n    console.log(this.state.number);\n    this.setState({ number:this.state.number + 1 },()=>{   \n      console.log( 'callback2', this.state.number);  \n    });\n    console.log(this.state.number);\n    this.setState({ number:this.state.number + 1 },()=>{   \n      console.log( 'callback3', this.state.number);  \n    });\n    console.log(this.state.number);\n  })\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u975e\u6279\u91cf\u66f4\u65b0\u73af\u5883\uff1a"),(0,r.kt)("li",{parentName:"ul"},"\u9047\u5230\u7b2c 1 \u4e2a setState\uff0c\u66f4\u65b0 state\uff0c\u89e6\u53d1 render\uff0c\u8c03\u7528 setState \u56de\u8c03\uff0c\u6253\u5370 ",(0,r.kt)("inlineCode",{parentName:"li"},"callback1 1"),"\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"console.log()"),"\uff0c\u6253\u5370\uff1a1\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u9047\u5230\u7b2c 2 \u4e2a setState\uff0c\u66f4\u65b0 state\uff0c\u89e6\u53d1 render\uff0c\u8c03\u7528 setState \u56de\u8c03\uff0c\u6253\u5370 ",(0,r.kt)("inlineCode",{parentName:"li"},"callback1 2")),(0,r.kt)("li",{parentName:"ul"},"\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"console.log()"),"\uff0c\u6253\u5370\uff1a2\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u9047\u5230\u7b2c 3 \u4e2a setState\uff0c\u66f4\u65b0 state\uff0c\u89e6\u53d1 render\uff0c\u8c03\u7528 setState \u56de\u8c03\uff0c\u6253\u5370 ",(0,r.kt)("inlineCode",{parentName:"li"},"callback1 3")),(0,r.kt)("li",{parentName:"ul"},"\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"console.log()"),"\uff0c\u6253\u5370\uff1a3\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u624b\u52a8\u8c03\u7528\u6279\u91cf\u66f4\u65b0")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import ReactDOM from 'react-dom'\nconst { unstable_batchedUpdates } = ReactDOM\n\nsetTimeout(()=>{\n  // \u4f7f\u7528 unstable_batchedUpdates \u5305\u88f9\n  unstable_batchedUpdates(()=>{\n    this.setState({ number:this.state.number + 1 })\n    console.log(this.state.number)\n    this.setState({ number:this.state.number + 1})\n    console.log(this.state.number)\n    this.setState({ number:this.state.number + 1 })\n    console.log(this.state.number) \n  })\n})\n")),(0,r.kt)("h4",{id:"\u51fd\u6570\u7ec4\u4ef6-\u6ce8\u610f1"},"\u51fd\u6570\u7ec4\u4ef6 \u6ce8\u610f1"),(0,r.kt)("p",null,"\u4e0a\u9762\u7684\u4f8b\u5b50\u5982\u679c\u6362\u6210\u51fd\u6570\u7ec4\u4ef6\uff0c\u6240\u6709\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"console.log(number)")," \u90fd\u65e0\u6cd5\u83b7\u53d6\u66f4\u65b0\u540e\u7684 number \u503c\uff0c\u5373\u4f7f\u7528 setTimeout \u5305\u88f9\uff0c\u907f\u514d\u6279\u91cf\u66f4\u65b0\u4e5f\u4e0d\u884c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const [ number , setNumber ] = React.useState(0)\nconst handleClick = ()=>{\n  // \u4f18\u5148\u7ea7\u66f4\u65b0\n  ReactDOM.flushSync(()=>{\n    setNumber(2);\n    console.log(number);  // 0\n  })\n    // \u6279\u91cf\u66f4\u65b0\n  setNumber(1);\n  console.log(number);      // 0\n    // \u5f02\u6b65: \u6ede\u540e\u66f4\u65b0\n  setTimeout(()=>{\n    setNumber(3);\n    console.log(number);    // 0\n  })   \n}\n")),(0,r.kt)("p",null,"\u539f\u56e0\uff1a\u51fd\u6570\u7ec4\u4ef6\u7684\u66f4\u65b0\uff0c\u5c31\u662f\u51fd\u6570\u7684\u6267\u884c\u3002\u6bcf\u6b21\u6267\u884c\uff0c\u90fd\u4f1a\u91cd\u65b0\u58f0\u660e state\u3002\u6240\u4ee5\u6539\u53d8\u7684 state \u53ea\u6709\u5728\u4e0b\u6b21\u51fd\u6570\u7ec4\u4ef6\u6267\u884c\u65f6\u624d\u4f1a\u88ab\u66f4\u65b0\u3002\u6240\u4ee5\u5728\u5982\u4e0a\u540c\u4e00\u4e2a\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\uff0cnumber \u4e00\u76f4\u4e3a0\uff0c\u65e0\u8bba\u600e\u4e48\u6253\u5370\uff0c\u90fd\u62ff\u4e0d\u5230\u6700\u65b0\u7684 state \u3002"),(0,r.kt)("h4",{id:"\u51fd\u6570\u7ec4\u4ef6-\u6ce8\u610f2"},"\u51fd\u6570\u7ec4\u4ef6 \u6ce8\u610f2"),(0,r.kt)("p",null,"\u51fd\u6570\u7ec4\u4ef6\u5982\u679c\u5728\u4e00\u6b21\u66f4\u65b0\u524d\u540e\uff0c\u4ec5\u6709 state \u53d1\u751f\u53d8\u5316\uff0c\u4e14\u66f4\u65b0\u65f6\uff0csetState \u4f20\u5165\u4e86\u76f8\u540c\u7684\u503c\uff08\u6216\u76f8\u540c\u7684\u5185\u5b58\u7a7a\u95f4\uff09\uff0c\u5219\u4e0d\u4f1a\u89e6\u53d1 render\uff0c\u66f4\u65b0\u4f1a\u88ab\u963b\u6b62\u3002\u56e0\u4e3a React \u5185\u90e8\u5728\u5904\u7406 dispacthAction \u65f6\uff0c\u4f1a shallow equal \u6d45\u5bf9\u6bd4 state \u66f4\u65b0\u524d\u540e\u7684\u503c\uff0c\u5982\u679c\u76f8\u540c\u5219\u5ffd\u7565\u672c\u6b21\u66f4\u65b0\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"export default function Index(){\n  const [state  , dispatchState] = useState({name:'alien'});\n  const handleClick = () => { // \u70b9\u51fb\u6309\u94ae\uff0c\u89c6\u56fe\u6ca1\u6709\u66f4\u65b0\u3002\n    state.name = 'ninjee';\n    dispatchState(state); // \u76f4\u63a5\u64cd\u4f5cstate\u5bf9\u8c61\uff0c\u5728\u5185\u5b58\u4e2d\u6307\u5411\u7684\u5730\u5740\u76f8\u540c\u3002\n  }\n  return <div>\n    <span>{state.name}</span>\n    <button onClick={handleClick}>changeName++</button>\n  </div>\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6b63\u786e\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u8981\u6d45\u62f7\u8d1d\u4e00\u4efd\u518d\u4f20\u9012\u7ed9 dispatch")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const handleClick = () => {\n  const newState = state;  // \u521b\u5efa newState\n  newState.name = "ninjee";\n  dispatchState(state);\n}\n')),(0,r.kt)("h3",{id:"\u95ee\u9898usestate-\u548c-setstate-\u533a\u522b"},"\u95ee\u9898\uff1auseState \u548c setState \u533a\u522b"),(0,r.kt)("p",null,"\u51fd\u6570\u7ec4\u4ef6 useState \u548c\u7c7b\u7ec4\u4ef6 setState \u7684\u533a\u522b\u3002"),(0,r.kt)("p",null,"\u76f8\u540c\u70b9\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u63a8\u52a8\u66f4\u65b0"),"\u3002useState \u7684 dispatch \u548c setState \u90fd\u53ef\u4ee5\u66f4\u65b0 state\uff0c\u63a8\u52a8\u7ec4\u4ef6\u66f4\u65b0\u548c\u6e32\u67d3\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6279\u91cf\u66f4\u65b0"),"\u3002\u901a\u8fc7\u4e8b\u4ef6\u9a71\u52a8\u89e6\u53d1\u66f4\u65b0\uff0c\u90fd\u6709\u6279\u91cf\u66f4\u65b0\u89c4\u5219\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u975e\u4e8b\u4ef6\u9a71\u52a8\uff1a\u6bd4\u5982\u5728 setTimeout \u4e2d\u5f02\u6b65\u66f4\u65b0\u3002"),(0,r.kt)("li",{parentName:"ul"},"forceUpdate")))),(0,r.kt)("p",null,"\u4e0d\u540c\u70b9\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6d45\u5bf9\u6bd4"),"\u3002\u7c7b\u7ec4\u4ef6\u4e0d\u4f1a\u6d45\u6bd4\u8f83\u66f4\u65b0\u524d\u540e state \u7684\u53d8\u5316\uff0c\u51fd\u6570\u7ec4\u4ef6\u4f1a\u9ed8\u8ba4\u6bd4\u8f83\uff0c\u8fd9\u5c31\u9700\u8981\u5728\u66f4\u65b0\u65f6\u4f20\u9012\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u7ec4\u4ef6\u5982\u679c\u5b9a\u4e49 pureComponent\uff0c\u6216\u5728 shouldComponentUpdate \u751f\u547d\u5468\u671f\u51fd\u6570\u4e2d\u81ea\u5b9a\u4e49\uff0c\u53ef\u4ee5\u8fbe\u5230\u6d45\u5bf9\u6bd4\u6548\u679c\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u76d1\u542c\u53d8\u5316"),"\u3002\u7c7b\u7ec4\u4ef6 setState \u6709\u4e13\u95e8\u76d1\u542c state \u53d8\u5316\u7684\u56de\u8c03\u51fd\u6570 callback\uff0c\u53ef\u4ee5\u83b7\u53d6\u6700\u65b0state\uff1b\u4f46\u662f\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\uff0c\u53ea\u80fd\u901a\u8fc7 useEffect \u6267\u884c state \u53d8\u5316\u5f15\u8d77\u7684\u526f\u4f5c\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5e95\u5c42\u539f\u7406"),"\u3002setState \u5728\u5e95\u5c42\u5904\u7406\u903b\u8f91\u4e0a\u4e3b\u8981\u662f\u548c\u8001 state \u8fdb\u884c\u5408\u5e76\u5904\u7406\uff0c\u800c useState \u66f4\u503e\u5411\u4e8e\u91cd\u65b0\u8d4b\u503c\u3002")),(0,r.kt)("h3",{id:"\u95ee\u9898state-\u4e2d\u7684\u66f4\u65b0\u987a\u5e8f"},"\u95ee\u9898\uff1astate \u4e2d\u7684\u66f4\u65b0\u987a\u5e8f"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u7c7b\u7ec4\u4ef6 setState \u548c\u51fd\u6570\u7ec4\u4ef6 dispatch \u7684\u6982\u5ff5\u76f8\u540c\uff0c\u8fd9\u91cc\u7528\u7c7b\u7ec4\u4ef6 setState \u4e3e\u4f8b\u3002")),(0,r.kt)("p",null,"state \u7684\u66f4\u65b0\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"flushSync")," \u63d0\u5347\u4f18\u5148\u7ea7\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"ReactDOM.flushSync(()=>{\n  this.setState({ number: 3 });\n})\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"flushSync")," \u7684\u903b\u8f91\u662f\uff0c\u5f53\u5904\u4e8e\u540c\u6b65\u6761\u4ef6\u4e0b\uff08\u5f00\u542f\u6279\u91cf\u66f4\u65b0\uff09\uff0c\u9047\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"flushSync")," \u5b9a\u4e49\u7684 setState\uff0c\u5c31\u4f1a\u53d1\u751f state \u5408\u5e76\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u5e76\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"strong"},"flushSync")," \u5b9a\u4e49\u7684 state \u66f4\u65b0\uff0c\u8c03\u7528 render"),"\u3002\u7136\u540e\u518d\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\u5176\u4ed6\u540c\u6b65\u73af\u5883\uff08\u5f00\u542f\u6279\u91cf\u66f4\u65b0\uff09\u4e0b setState\u3002"),(0,r.kt)("p",null," React \u540c\u4e00\u7ec4\u4ef6\u4e2d setState ",(0,r.kt)("strong",{parentName:"p"},"\u66f4\u65b0\u4f18\u5148\u7ea7")," \u5173\u7cfb\u662f:"),(0,r.kt)("p",null,"\u540c\u6b65\u73af\u5883\uff0c\u9ed8\u8ba4\u5f00\u542f\u6279\u91cf\u66f4\u65b0\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u9ad8\u4f18\u5148\u7ea7\u66f4\u65b0 flushSync \u4e2d\u7684 setState\uff0c\u5df2\u7ecf\u7f13\u5b58\u7684 setState \u90fd\u5408\u5e76 (\u4e22\u5f03)\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5176\u5185\u90e8\u4e5f\u5b58\u5728\u6279\u91cf\u66f4\u65b0\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u6b63\u5e38\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d setState\uff0c\u6267\u884c\u6700\u540e\u4e00\u4e2a setState\uff0c\u5c06\u5df2\u7ecf\u7f13\u5b58\u7684\u90fd\u4e22\u5f03\u3002")),(0,r.kt)("p",null,"\u5f02\u6b65\u73af\u5883\uff0c\u9ed8\u8ba4\u5173\u95ed\u6279\u91cf\u66f4\u65b0\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Promise \u4e2d\u7684 setState\uff0c\u7acb\u5373\u6267\u884c + render + \u6e32\u67d3\uff0c\u7136\u540e\u5f80\u4e0b\u6267\u884c\u3002"),(0,r.kt)("li",{parentName:"ul"},"setTimeout \u4e2d\u7684 setState\uff0c\u7acb\u5373\u6267\u884c + render + \u6e32\u67d3\uff0c\u7136\u540e\u5f80\u4e0b\u6267\u884c\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6ce8\u610f\u8c03\u7528\u987a\u5e8f"),"\uff1a\u6267\u884c setState  => \u6267\u884c render => \u6267\u884c setState \u540e\u9762\u7684\u4ee3\u7801\u3002")))),(0,r.kt)("h3",{id:"\u95ee\u9898\u51fd\u6570\u7ec4\u4ef6\u4e2d\u76d1\u542c-state-\u7684\u53d8\u5316"},"\u95ee\u9898\uff1a\u51fd\u6570\u7ec4\u4ef6\u4e2d\uff0c\u76d1\u542c state \u7684\u53d8\u5316"),(0,r.kt)("p",null,"\u7c7b\u7ec4\u4ef6\u4e2d\uff0c\u63a8\u52a8\u66f4\u65b0 state \u7684\u65b9\u6cd5\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"setState({}, callback);")),(0,r.kt)("p",null,"\u5176\u4e2d\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u89e6\u53d1\u65f6\u673a\uff0c\u662f\u5f53\u524d state \u5b8c\u6210\u66f4\u65b0\uff0c\u9875\u9762\u5b8c\u6210\u6e32\u67d3\uff08render + commit \u5b8c\u6210\uff09\uff0c\u518d\u5f02\u6b65\u8c03\u7528\uff0c\u53ef\u4ee5\u83b7\u5f97 state \u66f4\u65b0\u540e\u7684\u6700\u65b0\u503c\uff0c\u8fbe\u5230\u76d1\u542c state \u53d8\u5316\u7684\u76ee\u7684\u3002"),(0,r.kt)("p",null,"\u51fd\u6570\u7ec4\u4ef6\u4e2d\uff0c\u63a8\u52a8 state \u66f4\u65b0\u7684\u65b9\u6cd5\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"const [state, dispatch] = useState(0)")," \u4e2d\u7684 dispatch\uff0c\u8be5\u51fd\u6570\u4e0d\u652f\u6301\u7b2c\u4e8c\u4e2a\u56de\u8c03\u53c2\u6570\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u76d1\u542c\u65b9\u5f0f\uff1a"),"\u81ea\u5b9a\u4e49 hooks"),(0,r.kt)("p",null,"\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"useEffect")," \u6dfb\u52a0\u8be5 state \u7684\u4f9d\u8d56\uff0c\u53ef\u4ee5\u8fbe\u5230\u76d1\u542c state \u53d8\u5316\u7684\u76ee\u7684\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1auseEffect \u521d\u59cb\u5316\u4f1a\u8c03\u7528\u4e00\u6b21\uff0c\u9700\u8981\u5176\u4ed6\u65b9\u6cd5\u963b\u6b62\u521d\u59cb\u5316\u8c03\u7528\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u89e3\u51b3\uff1auseUpdateEffect\uff1auseRef \u81ea\u5b9a\u4e49\uff08\u5173\u8054\u95ee\u9898\uff09\u3002")))),(0,r.kt)("p",null,"\u4f7f\u7528\u53c2\u8003\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://codesandbox.io/s/agitated-pare-fwln3f?file=/src/App.js"},"https://codesandbox.io/s/agitated-pare-fwln3f?file=/src/App.js")),(0,r.kt)("h2",{id:"\u4e8b\u4ef6\u673a\u5236"},"\u4e8b\u4ef6\u673a\u5236"),(0,r.kt)("h3",{id:"\u95ee\u9898\u4e8b\u4ef6\u673a\u5236"},"\u95ee\u9898\uff1a\u4e8b\u4ef6\u673a\u5236"),(0,r.kt)("p",null,"React \u4e8b\u4ef6\u7684\u51e0\u4e2a\u7279\u70b9\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u517c\u5bb9\u6027"),"\u3002\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\uff0c\u5bf9\u4e8b\u4ef6\u5b58\u5728\u4e0d\u540c\u7684\u517c\u5bb9\u6027\uff0cReact \u521b\u5efa\u4e86\u4e00\u4e2a\u517c\u5bb9\u5168\u6d4f\u89c8\u5668\u7684\u4e8b\u4ef6\u7cfb\u7edf\uff0c\u4ee5\u62b9\u5e73\u4e0d\u540c\u6d4f\u89c8\u5668\u7684\u5dee\u5f02\u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u7248\u672c"),"\u3002v17 \u4e4b\u524d React \u4e8b\u4ef6\u5168\u90e8\u7ed1\u5b9a\u5728 document \u4e0a\uff1bv17 \u4e4b\u540e React \u628a\u4e8b\u4ef6\u7ed1\u5b9a\u5728 app \u5bf9\u5e94\u7684\u5bb9\u5668container \u4e0a\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5c06\u4e8b\u4ef6\u7ed1\u5b9a\u5728\u540c\u4e00\u5bb9\u5668\u7edf\u4e00\u7ba1\u7406\uff0c\u9632\u6b62\u5f88\u591a\u4e8b\u4ef6\u76f4\u63a5\u7ed1\u5b9a\u5728\u539f\u751f\u7684 DOM \u5143\u7d20\u4e0a\uff0c\u4ea7\u751f\u517c\u5bb9\u6027\u95ee\u9898\u3002"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u91cd\u65b0\u5b9a\u4e49\u4e8b\u4ef6"),"\u3002\u7531\u4e8e\u4e0d\u662f\u7ed1\u5b9a\u5728\u771f\u5b9e\u7684 DOM \u4e0a\uff0c\u6240\u4ee5 React \u9700\u8981\u6a21\u62df\u4e00\u5957\u4e8b\u4ef6\u6d41\uff1a\u4e8b\u4ef6\u6355\u83b7 -> \u4e8b\u4ef6\u6e90 -> \u4e8b\u4ef6\u5192\u6ce1\uff1b\u91cd\u5199\u4e86\u4e8b\u4ef6\u6e90\u5bf9\u8c61 event \u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u4e00\u4e2a\u4e8b\u4ef6\u6e90"),"\u3002\u57fa\u4e8e",(0,r.kt)("strong",{parentName:"li"},"\u4e8b\u4ef6\u59d4\u6258"),"\uff0c\u5728\u6574\u4e2a React \u5e94\u7528\u4e2d\u53ea\u7ed1\u5b9a\u4e00\u4e2a\u4e8b\u4ef6\u6e90\u3002\u5728 v17 \u4ee5\u524d\uff0c\u8fd9\u4e2a\u4e8b\u4ef6\u7ed1\u5b9a\u5728 document \u4e0a\uff0c\u5728 v17 \u4ee5\u540e\uff0c\u8fd9\u4e2a\u4e8b\u4ef6\u7ed1\u5b9a\u5728 app \u5bb9\u5668\u4e0a\uff0c\u8fd9\u6837\u66f4\u6709\u5229\u4e8e\u4e00\u4e2a html \u4e0b\u5b58\u5728\u591a\u4e2a\u5e94\u7528\uff08\u5fae\u524d\u7aef\uff09\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4e8b\u4ef6\u59d4\u6258\uff1a\u5229\u7528\u4e8b\u4ef6\u7684\u5192\u6ce1\u539f\u7406\uff0c\u628a\u4e8b\u4ef6\u7ed1\u5b9a\u5728\u7236\u5143\u7d20\u4e0a\u9762\uff0c\u628a\u6240\u6709\u5b50\u5143\u7d20\u5404\u81ea\u5904\u7406\u7684\u4e8b\u60c5\u4ea4\u7ed9\u7236\u5143\u7d20\u7edf\u4e00\u5904\u7406\uff0c\u8fbe\u5230\u6027\u80fd\u4f18\u5316\u7684\u6548\u679c\u3002"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u4e8b\u4ef6\u5408\u6210"),"\u3002React \u5e94\u7528\u4e2d\uff0c\u5143\u7d20\u7ed1\u5b9a\u7684\u4e8b\u4ef6\u5e76\u4e0d\u662f\u539f\u751f\u4e8b\u4ef6\uff0c\u800c\u662fReact \u5408\u6210\u7684\u4e8b\u4ef6\uff0c\u6bd4\u5982 onClick \u662f\u7531 click \u5408\u6210\uff0conChange \u662f\u7531 blur \uff0cchange \uff0cfocus \u7b49\u591a\u4e2a\u4e8b\u4ef6\u5408\u6210\u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u6309\u9700\u7ed1\u5b9a"),"\u3002\u4e0d\u662f\u4e00\u6b21\u6027\u7ed1\u5b9a\u6240\u6709\u4e8b\u4ef6\uff0c\u6bd4\u5982\u5f00\u53d1\u8005\u6dfb\u52a0 onClick \u4e8b\u4ef6\uff0cReact \u5c31\u4f1a\u7ed1\u5b9a click \u4e8b\u4ef6\uff1b\u6bd4\u5982\u6dfb\u52a0 onChange \u4e8b\u4ef6\uff0c\u4f1a\u7ed1\u5b9a ",(0,r.kt)("inlineCode",{parentName:"li"},"[blur\uff0cchange \uff0cfocus \uff0ckeydown\uff0ckeyup]")," \u591a\u4e2a\u4e8b\u4ef6\u3002")),(0,r.kt)("p",null,"\u4e8b\u4ef6\u89e6\u53d1\u7684\u7ec6\u8282\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u5143\u7d20 fiber \u8282\u70b9\u4fdd\u5b58"),"\u3002\u4e8b\u4ef6\u89e6\u53d1\u7684\u56de\u8c03\u51fd\u6570\uff0c\u4f1a\u5728\u5bf9\u5e94 DOM \u7684 fiber \u8282\u70b9\u4e0a\u4fdd\u5b58\uff0c\u5177\u4f53\u662f\u5728 fiber.memoizedProps \u5c5e\u6027\u4e0a\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"fiber.memoizedStates \u4e0a\u4fdd\u5b58\u4e86 hooks \u56de\u8c03\u51fd\u6570\u3002"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u4e8b\u4ef6\u961f\u5217"),"\u3002\u5728\u89e6\u53d1\u67d0\u4e2a\u5143\u7d20\u7684\u4e8b\u4ef6\u540e\uff0c\u4f1a\u4ece\u8be5\u4e8b\u4ef6\u6e90\u89e6\u53d1\uff0c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"fiber.return")," \u5411\u4e0a\u6536\u96c6\u5168\u90e8\u5bf9\u5e94\u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\uff0c\u901a\u8fc7\u6570\u7ec4\u4fdd\u5b58\u3002\u5192\u6ce1\u653e\u5728\u961f\u5934\uff0c\u6355\u83b7\u653e\u5728\u961f\u5c3e\u3002\u6700\u7ec8\u6536\u96c6\u5230 app \u540e\u622a\u6b62\uff0c\u4e8b\u4ef6\u4e2d\u5fc3 dispatchEvent \u4f1a\u9010\u6b65\u8c03\u7528\u8fd9\u4e9b\u56de\u8c03\u51fd\u6570\uff08\u6355\u83b7 + \u5192\u6ce1\uff09\u3002")),(0,r.kt)("p",null,"\u4f7f\u7528\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export default function Index(){\n  const handleClick=(e)=>{ \n    console.log('\u6a21\u62df\u5192\u6ce1\u9636\u6bb5\u6267\u884c');\n    e.stopPropagation() /* \u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1 */\n  } \n  const handleClickCapture = ()=>{ console.log('\u6a21\u62df\u6355\u83b7\u9636\u6bb5\u6267\u884c') }\n  return <div>\n    <button onClick={ handleClick  } onClickCapture={ handleClickCapture }  >\u70b9\u51fb</button>\n  </div>\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5192\u6ce1\u9636\u6bb5\uff1aReact \u7ed1\u5b9a\u7684\u4e8b\u4ef6\u6bd4\u5982 onClick\uff0conChange\uff0c\u9ed8\u8ba4\u4f1a\u5728\u6a21\u62df\u5192\u6ce1\u9636\u6bb5\u6267\u884c\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6355\u83b7\u9636\u6bb5\uff1a\u5728\u6355\u83b7\u9636\u6bb5\u6267\u884c\uff1a\u4e8b\u4ef6 + Capture \u540e\u7f00\uff0c\u5982 onClickCapture\uff0conChangeCapture"),(0,r.kt)("li",{parentName:"ul"},"\u963b\u6b62\u5192\u6ce1\uff1a\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"e.stopPropagation()"),"\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u963b\u6b62\u9ed8\u8ba4\u884c\u4e3a\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u539f\u751f\u4e8b\u4ef6\uff1a ",(0,r.kt)("inlineCode",{parentName:"li"},"e.preventDefault()")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"return false")," \u53ef\u4ee5\u7528\u6765\u963b\u6b62\u4e8b\u4ef6\u9ed8\u8ba4\u884c\u4e3a"),(0,r.kt)("li",{parentName:"ul"},"React \u4e8b\u4ef6\uff1a\u53ea\u80fd\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"e.preventDefault()"),"\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684 event \u5bf9\u8c61\u548c\u76f8\u5e94\u65b9\u6cd5\uff0c\u90fd\u88ab React \u91cd\u65b0\u5b9e\u73b0\u4e86\u3002")))),(0,r.kt)("h3",{id:"\u95ee\u9898\u4e00\u6b21\u70b9\u51fb\u4e8b\u4ef6\u89e6\u53d1\u7684\u6d41\u7a0b"},"\u95ee\u9898\uff1a\u4e00\u6b21\u70b9\u51fb\u4e8b\u4ef6\u89e6\u53d1\u7684\u6d41\u7a0b"),(0,r.kt)("p",null,"\u5982\u70b9\u51fb\u4e00\u4e2a button \u6309\u94ae\uff0c\u89e6\u53d1 onClick \u4e8b\u4ef6\u3002"),(0,r.kt)("p",null,"React \u4e8b\u4ef6\u7cfb\u7edf\u53ef\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4e8b\u4ef6\u5408\u6210\u3002\u521d\u59cb\u5316\u4f1a\u6ce8\u518c\u4e0d\u540c\u7684\u4e8b\u4ef6\u63d2\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4e8b\u4ef6\u7ed1\u5b9a\u3002\u5728\u4e00\u6b21\u6e32\u67d3\u8fc7\u7a0b\u4e2d\uff0c\u5bf9\u4e8b\u4ef6\u6807\u7b7e\u4e2d\u4e8b\u4ef6\u7684\u6536\u96c6\uff0c\u5411 container \u6ce8\u518c\u4e8b\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4e8b\u4ef6\u89e6\u53d1\u3002\u7b2c\u4e09\u4e2a\u5c31\u662f\u4e00\u6b21\u7528\u6237\u4ea4\u4e92\uff0c\u4e8b\u4ef6\u89e6\u53d1\uff0c\u5230\u4e8b\u4ef6\u6267\u884c\u4e00\u7cfb\u5217\u8fc7\u7a0b\u3002")),(0,r.kt)("p",null,"\u4e8b\u4ef6\u7ed1\u5b9a\uff1aReact \u4e8b\u4ef6\u4f1a\u7ed1\u5b9a\u5728\u5bf9\u5e94 DOM \u5143\u7d20\u7684 fiber \u5bf9\u8c61\u4e0a\uff0c\u5177\u4f53\u662f fiber.memoizedProps \u5c5e\u6027\u4e0a\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-09 20.44.13",src:n(35388).Z,width:"1196",height:"850"})),(0,r.kt)("p",null,"\uff081\uff09\u6279\u91cf\u66f4\u65b0"),(0,r.kt)("p",null,"\u6267\u884c dispatchEvent\uff0c\u4f1a\u628a\u771f\u5b9e\u4e8b\u4ef6\u6e90 DOM (button) \u4f20\u9012\u7ed9 dispatchEvent\uff0c\u901a\u8fc7\u771f\u5b9e DOM \u627e\u5230\u5bf9\u5e94\u7684 fiber \u8282\u70b9\u3002"),(0,r.kt)("p",null,"\uff082\uff09\u5408\u6210\u4e8b\u4ef6\u6e90"),(0,r.kt)("p",null,"\u63a5\u4e0b\u6765\u4f1a\u901a\u8fc7 onClick \u627e\u5230\u5bf9\u5e94\u7684\u5904\u7406\u63d2\u4ef6 SimpleEventPlugin \uff0c\u5408\u6210\u4e8b\u4ef6\u6e90 event\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"event \u5305\u542b preventDefault (\u963b\u6b62\u9ed8\u8ba4\u884c\u4e3a)\u3001stopPropagation (\u963b\u6b62\u7ee7\u7eed\u5192\u6ce1) \u7b49\u65b9\u6cd5\u3002")),(0,r.kt)("p",null,"\uff083\uff09\u5f62\u6210\u4e8b\u4ef6\u961f\u5217"),(0,r.kt)("p",null,"\u901a\u8fc7\u4e8b\u4ef6\u6e90 fiber.return \u5411\u4e0a\u904d\u5386\uff0c\u9047\u5230\u5143\u7d20\u7c7b\u578b fiber\uff0c\u5c31\u4f1a\u6536\u96c6\u4e8b\u4ef6\u5230\u6570\u7ec4\u4e2d\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u9047\u5230 onClickCapture \u6355\u83b7\u9636\u6bb5\u89e6\u53d1\uff0c\u5c31 unshift \u653e\u5728\u961f\u5934\uff0c"),(0,r.kt)("li",{parentName:"ul"},"\u9047\u5230 onClick \u5192\u6ce1\u9636\u6bb5\u89e6\u53d1\uff0c\u5c31 push \u653e\u5728\u5bf9\u5c3e\u3002")),(0,r.kt)("p",null,"\u6700\u7ec8\u6536\u96c6\u5230\u9876\u7aef app \u7ec4\u4ef6\uff0c\u5f62\u6210\u6267\u884c\u961f\u5217\u3002"),(0,r.kt)("p",null,"\uff084\uff09\u6267\u884c\u4e8b\u4ef6\u961f\u5217"),(0,r.kt)("p",null,"\u4f9d\u6b21\u6267\u884c\u6570\u7ec4\u91cc\u9762\u7684\u4e8b\u4ef6\u56de\u8c03\u51fd\u6570\uff0c\u5982\u679c\u9047\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"event.isPropagationStopped === true")," \u5c31\u4f1a\u4e2d\u65ad\u540e\u7eed\u7684\u56de\u8c03\u6267\u884c\uff0c\u8fbe\u5230\u963b\u6b62\u5192\u6ce1\u7684\u6548\u679c\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898componentpurecomponent-memo"},"\u95ee\u9898\uff1aComponent\u3001PureComponent \u3001memo()"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"PureComponent")," \u7ec4\u4ef6\u521b\u5efa\u4e86\u9ed8\u8ba4\u7684 ",(0,r.kt)("inlineCode",{parentName:"strong"},"shouldComponentUpdate")," \u884c\u4e3a\u3002")),(0,r.kt)("p",null,"\u8fd9\u4e2a\u9ed8\u8ba4\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"shouldComponentUpdate")," \u884c\u4e3a\u4f1a\u6267\u884c shallow equal\uff0c\u9010\u4e00\u6bd4\u8f83\u5373\u5c06 render \u524d\u540e\uff0c ",(0,r.kt)("inlineCode",{parentName:"p"},"props")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," \u662f\u5426\u53d1\u751f\u6539\u53d8\uff0c\u5982\u679c\u6ca1\u6709\u6539\u53d8\uff0c\u5c31\u4f1a\u963b\u6b62\u7ec4\u4ef6\u63a5\u4e0b\u6765\u7684 render \u4ee5\u53ca\u4e4b\u540e\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u6267\u884c\uff0c\u63d0\u5347\u6027\u80fd\u3002"),(0,r.kt)("p",null,"\u800c\u51fd\u6570\u7ec4\u4ef6\u6ca1\u6709\u751f\u547d\u5468\u671f\u7684\u6982\u5ff5\uff0c\u4e5f\u65e0\u6cd5\u4f7f\u7528 PureComponent\uff0c\u6240\u4ee5 React 16+ \u5b9a\u4e49\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"React.memo()")," \u65b9\u6cd5\uff0c\u5b83\u65e2\u53ef\u4ee5\u5305\u88f9 class component\uff0c\u4e5f\u53ef\u4ee5\u5305\u88f9 function component\uff0c\u8fbe\u5230\u548c PureComponent \u76f8\u540c\u7684\u6548\u679c\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u901a\u5e38\u548c useMemo\u3001useCallback hooks \u914d\u5408\u4f7f\u7528\u3002")),(0,r.kt)("h2",{id:"\u5176\u4ed6"},"\u5176\u4ed6"),(0,r.kt)("h3",{id:"\u95ee\u9898jsx-element-fiber-dom-\u7684\u5173\u7cfb"},"\u95ee\u9898\uff1aJSX, element, fiber, dom \u7684\u5173\u7cfb"),(0,r.kt)("p",null,"\u9996\u5148\u5fc5\u987b\u9700\u8981\u5f04\u660e\u767d React.element \uff0cfiber \u548c\u771f\u5b9e DOM \u4e09\u8005\u662f\u4ec0\u4e48\u5173\u7cfb\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"jsx \u8bed\u6cd5\uff0c\u662f\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"li"},"React.creatElement()")," \u7684\u8bed\u6cd5\u7cd6\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"jsx \u8bed\u6cd5\u6700\u7ec8\u4f1a\u88ab babel \u8f6c\u8bd1\u4e3a\u5404\u79cd ",(0,r.kt)("inlineCode",{parentName:"li"},"React.creatElement()"),"\u3002\u6700\u7ec8\uff0c\u8fd9\u4e9b\u4ee3\u7801\u4f1a\u88ab\u6267\u884c\uff0c\u4ece\u800c\u521b\u5efa React element \u5bf9\u8c61\uff0c"))),(0,r.kt)("li",{parentName:"ul"},"React element \u662f js \u5bf9\u8c61\uff0c\u4e0a\u9762\u4fdd\u5b58\u4e86 props\uff0cchildren \u7b49\u4fe1\u606f\u3002\u6709\u4eba\u8fd9\u4e48\u8868\u8fbe\uff1aReact element \u7ec4\u6210\u7684 DOM\u6811\uff0c\u5c31\u662f virtul DOM\u3002"),(0,r.kt)("li",{parentName:"ul"},"DOM \u662f\u5143\u7d20\u5728\u6d4f\u89c8\u5668\u4e0a\u7ed9\u7528\u6237\u76f4\u89c2\u7684\u8868\u8c61\u3002"),(0,r.kt)("li",{parentName:"ul"},"fiber \u53ef\u4ee5\u8bf4\u662f\u662f element \u548c\u771f\u5b9e DOM \u4e4b\u95f4\u7684\u4ea4\u6d41\u67a2\u7ebd\u7ad9\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6bcf\u4e00\u4e2a\u7c7b\u578b element \u90fd\u4f1a\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5bf9\u5e94\u7684 fiber \u7c7b\u578b\uff0celement \u53d8\u5316\u5f15\u8d77\u66f4\u65b0\u6d41\u7a0b\u90fd\u662f\u901a\u8fc7 fiber \u5c42\u9762\u505a\u4e00\u6b21\u8c03\u548c\u6539\u53d8\uff0cfiber \u901a\u8fc7\u94fe\u8868\u5f62\u5f0f\uff0c\u6784\u5efa\u51fa\u4e00\u9897 fiber \u6811\u3002\u6700\u7ec8\u4f1a\u5728\u6e32\u67d3\u9636\u6bb5\uff0c\u8f6c\u5316\u4e3a\u771f\u5b9e DOM \u5e76\u6e32\u67d3\u5728\u9875\u9762\u4e0a\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4e5f\u5c31\u662f\u8bf4\uff0cReact element \u7ec4\u6210\u4e86 virtualDOM\uff0c\u5728 render\uff08\u534f\u8c03\uff09\u9636\u6bb5\u8f6c\u5316\u4e3a fiber tree\uff0c\u5728 commit(\u6e32\u67d3) \u9636\u6bb5\u8f6c\u5316\u4e3a\u771f\u5b9eDOM\u3002")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-26 00.10.31",src:n(94510).Z,width:"1536",height:"218"})),(0,r.kt)("p",null,"\u6240\u4ee5\uff1aJSX \u6700\u7ec8\u4f1a\u8f6c\u53d8\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"React.createElement()")," \u5e76\u6267\u884c\uff0c\u4ece\u800c\u521b\u5efa React element\uff08virtual DOM\uff09\uff0c\u6700\u7ec8\u5408\u5e76\u5230 fiber \u8282\u70b9\u4e0a\u3002\u800c fiber \u8282\u70b9\u4e4b\u95f4\u901a\u8fc7\u94fe\u8868\u8fde\u63a5\uff0c\u6700\u7ec8\u6784\u9020\u4e3a\u4e00\u9897 fiber \u6811\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898\u4ec0\u4e48\u662f\u53d7\u63a7\u7ec4\u4ef6"},"\u95ee\u9898\uff1a\u4ec0\u4e48\u662f\u53d7\u63a7\u7ec4\u4ef6\uff1f"),(0,r.kt)("p",null,"\u5728 HTML \u7684\u8868\u5355\u5143\u7d20\u4e2d\uff0c\u5b83\u4eec\u901a\u5e38\u81ea\u5df1\u7ef4\u62a4\u4e00\u5957 ",(0,r.kt)("inlineCode",{parentName:"p"},"state"),"\uff0c\u5e76\u968f\u7740\u7528\u6237\u7684\u8f93\u5165\u81ea\u5df1\u8fdb\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"UI"),"\u4e0a\u7684\u66f4\u65b0\uff0c\u8fd9\u79cd\u884c\u4e3a\u662f\u4e0d\u88ab\u6211\u4eec\u7a0b\u5e8f\u6240\u7ba1\u63a7\u7684\u3002\u800c\u5982\u679c\u5c06 ",(0,r.kt)("inlineCode",{parentName:"p"},"React")," \u91cc\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," \u5c5e\u6027\u548c\u8868\u5355\u5143\u7d20\u7684\u503c\u5efa\u7acb\u4f9d\u8d56\u5173\u7cfb\uff0c\u518d\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"onChange")," \u7b49\u4e8b\u4ef6\u4e0e ",(0,r.kt)("inlineCode",{parentName:"p"},"setState()")," \u7ed3\u5408\u66f4\u65b0 ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," \u5c5e\u6027\uff0c\u5c31\u80fd\u8fbe\u5230\u63a7\u5236\u7528\u6237\u8f93\u5165\u8fc7\u7a0b\u4e2d\u8868\u5355\u53d1\u751f\u7684\u64cd\u4f5c\u3002\u88ab ",(0,r.kt)("inlineCode",{parentName:"p"},"React")," \u4ee5\u81ea\u8eab state \u63a7\u5236\u53d6\u503c\u7684\u8868\u5355\u8f93\u5165\u5143\u7d20\u5c31\u53eb\u505a ",(0,r.kt)("strong",{parentName:"p"},"\u53d7\u63a7\u7ec4\u4ef6"),"\u3002"),(0,r.kt)("p",null,"\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"HTML")," \u4e2d\uff0c\u8868\u5355\u5143\u7d20\uff08\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"<input>"),"\u3001 ",(0,r.kt)("inlineCode",{parentName:"p"},"<textarea>")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"<select>"),"\uff09\u4e4b\u7c7b\u7684\u8868\u5355\u5143\u7d20\u901a\u5e38\u81ea\u5df1\u7ef4\u62a4 state\uff0c\u5e76\u6839\u636e\u7528\u6237\u8f93\u5165\u8fdb\u884c\u66f4\u65b0\u3002"),(0,r.kt)("p",null,"\u5229\u7528\u8868\u5355\u81ea\u5df1\u7ef4\u62a4\u7684 state\uff0c\u4e5f\u80fd\u83b7\u53d6\u8868\u5355\u63d0\u4ea4\u7684\u4fe1\u606f\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"createRef")," \u7ed1\u5b9a input DOM\u8282\u70b9\uff0c\u7136\u540e\u5728 ",(0,r.kt)("inlineCode",{parentName:"li"},"onSubmit"),"  \u76d1\u542c\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"this.ref.current.value")," \u5c31\u53ef\u4ee5\u83b7\u5f97\u8868\u5355\u4e2d\u7684\u8f93\u5165\u503c\u3002")),(0,r.kt)("p",null,"\u8fd9\u79cd\u5229\u7528 DOM \u81ea\u8eab\u80fd\u529b\u83b7\u53d6\u8868\u5355\u503c\u7684\u65b9\u5f0f\uff0c\u5c31\u662f\u975e\u53d7\u63a7\u7ec4\u4ef6\uff0c\u5982\u4e0b\u9762\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'import React, { Component } from \'react\';\n\nexport class UnControll extends Component {\n  constructor (props) {\n    super(props);\n    this.inputRef = React.createRef();\n  }\n  handleSubmit = (e) => {\n    console.log(\'\u83b7\u5f97input\u7684\u503c: \', this.inputRef.current.value);\n    e.preventDefault();\n  }\n  render () {\n    return (\n      <form onSubmit={e => this.handleSubmit(e)}>\n        <input defaultValue="lindaidai" ref={this.inputRef} />\n        <input type="submit" value="\u63d0\u4ea4" />\n      </form>\n    )\n  }\n}\n')),(0,r.kt)("p",null,"\u53d7\u63a7\u7ec4\u4ef6\u3002"),(0,r.kt)("p",null,"\u628a\u8868\u5355\u7684\u8f93\u5165\u3001submit \u6536\u96c6\u8868\u5355\u4fe1\u606f\u901a\u8fc7 React \u7684 state \u7ba1\u7406\u8d77\u6765\uff0c\u5c31\u662f\u53d7\u63a7\u7ec4\u4ef6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'class TestComponent extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      username: "lindaidai"\n    }\n  }\n  onChange (e) {\n    console.log(e.target.value);\n    this.setState({\n      username: e.target.value\n    })\n  }\n  render () {\n    return <input name="username" value={this.state.username} onChange={(e) => this.onChange(e)} />\n  }\n}\n')),(0,r.kt)("h3",{id:"\u95ee\u9898\u4ec0\u4e48\u662f\u65e0\u72b6\u6001\u7ec4\u4ef6"},"\u95ee\u9898\uff1a\u4ec0\u4e48\u662f\u65e0\u72b6\u6001\u7ec4\u4ef6\uff1f"),(0,r.kt)("p",null,"\u6570\u636e\u5c31\u662f\u72b6\u6001\uff08state\uff09\uff0c\u6570\u636e\u7684\u53d8\u5316\u5c31\u662f\u72b6\u6001\u7684\u53d8\u5316\uff08setState()\uff09\u3002\u6709\u7ef4\u62a4\u81ea\u5df1\u72b6\u6001\u5b58\u50a8\u548c\u53d8\u5316\u673a\u5236\u7684\u7ec4\u4ef6\u53eb\u505a\u6709\u72b6\u6001\u7ec4\u4ef6\uff1b\u628a\u72b6\u6001\u7684\u7ef4\u62a4\u62bd\u79bb\u5230\u7236\u7ec4\u4ef6\u4e2d\uff0c\u6ca1\u6709 state \u7ef4\u62a4\u7684\u53eb\u505a\u65e0\u72b6\u6001\u7ec4\u4ef6\u6216 UI \u7ec4\u4ef6\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898hoc--\u9ad8\u9636\u7ec4\u4ef6"},"\u95ee\u9898\uff1aHOC / \u9ad8\u9636\u7ec4\u4ef6"),(0,r.kt)("p",null,"\u901a\u5e38\u9879\u76ee\u4e2d\u7684\u6743\u9650\u9274\u5b9a\uff0c\u5c31\u662f\u5229\u7528\u4e86\u9ad8\u9636\u7ec4\u4ef6 HOC\u3002\u9ad8\u9636\u7ec4\u4ef6\u5b9e\u73b0\u4e86\u76f8\u540c\u529f\u80fd\u548c\u903b\u8f91\u7684\u590d\u7528\u3002"),(0,r.kt)("p",null,"\u9ad8\u9636\u51fd\u6570\uff1a\u4e00\u4e2a\u5c06\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u5e76\u4e14\u8fd4\u56de\u503c\u4e5f\u662f\u51fd\u6570\u7684\u51fd\u6570\u3002"),(0,r.kt)("p",null,"\u9ad8\u9636\u7ec4\u4ef6\uff1a\u662f\u4ee5\u7ec4\u4ef6\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u7ec4\u4ef6\u7684\u51fd\u6570\u3002\u8fbe\u5230\u529f\u80fd\u5f3a\u5316\u7684\u76ee\u7684\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e2a\u4eba\u7406\u89e3\uff1a\u7c7b\u4f3c\u5bf9\u8c61\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"object.create()")," \u6df7\u5165\u589e\u5f3a\u6548\u679c\u3002")),(0,r.kt)("p",null,"\u4f7f\u7528\u573a\u666f\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5bf9\u7ec4\u4ef6\u7684\u62e6\u622a\uff0c\u672c\u8d28\u4e0a\u662f\u5bf9\u6e32\u67d3\u7684\u63a7\u5236\u3002"),"\u4e0d\u4ec5\u53ef\u4ee5\u63a7\u5236\u662f\u5426\u6e32\u67d3\u7ec4\u4ef6\uff0c\u8fd8\u53ef\u4ee5\u50cf dva \u4e2d dynamic \u90a3\u6837\u61d2\u52a0\u8f7d/\u52a8\u6001\u52a0\u8f7d\u7ec4\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u8ba9 props \u4e2d\u6df7\u5165\u4e00\u4e9b\u989d\u5916\u7684\u6570\u636e\u3002"),"\u6bd4\u5982\uff0c\u9879\u76ee\u4e2d\u60f3\u8ba9\u4e00\u4e2a\u975e Route \u7ec4\u4ef6\uff0c\u4e5f\u80fd\u901a\u8fc7 props \u83b7\u53d6\u8def\u7531\u5b9e\u73b0\u8df3\u8f6c\uff0c\u4f46\u662f\u4e0d\u60f3\u901a\u8fc7\u7236\u7ea7\u8def\u7531\u7ec4\u4ef6\u5c42\u5c42\u7ed1\u5b9a props \uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u9700\u8981\u4e00\u4e2a HOC \u628a\u6539\u53d8\u8def\u7531\u7684 history \u5bf9\u8c61\u6df7\u5165 props \u4e2d\uff0c\u4e8e\u662f withRoute \u8bde\u751f\u4e86\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4e0d\u60f3\u6539\u53d8\u7ec4\u4ef6\uff0c\u53ea\u662f\u76d1\u63a7\u7ec4\u4ef6\u7684\u5185\u90e8\u72b6\u6001\u3002"),"\u6bd4\u5982\u5bf9\u7ec4\u4ef6\u5185\u7684\u70b9\u51fb\u4e8b\u4ef6\u505a\u4e00\u4e9b\u76d1\u63a7\uff0c\u6216\u8005\u52a0\u4e00\u6b21\u989d\u5916\u7684\u751f\u547d\u5468\u671f\u3002")),(0,r.kt)("p",null,"\u5e38\u7528\u7684\u9ad8\u9636\u7ec4\u4ef6\u6709 ",(0,r.kt)("strong",{parentName:"p"},"\u5c5e\u6027\u4ee3\u7406")," \u548c ",(0,r.kt)("strong",{parentName:"p"},"\u53cd\u5411\u7ee7\u627f")," \u4e24\u79cd\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5c5e\u6027\u4ee3\u7406")),(0,r.kt)("p",null,"\u5c5e\u6027\u4ee3\u7406\uff0c\u5c31\u662f\u7528\u7ec4\u4ef6\u5305\u88f9\u4e00\u5c42\u4ee3\u7406\u7ec4\u4ef6\uff0c\u5728\u4ee3\u7406\u7ec4\u4ef6\u4e0a\u5bf9\u6e90\u7ec4\u4ef6\u7684\u5f3a\u5316\u64cd\u4f5c\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u65b0\u7ec4\u4ef6\uff0c\u88ab\u5305\u88f9\u7684\u539f\u59cb\u7ec4\u4ef6\u5c06\u5728\u65b0\u7684\u7ec4\u4ef6\u91cc\u88ab\u6302\u8f7d\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function HOC(WrapComponent){\n  return class Advance extends React.Component{\n    state={\n      name:'alien'\n    }\n    render(){\n      return <WrapComponent { ...this.props } { ...this.state }  />\n    }\n  }\n}\n")),(0,r.kt)("p",null,"\u4f18\u70b9\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4f4e\u8026\u5408"),"\u3002\u6b63\u5411\u5c5e\u6027\u4ee3\u7406\uff0c\u66f4\u9002\u5408\u505a\u4e00\u4e9b\u5f00\u6e90\u9879\u76ee\u7684 HOC\u3002\u5c5e\u6027\u4ee3\u7406\u53ef\u4ee5\u548c\u4e1a\u52a1\u7ec4\u4ef6\u4f4e\u8026\u5408\u3002\u53ea\u5bf9\u7ec4\u4ef6\u589e\u52a0\u4e86\u6e32\u67d3\u63a7\u5236\u3001props \u53c2\u6570\u63a7\u5236\uff0c\u65e0\u987b\u77e5\u9053\u4e1a\u52a1\u7ec4\u4ef6\u5185\u505a\u4e86\u4e9b\u4ec0\u4e48\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u517c\u5bb9\u6027"),"\u3002\u540c\u6837\u9002\u7528\u4e8e\u7c7b\u7ec4\u4ef6\u548c\u51fd\u6570\u7ec4\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6e32\u67d3\u53ef\u63a7"),"\u3002\u53ef\u4ee5\u5b8c\u5168\u9694\u79bb\u4e1a\u52a1\u7ec4\u4ef6\u7684\u6e32\u67d3\uff0c\u56e0\u4e3a\u5c5e\u6027\u4ee3\u7406\u8fd4\u56de\u4e86\u4e2a\u65b0\u7ec4\u4ef6\uff0c\u76f8\u6bd4\u53cd\u5411\u7ee7\u627f\uff0c\u53ef\u4ee5\u5b8c\u5168\u63a7\u5236\u4e1a\u52a1\u7ec4\u4ef6\u662f\u5426\u6e32\u67d3\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u53ef\u5d4c\u5957"),"\u3002\u53ef\u4ee5\u5d4c\u5957\u4f7f\u7528\uff0c\u591a\u4e2a HOC \u53ef\u4ee5\u5d4c\u5957\u4f7f\u7528\uff0c\u4e00\u822c\u4e0d\u9650\u5236\u5305\u88c5 HOC \u7684\u5148\u540e\u987a\u5e8f\u3002")),(0,r.kt)("p",null,"\u7f3a\u70b9\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Ref \u95ee\u9898"),"\u3002\u56e0\u5176\u4ea7\u751f\u4e86\u4e00\u4e2a\u65b0\u7ec4\u4ef6\uff0c\u6240\u4ee5\u9700\u8981\u914d\u5408 forwardRef \u6765\u8f6c\u53d1 ref\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"\u83b7\u53d6\u72b6\u6001"),"\u3002\u9700\u8981 ref \u83b7\u53d6\u7ec4\u4ef6\u5b9e\u4f8b\uff0c\u624d\u80fd\u83b7\u53d6\u539f\u59cb\u7ec4\u4ef6\u7684\u72b6\u6001\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"\u65e0\u6cd5\u7ee7\u627f\u9759\u6001\u5c5e\u6027"),"\u3002\u5982\u679c\u9700\u8981\u7ee7\u627f\u9700\u8981\u624b\u52a8\u5904\u7406\uff0c\u6216\u8005\u5f15\u5165\u7b2c\u4e09\u65b9\u5e93\u3002"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53cd\u5411\u7ee7\u627f")),(0,r.kt)("p",null,"\u53cd\u5411\u7ee7\u627f\u5305\u88c5\u540e\u7684\u7ec4\u4ef6 ",(0,r.kt)("strong",{parentName:"p"},"\u7ee7\u627f")," \u4e86\u539f\u59cb\u7ec4\u4ef6\u672c\u8eab\uff0c\u6240\u4ee5\u6b64\u65f6\u65e0\u987b\u518d\u6302\u8f7d\u4e1a\u52a1\u7ec4\u4ef6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"class Index extends React.Component{\n  render(){\n    return <div> hello,world </div>\n  }\n}\nfunction HOC(Component){\n  /* \u76f4\u63a5\u7ee7\u627f\u9700\u8981\u5305\u88c5\u7684\u7ec4\u4ef6 */\n  return class wrapComponent extends Component{ \n    // ...\n  }\n}\nexport default HOC(Index);\n")),(0,r.kt)("p",null,"\u4f18\u70b9\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u83b7\u53d6\u72b6\u6001"),"\u3002\u7ec4\u4ef6\u5185\u90e8\u72b6\u6001\u53ef\u76f4\u63a5\u83b7\u53d6\uff1astate \uff0cprops \uff0c\u751f\u547d\u5468\u671f\uff0c\u7ed1\u5b9a\u7684\u4e8b\u4ef6\u51fd\u6570\u7b49\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u7ee7\u627f\u9759\u6001\u5c5e\u6027"),"\u3002\u56e0\u4e3a\u7ee7\u627f\u5173\u7cfb\uff0c\u53ef\u4ee5\u76f4\u63a5\u7ee7\u627f\u9759\u6001\u5c5e\u6027\u548c\u65b9\u6cd5\u3002")),(0,r.kt)("p",null,"\u7f3a\u70b9\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u9ad8\u8026\u5408"),"\u3002\u548c\u88ab\u5305\u88c5\u7684\u7ec4\u4ef6\u8026\u5408\u5ea6\u9ad8\uff0c\u662f\u5bf9\u539f\u59cb\u7ec4\u4ef6\u7684\u76f4\u63a5\u7ee7\u627f\u5e76\u6539\u9020\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u517c\u5bb9\u6027"),"\u3002\u51fd\u6570\u7ec4\u4ef6\u65e0\u6cd5\u4f7f\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4e0d\u53ef\u968f\u610f\u5d4c\u5957"),"\u3002\u591a\u4e2a\u53cd\u5411\u7ee7\u627f HOC \u5d4c\u5957\u5728\u4e00\u8d77\uff0c\u5f53\u524d\u72b6\u6001\u4f1a\u8986\u76d6\u4e0a\u4e00\u4e2a\u72b6\u6001\u3002\u6bd4\u5982\u8bf4\u6709\u591a\u4e2a componentDidMount \uff0c\u5f53\u524d componentDidMount \u4f1a\u8986\u76d6\u4e0a\u4e00\u4e2a componentDidMount\u3002\u5bfc\u81f4\u5bf9\u526f\u4f5c\u7528\u7684\u7ba1\u7406\u53ef\u80fd\u5931\u63a7\u3002")),(0,r.kt)("h3",{id:"-\u7ec4\u4ef6\u95f4\u7684\u901a\u4fe1\u65b9\u5f0f8\u79cd"},"\ud83c\udf4a \u7ec4\u4ef6\u95f4\u7684\u901a\u4fe1\u65b9\u5f0f\uff088\u79cd\uff09"),(0,r.kt)("p",null,"\u7236\u7ec4\u4ef6 => \u5b50\u7ec4\u4ef6\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Props"),(0,r.kt)("li",{parentName:"ol"},"Refs")),(0,r.kt)("p",null,"\u5b50\u7ec4\u4ef6 => \u7236\u7ec4\u4ef6\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Callback Function"),(0,r.kt)("li",{parentName:"ol"},"Event Bubbling \u4e8b\u4ef6\u5192\u6ce1")),(0,r.kt)("p",null,"\u5144\u5f1f\u7ec4\u4ef6\u4e4b\u95f4\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Parent Component\uff1a\u5171\u540c\u7956\u5148")),(0,r.kt)("p",null,"\u4e0d\u592a\u76f8\u5173\u7684\u7ec4\u4ef6\u4e4b\u95f4\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Context"),(0,r.kt)("li",{parentName:"ol"},"\u89c2\u5bdf\u8005\u6a21\u5f0f Event Bus"),(0,r.kt)("li",{parentName:"ol"},"Redux \u7b49")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff081\uff09props + Callback Function")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u3010\u7236\u7ec4\u4ef6\u3011\u7ed9\u3010\u5b50\u7ec4\u4ef6\u3011\u4f20\u9012\u6570\u636e\uff1a\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"props")," \u4f20\u9012"),(0,r.kt)("li",{parentName:"ol"},"\u3010\u5b50\u7ec4\u4ef6\u3011\u7ed9\u3010\u7236\u7ec4\u4ef6\u3011\u4f20\u9012\u6570\u636e\uff1a\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"props")," \u4f20\u9012\uff0c\u8981\u6c42\u7236\u5b50\u7ec4\u4ef6\u7ed9\u5b50\u4f20\u9012\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5b50\u7ec4\u4ef6\u901a\u8fc7\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u628a\u6570\u636e\u4f20\u9012\u7ed9\u7236\u7ec4\u4ef6\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u7684 hooks\uff0cuseState \u521b\u5efa\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"setCount()")," \uff0c\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u3002")))),(0,r.kt)("p",null,"\u9700\u8981\u4f7f\u7528 shallowEqual \u4f18\u5316\uff0c\u9632\u6b62\u5b50\u7ec4\u4ef6\u9891\u7e41\u6e32\u67d3\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u51fd\u6570\u7ec4\u4ef6\uff0cmemo \u5305\u88f9\u5b50\u7ec4\u4ef6 + useMemo \u503c + useCallback \u51fd\u6570\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u7ec4\u4ef6\uff0cPureComponent \u7ee7\u627f\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff082\uff09Refs")),(0,r.kt)("p",null,"\u7236\u7ec4\u4ef6\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"refs")," \u76f4\u63a5\u8c03\u7528\u5b50\u7ec4\u4ef6\u5b9e\u4f8b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://www.ninjee.co/docs/frontEnd/React#useimperativehandle"},"useImperativeHandle"),"\uff1a\u7528\u4e8e\u7236\u7ec4\u4ef6\u8c03\u7528\u5b50\u7ec4\u4ef6\u7684\u5c5e\u6027/\u65b9\u6cd5\u3002\u5b50\u7ec4\u4ef6\u5bf9\u5916\u66b4\u9732 / \u63d0\u4f9b\u90e8\u5206\u529f\u80fd")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"forwardRef\uff1a\u7528\u4e8e\u8f6c\u53d1 ref\u3002\u51fd\u6570\u7ec4\u4ef6\uff08\u6709 props, ref \u53c2\u6570\uff09\u4f20\u5165 forwardRef\uff0c\u8fd4\u56de\u7ed1\u5b9a\u597d ref \u7684\u65b0\u7ec4\u4ef6\u3002"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'const Father = () => {\n  const sonRef = useRef();\n  return (\n    <div>\n      <Son ref={sonRef} value="\u5b50\u7ec4\u4ef6\u5185\u5bb9" />\n      <button onClick={() => sonRef.current.handle1()}>\u70b9\u51fb\u6253\u5370 sonRef</button>\n    </div>\n  );\n};\n\nconst Son = forwardRef((props, ref) => {\n  const input = useRef();\n  useImperativeHandle( ref, () => {\n    return {\n      handle1: foo\n    };\n  }, []);\n\n  const foo = () => {\n    console.log("foo function!");\n    console.log(input.current.value);\n  };\n\n  return (\n    <div>\n      <input type="text" defaultValue={props.value} ref={input} />\n    </div>\n  );\n});\n\n// \u70b9\u7236\u7ec4\u4ef6\u7684 button \u540e\uff0c\u63a7\u5236\u680f\u8f93\u51fa\uff1afoo function \u5b50\u7ec4\u4ef6\u5185\u5bb9\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff083\uff09Event Bubbling \u4e8b\u4ef6\u5192\u6ce1")),(0,r.kt)("p",null,"\u5229\u7528\u539f\u751f dom \u5143\u7d20\u7684\u4e8b\u4ef6\u5192\u6ce1\u673a\u5236\uff0c\u7236\u7ec4\u4ef6\u62ff\u5230\u5b50\u7ec4\u4ef6\u7684 dom \u5143\u7d20\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const Father = () => {\n  return (<div\n      onClick={(e) => console.log(e.target.previousSibling.value) }\n    >\n      <Son />\n    </div>);\n};\n\nconst Son = () => {\n  return (<div>\n      <input defaultValue="\u8bf7\u8f93\u5165\u5185\u5bb9..." />\n      <button>Click</button>\n    </div>);\n};\n\n// \u70b9\u5b50\u7ec4\u4ef6\u7684 button \u540e\uff0c\u63a7\u5236\u680f\u8f93\u51fa\uff1a\u8bf7\u8f93\u5165\u5185\u5bb9...\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff084\uff09context - provider")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b91\uff1acontext \u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u5f53\u7ec4\u4ef6\u5e9e\u5927\u590d\u6742\u7684\u65f6\u5019\uff0c\u5168\u5c40\u547d\u540d\u7a7a\u95f4\u4f1a\u53d8\u5f97\u7e41\u6742\uff0c\u53d8\u91cf\u7684\u6765\u6e90\u548c\u53bb\u5411\u4e0d\u6e05\u695a\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b92\uff1a\u5982\u679c\u6ca1\u6709\u53ca\u65f6\u7684\u5728\u5378\u8f7d\u7ec4\u4ef6\u65f6\u53d6\u6d88\u8ba2\u9605\uff0ccontext \u6ca1\u6709\u6e05\u7a7a\uff0c\u9020\u6210\u5185\u5b58\u6cc4\u9732\u3002")),(0,r.kt)("p",null,"\u6d88\u606f\u8ba2\u9605\u4e0e\u53d1\u5e03\u673a\u5236"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5148\u8ba2\u9605\uff0c\u518d\u53d1\u5e03\uff08\u7406\u89e3\uff1a\u6709\u4e00\u79cd\u9694\u7a7a\u5bf9\u8bdd\u7684\u611f\u89c9\uff09"),(0,r.kt)("li",{parentName:"ol"},"\u9002\u7528\u4e8e\u4efb\u610f\u7ec4\u4ef6\u95f4\u901a\u4fe1"),(0,r.kt)("li",{parentName:"ol"},"\u8981\u5728\u7c7b\u7ec4\u4ef6\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"componentWillUnmount")," \u4e2d\u53d6\u6d88\u8ba2\u9605")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'// \u30101\u3011\u521b\u5efa\u4e00\u4e2a\u5168\u5c40\u7684\u4e0a\u4e0b\u6587\u7ec4\u4ef6\u3002\nconst ThemeContext = React.createContext("light");\n\n// \u30102\u3011\u7236\uff0c\u901a\u8fc7 ThemeContext.Provider\u5305\u88f9\u5b50\u7ec4\u4ef6\uff0cvalue \u4f20\u9012\u503c\u3002\nclass Father extends React.Component {\n  render() {\n    return (\n      <ThemeContext.Provider value={{ name: "123" }}>\n        <MidComponent />\n      </ThemeContxt.Provider>\n    );\n  }\n}\n\n// \u4e2d\u95f4\u7ec4\u4ef6\nfunction MidComponent() {\n  return <div><ThemedButton /></div>;\n}\n\n//\u30103\u3011\u5b59\uff0c\u901a\u8fc7 contextType \u58f0\u660e\u8981\u4f7f\u7528 context\nclass ThemedButton extends React.Component {\n  static contextType = ThemeContext;\n  render() {\n    // 123\n    return <div>{this.context.name}</div>;  \n  }\n}\n\n//\u30104\u3011\u5b59\uff0c\u6216\u8005\u901a\u8fc7 Consumer\uff0c\u5728 return \u4e2d\u76f4\u63a5\u62ff\u5230 value\nclass ThemedButton extends React.Component {\n  render() {\n    // 123\n    return <ThemeContext.Consumer>{(value) => value.name}</ThemeContext.Consumer>\n  }\n}\n\n//\u30105\u3011\u51fd\u6570\u7ec4\u4ef6\u7528 useContext \u62ff\u5230 value\nfunction ThemedButton() {\n  const value = React.useContext(ThemeContext);\n  // 123\n  return <div>{value.name}</div>;\n}\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff085\uff09Event Bus")," "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://juejin.cn/post/7101481154565865486"},"https://juejin.cn/post/7101481154565865486")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://segmentfault.com/a/1190000023585646"},"https://segmentfault.com/a/1190000023585646")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://codesandbox.io/s/wizardly-wave-rrmw5v?file=/src/Context.jsx"},"https://codesandbox.io/s/wizardly-wave-rrmw5v?file=/src/Context.jsx"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff086\uff09redux")),(0,r.kt)("p",null,"\u4f7f\u7528 redux \u7ba1\u7406\u7ec4\u4ef6\u95f4\u7684\u6570\u636e\uff0c\u8fbe\u5230\u5b8c\u5168\u53ef\u63a7\u3002"),(0,r.kt)("h2",{id:"\u81ea\u5b9a\u4e49-hook"},"\u81ea\u5b9a\u4e49 hook"),(0,r.kt)("h3",{id:"\u95ee\u9898\u963b\u6b62-useeffect-\u521d\u59cb\u5316\u8c03\u7528"},"\u95ee\u9898\uff1a\u963b\u6b62 useEffect \u521d\u59cb\u5316\u8c03\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const useUpdateEffect = (callback, deps) => {\n    const firstMount = useRef(true);\n  useEffect(() => {\n    if (firstMount.current) {\n      firstMount.current = false;\n      return;\n    }\n    callback();\n  }, deps);\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1acallback \u4e2d\u4e0d\u53ef\u4ee5\u6709 hooks\uff0c\u56e0\u4e3a\u4f7f\u7528\u4e86 if \u5224\u65ad",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5173\u8054\uff1ahooks \u4e3a\u4ec0\u4e48\u4e0d\u80fd\u7528 if\u3002\u95ee\u9898\uff1aHooks \u7684\u7279\u70b9\u4e4b\u4e00\uff0c\u6709\u5e8f\u3002")))),(0,r.kt)("h2",{id:"react-router"},"React Router"),(0,r.kt)("h3",{id:"-redux-\u4e0e-react-router-\u6574\u5408"},"\ud83c\udf4a redux \u4e0e react-router \u6574\u5408"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u597d\u5904 / \u7279\u70b9\uff1a")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5c06 router \u4fe1\u606f\u540c\u6b65\u5230 store \u4e2d\uff0c\u4ece store \u4e2d\u83b7\u5f97\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7redux \u7684 dispatch actions \u5bfc\u822a"),(0,r.kt)("li",{parentName:"ul"},"\u96c6\u6210 Redux \u53ef\u4ee5\u652f\u6301\u5728 Redux devtools \u4e2d\u8def\u7531\u6539\u53d8\u7684\u65f6\u95f4\u5c65\u884c\u8c03\u8bd5")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6d41\u7a0b\uff0c\u6d89\u53ca\u5230 ",(0,r.kt)("a",{parentName:"strong",href:"https://juejin.cn/post/6844904175671705614#heading-9"},"\ud83d\udd17"),"\uff1a")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Redux \u76f8\u5173\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<Provider />")," \u4f20\u5165\u521b\u5efa\u597d\u7684 store\uff0c\u63d0\u4f9b redux \u80fd\u529b\u3002\u5305\u88f9 ",(0,r.kt)("inlineCode",{parentName:"li"},"<App />"),"\uff0c\u662f\u4e00\u4e2a root reducer\u3002"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Router \u76f8\u5173\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"history")," \u5bf9\u8c61\uff0c\u5229\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"createBrowserHistory()")," \u521b\u5efa\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"<connectRouter />"),"\u5305\u88f9 ",(0,r.kt)("inlineCode",{parentName:"p"},"<App />"),"\uff0c \u8fd4\u56de\u7ed1\u5b9a\u4e86 history \u7684 root reducer\u3002"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"routerMiddleware(history)")," \u4e2d\u95f4\u4ef6\u7ed1\u5b9a history \u5230 reducer\uff0c\u5b9e\u73b0\u7528 api \u4fee\u6539 store \u4e2d\u7684\u8def\u7531\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8fd9\u91cc\u8fd8\u6d89\u53ca\u5230 thunk\u3001store \u7b49\u77e5\u8bc6\uff0c\u95f4\u4e0a\u9762\u7684\u94fe\u63a5\u3002")))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import * as createHistory from 'history'\nconst history = createHistory.createBrowserHistory()\n\nrender(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <App />\n    </ConnectedRouter>\n  </Provider>,\n  document.getElementById('app')\n)\n")),(0,r.kt)("h3",{id:"-react-router-\u6d41\u7a0b"},"\ud83c\udf4a React Router \u6d41\u7a0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import ReactDOM from 'react-dom';\nimport Home from './page/Home'\nimport About from './page/About'\nimport Me from './page/Me'\nimport { BrowserRouter, Link, Switch, Route } from 'react-router-dom'\n\nReactDOM.render(\n  <BrowserRouter>\n    <nav>\n      <ul>\n        <li><Link to=\"/home\" >Home</Link></li>\n        <li><Link to=\"/about\" >About</Link></li>\n        <li><Link to=\"/me\" >Me</Link></li>\n        <li><Link to=\"/other\" >other</Link></li>\n        <li><Redirect to=\"/login\" /></li>\n      </ul>\n    </nav>\n    <Switch>\n      <Route path=\"/home\" component={Home}></Route>\n      <Route path=\"/about\" component={About}></Route>\n      <Route path=\"/me\" component={Me}></Route>\n      <Redirect from='/aboutMe' to='/Me'/></Redirect>\n    </Switch>\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5f53\u5730\u5740\u680f\u6539\u53d8 url\uff0c\u7ec4\u4ef6\u7684\u66f4\u65b0\u6e32\u67d3\u90fd\u7ecf\u5386\u4e86\u4ec0\u4e48\uff1f")),(0,r.kt)("p",null,"\u62ff history \u6a21\u5f0f\u505a\u53c2\u8003\u3002"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"ConnectedRouter")," \u7ec4\u4ef6"),"\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5f53 url \u6539\u53d8\uff0c\u968f\u4e4b history \u5bf9\u8c61\u6539\u53d8\uff0c\u89e6\u53d1\u4e8b\u4ef6\u76d1\u542c ",(0,r.kt)("inlineCode",{parentName:"li"},"popstate")," \uff0c\u89e6\u53d1\u56de\u8c03 ",(0,r.kt)("inlineCode",{parentName:"li"},"handlePopState"),"\uff1b",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"hash \u6a21\u5f0f\u5c31\u662f\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"li"},"hashChange")," \u4e8b\u4ef6\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u89e6\u53d1 history \u5bf9\u8c61\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"setstate()"),"\uff0c\u4ea7\u751f\u65b0\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"location")," \u5bf9\u8c61\uff0c\u4fdd\u5b58\u5f53\u524d URL \u4fe1\u606f\u3002"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Router")," \u7ec4\u4ef6\u3002")," \u901a\u8fc7 ",(0,r.kt)("strong",{parentName:"li"},"Provider context")," \u628a ",(0,r.kt)("inlineCode",{parentName:"li"},"hisotry"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"history.location"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"match")," \u4f20\u9012\u4e0b\u53bb\u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"switch")," \u7ec4\u4ef6"),"\u3002\u901a\u8fc7 Consumer context \u62ff\u5230 URL\uff0c\u5339\u914d\u7b26\u5408\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Route")," \u7ec4\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Route")," \u7ec4\u4ef6"),"\u3002\u6e32\u67d3\u5bf9\u5e94\u7ec4\u4ef6\uff0c\u540c\u65f6\u901a\u8fc7 Consumer context\uff0c\u628a ",(0,r.kt)("inlineCode",{parentName:"li"},"hisotry"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"history.location"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"match")," \u901a\u8fc7 props \u4f20\u9012\u4e0b\u53bb\uff0c\u8ba9\u4e1a\u52a1\u7ec4\u4ef6\u53ef\u4ee5\u83b7\u5f97\u8def\u6709\u5173\u4fe1\u606f\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4e3b\u52a8 ",(0,r.kt)("inlineCode",{parentName:"strong"},"history.push()")," \u6765\u5207\u6362\u8def\u7531\uff0c\u7ec4\u4ef6\u7684\u66f4\u65b0\u6e32\u67d3\u7ecf\u5386\u4e86\u4ec0\u4e48\uff1f")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u751f\u6210\u6700\u65b0 ",(0,r.kt)("inlineCode",{parentName:"li"},"location")," \u5bf9\u8c61\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"window.history.pushState()")," \u6539\u53d8\u5f53\u524d\u6d4f\u89c8\u5668\u7684 URL (\u8def\u7531)\uff1b"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"ConnectedRouter")," \u7ec4\u4ef6"),"\u3002",(0,r.kt)("strong",{parentName:"li"},"\u4e3b\u52a8\u89e6\u53d1")," ",(0,r.kt)("inlineCode",{parentName:"li"},"history.setState()"),"\uff0c\u4f20\u9012\u65b0\u7684 Location \u5bf9\u8c61\uff0c\u66f4\u65b0 URL \u4fe1\u606f\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u548c\u4e0a\u9762\u7b2c\u4e8c\u6b65\u4e00\u6837\u4e86\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8def\u7531\u7ec4\u4ef6\u7684 props")),(0,r.kt)("p",null,"\u4f20\u9012 props \u548c ",(0,r.kt)("strong",{parentName:"p"},"\u5f88\u591a\u8def\u7531\u76f8\u5173\u4fe1\u606f")," \u7ed9\u8def\u7531\u7ec4\u4ef6\uff0c\u5b50\u8def\u7531\u7ec4\u4ef6\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"this.props")," \u6709\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'// this.props \u4e2d\u7684\u4e09\u5927\u5c5e\u6027\uff1a\nhistory:            // \u5bf9URL\u8fdb\u884c\u64cd\u4f5c\n    go: \u0192 go(n)\n    goBack: \u0192 goBack()\n    goForward: \u0192 goForward()\n    push: \u0192 push(path, state)\n    replace: \u0192 replace(path, state)\n\nlocation:\n    pathname: "/about"  // \u5f53\u524dURL\u4fe1\u606f\n    search: ""\n    state: undefined\n\nmatch: \n    params: {}  // URL\u4e2d\u7684\u53c2\u6570\n    path: "/about"\n    url: "/about"\n')),(0,r.kt)("h3",{id:"-\u6587\u4ef6\u7ed3\u6784--\u542f\u52a8\u6d41\u7a0b"},"\ud83c\udf4a \u6587\u4ef6\u7ed3\u6784 / \u542f\u52a8\u6d41\u7a0b\uff1a"),(0,r.kt)("p",null,"public ---- \u9759\u6001\u8d44\u6e90\u6587\u4ef6\u5939"),(0,r.kt)("p",null,"\u200b\t\t\tfavicon.icon ------ \u7f51\u7ad9\u9875\u7b7e\u56fe\u6807"),(0,r.kt)("p",null,"\u200b            index.html -------- \u4e3b\u9875\u9762\uff0c\u9879\u76ee\u53ea\u6709\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},".html")," \u6587\u4ef6\uff0cSPA\uff08single page app\uff09\u5355\u9875\u9762\u5e94\u7528\u3002"),(0,r.kt)("p",null,"src ---- \u6e90\u7801\u6587\u4ef6\u5939"),(0,r.kt)("p",null,"\u200b            App.js --------- App \u7ec4\u4ef6\uff0c\u9879\u76ee\u53ea\u6709\u4e00\u4e2a\u7236\u7ec4\u4ef6\uff0c\u653e\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},'<div id="root"></div>')," \u4e2d\uff0c\u5176\u4f59\u81ea\u5df1\u6dfb\u52a0\u7684\u7ec4\u4ef6\uff0c\u90fd\u653e\u5230 App \u7ec4\u4ef6\u4e2d\u3002 "),(0,r.kt)("p",null,"\u200b            index.js ------- \u5165\u53e3\u6587\u4ef6\uff0c\u5f15\u5165 react \u6838\u5fc3\u5e93\u3001react-dom \u6838\u5fc3\u5e93\u3001App \u7ec4\u4ef6\u7b49\u5fc5\u8981\u7684\u8d44\u6e90\u3002"),(0,r.kt)("p",null,"\u200b\t\t    ...... "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u542f\u52a8\u6d41\u7a0b\uff1a")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5728 ",(0,r.kt)("inlineCode",{parentName:"li"},"src")," \u4e0b ",(0,r.kt)("inlineCode",{parentName:"li"},"index.js"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5f15\u5165 react \u6838\u5fc3\u5e93 (React.Element)\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u5f15\u5165 react-dom \u6838\u5fc3\u5e93 (render)\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u5f15\u5165 redux\u3001router \u7b49\u4e2d\u95f4\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5f15\u5165 index CSS \u6837\u5f0f\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u5f15\u5165\u6839\u7ec4\u4ef6 App \uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"li"},"ReactDOM.render()")," \u6e32\u67d3 App \u7ec4\u4ef6\uff1b",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5f15\u5165 App \u7ec4\u4ef6\u65f6\uff0c\u5c31\u4f1a\u628a\u76f8\u5e94\u7684 CSS\u3001JS \u4ee3\u7801\u5168\u90e8\u5f15\u5165\u3002"))))),(0,r.kt)("li",{parentName:"ol"},"\u5728 ",(0,r.kt)("inlineCode",{parentName:"li"},"index.js")," \u6587\u4ef6\u6267\u884c\u540e\uff0cReact \u901a\u8fc7 webpack \u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u627e\u5230 ",(0,r.kt)("inlineCode",{parentName:"li"},"public")," \u4e0b\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"index.html"),"\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f9d\u6b21\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"index.html")," \u4e2d\u7684\u7a0b\u5e8f\uff0c"))),(0,r.kt)("li",{parentName:"ol"},"\u6700\u7ec8\uff0c\u6e32\u67d3\u51fa ",(0,r.kt)("inlineCode",{parentName:"li"},"index.html")," \u7684\u9875\u9762\u3002")),(0,r.kt)("h3",{id:"-\u94fe\u63a5\u5982\u4f55\u8df3\u8f6c"},"\ud83c\udf4a \u94fe\u63a5\u5982\u4f55\u8df3\u8f6c"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u94fe\u63a5\u7684\u8df3\u8f6c\u662f\u4f9d\u9760 BOM \u4e2d window.history \u5b9e\u73b0\u7684\u3002")),(0,r.kt)("p",null,"\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"history.js")," \u5e93\uff0c\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u57fa\u672c\u7684\u5b9e\u73b0\u539f\u7406\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u63d0\u524d\u51c6\u5907\u5de5\u4f5c\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"let history = History.createBrowserHistory()"),"\u3002\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"history.js")," \u5e93\uff0c\u521b\u5efa\u4e00\u4e2a\u6bd4\u76f4\u63a5\u8c03\u7528 BOM \u66f4\u65b9\u4fbf\u7684\u65b9\u5f0f\uff0c\u6765\u4fee\u6539 BOM \u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"window.history")," \u5c5e\u6027\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5f53\u7528\u6237\u70b9\u51fb ",(0,r.kt)("inlineCode",{parentName:"li"},"a")," \u6807\u7b7e\uff0c\u89e6\u53d1\u4e86 ",(0,r.kt)("inlineCode",{parentName:"li"},"onClick")," \u56de\u8c03\u51fd\u6570\uff1a",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"history.push()")," \u5f80\u5386\u53f2\u8bb0\u5f55\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u5730\u5740\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"return false")," \u963b\u6b62\u6d4f\u89c8\u5668\u7684\u81ea\u52a8\u8df3\u8f6c\u884c\u4e3a\uff1b"))),(0,r.kt)("li",{parentName:"ol"},"\u5728\u51fd\u6570 ",(0,r.kt)("inlineCode",{parentName:"li"},'history.listen(location = > { console.log("\u8bf7\u6c42\u8def\u7531\u8def\u5f84\u53d8\u5316\u4e86", location)})')," \u7684\u76d1\u542c\u4e2d\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"location")," \u53c2\u6570\u83b7\u5f97\u53d8\u5316\u7684\u8def\u5f84\uff0c\u7136\u540e\u6839\u636e\u4e0d\u540c\u7684\u8def\u5f84\u518d\u5c55\u793a\u4e0d\u540c\u7684\u7ec4\u4ef6\u5230\u9875\u9762\u3002")),(0,r.kt)("h3",{id:"-spa-\u5b9a\u4e49"},"\ud83c\udf4a SPA \u5b9a\u4e49"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5355\u9875Web\u5e94\u7528\uff08single page web application\uff0cSPA\uff09\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u6574\u4e2a\u5e94\u7528\u53ea\u6709 ",(0,r.kt)("strong",{parentName:"li"},"\u4e00\u4e2a\u5b8c\u6574\u7684\u9875\u9762"),"\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u70b9\u51fb\u9875\u9762\u4e2d\u7684\u94fe\u63a5 ",(0,r.kt)("strong",{parentName:"li"},"\u4e0d\u4f1a\u5237\u65b0")," \u9875\u9762\uff0c\u53ea\u4f1a\u505a\u9875\u9762\u7684 ",(0,r.kt)("strong",{parentName:"li"},"\u5c40\u90e8\u66f4\u65b0\u3002")),(0,r.kt)("li",{parentName:"ol"},"\u6570\u636e\u90fd\u9700\u8981\u901a\u8fc7 ajax \u8bf7\u6c42\u83b7\u53d6, \u5e76\u5728\u524d\u7aef\u5f02\u6b65\u5c55\u73b0\u3002")),(0,r.kt)("p",null,"\u8def\u7531\u7684\u5b9a\u4e49\uff1a\u4e00\u4e2a\u8def\u7531\u5c31\u662f\u4e00\u4e2a\u6620\u5c04\u5173\u7cfb (key / value)\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"key \u662f\u4e00\u4e2a\u8def\u5f84\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"li"},'"/serch/users"'),"\uff1b"),(0,r.kt)("li",{parentName:"ul"},"value \u53ef\u80fd\u662f function\uff08\u540e\u7aef\uff09 \u6216 component\uff08\u524d\u7aef\uff09\u3002")),(0,r.kt)("h3",{id:"-browserhistory-\u548c-hashhistory-\u7684\u533a\u522b"},"\ud83c\udf4a BrowserHistory \u548c HashHistory \u7684\u533a\u522b"),(0,r.kt)("p",null,"BrowserHistory \u662f H5 \u63a8\u51fa\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"history")," \u8eab\u4e0a\u7684 API\uff0c\u517c\u5bb9\u6027\u95ee\u9898\uff1b"),(0,r.kt)("p",null,"HashHistory \u662f\u5229\u7528 hash\u503c\uff08\u951a\u70b9\u8df3\u8f6c\uff09\uff0c\u517c\u5bb9\u6027\u66f4\u5f3a\uff0c ",(0,r.kt)("inlineCode",{parentName:"p"},"#")," \u951a\u70b9\u540e\u7684\u4fe1\u606f\u88ab\u5f53\u505a\u524d\u7aef\u5185\u5bb9\uff0c\u4e0d\u4f1a\u56de\u4f20\u7ed9\u540e\u7aef\u670d\u52a1\u5668\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8fdb\u4e00\u6b65\u7684\uff0c\u540e\u7aef\u9700\u8981\u5904\u7406 ",(0,r.kt)("inlineCode",{parentName:"li"},"index.html")," \u5730\u5740\u7684\u54cd\u5e94\u5373\u53ef\uff0c\u800c Browser \u8fd8\u9700\u8981\u540e\u7aef\u5bf9\u5b50\u9875\u9762 URL \u8bbf\u95ee\u505a\u51fa\u54cd\u5e94\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// BrowserHistory\u7684\u5730\u5740:\n127.0.0.1:5500/index.html/test1\n\n// HashHistory\u7684\u5730\u5740\uff0c\u591a\u4e86\u4e00\u4e2a'#'\uff0c\u951a\u70b9\u7684\u6807\u8bb0\n127.0.0.1:5500/index.html#/test1\n")),(0,r.kt)("h3",{id:"-navlink-\u548c-link-\u7ec4\u4ef6\u6709\u4ec0\u4e48\u4e0d\u540c"},"\ud83c\udf4a NavLink \u548c Link \u7ec4\u4ef6\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f"),(0,r.kt)("p",null,"Link \u66ff\u6362\u4e86 HTML \u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"a")," \u6807\u7b7e\uff0c\u662f Route \u4e2d\u5b9e\u73b0\u8df3\u8f6c\u529f\u80fd\u7684\u5bfc\u822a\u533a\u3002"),(0,r.kt)("p",null,"NavLink \u7ec4\u4ef6\u6bd4 Link \u7ec4\u4ef6\u591a\u4e86\u6dfb\u52a0\u6837\u5f0f\u529f\u80fd\uff0c\u53ef\u4ee5\u5728\u7528\u6237\u70b9\u51fb\u67d0\u4e2a NavLink \u540e\uff0c\u4e3a\u8fd9\u4e2a\u6807\u7b7e\u6dfb\u52a0\u7c7b\u540d\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'<NavLink activeClassName="blue" className="list-group-item" to="/about">About</Link>\n<NavLink activeClassName="blue" className="list-group-item" to="/home">Home</Link>\n<NavLink activeClassName="blue" className="list-group-item" to="/head">Header</Link>\n<NavLink activeClassName="blue" className="list-group-item" to="/foot">Footer</Link>\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5f53\u8be5\u94fe\u63a5\u88ab\u6fc0\u6d3b\u65f6\uff0c\u5c31\u4f1a\u628a ",(0,r.kt)("inlineCode",{parentName:"li"},"activeClassName")," \u7684\u5c5e\u6027\u503c\u6dfb\u52a0\u4e3a\u7c7b\u540d\u3002\u5982\u679c\u4e0d\u8bbe\u7f6e ",(0,r.kt)("inlineCode",{parentName:"li"},"activeClassName")," \u5c5e\u6027\uff0c\u5c31\u4f1a\u9ed8\u8ba4\u6dfb\u52a0\u7c7b\u540d  ",(0,r.kt)("inlineCode",{parentName:"li"},"active")," \u3002")),(0,r.kt)("h3",{id:"-\u8def\u7531\u7684\u6a21\u7cca\u5339\u914d\u4e0e\u4e25\u683c\u5339\u914d"},"\ud83c\udf4a \u8def\u7531\u7684\u6a21\u7cca\u5339\u914d\u4e0e\u4e25\u683c\u5339\u914d"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"1 \u6a21\u7cca\u5339\u914d")),(0,r.kt)("p",null,"\u5982\u679c\u5730\u5740\u680f\u8f93\u5165\u4ee5\u4e0b\u4e24\u4e2a\u94fe\u63a5\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"/about"),(0,r.kt)("li",{parentName:"ul"},"/home")),(0,r.kt)("p",null,"\u5982\u679c\u6211\u4eec\u5c1d\u8bd5\u8df3\u8f6c\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},'<Route path="/home/a/b" component={Home} />'),"\uff0c\u6839\u636e\u6a21\u7cca\u5339\u914d\u539f\u5219\uff0c\u867d\u7136\u6ca1\u6709 ",(0,r.kt)("inlineCode",{parentName:"p"},"/a/b")," \u7684\u5730\u5740\uff0c\u4f46\u662f\u5148\u5339\u914d ",(0,r.kt)("inlineCode",{parentName:"p"},"/home"),"\uff0c\u53d1\u73b0\u4e00\u81f4\uff0c\u5219\u5339\u914d\u6210\u529f\uff0c\u5c55\u793a Home \u7ec4\u4ef6\u3002"),(0,r.kt)("p",null,"\u6211\u4eec\u5e0c\u671b\u5f53\u7528\u6237\u8f93\u5165\u9ed8\u8ba4\u7f51\u5740\u65f6\uff0c\u624d\u4f1a\u5c55\u793a Home \u7ec4\u4ef6\u3002\u8fd9\u5c31\u9700\u8981\u5bf9\u4e3b\u9875\u5730\u5740 ",(0,r.kt)("inlineCode",{parentName:"p"},"/")," \u8bbe\u7f6e exact\u3002\u5728\u8bbe\u7f6e\u4e86\u7cbe\u786e\u5339\u914d\u540e\uff0c\u4e4b\u540e\u5730\u5740\u680f\u8f93\u5165\u5b8c\u5168\u4e00\u81f4\u7684\u4e3b\u9875\u5730\u5740\uff0c\u624d\u4f1a\u5c55\u793a Home \u7ec4\u4ef6\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e0d\u8bbe\u7f6e ",(0,r.kt)("inlineCode",{parentName:"li"},"exact"),"\uff0c\u5730\u5740 ",(0,r.kt)("inlineCode",{parentName:"li"},"/about")," \u4f1a\u9996\u5148\u5339\u914d\u5230 ",(0,r.kt)("inlineCode",{parentName:"li"},'path="/"'),"\uff0c\u4e5f\u4f1a\u5c55\u793a Home\u3002\u5982\u679c\u7528 switch\uff0c\u5728 ",(0,r.kt)("inlineCode",{parentName:"li"},"<Switch>")," \u4e2d\u53ea\u8981\u5339\u914d\u4e00\u6b21\u6210\u529f\uff0c\u5c31\u4f1a\u505c\u6b62\u5339\u914d\u3002\u6240\u4ee5\u4e0d\u8bba\u5730\u5740\u8f93\u5165\u54ea\u4e00\u4e2a\u7f51\u9875\uff0c\u90fd\u4f1a\u5339\u914d\u5230 Home \u7ec4\u4ef6\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"2 \u4e25\u683c\u5339\u914d")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'// \u5f00\u542f\u4e25\u683c\u5339\u914d\n<Route exact={true} path="/home" component={Home} />\n// \u6216\n<Route exact path="/home" component={Home} />\n')),(0,r.kt)("p",null,"\u5f53\u6211\u4eec\u6ce8\u518c\u8def\u7531\u65f6\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"exact")," \u5c5e\u6027\u7f6e\u4e3a true\uff0c\u5c31\u4f1a\u5f00\u542f\u7cbe\u51c6\u5339\u914d\u3002\u5fc5\u987b\u6240\u6709\u5730\u5740\u5b8c\u5168\u4e00\u81f4\uff0c\u624d\u53ef\u4ee5\u5339\u914d\u6210\u529f\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e0d\u4e3b\u52a8\u8bbe\u7f6e\u5c5e\u6027\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"true"),"\uff0c\u5219\u9ed8\u8ba4\u662f ",(0,r.kt)("inlineCode",{parentName:"li"},"true"),"\u3002")),(0,r.kt)("p",null,"\u4e00\u822c\u60c5\u51b5\u4e0b\u4e0d\u4f1a\u5f00\u542f\u4e25\u683c\u5339\u914d\u3002\u4e25\u683c\u5339\u914d\u7684\u5f00\u542f\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e8c\u7ea7\u8def\u7531\u5339\u914d\u5931\u8d25\u7684\u95ee\u9898\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898react\u4e2d\u8def\u7531\u4f20\u9012\u53c2\u6570\u6709\u51e0\u79cd\u65b9\u6cd5"},"\u95ee\u9898\uff1aReact\u4e2d\u8def\u7531\u4f20\u9012\u53c2\u6570\u6709\u51e0\u79cd\u65b9\u6cd5\uff1f"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"params\uff08\u5e38\u7528\uff09")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'<Route path=\'/path/:name\' component={Path}/>\n<link to="/path/2">xxx</Link>\nthis.props.history.push({pathname:"/path/" + name});\n// \u8bfb\u53d6\u53c2\u6570\nthis.props.match.params.name\n\nconst params = useParams();\n// \u7279\u70b9\uff1a\u653e\u5165\u4e86URL\u4e2d\uff0c\u5237\u65b0url\u53c2\u6570\u4f9d\u7136\u5b58\u5728\u3002\u4f46\u957f\u5ea6\u53d7\u9650\u5236\uff0c\u4e14\u7528\u6237\u53ef\u4ee5\u611f\u77e5\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"query")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"<Route path='/query' component={Query}/>\n<Link to={{ path : ' /query' , query : { name : 'sunny' }}}>\nthis.props.history.push({pathname:\"/query\",query: { name : 'sunny' }});\n\n// \u8bfb\u53d6\u53c2\u6570\u7528: \nthis.props.location.query.name\n// \u7279\u70b9\uff1a\u53c2\u6570\u53ef\u4ee5\u4f20\u9012\u4efb\u610f\u6570\u636e\u7ed3\u6784\u3002\u7f3a\u70b9\uff1a\u5237\u65b0\u5730\u5740\u680f\uff0c\u53c2\u6570\u4e22\u5931\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"state")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"<Route path='/sort ' component={Sort}/>\n<Link to={{ path:'/sort', state:{name:'sunny'}}}> \nthis.props.history.push({pathname:\"/sort \",state : { name : 'sunny' }});\n//\u8bfb\u53d6\u53c2\u6570\u7528: \nthis.props.location.query.state \nconst {state} = useLocation()\n// \u7279\u70b9\uff1a\u540c state\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<HashRouter>")," \u4e0d\u652f\u6301  ",(0,r.kt)("inlineCode",{parentName:"li"},"location.state"))),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"search(\u5e38\u7528)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'<Route path=\'/web/departManange \' component={DepartManange}/>\n<link to="web/departManange?tenantId=12121212">xxx</Link>\nthis.props.history.push({pathname:"/web/departManange?tenantId" + row.tenantId});\n// \u8bfb\u53d6\u53c2\u6570\u7528: \nthis.props.location.search\nnew URLSearchParams((useLocation().search))\n')),(0,r.kt)("h2",{id:"\u8bbe\u8ba1"},"\u8bbe\u8ba1"),(0,r.kt)("h3",{id:"-\u5b9e\u73b0\u4e00\u4e2a\u6253\u661f\u7ec4\u4ef6"},"\ud83c\udf4a \u5b9e\u73b0\u4e00\u4e2a\u6253\u661f\u7ec4\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'/*-- App.jsx --*/\nfunction App() {\n    return (\n        <div className="App">\n            <StarRating />\n        </div>\n    );\n}\n\n/*-- Star.jsx --*/\nimport React, { useEffect, useState } from "react";\n\n/** \u5236\u4f5c\u661f\u7ea7\u8bc4\u5206\u7ec4\u4ef6 */\nfunction StarRating(props) {\n  // \u6700\u7ec8\u9009\u4e2d\n  const [rates, setRates] = useState(Array.from(new Array(5), () => false));\n  // \u9f20\u6807\u79fb\u52a8\n  const [select, setSelect] = useState(-1);\n\n  // \u521d\u59cb\u5316\n  useEffect(() => {\n    const newRates = [true, true, true, false, false];\n    setRates(newRates);\n  }, []);\n\n  // \u70b9\u51fb\u540e\uff0c\u5c06\u9009\u4e2d\u7684\u6d82\u4e0a\u989c\u8272\n  const changeClick = (starIndex) => {\n    const newRates = Array.from(new Array(5), (item, index) => {\n      return index <= starIndex ? true : false;\n    });\n    setRates(newRates);\n  };\n\n  // \u9f20\u6807\u79fb\u52a8\u5230\u533a\u57df\u5185\uff0c\u8bb0\u5f55\u4e0b\u5750\u6807\n  const changeMouse = (starIndex) => {\n    setSelect(starIndex);\n  };\n\n  // \u5224\u65adStar\u662f\u5426\u6d82\u4e0a\u989c\u8272\n  const getMarked = (index) => {\n    if (select === -1) return rates[index];\n    return index <= select;\n  };\n\n  return (\n    <div\n      onMouseMove={(e) => {\n        // @ts-ignore\n        changeMouse(e?.target?.getAttribute("star-key"));\n      }}\n      onMouseLeave={(e) => setSelect(-1)}\n      onClick={(e) => {\n        changeClick(e?.target?.getAttribute("star-key"));\n      }}\n      >\n      {Array.from(new Array(5), (item, index) => (\n        <Star starKey={index} key={index} marked={getMarked(index)} />\n      ))}\n    </div>\n  );\n}\n\nfunction Star({ starKey, marked = false }) {\n  return (\n    <span star-key={starKey} style={{ color: "yellowgreen", cursor: "pointer" }}>\n      {/* \u7a7a\u661f\uff0c\u5b9e\u661f */}\n      {marked ? "\\u2605" : "\\u2606"}\n    </span>\n  );\n}\n\nexport default StarRating;\n')),(0,r.kt)("h3",{id:"-\u5b9e\u73b0\u4e00\u4e2a\u8f6e\u64ad\u56fe\u7ec4\u4ef6"},"\ud83c\udf4a \u5b9e\u73b0\u4e00\u4e2a\u8f6e\u64ad\u56fe\u7ec4\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'/*-- App.jsx --*/\nfunction App() {\n  return (\n    <div className="App">\n    <Carousel \n        carouselItems={[<div>item 1</div>, <div>item 2</div>, <div>item 3</div>]} />\n    </div>\n  );\n}\n\n/*-- Carousel.jsx --*/\nimport React from "react";\n\nfunction Carousel(props) {\n  // active \u5f53\u524d\u8f6e\u64ad\u6fc0\u6d3b\u7684\u7d22\u5f15\n  const [active, setActive] = React.useState(0);\n  const style = {\n    carousel: {\n      position: "relative",\n    },\n    carouselItem: {\n      position: "absolute",\n      visibility: "hidden",\n    },\n    visible: {\n      visibility: "visible",\n    },\n  };\n  React.useEffect(() => {\n    // \u5c06 active \u7684\u503c\u66f4\u65b0\u4e3a\u4e0b\u4e00\u4e2a\u9879\u7684\u7d22\u5f15\n    setTimeout(() => {\n      const { carouselItems } = props;\n      // \u56e0\u4e3aactive\u5728render\u4e2d\u4f7f\u7528\u4e86\uff0cactive\u6539\u53d8\u4f1a\u5f71\u54cd\u89c6\u56fe\u800c\u91cd\u65b0\u6e32\u67d3\uff0c\u6240\u4ee5\u4e5f\u4f1a\u518d\u6b21\u89e6\u53d1useEffect\n      setActive((active + 1) % carouselItems.length);\n    }, 1000);\n  });\n  const { carouselItems, ...rest } = props;\n  return (\n    <div\n      style={style.carousel}\n      >\n      {carouselItems.map((item, index) => {\n        // \u6fc0\u6d3b\u5c31\u663e\u793a\uff0c\u5426\u5219\u9690\u85cf\n        const activeStyle = active === index ? style.visible : {};\n        // \u514b\u9686\u51fa\u4e00\u4e2a\u7ec4\u4ef6\u6765\u6e32\u67d3\n        return React.cloneElement(item, {\n          ...rest,\n          style: {\n            ...style.carouselItem,\n            ...activeStyle,\n          },\n          key: index,\n        });\n      })}\n    </div>\n  );\n}\n\nexport default Carousel;\n')),(0,r.kt)("h2",{id:"\u5176\u4ed6-1"},"\u5176\u4ed6"),(0,r.kt)("h3",{id:"\u95ee\u98981\u6784\u5efa-react-\u9879\u76ee\u4ec0\u4e48\u662f\u524d\u7aef\u5de5\u7a0b\u5316"},"\u95ee\u98981\uff1a\u6784\u5efa React \u9879\u76ee\uff1f\u4ec0\u4e48\u662f\u524d\u7aef\u5de5\u7a0b\u5316\uff1f"),(0,r.kt)("p",null,"\u524d\u7aef\u5de5\u7a0b\u5e08\u662f\u4e00\u4e2a\u601d\u60f3\uff0c\u662f\u4e3a\u4e86\u6211\u4eec\u9879\u76ee\u7684\u964d\u672c\u63d0\u6548\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6280\u672f\u9009\u578b\u3001\u5de5\u4f5c\u6d41\u3001git \u5206\u652f\u547d\u540d\u5de5\u4f5c\u5206\u914d\u3001\u4ee3\u7801\u89c4\u8303\u3001\u524d\u540e\u7aef/UI\u4ea4\u6d41"),(0,r.kt)("li",{parentName:"ul"},"\u5f00\u53d1\uff1a\u5f00\u53d1\u89c4\u8303\uff08CSS \u547d\u540d\u3001JS \u6a21\u5757\u5316\u533a\u5206\u3001\u6587\u4ef6/\u7ec4\u4ef6\u62c6\u5206\u5212\u5206\u3001\u7ec4\u4ef6\u5316\uff09"),(0,r.kt)("li",{parentName:"ul"},"\u5355\u5143\u6d4b\u8bd5\uff1a"),(0,r.kt)("li",{parentName:"ul"},"\u63d0\u6d4b\u9636\u6bb5\uff1a"),(0,r.kt)("li",{parentName:"ul"},"\u53d1\u5e03\u9636\u6bb5\uff1a"),(0,r.kt)("li",{parentName:"ul"},"code review"),(0,r.kt)("li",{parentName:"ul"},"\u57cb\u70b9\u76d1\u6d4b\uff1a\u91cf\u5316\u6307\u6807\u6027\u80fd\u4f18\u5316 + \u9519\u8bef\u9884\u8b66")),(0,r.kt)("p",null,"\u9644\uff1a\u9879\u76ee\u5f00\u53d1\u6d41\u7a0b"),(0,r.kt)("p",null,"PRD\u521d\u5ba1\u3001PRD\u590d\u5ba1\u3001\u8bbe\u8ba1\u7a3f\u8bc4\u5ba1"),(0,r.kt)("p",null,"\u5f00\u53d1\uff08\u5de5\u4f5c\u5206\u914d\u3001\u5de5\u4f5c\u6392\u671f\uff09\u3001\u6d4b\u8bd5\u73af\u5883\u90e8\u7f72\u3001\u8054\u8c03 & \u5192\u70df\u6d4b\u8bd5\u3001"),(0,r.kt)("p",null,"\u6d4b\u8bd5\u7528\u4f8b\u8bc4\u5ba1\u3001\u4ea7\u54c1\u8d70\u67e5 & \u63d0\u6d4b\u3001\u6d4b\u8bd5\uff084\u5929\uff09\u3001\u9884\u53d1\u73af\u5883\u90e8\u7f72"),(0,r.kt)("p",null,"\u4e0a\u7ebf"),(0,r.kt)("h3",{id:"\u95ee\u98983react-15-16-17\u533a\u522b"},"\u95ee\u98983\uff1aReact 15 16 17\u533a\u522b"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"React 15\uff1a\u65e7\u751f\u547d\u5468\u671f\uff0c\u66f4\u65b0\u4e0d\u53ef\u4e2d\u65ad"),(0,r.kt)("li",{parentName:"ol"},"React 16\uff1a\u65b0\u751f\u547d\u5468\u671f\uff0cfiber \u67b6\u6784\uff0cfunction \u7ec4\u4ef6\uff0c\u5f02\u6b65\u66f4\u65b0\u53ef\u4e2d\u65ad"),(0,r.kt)("li",{parentName:"ol"},"React 17\uff1a\u4e8b\u4ef6\u59d4\u6258\u4ece document -> app \u6839\u5bb9\u5668\u4e0a\u3002\u9632\u6b62\u540c\u4e00\u4e2a\u9879\u76ee\u4e2d\uff0c\u4e0d\u540cReact\u7248\u672c\u3001\u4e0d\u540c\u6846\u67b6\u7b49\u7684\u4e8b\u4ef6\u51b2\u7a81\u3002")),(0,r.kt)("h3",{id:"\u95ee\u9898\u5355\u5411\u6570\u636e\u6d41"},"\u95ee\u9898\uff1a\u5355\u5411\u6570\u636e\u6d41"),(0,r.kt)("p",null,"\u6709\u4e09\u4e2a\u7406\u89e3\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"React \u5b98\u7f51\u4e2d\u6709\u63d0\u5230\u5355\u5411\u6570\u636e\u6d41\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u53ea\u7684\u5c31\u662f\u901a\u8fc7 props \u8fdb\u884c\u6570\u636e\u4f20\u9012\u3002\u4e00\u4e2a\u9879\u76ee\u4e2d\uff0c\u7ec4\u4ef6\u662f\u6309\u4ee5\u6811\u7684\u7ed3\u6784\u7ec4\u7ec7\u8d77\u6765\u7684\u3002\u4e0a\u5c42\u7684\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7  props \u5411\u4e0b\u5c42\u7ec4\u4ef6\u4f20\u9012\u6570\u636e\u3002\u4e5f\u5c31\u662f\u7236\u7ec4\u4ef6\u53ef\u4ee5\u5355\u5411\u7684\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u6570\u636e\u3002"))),(0,r.kt)("li",{parentName:"ol"},"React \u4e2d\uff0c\u6bcf\u4e2a\u7ec4\u4ef6\u5185\u90e8\u4e5f\u6709\u4e00\u4e2a\u5355\u5411\u6570\u636e\u6d41\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u7ec4\u4ef6\u4ece\u529f\u80fd\u7684\u5b9e\u73b0\u4e0a\u770b\uff0c\u6709\u4e09\u4e2a\u6a21\u5757\uff1a",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"UI\uff0c\u7ec4\u4ef6\u6700\u7ec8\u5c55\u793a\u7684\u6570\u636e\u548c\u754c\u9762\uff1b"),(0,r.kt)("li",{parentName:"ol"},"action\uff0c\u5bf9\u7ec4\u4ef6\u4e2d\u6570\u636e\u7684\u64cd\u4f5c\u65b9\u5f0f\uff0c\u6bd4\u5982\u589e\u5220\u6539\u7b49\u64cd\u4f5c\uff1b"),(0,r.kt)("li",{parentName:"ol"},"State\uff0c\u7ec4\u4ef6\u6570\u636e\u4fdd\u5b58\u7684\u5730\u65b9\uff0c\u7ec4\u4ef6\u7684\u72b6\u6001\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u6240\u4ee5\uff0c\u5728 UI\u3001action\u3001State \u4e4b\u95f4\u4e5f\u662f\u6309\u7167\u5355\u5411\u6570\u636e\u6d41\u4f20\u9012\u7684\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728 UI \u9875\u9762\u4e2d\uff0c\u7528\u6237\u901a\u8fc7\u4ea4\u8d27\u4ea7\u751f\u4e86\u5bf9\u6570\u636e\u7684\u64cd\u4f5c\uff0c\u89e6\u53d1 action\uff1b"),(0,r.kt)("li",{parentName:"ul"},"React \u63a5\u6536\u5230\u7279\u5b9a\u7684 action \u64cd\u4f5c\uff0c\u8fdb\u800c\u5bf9\u7ec4\u4ef6\u7684 State \u8fdb\u884c\u4fee\u6539\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u7ec4\u4ef6\u7684 State \u4e00\u65e6\u53d1\u751f\u53d8\u5316\uff0c\u5c31\u4f1a\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"li"},"render()")," \u91cd\u65b0\u6e32\u67d3 UI \uff0c\u9875\u9762\u53d1\u751f\u53d8\u5316\u3002"))))),(0,r.kt)("li",{parentName:"ol"},"Redux \u4e2d\uff0c\u5bf9\u6570\u636e\u7684\u64cd\u4f5c\u4e5f\u662f\u4e00\u4e2a\u5355\u9879\u6570\u636e\u6d41\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4e00\u4e2a Store \u4ece\u5bf9\u6570\u636e\u7684\u64cd\u4f5c\u6765\u770b\uff0c\u6709 3 \u4e2a\u6a21\u5757\uff1a",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"UI\uff0c\u7ec4\u4ef6\u6700\u7ec8\u5c55\u793a\u7684\u6570\u636e\u548c\u754c\u9762\uff1b"),(0,r.kt)("li",{parentName:"ol"},"Dispatch\uff0c\u7ec4\u4ef6\u4e2d\u5bf9\u6570\u636e\u7684\u64cd\u4f5c\u65b9\u5f0f\uff0c\u6bd4\u5982\u589e\u5220\u6539\u7b49\u64cd\u4f5c\uff1b"),(0,r.kt)("li",{parentName:"ol"},"Store\uff0c\u7ec4\u4ef6\u4e2d\u4fdd\u5b58\u6570\u636e\u7684\u5730\u65b9\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Reducer\uff0cStore \u4e2d\u4fdd\u5b58\u5bf9\u6570\u636e\u64cd\u4f5c\u7684\u5730\u65b9\u3002Dispatch \u89e6\u53d1 Reducer \uff0c\u5b8c\u6210\u5bf9\u6570\u636e\u7684\u64cd\u4f5c\u3002"),(0,r.kt)("li",{parentName:"ul"},"State\uff0cStore \u4e2d\u4fdd\u5b58\u6570\u636e\u7684\u5730\u65b9\u3002"))),(0,r.kt)("li",{parentName:"ol"},"\u6240\u4ee5\uff0c\u6570\u636e\u5728UI\u3001Dispatch\u3001Store\uff08Reducer\u3001State\uff09\u4e2d\u4e5f\u662f\u4e00\u4e2a\u5355\u9879\u6570\u636e\u6d41\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7528\u6237\u901a\u8fc7 UI \u754c\u9762\u89e6\u53d1\u4e8b\u4ef6\uff0c\u5f15\u53d1 Dispatch \u6d3e\u53d1\u7533\u8bf7\u5bf9\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\uff1b"),(0,r.kt)("li",{parentName:"ul"},"Dispatch \u8c03\u7528 Store \u4e2d\u7684 Reducer\uff0c\u901a\u8fc7\u643a\u5e26\u7684 action \u8bc6\u522b Reducer \u4e2d\u5bf9\u5e94\u7684\u64cd\u4f5c\u3002\u7136\u540e\u4fee\u6539\u6570\u636e\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u4fee\u6539\u540e\u7684\u6570\u636e\u4f1a\u66f4\u65b0 Store \u4e2d\u7684 State\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6570\u636e\u66f4\u65b0\u5b8c\u6bd5\u540e\uff0c\u4f1a\u901a\u77e5 React \u7ec4\u4ef6\uff0c\u6700\u7ec8 ",(0,r.kt)("inlineCode",{parentName:"li"},"render()")," \u91cd\u65b0\u6e32\u67d3 UI \u754c\u9762\u3002")))))))))}c.isMDXComponent=!0},96121:function(e,t,n){t.Z=n.p+"assets/images/16deecc43c710e16~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0-af1ecf1eda7814df686431778089fc93.awebp"},72066:function(e,t,n){t.Z=n.p+"assets/images/16deecce3162b355~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0-c4218249f9dea90c20684edbe11ebc2c.awebp"},59126:function(e,t){t.Z="data:;base64,UklGRmwUAABXRUJQVlA4WAoAAAAQAAAAOwEA+gAAQUxQSPAIAAAB8ID/vzk3/v89J7bN2o3aRkU6jRo0E7VxbdtttrZtc+2tbdu2bTyqoK85c87Z3TcigoIkSW4jyWO1xPaeANAFPICkrv/77/8pCsxddRuKdntVbpAsaHIeWul8EymwAlprhQT4BVrsF+FbBq22XPCGQssNFToNtJ5G5A5o3wGBSwcDpYvbBhZsEDYfMJGPqA1gwwBR28uGvYLmDEZyFvpJpaSdWuayIlfQl9CsWCZmO1mxU8wusuKimIGZ/vOO3P00uTuvlLvrGbm7jpa7+zdyd99Q6u5Xy90+idztz0ndvrDczSNI3RyM3M1fyeHcn4RdTC+TujlnqZuvl7vnOiShIG08TxRI0tNKYDrJWsPxEGgiaVoAMS3xxlfKRAFtiOZgh4wpeROjicjwECbKF4Md+J4+FwLUly5Lsd+Mvqg9npeTLEPwsDzlaSE2y5WmQB3Ky+wExsiUcKA95VcYkCFPil3DOMq/LnhUQppsxc+FuLu4VpYswmGrAtmcxXA5MhBPfKngIoAUGdIQSKTC1BN3vOVHGNCJCtf3+FN6eF3GJCokx0sYJDs24TcqdDFAgtyYh2O2VPj647qbzOiPFwFfuQ36i8TIAVLpq7jdQD9pUQ3opsDYTIykcD+PqfTVDcIlBzmxTpkTx7/wnZSYjVMOSihyFz0lRB+8DiRFSgXCpUMmkKbcRvsZa8kQ8hY9lfzv8TK54HwGM5TcMH6ELlJhNdaQkmUANSTCDJx1IUUbi+Nm0qAH3oWQwm3GQllQD8gkpZV7gXZyoMor9CXlawCEyACHk5hD2mgSDhlIgD+wXmsviJgtflNwwV1L/N6ipeh1Bappc8yoktilaHcecjr2Cl3AMy2/GGQfpgmc7VHM1/JZFdBE3H7V/hxpK7zxEbWJuOJN2m4utgtaJ6AmaZ3RYUwUMg3QiBgoFMgR8StZHmMgMVEHPCsrXJaHsJid4dRNwvUTtqlYYX4SowVrLK4XI2aqCaQLVTsgnK1r8YfFBSoeaEZMtRxrxan8A+ZeRWN7DsNEyWwfg3vikUCKIH2HnQzepe+FO15CNAq3SxKD/YA/RKg1EE0scrqMgeITA2Z3N2KBOqJT+g5GEKvl4pqr2Bjtxkqm7+D+LLo3ne01YXnE/Cb6isxw3CtLLJcI1BaX5kAssd1gXLQXlUigDbHeKnwnKCVuYgwxr+g99BAS/R34gXSgukC4iCzBAXPShUbgjJV4DMbDCqQbrcdS4WiiQ496l3qMzoJRC+igUw8mVReKolcxnnSocThmKhJb8LOu/TEXCMRCHLHSsX2Yl2grDAPw1E8H3ygULAgNgSTSuSbjoL4Q1IBunqvswmwR8LyESaSL/N+hhQBsxO+kmzUTwYML83DcTncfZ93De/3wohLpKtV+TOW7bCCVdLdAoDHPVQW66/ju/euK/OZ2Xucf95mHbfy2Fn+RjjM+ggm8NgunHHnwH6tsPuuNN4Gk+3XEszI8lsGLwe3F2MhhwW/Qi7jA4hRGc5fTacwkTqQG0nhrFU8G3rvhQTG+mo5zrlyZ+VrD2VcjvQ8ljrA9j6EcVRfIIq4UBSRzU+WX6MufU9zbnpxkfwJziTv9iN+5+WqkDcQfzlcwgIsm46IHcag4IJ6DunBrCOUbXHPhnmSgAXGq3/AT7/g/wzfEKx630JdvbI5wbXgnCYjmD1VFg7x+wWbiWUNwwS7vP1zcYIijeUzAVW/e3Rj5Ns+kPz8ekDbDy7z3hqHm3eTmfXT/Qhp+4gUrPP7y1Ug83IatB9T6rDGW8IId7n1W8REGEf8aidOWn7TFLG5cZ+EGEVkcxBLiYRuw5JPuGM8L7rj0xVX+dj0+PnL9BJ2IBmAoL3jjLNFY3ChOfCwLqEaj0I8XSuA4tQUiiJeNxzGTqejGC2VwMA5oRvxTrYEHfW4r5s9HO16ogCP3MYyITOMGrf5Zj18MADxcmO5EFV7hAD/+EfPHU6wIH7LxBQC+7YS5dtwJAOcmTwaQwwtVkKc7y5q6E++q3v8YvqgeLyz+bPuAUOJlJRrNuwys4sZzGweHWBNnM2uzOVJnxoVzV92G9rq9KjeoIEJdrCbnof3ON1GWSBZrBdhohcKEsVi/gJV+UZggFmsZ2GmZwoSwWEPBUkMVJoDF0oCtNArj/2IdYMwBpfF+sdLBWukK4/1ibWDOBqXxfbF8wF4+CuP7Yg1g0AClcX2x9jJor9J4vljOYDFnhfF8sTRM0iiN44uVy6RcpXF8sZYxaZnSOL5YO5m0U2kcX6yLTLqoNI4vFthMadxYrP+8I3c/Te7OK+XuekburqPl7v6N3N03lLr71XK3TyJ3+3NSty8sd/MIUjcHI3fzV1I39yd186ZSN+csdfP1cv9cBxEFaf3RnEBSPF4s1v9vSEWkKvBICjwiFZEq34ORiwz0iaxLWLnau+mrVC52Kj1ysS7qWdyCyL4sEdnYkbMlEZG3uxEZuJJpEdJzdfVw97CUAHrFfNVh+o4Z1WNapXkQldAQ2SSmpqZmJ1p4BiXVMKKwtIqJOWXNrcw1CdHGxTJKUYozJWXHaNJqWpFK9IoHRlWuXLNYi4TURlmhniFxzdVFTRJapteJjQtOzkpOzXHzbRue3q5q8YjUrlnpwRapKbWax1jHRAf4VPc0EP5Hg4D4qkllY0ObtWjeKs3PIiCxmTrEVdNAk5gR4h5br03diJI1clI0jeL1rKKadvSyD2gWXrpFTKkEd3WjAD0i4asVm5iYGBiZnNyySetgIo8UIlNNq7jkhrVNQ5MaZ6ptA5qWzA4LcQ6okh0VbubZNMokwYnq1PaJVBuqSPhFBPpGxfvbxZSukR4bFRAY1axaRYuwZE1y/djiVbMapsaYlkvxD29TxSbML9XHMdI8IaxS4yjz1JTkCjHVxf89KrNodaiHGXl7G5cq5+QWUSMyXF2mQkjZoPCIooHhtaPDyxYP8/fzruX66dD8yNiwmE9QVGxZj7iwSLXaWfwfyKiijzupSJ9IL5//5xfwd6FPnzIsxOGQmL9U+IVXff70U18cg0pVwMGpCjoIlURc0KhU9N8zEVZQOCBWCwAAMEcAnQEqPAH7AD6RRp9Kpb+jIacTqVPwEgljbuFy/oARI1Hf6rtFOA/G89G2PrdwIp++1vPh/pvUH5gHjk/qr7hPMB+xPq4/7X9svdX/pvUA/tX+V6xD0Df299Or2SP77+SXtVeoB///UA///XX9Fv4/+Df6AeUHfj4zQh6z33I8q8QMo56/5pfYPoK/zngU0AP5l/ivQVz0fT/sEfzL+3daf0VSUinT49j2+oCF+VC5FOmFk1QtFlzO4qSRegIX5ULi6OpghfUZvsKT/L9UXVVdhJFq9vqAhflQsyXazhISZZLphHbD5dVXwuhEc3zXTIHZFOnxh2XS97D6QQRBSJ7izdj2+oCF+UoVobs08xUVoU80RSj+mo3dlNHse31AQvkk5R94rcDEKsTFeBi3LdOyX5ULkU6erHxkb+HBvYPplBoelNMDsinT480bZOkoe5fN31hhD43RF/7Ht9P/WpqMrb11iYGOyr4n5vjd+hFqFOLpyumQOixOsQANuZxQ7IpxGHjCyUT7KgoLRgOOcCbxg9q5Tlda6XgVeP5+T6Agy11DbLKbTJ8A843wrakNDO7q0g9nqX7s2mi3tUTy2CsBlORTqqRCYFYiPw2uGmqvZ/Jt+cIcc/LmqRioCMdI/Zb5UtpZzh00OgwqA3an+fjHW4O0xRZ6LhzHP9Te0Ma8rRagEhJESbffh2ijcYk1jBxJnVyNwYTeecXsjBNqjOZM9q78XoCSEj6gH5hvmAnCcbEE1nZZzFhb4mdPa4UGFWAA/v8t+AAsCwcHhU/g0ydB/XYCrOzdYEo2rY+e6l4LRhqkJs4MRhRrXWmIolwf3YRLdPeuuRYDjVIQiMi5VysCs9gLgbSCAN3PVZCIxpacmpGawaWL6YwMYO0N0+8tukcWaZPfhjtLXppIpJAZ7f/opnF39WZoHa6i0FskJKkCd/nAPuOSVOlQ7Ilk8QjzU2/4R8cd3eEpTYpz3oluSlIPQ7/Ct3a6qJL1EaPVMfnralJr/PPDiiBJzOEnqcEu3AAlZNGss5BWuXn+BQpIbjHddy1BLuq4cRxzzbYhnIL+KySfEvHTciJYDcS1EBIhmYb5KTLGJrR/oj8lEyJ3E+bjoZnHToemZPo14X0PsglSbiRnkgt2YCxVWky/DLGF2XGoZTIMjQ6m2UcNCE9rLAH8+8YX+Y/Vi0a4AGOhUs88Ivz/lom5WszutnEGryJS0cqiKllGVSlVEX6UJT7DdwNYrp3+vMQqJ1aodd4ZSotQMQKZ/p11ZT6xRUghMcv9TvOg6Cr1mLOfMbb9T2xbY94LMIVw/jhIHfl32ZZZLWM4t9hfOVy3PnD2VZK4uWlv//pQmAFvtw1ud6mygG7qcOgbejslDWcAAa92STBTEIv1qciCAA2RtKSeq0ypZjqv7CoqrIOxT9gbA618hbglbjK76oAJbYWNnVKRsPfdtYWICxOPgzHV5iRB9pQb0Qk4UqV6yQAFDKczqAq+UFQRXJpZFcBay/rxrqUs/Y3l/Ae+TB1IaXg85X5NrsiVJlZf/0T0HPfbj90qfclSHHU+BAJgRZ3AJhCF8nb9rOYJQ/9FRJX/TLPvJvW6lpjpXFSvO84UfZRPDcMwGgyZqn9DwnPmMK9+nPYDgBARlgoV8vDOAWY+4XX9oUAlaakt0GEofNNra99LzZeCGNOMCwnFCgDe62kIhxYV8qDXYlI8rYSqUIkqXypaF5ob//Grf/jKP//F1MlM4nbYgs7C8sqml2UAFMj7fmOlzCn3sVol8YNT3sTyasqtMN67EbfJrEvqngR3sd75cLAeHj2z+qGIS05fVcFqKonn4wwwiuTNEx+U1VMaoKxOMmEu4bW6u1zh2yf5GVIttagN9yCeFJqf/k1y7Wu42qAI3yE3H6/uaIsb4cvZ29DoVvqqQanzM+EK/WbZnXwkMqWb5zsyscJ6lWDUIEEPM6O8Q3HbIHSuGb8lPSVt8ip5xkVdloBB5qDSLy0je/ISY6EpjL+tipvPWAiDM0r//5eXGh/WLOmhaueMbiUFBdLfC+KwCYUSEhd3hz75+/6iVjYqZTgxozgKJ+j5UM10iZ1hb1NrOej/XSLoSLKrhepF1Vd11nfLdWPXJUH5SJo137FFNUYA277+jAK90hM1DA77T0wVmNOMCwlFk0Zz0nyICdaLedEIPqt+05AoaKH1WWQJ4ODlVMxDZMHltB4xk/4MO26kwN5i78ivdhKZIWcYu06OQUdeJmB8zbw+ik4Jjbh62TTeCiCXbjRl1HmH953aJ4+l1weA8gT2dgEK5gGG40f24ig6gtWFgDCwcsnt4EykEPiMDbXs7A3t2ZNKd1/0f5MdccyTb8B85XlqJjQibQZDYzfwPWbdWyyXdhSiTgygt4luUGsT0egXtVLiiVqGNJ1WkZd1InKnawGLseVZ2vil+x48O3YeexaYO/CBtxv5YplmAoHJAs791+q4NeP3S0k91erTkadSgHA7zPoPOgL5NDyHjQ++0/3VTSJCJ/GBxp5IKpLaW/tmDlMtcGfoPcZ2ryztWQTj0M/mFtdhtwClMdPA8oDlx/hQtldQqUpqAub61IlYLz8DosDooGnZ5m1qGD/ai/I7BUTgFJzvHmIOHxk6BzMbuGeMKWhS1eCH1FLAkdQ1oSfqIPRv5BIQuvicFnPdOga2dHQyd6SYeRMooFZQa2X3dSI77K/8/KqSbTL69qsO60vMUnAb/zlX62DOtgqA7oR1Gcljx7fa7/8BgwXWK5fvOI0ZeFMDq9M7MLQrrjEyPQr9+Rt1IA4QcMR4p6SUhwM5mpB9VeL+45uwkK97hQZa4qfsp1RotgXv1vi1F3mhUjx4BvVNqVFq95iLq69fN7t4/0HJde6S2eoIJj/IYOzVIUg+/TNnmEF4xf9oO97tc2K0121gpsA+lNrFuXPUKS/tX1KSQUA9rJxf2ovqJvCdb5DVY391b8enZmn7q9WjtiIfguH5P1mc1FkXIp7OzJuLX86EHELFEYoUi3nGuNNPXzJ7Z+qs8dTkx4QZwunJtd/ikFwyHdRclGgbdafiZJfzE7xq+XHTXukBjldOc3pgu0lbiuUcuak6NaP5lMSq0RwBPg+gwyHs+mlKqAgTGNzeR8P4vq8xjFCQMDRCm0ruRCP/wT7C6uXSTHpKeV665vPGSafQ+qQLWOoYnhbwRnLlJoBHxozDNDiv7S3vYGi7H4KSm/n6r9VhbIAfAyshUZUf5YN6ksiW2kPs9j5JcSGw91vimlBxxM/FCN2anwPbg4c8lZFn/t9sT0BoUeVwreKE9XOa+2dZEjZtJ7maGLGJ/PUqneLcvYczlD8bGkH57rPAJqZmAXjudqG2Yce8TjUNLBGG25Sw4m4lJyJenWKqF1QoHffZ8714+qLLMR/0nVWS4HOYQmZY++JtnRmjJxUMsRQrFKWOfPwNmgEVvCfqKwHWqC0ahUycfTuRWACcsU+338ZM4XuisOsaSHP/XvP9MAcXIedx+EaTWEWxcLyrc9PVqNppPMDuNG/tY2uHmY9DDR/IjEx9n6IL//ojG+lbkWRmM3OgPWDypdRU1HcrPUBIP6Unt6eJj7UYYG3lxZzdp02qR94mWKsSby6psIUEqLCb216ATtTUQRLJBUojr+T76jI/XM91bjx7A6sW4AAEoPjoQT2maLXdTZNMP81dtDHQVt5eu0vLzeIpE2qglIwN89/Pkp976DalCMF2SmuUdMznNIwjysmOk2KUaEzDTQz52cVm6hp2bevtjW5hM/ua/LODbogqyB+yj2R/N/6I5/4e32aoSA+Yjmuv37UcaqEa7sYbvfUMk97/lsyXMhkMLT/vZQiFyKj+bvB/YJ5RgCBzwRKVb8NObxL6MHJGReAAAA=="},34809:function(e,t,n){t.Z=n.p+"assets/images/58db2ee32bde44b3afd5e2e6af3e3647~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0-ce22e7fc31e9aefa33fb0a3d08b5ef3d.awebp"},88473:function(e,t,n){t.Z=n.p+"assets/images/c859397a03024903939f934907052cc2~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0-bf7010e65b450f32e10625812a9b8bb0.awebp"},73335:function(e,t,n){t.Z=n.p+"assets/images/image-20220806230807382-ce972a80313ee829768b13c49c111bbd.png"},9958:function(e,t,n){t.Z=n.p+"assets/images/image-20220806231908259-29f8253c8f951b76032810417729e781.png"},25483:function(e,t,n){t.Z=n.p+"assets/images/image-20220806232428977-7a5bc8cbc0acce02ca01ee1931d01d5b.png"},29190:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-07 00.18.02-62b446f9b882330ff0d1a9fb7e7a6396.png"},40122:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-07 22.42.10-0a838f4ef58c693f44c76df5f31e6b6a.png"},81832:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-07 22.49.01-172c3906c604378b4e1ef5f5ae57f584.png"},22411:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 00.27.04-853b320270ca22659a685c2839b84b96.png"},87402:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 15.34.10-ae118d8fe5719e54706b8bdb9f950749.png"},9012:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 16.24.03-1ee760e89a9c88270df30e94b33b6ffa.png"},8757:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 16.30.47-8605e8f78a8f43f87e6a0e181856941a.png"},9661:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 16.34.02-52726a115bd7df2d4c5eef727593b475.png"},15535:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 17.20.09-686c4286a6a4538fc47829f775e86d74.png"},35388:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-09 20.44.13-d1c792f0314650d33d24c9b3427c5749.png"},87936:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-26 00.07.36-bc91b4b20ace2f5ff45c36c38d3cd395.png"},54817:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-26 00.08.11-bc8bdc3a625ea74d543199c7aedd04fa.png"},84986:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-26 00.08.50-da53100b1bd90f4049804b1245675c39.png"},94510:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-26 00.10.31-817407ff45ca89abc11bcf4c9dfa2034.png"}}]);
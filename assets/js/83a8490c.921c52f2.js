"use strict";(self.webpackChunkninjee=self.webpackChunkninjee||[]).push([[9508],{3905:function(e,a,t){t.d(a,{Zo:function(){return d},kt:function(){return c}});var n=t(67294);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){l(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function o(e,a){if(null==e)return{};var t,n,l=function(e,a){if(null==e)return{};var t,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=n.createContext({}),p=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},d=function(e){var a=p(e.components);return n.createElement(s.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},k=n.forwardRef((function(e,a){var t=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),k=p(t),c=l,m=k["".concat(s,".").concat(c)]||k[c]||u[c]||r;return t?n.createElement(m,i(i({ref:a},d),{},{components:t})):n.createElement(m,i({ref:a},d))}));function c(e,a){var t=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=k;var o={};for(var s in a)hasOwnProperty.call(a,s)&&(o[s]=a[s]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var p=2;p<r;p++)i[p]=t[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}k.displayName="MDXCreateElement"},59653:function(e,a,t){t.r(a),t.d(a,{assets:function(){return d},contentTitle:function(){return s},default:function(){return c},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return u}});var n=t(87462),l=t(63366),r=(t(67294),t(3905)),i=["components"],o={title:"Frida\u7b14\u8bb0",date:new Date("2021-02-10T00:00:00.000Z"),authors:"kuizuo",tags:["frida","app","hook"]},s=void 0,p={unversionedId:"code/skill/reverse/android/frida/Frida\u7b14\u8bb0",id:"code/skill/reverse/android/frida/Frida\u7b14\u8bb0",title:"Frida\u7b14\u8bb0",description:"\u865a\u62df\u73af\u5883\u5b89\u88c5",source:"@site/docs/code/skill/reverse/android/frida/Frida\u7b14\u8bb0.md",sourceDirName:"code/skill/reverse/android/frida",slug:"/code/skill/reverse/android/frida/Frida\u7b14\u8bb0",permalink:"/docs/code/skill/reverse/android/frida/Frida\u7b14\u8bb0",tags:[{label:"frida",permalink:"/docs/tags/frida"},{label:"app",permalink:"/docs/tags/app"},{label:"hook",permalink:"/docs/tags/hook"}],version:"current",frontMatter:{title:"Frida\u7b14\u8bb0",date:"2021-02-10T00:00:00.000Z",authors:"kuizuo",tags:["frida","app","hook"]},sidebar:"skill",previous:{title:"Frida so\u5c42\u4e2d\u7684hook",permalink:"/docs/code/skill/reverse/android/frida/Frida so\u5c42\u4e2d\u7684hook"},next:{title:"objection\u7b14\u8bb0",permalink:"/docs/code/skill/reverse/android/frida/objection\u7b14\u8bb0"}},d={},u=[{value:"\u865a\u62df\u73af\u5883\u5b89\u88c5",id:"\u865a\u62df\u73af\u5883\u5b89\u88c5",level:2},{value:"\u5b89\u88c5 virtualenvwrapper",id:"\u5b89\u88c5-virtualenvwrapper",level:4},{value:"\u6dfb\u52a0\u865a\u62df\u73af\u5883\u53d8\u91cf",id:"\u6dfb\u52a0\u865a\u62df\u73af\u5883\u53d8\u91cf",level:4},{value:"\u521b\u5efa\u865a\u62df\u73af\u5883",id:"\u521b\u5efa\u865a\u62df\u73af\u5883",level:4},{value:"\u8fdb\u5165\u865a\u62df\u73af\u5883",id:"\u8fdb\u5165\u865a\u62df\u73af\u5883",level:4},{value:"\u9000\u51fa\u865a\u62df\u73af\u5883",id:"\u9000\u51fa\u865a\u62df\u73af\u5883",level:4},{value:"\u5220\u9664\u865a\u62df\u73af\u5883\uff08\u5fc5\u987b\u5148\u9000\u51fa\u865a\u62df\u73af\u5883\u5185\u90e8\u624d\u80fd\u5220\u9664\u5f53\u524d\u865a\u62df\u73af\u5883\uff09",id:"\u5220\u9664\u865a\u62df\u73af\u5883\u5fc5\u987b\u5148\u9000\u51fa\u865a\u62df\u73af\u5883\u5185\u90e8\u624d\u80fd\u5220\u9664\u5f53\u524d\u865a\u62df\u73af\u5883",level:3},{value:"pip \u76f8\u5173\u6307\u4ee4",id:"pip-\u76f8\u5173\u6307\u4ee4",level:3},{value:"\u67e5\u770b\u865a\u62df\u73af\u5883\u4e2d\u5b89\u88c5\u7684\u5305\uff1a",id:"\u67e5\u770b\u865a\u62df\u73af\u5883\u4e2d\u5b89\u88c5\u7684\u5305",level:4},{value:"\u6536\u96c6\u5f53\u524d\u73af\u5883\u4e2d\u5b89\u88c5\u7684\u5305\u53ca\u5176\u7248\u672c\uff1a",id:"\u6536\u96c6\u5f53\u524d\u73af\u5883\u4e2d\u5b89\u88c5\u7684\u5305\u53ca\u5176\u7248\u672c",level:4},{value:"\u5728\u90e8\u7f72\u9879\u76ee\u7684\u670d\u52a1\u5668\u4e2d\u5b89\u88c5\u9879\u76ee\u4f7f\u7528\u7684\u6a21\u5757\uff1a",id:"\u5728\u90e8\u7f72\u9879\u76ee\u7684\u670d\u52a1\u5668\u4e2d\u5b89\u88c5\u9879\u76ee\u4f7f\u7528\u7684\u6a21\u5757",level:4},{value:"Frida",id:"frida",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"\u5b89\u88c5\u6307\u5b9a\u7248\u672c",id:"\u5b89\u88c5\u6307\u5b9a\u7248\u672c",level:4},{value:"\u67e5\u770b frida-tools \u7248\u672c",id:"\u67e5\u770b-frida-tools-\u7248\u672c",level:4},{value:"\u67e5\u770b\u7248\u672c\u53f7\uff0c\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f",id:"\u67e5\u770b\u7248\u672c\u53f7\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f",level:4},{value:"frida \u4ee3\u7801\u63d0\u793a",id:"frida-\u4ee3\u7801\u63d0\u793a",level:4},{value:"frida \u7248\u672c\u4e0e Android \u7248\u672c\u4e0e Python \u7248\u672c",id:"frida-\u7248\u672c\u4e0e-android-\u7248\u672c\u4e0e-python-\u7248\u672c",level:3},{value:"fridaserver",id:"fridaserver",level:3},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-1",level:4},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:4},{value:"Frida \u547d\u4ee4",id:"frida-\u547d\u4ee4",level:2},{value:"\u7b80\u5355 Hook \u811a\u672c\u6f14\u793a",id:"\u7b80\u5355-hook-\u811a\u672c\u6f14\u793a",level:3},{value:"\u83b7\u53d6\u7c7b",id:"\u83b7\u53d6\u7c7b",level:3},{value:"\u9759\u6001\u65b9\u6cd5\u4e0e\u5b9e\u4f8b\u65b9\u6cd5",id:"\u9759\u6001\u65b9\u6cd5\u4e0e\u5b9e\u4f8b\u65b9\u6cd5",level:3},{value:"\u91cd\u8f7d\u65b9\u6cd5",id:"\u91cd\u8f7d\u65b9\u6cd5",level:3},{value:"hook \u6240\u6709\u91cd\u8f7d\u65b9\u6cd5",id:"hook-\u6240\u6709\u91cd\u8f7d\u65b9\u6cd5",level:4},{value:"\u6784\u9020\u65b9\u6cd5",id:"\u6784\u9020\u65b9\u6cd5",level:3},{value:"\u5b9e\u4f8b\u5316\u5bf9\u8c61",id:"\u5b9e\u4f8b\u5316\u5bf9\u8c61",level:3},{value:"\u4e3b\u52a8\u8c03\u7528\u7c7b\u65b9\u6cd5",id:"\u4e3b\u52a8\u8c03\u7528\u7c7b\u65b9\u6cd5",level:3},{value:"\u9759\u6001\u65b9\u6cd5",id:"\u9759\u6001\u65b9\u6cd5",level:4},{value:"\u5b9e\u4f8b\u65b9\u6cd5 \u5b9e\u4f8b\u5316\u5bf9\u8c61",id:"\u5b9e\u4f8b\u65b9\u6cd5-\u5b9e\u4f8b\u5316\u5bf9\u8c61",level:4},{value:"\u5b9e\u4f8b\u65b9\u6cd5 \u83b7\u53d6\u5df2\u6709\u5bf9\u8c61(Java.choose)",id:"\u5b9e\u4f8b\u65b9\u6cd5-\u83b7\u53d6\u5df2\u6709\u5bf9\u8c61javachoose",level:4},{value:"\u4fee\u6539\u51fd\u6570\u53c2\u6570\u4e0e\u8fd4\u56de\u503c",id:"\u4fee\u6539\u51fd\u6570\u53c2\u6570\u4e0e\u8fd4\u56de\u503c",level:3},{value:"\u83b7\u53d6\u4e0e\u4fee\u6539\u7c7b\u5b57\u6bb5(\u6210\u5458\u53d8\u91cf)",id:"\u83b7\u53d6\u4e0e\u4fee\u6539\u7c7b\u5b57\u6bb5\u6210\u5458\u53d8\u91cf",level:3},{value:"\u9759\u6001\u5b57\u6bb5",id:"\u9759\u6001\u5b57\u6bb5",level:4},{value:"\u5b9e\u4f8b\u5b57\u6bb5 \u5b9e\u4f8b\u5316\u5bf9\u8c61",id:"\u5b9e\u4f8b\u5b57\u6bb5-\u5b9e\u4f8b\u5316\u5bf9\u8c61",level:4},{value:"\u5b9e\u4f8b\u5b57\u6bb5 \u83b7\u53d6\u5df2\u6709\u5bf9\u8c61(Java.choose)",id:"\u5b9e\u4f8b\u5b57\u6bb5-\u83b7\u53d6\u5df2\u6709\u5bf9\u8c61javachoose",level:4},{value:"\u5185\u90e8\u7c7b\u4e0e\u533f\u540d\u7c7b",id:"\u5185\u90e8\u7c7b\u4e0e\u533f\u540d\u7c7b",level:3},{value:"\u679a\u4e3e\u7c7b",id:"\u679a\u4e3e\u7c7b",level:3},{value:"\u83b7\u53d6\u6240\u6709\u7c7b",id:"\u83b7\u53d6\u6240\u6709\u7c7b",level:3},{value:"\u52a0\u8f7d\u7c7b\u4e0b\u6240\u6709\u65b9\u6cd5\uff0c\u5c5e\u6027",id:"\u52a0\u8f7d\u7c7b\u4e0b\u6240\u6709\u65b9\u6cd5\u5c5e\u6027",level:4},{value:"\u51fd\u6570\u5806\u6808\u7684\u6253\u5370",id:"\u51fd\u6570\u5806\u6808\u7684\u6253\u5370",level:3},{value:"HashMap \u7684\u6253\u5370",id:"hashmap-\u7684\u6253\u5370",level:3},{value:"\u5b89\u5353\u5173\u952e\u4ee3\u7801\u7c7b",id:"\u5b89\u5353\u5173\u952e\u4ee3\u7801\u7c7b",level:3},{value:"\u5199\u6587\u4ef6",id:"\u5199\u6587\u4ef6",level:3},{value:"\u4fee\u6539\u7c7b\u578b",id:"\u4fee\u6539\u7c7b\u578b",level:3},{value:"\u6784\u5efa Java \u6570\u7ec4",id:"\u6784\u5efa-java-\u6570\u7ec4",level:3},{value:"\u6307\u5b9a\u51fd\u6570\u4e0b hook(\u53d6\u6d88 hook)",id:"\u6307\u5b9a\u51fd\u6570\u4e0b-hook\u53d6\u6d88-hook",level:4},{value:"dex \u52a0\u8f7d",id:"dex-\u52a0\u8f7d",level:3},{value:"\u6ce8\u5165\u4e00\u4e2a\u7c7b registerClass",id:"\u6ce8\u5165\u4e00\u4e2a\u7c7b-registerclass",level:4},{value:"DexClassLoader",id:"dexclassloader",level:4},{value:"dx",id:"dx",level:3},{value:"\u4f7f\u7528",id:"\u4f7f\u7528-1",level:4},{value:"baksmali \u4e0e smali",id:"baksmali-\u4e0e-smali",level:4},{value:"\u4f7f\u7528",id:"\u4f7f\u7528-2",level:5},{value:"apktool",id:"apktool",level:4},{value:"apksigner",id:"apksigner",level:4},{value:"frida \u6ce8\u5165 dex \u6587\u4ef6",id:"frida-\u6ce8\u5165-dex-\u6587\u4ef6",level:4},{value:"\u8131\u79bb PC \u4f7f\u7528 frida",id:"\u8131\u79bb-pc-\u4f7f\u7528-frida",level:2},{value:"Termux",id:"termux",level:3},{value:"frida-inject",id:"frida-inject",level:3},{value:"\u4f7f\u7528",id:"\u4f7f\u7528-3",level:5},{value:"frida-gadget.so",id:"frida-gadgetso",level:3},{value:"\u73af\u5883",id:"\u73af\u5883",level:5},{value:"\u4f7f\u7528",id:"\u4f7f\u7528-4",level:5}],k={toc:u};function c(e){var a=e.components,t=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},k,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u865a\u62df\u73af\u5883\u5b89\u88c5"},"\u865a\u62df\u73af\u5883\u5b89\u88c5"),(0,r.kt)("p",null,"\u7531\u4e8e Python \u7248\u672c\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u5efa\u8bae\u662f\u5b89\u88c5\u865a\u62df\u73af\u5883"),(0,r.kt)("h4",{id:"\u5b89\u88c5-virtualenvwrapper"},"\u5b89\u88c5 virtualenvwrapper"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pip install virtualenvwrapper-win -i https://pypi.tuna.tsinghua.edu.cn/simple\n")),(0,r.kt)("h4",{id:"\u6dfb\u52a0\u865a\u62df\u73af\u5883\u53d8\u91cf"},"\u6dfb\u52a0\u865a\u62df\u73af\u5883\u53d8\u91cf"),(0,r.kt)("p",null,"\u6dfb\u52a0\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"WORKON_HOME")," \u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"E:\\Envs")," \uff08\u865a\u62df\u73af\u5883\u7684\u8def\u5f84\uff09"),(0,r.kt)("h4",{id:"\u521b\u5efa\u865a\u62df\u73af\u5883"},"\u521b\u5efa\u865a\u62df\u73af\u5883"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"mkvirtualenv --python=python\u7248\u672c\u8def\u5f84 \u73af\u5883\u540d")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"mkvirtualenv --python=E:\\Python37\\python.exe py37\nmkvirtualenv --python=E:\\Python38\\python.exe frida\n")),(0,r.kt)("p",null,"\u9ed8\u8ba4\u662f\u7528\u6237\u8def\u5f84\u4e0b ",(0,r.kt)("inlineCode",{parentName:"p"},"C:\\Users\\{username}\\Envs\\")),(0,r.kt)("h4",{id:"\u8fdb\u5165\u865a\u62df\u73af\u5883"},"\u8fdb\u5165\u865a\u62df\u73af\u5883"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"workon  #\u5217\u51fa\u6240\u6709\u865a\u62df\u73af\u5883\n\nworkon \u73af\u5883\u540d  #\u8fdb\u5165\u5bf9\u5e94\u540d\u5b57\u4e0b\u7684\u865a\u62df\u73af\u5883\n")),(0,r.kt)("h4",{id:"\u9000\u51fa\u865a\u62df\u73af\u5883"},"\u9000\u51fa\u865a\u62df\u73af\u5883"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"deactivate\n")),(0,r.kt)("h3",{id:"\u5220\u9664\u865a\u62df\u73af\u5883\u5fc5\u987b\u5148\u9000\u51fa\u865a\u62df\u73af\u5883\u5185\u90e8\u624d\u80fd\u5220\u9664\u5f53\u524d\u865a\u62df\u73af\u5883"},"\u5220\u9664\u865a\u62df\u73af\u5883\uff08\u5fc5\u987b\u5148\u9000\u51fa\u865a\u62df\u73af\u5883\u5185\u90e8\u624d\u80fd\u5220\u9664\u5f53\u524d\u865a\u62df\u73af\u5883\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"rmvirtualenv \u865a\u62df\u73af\u5883\u540d\u79f0\n")),(0,r.kt)("h3",{id:"pip-\u76f8\u5173\u6307\u4ee4"},"pip \u76f8\u5173\u6307\u4ee4"),(0,r.kt)("h4",{id:"\u67e5\u770b\u865a\u62df\u73af\u5883\u4e2d\u5b89\u88c5\u7684\u5305"},"\u67e5\u770b\u865a\u62df\u73af\u5883\u4e2d\u5b89\u88c5\u7684\u5305\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pip freeze\n\npip list\n")),(0,r.kt)("h4",{id:"\u6536\u96c6\u5f53\u524d\u73af\u5883\u4e2d\u5b89\u88c5\u7684\u5305\u53ca\u5176\u7248\u672c"},"\u6536\u96c6\u5f53\u524d\u73af\u5883\u4e2d\u5b89\u88c5\u7684\u5305\u53ca\u5176\u7248\u672c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pip freeze > requirements.txt\n")),(0,r.kt)("h4",{id:"\u5728\u90e8\u7f72\u9879\u76ee\u7684\u670d\u52a1\u5668\u4e2d\u5b89\u88c5\u9879\u76ee\u4f7f\u7528\u7684\u6a21\u5757"},"\u5728\u90e8\u7f72\u9879\u76ee\u7684\u670d\u52a1\u5668\u4e2d\u5b89\u88c5\u9879\u76ee\u4f7f\u7528\u7684\u6a21\u5757\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pip install -r requirements.txt\n")),(0,r.kt)("h2",{id:"frida"},"Frida"),(0,r.kt)("p",null,"github \u4e0b\u8f7d\u5730\u5740: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/frida/frida"},"frida/frida")),(0,r.kt)("p",null,"\u6587\u6863: ",(0,r.kt)("a",{parentName:"p",href:"https://frida.re/docs/home/"},"Welcome | Frida \u2022 A world-class dynamic instrumentation framework")),(0,r.kt)("h3",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pip install frida-tools  # \u4f1a\u81ea\u52a8\u5e2e\u4f60\u4e0b\u8f7dFrida \u6700\u65b0\u7248\n")),(0,r.kt)("h4",{id:"\u5b89\u88c5\u6307\u5b9a\u7248\u672c"},"\u5b89\u88c5\u6307\u5b9a\u7248\u672c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pip install frida==\u7248\u672c\u53f7\n")),(0,r.kt)("h4",{id:"\u67e5\u770b-frida-tools-\u7248\u672c"},"\u67e5\u770b frida-tools \u7248\u672c"),(0,r.kt)("p",null,"\u56e0\u4e3a \u4e00\u4e2a frida-tools \u4f1a\u5bf9\u5e94\u591a\u4e2a frida \u7248\uff0c\u6240\u4ee5\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u4e0d\u80fd\u76f4\u63a5\u5b89\u88c5\u6700\u65b0\u7248\uff0c\u9700\u67e5\u770b\u5bf9\u5e94\u7248\u672c\u53f7"),(0,r.kt)("p",null,"\u8bbf\u95ee ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/frida/frida/releases/tag/"},"https://github.com/frida/frida/releases/tag/")," + frida \u7248\u672c\u53f7\uff0c\u627e\u5230 python3-frida-tools-\u7248\u672c\u53f7\uff0c\u5373 frida-tools \u7248\u672c\u53f7"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pip install frida-tools==\u3010frida-tools\u7248\u672c\u53f7\u3011 # \u65e0\u3010\u3011\n")),(0,r.kt)("h4",{id:"\u67e5\u770b\u7248\u672c\u53f7\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f"},"\u67e5\u770b\u7248\u672c\u53f7\uff0c\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"frida --v\n")),(0,r.kt)("p",null,"\u4e0a\u8ff0\u5b89\u88c5\uff0c\u6709\u53ef\u80fd\u65e0\u6cd5\u4e0b\u8f7d\uff0c\u5efa\u8bae\u79d1\u5b66\u4e0a\u7f51\uff0c\u6216\u4f7f\u7528 whl \u79bb\u7ebf\u5b89\u88c5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"pip install frida-15.1.14-cp38-cp38-win_amd64.whl\npip install frida_tools-10.4.1-py3-none-any.whl\n")),(0,r.kt)("h4",{id:"frida-\u4ee3\u7801\u63d0\u793a"},"frida \u4ee3\u7801\u63d0\u793a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npm i @types/frida-gum\n")),(0,r.kt)("h3",{id:"frida-\u7248\u672c\u4e0e-android-\u7248\u672c\u4e0e-python-\u7248\u672c"},"frida \u7248\u672c\u4e0e Android \u7248\u672c\u4e0e Python \u7248\u672c"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"frida"),(0,r.kt)("th",{parentName:"tr",align:null},"Android"),(0,r.kt)("th",{parentName:"tr",align:null},"Python"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"12.3.6"),(0,r.kt)("td",{parentName:"tr",align:null},"5-6"),(0,r.kt)("td",{parentName:"tr",align:null},"3.7")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"12.8.0"),(0,r.kt)("td",{parentName:"tr",align:null},"7-8"),(0,r.kt)("td",{parentName:"tr",align:null},"3.8")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"14+"),(0,r.kt)("td",{parentName:"tr",align:null},"9+"),(0,r.kt)("td",{parentName:"tr",align:null},"3.8")))),(0,r.kt)("h3",{id:"fridaserver"},"fridaserver"),(0,r.kt)("h4",{id:"\u5b89\u88c5-1"},"\u5b89\u88c5"),(0,r.kt)("p",null,"fridaserver \u4e0e frida \u7248\u672c\u9700\u8981\u5339\u914d\uff0c\u548c frida-tools \u4e00\u6837\uff0c\u8bbf\u95ee ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/frida/frida/releases/tag/"},"https://github.com/frida/frida/releases/tag/")," + frida \u7248\u672c\u53f7\uff0c\u53ef\u4ee5\u627e\u5230\u5bf9\u5e94\u7684 fridaserver \u7248\u672c\u3002"),(0,r.kt)("p",null,"\u6587\u4ef6\u540d\u7684\u683c\u5f0f\u4e3a\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"frida-server-(version)-(platform)-(cpu).xz"),"\uff0c\u9700\u8981\u4e0b\u8f7d\u7684\u5b89\u5353\u7684\u4e5f\u5c31\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"frida-server-15.1.14-android-arm64.xz"),"\uff0c ",(0,r.kt)("strong",{parentName:"p"},"\u89e3\u538b\u540e"),"\u5c06\u6587\u4ef6 push \u5230\u624b\u673a\u5185",(0,r.kt)("inlineCode",{parentName:"p"},"/data/local/tmp/"),"\u4e0b\uff0c\u5e76\u91cd\u547d\u540d fsarm64"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"adb push C:\\Users\\kuizuo\\Desktop\\frida-server-15.1.14-android-arm64 /data/local/tmp/fsarm64\n\nadb shell\nsu\ncd data/local/tmp\nchmod 777 fsarm64\n\n./fsarm64\n")),(0,r.kt)("h4",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# CMD \u624b\u673a\u7aef\nadb shell\nsu\n./data/local/tmp/fsarm64 # \u542f\u52a8fs\u670d\u52a1\n# \u53ef\u6dfb\u52a0\u53c2\u6570 -l 0.0.0.0:9000 \u6307\u5b9a\u7aef\u53e3\u4e3a9000(\u9ed8\u8ba427042),\u7528\u4e8efrida -H\u8fde\u63a5\u591a\u4e2a\u8bbe\u5907\n\n# CMD \u7535\u8111\u7aef\nworkon frida #\u8fdb\u5165frida\u73af\u5883\nfrida -H -U -l hook.js\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u65b0\u7248\u672c fridaserver \u65e0\u9700\u7aef\u53e3\u8f6c\u53d1"),"\uff0c\u65e7\u7248\u53ef\u80fd\u8fd8\u9700\u8981\u65b0\u5f00\u4e00\u4e2a CMD \u7a97\u53e3\u6267\u884c",(0,r.kt)("inlineCode",{parentName:"p"},"adb forward tcp:27042 tcp:27042")),(0,r.kt)("h2",{id:"frida-\u547d\u4ee4"},"Frida \u547d\u4ee4"),(0,r.kt)("p",null,"Hook \u524d\u63d0: \u5728 hook \u65f6\uff0c\u8981\u4fdd\u8bc1\u53c2\u6570\u7c7b\u578b\u6267\u884c\u6d41\u7a0b\u4e0e\u539f\u4ee3\u7801\u4fdd\u6301\u4e00\u81f4\uff0c\u5fc5\u8981\u7684\u8c03\u7528\u4e0e\u7ed3\u679c\u8fd4\u56de\u4e0d\u53ef\u7701\u7565\uff0c\u5426\u5219\u5c06\u6709\u53ef\u80fd\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"frida -help")," \u67e5\u770b\u5e2e\u52a9\uff0c\u5e38\u7528\u9009\u9879\u5982\u4e0b"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u9009\u9879"),(0,r.kt)("th",{parentName:"tr",align:null},"\u529f\u80fd"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-U,\u2013usb"),(0,r.kt)("td",{parentName:"tr",align:null},"\u8fde\u63a5 USB \u8bbe\u5907")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-F, --attach-frontmost"),(0,r.kt)("td",{parentName:"tr",align:null},"app \u6700\u524d\u663e\u793a\u7684\u5e94\u7528")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-H HOST, --host=HOST"),(0,r.kt)("td",{parentName:"tr",align:null},"\u901a\u8fc7\u7aef\u53e3\u8fde\u63a5 frida-server \u9ed8\u8ba4\u76d1\u542c \u5c40\u57df\u7f51 ip:27042")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-f FILE, --file=FILE spawn FILE"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4ee5\u5305\u540d\u65b9\u5f0f\uff0c\u81ea\u52a8\u542f\u52a8 app \u7528%resume \u6062\u590d\u4e3b\u7ebf\u7a0b")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-l SCRIPT, --load=SCRIPT"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4ee5 js \u811a\u672c\u65b9\u5f0f\u6ce8\u5165")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-n NAME, --attach-name=NAME"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4ee5\u5305\u540d\u9644\u52a0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-p PID, --attach-pid=PID"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4ee5 PID \u9644\u52a0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-o LOGFILE, --output=LOGFILE"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5c06\u7ed3\u679c\u8f93\u51fa\u5230\u6587\u4ef6\u4e0a")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"--debug"),(0,r.kt)("td",{parentName:"tr",align:null},"\u9644\u52a0\u5230 Node.js \u8fdb\u884c\u8c03\u8bd5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"--no-pause"),(0,r.kt)("td",{parentName:"tr",align:null},"\u542f\u52a8\u540e\uff0c\u81ea\u52a8\u8fd0\u884c\u4e3b\u7ebf\u7a0b \u53ef\u7701\u7565%resume")))),(0,r.kt)("h3",{id:"\u7b80\u5355-hook-\u811a\u672c\u6f14\u793a"},"\u7b80\u5355 Hook \u811a\u672c\u6f14\u793a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6ce8\uff1aFrida \u8001\u7248\u672c\u4e0d\u652f\u6301 es6 \u8bed\u6cd5\u3002")),(0,r.kt)("p",null,"\u4ee3\u7801\u5982\u4e0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="hook.js"',title:'"hook.js"'},"// java\u5c42\u7684\u4ee3\u7801 \u90fd\u9700\u8981\u5728perform\u4e0b\u6267\u884c\nJava.perform(function () {\n  // Java.use()   // \u9009\u62e9\u5bf9\u5e94\u7684\u7c7b\u540d \u8fd4\u56de\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61  \u53ef\u76f4\u63a5\u8c03\u7528\u7c7b\u4e0b\u65b9\u6cd5(\u53cd\u7f16\u8bd1\u540e\u67e5\u770b)\n  var Util = Java.use('com.dodonew.online.util.Utils')\n  // \u8c03\u7528\u7c7b\u4e0b\u7684md5\u65b9\u6cd5 \u540c\u65f6\u5b9e\u73b0\u65b9\u6cd5\u6539\u4e3a\u65b0\u51fd\u6570\n  Util.md5.implementation = function (a) {\n    console.log('a: ', a)\n    var ret = this.md5(a)\n    console.log('ret: ', ret)\n    return ret\n  }\n})\n")),(0,r.kt)("p",null,"\u8fd0\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"frida -U -F -l hook.js"),"\uff0c\u89e6\u53d1 hook \u7684\u51fd\u6570\uff0c\u4fbf\u53ef\u6253\u5370\u51fa\u53c2\u3002"),(0,r.kt)("h3",{id:"\u83b7\u53d6\u7c7b"},"\u83b7\u53d6\u7c7b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// Java.use(\u7c7b\u540d)\n\nlet J_String = Java.use('java.lang.String')\nlet HashMap = Java.use('java.util.HashMap')\nlet Utils = Java.use('com.kuizuo.app.Utils')\n")),(0,r.kt)("h3",{id:"\u9759\u6001\u65b9\u6cd5\u4e0e\u5b9e\u4f8b\u65b9\u6cd5"},"\u9759\u6001\u65b9\u6cd5\u4e0e\u5b9e\u4f8b\u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"\u7c7b.\u65b9\u6cd5.implementation = function () {\n  this.\u65b9\u6cd5()\n}\n\n// \u5982\u679c\u6709\u8fd4\u56de\u503c\u5219\u9700\u8981\u5c06\u8fd4\u56de\u503c\u8fd4\u56de\n\nUtil.md5.implementation = function (a) {\n  console.log('a: ', a)\n  let ret = this.md5(a)\n  console.log('ret: ', ret)\n  return ret\n}\n\nconst HashMap = Java.use('java.util.HashMap')\nHashMap.put.implementation = function (key, value) {\n  console.log(JSON.stringify({ key: key.toString(), value: value.toString() }))\n  let ret = this.put(key, value) // \u5982\u679c\u4e0d\u4fee\u6539\u7684\u8bdd\uff0c\u5219\u9700\u8981\u539f\u5c01\u4e0d\u52a8\u7684\u4f20\u5165\u3002\n  return ret\n}\n")),(0,r.kt)("h3",{id:"\u91cd\u8f7d\u65b9\u6cd5"},"\u91cd\u8f7d\u65b9\u6cd5"),(0,r.kt)("p",null,"\u5982\u679c\u65b9\u6cd5\u6709\u91cd\u8f7d\uff0c\u9700\u8981\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},".overload('java.lang.String')")," \u7ed9\u5b9a\u53c2\u6570\u4e2a\u6570\u4e0e\u7c7b\u578b\uff0c\u5982\u679c\u6709\u91cd\u8f7d\uff0c\u4f46\u662f\u4e0d\u4f7f\u7528 overload\uff0cfrida \u5c06\u4f1a\u62a5\u9519"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"Util.test.overload('java.lang.String').implementation = function (a) {\n  let ret = this.test(a)\n  return ret\n}\n\nUtil.test.overload('int').implementation = function (a) {\n  let ret = this.test(a)\n  return ret\n}\n")),(0,r.kt)("h4",{id:"hook-\u6240\u6709\u91cd\u8f7d\u65b9\u6cd5"},"hook \u6240\u6709\u91cd\u8f7d\u65b9\u6cd5"),(0,r.kt)("p",null,"\u50cf\u4e0a\u8ff0\u4e24\u4e2a\u91cd\u8f7d\u65b9\u6cd5\uff0c\u5c31\u9700\u8981\u7f16\u5199\u4e24\u4efd\u4ee3\u7801\uff0c\u5982\u679c\u91cd\u8f7d\u65b9\u6cd5\u8fc7\u591a\uff0c\u4ee3\u7801\u4e0d\u80fd\u5f88\u597d\u7684\u590d\u7528\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u83b7\u53d6\u7c7b\u4e0b\u7684\u6240\u6709\u91cd\u8f7d\u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"\u7c7b.\u65b9\u6cd5.overloads // \u8fd4\u56de\u6240\u6709\u91cd\u8f7d\u65b9\u6cd5,\u4f9d\u6b21\u4e3a\u6bcf\u4e2a\u6210\u5458\u5b9e\u73b0implementation\u65b9\u6cd5\u5373\u53efhook\u591a\u4e2a\u91cd\u8f7d\u65b9\u6cd5\n\nlet overloads = RequestUtil.encodeDesMap.overloads\nfor (const overload of overloads) {\n  overload.implementation = function () {\n    // console.log(Array.from(arguments));\n    console.log([...arguments])\n    // \u4e24\u8005\u90fd\u662f\u6253\u5370\u53c2\u6570\uff0c\u5c06\u7c7b\u6570\u7ec4\u8f6c\u771f\u5b9e\u6570\u7ec4\n\n    return this.encodeDesMap(...arguments)\n  }\n}\n")),(0,r.kt)("h3",{id:"\u6784\u9020\u65b9\u6cd5"},"\u6784\u9020\u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"\u7c7b.$init.implementation = function () {\n  this.$init()\n}\n")),(0,r.kt)("h3",{id:"\u5b9e\u4f8b\u5316\u5bf9\u8c61"},"\u5b9e\u4f8b\u5316\u5bf9\u8c61"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"\u7c7b.$new() // \u7b49\u540c\u4e8e new \u7c7b()\n")),(0,r.kt)("h3",{id:"\u4e3b\u52a8\u8c03\u7528\u7c7b\u65b9\u6cd5"},"\u4e3b\u52a8\u8c03\u7528\u7c7b\u65b9\u6cd5"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4ee5\u4e0b\u7684\u201c\u7c7b\u201d\uff0c\u662f\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"strong"},"Java.use()"),"\u8fd4\u56de\u7684\u503c\u3002")),(0,r.kt)("h4",{id:"\u9759\u6001\u65b9\u6cd5"},"\u9759\u6001\u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"\u7c7b.\u65b9\u6cd5()\n")),(0,r.kt)("h4",{id:"\u5b9e\u4f8b\u65b9\u6cd5-\u5b9e\u4f8b\u5316\u5bf9\u8c61"},"\u5b9e\u4f8b\u65b9\u6cd5 \u5b9e\u4f8b\u5316\u5bf9\u8c61"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"let obj = \u7c7b.$new()\nobj.\u65b9\u6cd5()\n")),(0,r.kt)("h4",{id:"\u5b9e\u4f8b\u65b9\u6cd5-\u83b7\u53d6\u5df2\u6709\u5bf9\u8c61javachoose"},"\u5b9e\u4f8b\u65b9\u6cd5 \u83b7\u53d6\u5df2\u6709\u5bf9\u8c61(Java.choose)"),(0,r.kt)("p",null,"\u5185\u5b58\u4e2d\u904d\u5386\uff0c\u627e\u5230",(0,r.kt)("strong",{parentName:"p"},"\u6240\u6709"),"\u7b26\u5408\u6761\u4ef6\u7684\u5bf9\u8c61\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"Java.choose('\u7c7b\u8def\u5f84', {\n  onMatch: function (obj) {\n    obj.\u65b9\u6cd5()\n  },\n  onComplete: function () {\n    console.log('\u5185\u5b58\u4e2d\u7684\u5bf9\u8c61\u641c\u7d22\u5b8c\u6bd5')\n  },\n})\n")),(0,r.kt)("p",null,"\u8fd9\u6837\u8c03\u7528\u4e0d\u4f18\u96c5\uff0c\u4f1a\u9677\u5165\u56de\u8c03\u5730\u72f1\uff0c\u6240\u4ee5\u53ef\u4ee5\u5c01\u88c5\u6210\u4e00\u4e2a\u5916\u90e8\u51fd\u6570\uff0c\u6765\u8c03\u7528\u3002\uff08\u7559\u4e2a\u4f0f\u7b14 TODO\u2026\uff09"),(0,r.kt)("h3",{id:"\u4fee\u6539\u51fd\u6570\u53c2\u6570\u4e0e\u8fd4\u56de\u503c"},"\u4fee\u6539\u51fd\u6570\u53c2\u6570\u4e0e\u8fd4\u56de\u503c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"Utils.md5.implementation = function (a) {\n  let b = '\u968f\u4fbf\u8bbe\u7f6e\u7684\u53c2\u6570\u503c'\n  let result = this.md5(b) // \u76f4\u63a5\u4fee\u6539\u6210b\n  return '\u968f\u4fbf\u8bbe\u7f6e\u7684\u8fd4\u56de\u503c' // frida\u4f1a\u5c06\u5b57\u7b26\u4e32\u5305\u88c5\u6210java\u7684String\u5bf9\u8c61\u3002\n  // return J_String.$new(\"\u968f\u4fbf\u8bbe\u7f6e\u7684\u8fd4\u56de\u503c\");\n}\n")),(0,r.kt)("h3",{id:"\u83b7\u53d6\u4e0e\u4fee\u6539\u7c7b\u5b57\u6bb5\u6210\u5458\u53d8\u91cf"},"\u83b7\u53d6\u4e0e\u4fee\u6539\u7c7b\u5b57\u6bb5(\u6210\u5458\u53d8\u91cf)"),(0,r.kt)("h4",{id:"\u9759\u6001\u5b57\u6bb5"},"\u9759\u6001\u5b57\u6bb5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"\u7c7b.\u5b57\u6bb5.value // \u83b7\u53d6\u7c7b\u7684\u5c5e\u6027\u503c\n\u7c7b.\u5b57\u6bb5.value = '\u65b0\u7684\u503c' // \u4fee\u6539\u7c7b\u7684\u503c\n")),(0,r.kt)("h4",{id:"\u5b9e\u4f8b\u5b57\u6bb5-\u5b9e\u4f8b\u5316\u5bf9\u8c61"},"\u5b9e\u4f8b\u5b57\u6bb5 \u5b9e\u4f8b\u5316\u5bf9\u8c61"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"let obj = \u7c7b.$new()\nobj.\u5b57\u6bb5.value\n")),(0,r.kt)("h4",{id:"\u5b9e\u4f8b\u5b57\u6bb5-\u83b7\u53d6\u5df2\u6709\u5bf9\u8c61javachoose"},"\u5b9e\u4f8b\u5b57\u6bb5 \u83b7\u53d6\u5df2\u6709\u5bf9\u8c61(Java.choose)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"Java.choose('\u7c7b\u8def\u5f84', {\n  onMatch: function (obj) {\n    console.log(obj.\u5b57\u6bb5.value)\n  },\n  onComplete: function () {},\n})\n")),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("strong",{parentName:"p"},"\u6ce8: \u5982\u679c\u5b57\u6bb5\u540d\u4e0e\u65b9\u6cd5\u540d\u4e00\u6837\uff0c\u5219\u9700\u8981\u7ed9\u5b57\u6bb5\u540d\u524d\u52a0\u4e0b\u5212\u7ebf","_","\uff0c\u5426\u5219\u83b7\u53d6\u5230\u7684\u662f\u65b9\u6cd5")))),(0,r.kt)("h3",{id:"\u5185\u90e8\u7c7b\u4e0e\u533f\u540d\u7c7b"},"\u5185\u90e8\u7c7b\u4e0e\u533f\u540d\u7c7b"),(0,r.kt)("p",null,"\u5185\u90e8\u7c7b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const \u5916\u90e8\u7c7b$\u5185\u90e8\u7c7b = Java.use('\u5916\u90e8\u7c7b$\u5185\u90e8\u7c7b') // \u53d8\u91cf\u547d\u540d\u968f\u610f\nconst \u5916\u90e8\u7c7b$1 = Java.use('\u5916\u90e8\u7c7b$1') // \u83b7\u53d6\u7b2c\u4e00\u4e2a\u5185\u90e8\u7c7b\n")),(0,r.kt)("p",null,"\u533f\u540d\u7c7b"),(0,r.kt)("p",null,"\u533f\u540d\u7c7b\u662f\u6839\u636e\u5185\u5b58\u751f\u6210\uff0c\u6ca1\u6709\u5177\u4f53\u7684\u5185\u90e8\u7c7b\u540d\uff0c\u901a\u8fc7 smali \u4ee3\u7801\u6765\u5224\u65ad\uff0c\u83b7\u53d6\u5230\u7684\u53ef\u80fd\u50cf\u4e0b\u9762\u8fd9\u6837"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const $1 = Java.use('\u5305\u540d.MainActivity$1')\n")),(0,r.kt)("h3",{id:"\u679a\u4e3e\u7c7b"},"\u679a\u4e3e\u7c7b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'Java.choose("\u679a\u4e3e\u7c7b" {\n    onMatch: function (obj) {\n        console.log(obj.ordinal()); // \u8f93\u51fa\u679a\u4e3e\u7684\u952e\n    }, onComplete: function () {\n\n    }\n})\nconsole.log(Java.use("\u679a\u4e3e\u7c7b").values()); // \u8f93\u51fa\u503c\n')),(0,r.kt)("h3",{id:"\u83b7\u53d6\u6240\u6709\u7c7b"},"\u83b7\u53d6\u6240\u6709\u7c7b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"Java.enumerateLoadedClassesSync() // \u540c\u6b65\u83b7\u53d6\u5df2\u52a0\u8f7d\u6240\u6709\u7c7b,\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\nJava.enumerateLoadedClasses() // \u5f02\u6b65\n")),(0,r.kt)("h4",{id:"\u52a0\u8f7d\u7c7b\u4e0b\u6240\u6709\u65b9\u6cd5\u5c5e\u6027"},"\u52a0\u8f7d\u7c7b\u4e0b\u6240\u6709\u65b9\u6cd5\uff0c\u5c5e\u6027"),(0,r.kt)("p",null,"\u4f7f\u7528\u5230 Java \u7684\u53cd\u5c04"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const Utils = Java.use('com.kuizuo.app.Utils')\nconst methods = Utils.class.getDeclaredMethods() // \u65b9\u6cd5\nconst constructors = Utils.class.getDeclaredConstructors() // \u6784\u9020\u51fd\u6570\nconst fields = Utils.class.getDeclaredFields() // \u5b57\u6bb5\nconst classes = Utils.class.getDeclaredClasses() // \u5185\u90e8\u7c7b\nconst superClass = Utils.class.getSuperclass() // \u7236\u7c7b(\u62bd\u8c61\u7c7b)\nconst interfaces = Utils.class.getInterfaces() // \u6240\u6709\u63a5\u53e3\n\n// \u904d\u5386\u8f93\u51fa\nfor (const method of methods) {\n  console.log(method.getName())\n}\n// ...\n\nfor (const class$ of classes) {\n  // class$ \u4e3a\u7c7b\u7684\u5b57\u8282\u7801\uff0c\u65e0\u9700.class\n  let fields = class$.getDeclaredFields()\n  for (const field of fields) {\n    console.log(field.getName())\n  }\n}\n")),(0,r.kt)("h3",{id:"\u51fd\u6570\u5806\u6808\u7684\u6253\u5370"},"\u51fd\u6570\u5806\u6808\u7684\u6253\u5370"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"function showStack() {\n  Java.perform(function () {\n    console.log(Java.use('android.util.Log').getStackTraceString(Java.use('java.lang.Throwable').$new()))\n  })\n}\n")),(0,r.kt)("h3",{id:"hashmap-\u7684\u6253\u5370"},"HashMap \u7684\u6253\u5370"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"RequestUtil.paraMap.overload('java.util.Map').implementation = function (a) {\n  // // a\u662f\u4e00\u4e2aHashMap\u5bf9\u8c61\n  let key = a.keySet()\n  let it = key.iterator()\n  let obj = {}\n  while (it.hasNext()) {\n    let keystr = it.next()\n    let valuestr = a.get(keystr)\n    // keystr \u4e0e valuestr \u90fd\u662fJava\u7684\u5bf9\u8c61\uff0c\u9700\u8981\u4f7f\u7528toString\u8f6c\u6210\u6587\u672c\n    // \u76f4\u63a5\u6253\u5370\u7ed3\u679c\u4e3a <instance: java.lang.Object, $className: java.lang.String>\n    obj[keystr.toString()] = valuestr.toString()\n  }\n  console.log('obj: ', JSON.stringify(obj)) // \u5c06\u6253\u5370\u6210js\u7684\u5bf9\u8c61\n  var result = this.paraMap(a)\n  return result\n}\n")),(0,r.kt)("h3",{id:"\u5b89\u5353\u5173\u952e\u4ee3\u7801\u7c7b"},"\u5b89\u5353\u5173\u952e\u4ee3\u7801\u7c7b"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u7c7b\u540d"),(0,r.kt)("th",{parentName:"tr",align:null},"\u65b9\u6cd5"),(0,r.kt)("th",{parentName:"tr",align:null},"\u4f5c\u7528"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"android.widget.Toast"),(0,r.kt)("td",{parentName:"tr",align:null},"show"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5f39\u7a97\u63d0\u793a")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"android.widget.EditText"),(0,r.kt)("td",{parentName:"tr",align:null},"getText"),(0,r.kt)("td",{parentName:"tr",align:null},"\u83b7\u53d6\u7f16\u8f91\u6846\u6587\u672c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"java.lang.StringBuilder"),(0,r.kt)("td",{parentName:"tr",align:null},"toString"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5b57\u7b26\u4e32\u83b7\u53d6\u4e0e\u62fc\u63a5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"java.lang.String"),(0,r.kt)("td",{parentName:"tr",align:null},"toString/getBytes"),(0,r.kt)("td",{parentName:"tr",align:null},"\u83b7\u53d6\u5b57\u7b26\u4e32\u4e0e\u5b57\u7b26\u4e32\u5b57\u8282")))),(0,r.kt)("h3",{id:"\u5199\u6587\u4ef6"},"\u5199\u6587\u4ef6"),(0,r.kt)("p",null,"\u5199\u6587\u4ef6\u5982\u679c\u5199\u5165\u7684\u4e0d\u662f\u79c1\u6709\u7a7a\u95f4\u7684\u8bdd\uff0c\u9700\u8981\u83b7\u53d6\u5185\u90e8\u5b58\u50a8\u7a7a\u95f4\u6743\u9650"),(0,r.kt)("p",null,"\u79c1\u6709\u7a7a\u95f4 ",(0,r.kt)("inlineCode",{parentName:"p"},"/data/data/\u5305\u540d"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"/storage/emulated/0/Android/data/\u5305\u540d")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"let current_application = Java.use('android.app.ActivityThread').currentApplication()\nlet context = current_application.getApplicationContext()\nlet path = Java.use('android.content.ContextWrapper').$new(context).getExternalFilesDir('Download').toString()\nconsole.log(path) // \u83b7\u53d6app\u7684\u79c1\u6709\u7a7a\u95f4 /storage/emulated/0/Android/data/\u5305\u540d/files/Download\nlet file = new File(path + '/test.txt', 'w')\nfile.write('\u5185\u5bb9')\nfile.flush()\nfile.close()\n")),(0,r.kt)("h3",{id:"\u4fee\u6539\u7c7b\u578b"},"\u4fee\u6539\u7c7b\u578b"),(0,r.kt)("p",null,"Java.cast"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"utils.shufferMap2.implementation = function (map) {\n  console.log('map: ', map) // \u4f20\u5165\u7684\u662fHashMap\u5bf9\u8c61\uff0c\u4f46\u662f\u4f1a\u5411\u4e0a\u8f6c\u578b\u4e3aMap\u5bf9\u8c61 \u8f93\u51fa[object Object]\n  var hashMap = Java.cast(map, Java.use('java.util.HashMap'))\n  console.log('hashMap: ', hashMap)\n  return this.shufferMap2(hashMap)\n}\n")),(0,r.kt)("h3",{id:"\u6784\u5efa-java-\u6570\u7ec4"},"\u6784\u5efa Java \u6570\u7ec4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u666e\u901a\u5b57\u7b26\u4e32\u6570\u7ec4\nlet arr = Java.array('Ljava.lang.String;', ['\u5b57\u7b26\u4e321', '\u5b57\u7b26\u4e322', '\u5b57\u7b26\u4e323'])\n\n// \u5bf9\u8c61\u6570\u7ec4\nlet integer = Java.use('java.lang.Integer')\nlet boolean = Java.use('java.lang.Boolean')\nlet objarr = Java.array('Ljava.lang.Object;', ['\u5b57\u7b26\u4e321', integer.$new(10), boolean.$new(true)])\n\n// arrayList\nvar arrayList = Java.use('java.util.ArrayList').$new()\nvar integer = Java.use('java.lang.Integer')\nvar boolean = Java.use('java.lang.Boolean')\nvar Person = Java.use('com.kuizuo.app.Person')\nvar person = Person.$new('kuizuo', 20)\narrayList.add('kuizuo')\narrayList.add(integer.$new(10))\narrayList.add(boolean.$new(true))\narrayList.add(person)\n")),(0,r.kt)("p",null,"\u6ce8: \u7b2c\u4e00\u4e2a\u53c2\u6570\u7c7b\u578b\u7ed9\u7684\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"Ljava.lang.String;")," \u800c\u4e0d\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"[Ljava.lang.String;")),(0,r.kt)("h4",{id:"\u6307\u5b9a\u51fd\u6570\u4e0b-hook\u53d6\u6d88-hook"},"\u6307\u5b9a\u51fd\u6570\u4e0b hook(\u53d6\u6d88 hook)"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"HashMap.put.implementation = null")," \u53d6\u6d88\u5bf9 HashMap.put \u65b9\u6cd5\u7684 hook"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const HashMap = Java.use('java.util.HashMap')\nRequestUtil.paraMap.overload('java.util.Map').implementation = function (a) {\n  // a\u662f\u4e00\u4e2aHashMap\u5bf9\u8c61\n  HashMap.put.implementation = function (key, value) {\n    // \u53ea\u5728RequestUtil.paraMap\u65b9\u6cd5\u8c03\u7528\u7684\u65f6\u5019\u624d\u4f1a\u6253\u5370HashMap\u4f20\u5165\u7684\u53c2\u6570\n    console.log(JSON.stringify({ key: key.toString(), value: value.toString() }))\n    let ret = this.put(key, value)\n    return ret\n  }\n  var result = this.paraMap(a)\n  HashMap.put.implementation = null\n  return result\n}\n")),(0,r.kt)("h3",{id:"dex-\u52a0\u8f7d"},"dex \u52a0\u8f7d"),(0,r.kt)("h4",{id:"\u6ce8\u5165\u4e00\u4e2a\u7c7b-registerclass"},"\u6ce8\u5165\u4e00\u4e2a\u7c7b registerClass"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://frida.re/docs/javascript-api/#java-cast"},"JavaScript API | Frida \u2022 A world-class dynamic instrumentation framework")),(0,r.kt)("p",null,"\u901a\u5e38\u662f\u52a0\u8f7d\u67d0\u4e2a\u7c7b\uff0c\u590d\u5199\u67d0\u4e9b\u65b9\u6cd5\uff0c\u8fbe\u5230\u7ed5\u8fc7\u7684\u76ee\u7684\uff0c\u5982\u8bc1\u4e66\u6548\u9a8c"),(0,r.kt)("p",null,"\u4f46\u6b64\u65b9\u6cd5\u76f8\u5bf9\u7e41\u7410\uff0c\u4e0d\u5982\u76f4\u63a5\u7f16\u5199 java \u4ee3\u7801\u7f16\u8bd1\u6210 dex \u76f4\u63a5\u6ce8\u5165\u6765\u7684\u65b9\u4fbf\uff0c\u4e5f\u5c31\u6709\u4e86 dex \u7684\u52a8\u6001\u52a0\u8f7d\u3002"),(0,r.kt)("h4",{id:"dexclassloader"},"DexClassLoader"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'Java.perform(function () {\n  // console.log(Java.enumerateLoadedClassesSync().join("\\n"));\n  // var dynamic = Java.use("com.xiaojianbang.app.Dynamic");\n  // console.log(dynamic);\n\n  // Java.enumerateClassLoaders({\n  //     onMatch: function (loader){\n  //         try {\n  //             Java.classFactory.loader = loader;\n  //             var dynamic = Java.use("com.xiaojianbang.app.Dynamic");\n  //             console.log("dynamic: ", dynamic);\n  //             //console.log(dynamic.$new().sayHello());\n  //             dynamic.sayHello.implementation = function () {\n  //                 console.log("hook dynamic.sayHello is run!");\n  //                 return "xiaojianbang";\n  //             }\n  //         }catch (e) {\n  //             console.log(loader);\n  //         }\n  //     }, onComplete: function () {\n  //\n  //     }\n  // });\n\n  var dexClassLoader = Java.use(\'dalvik.system.DexClassLoader\')\n  dexClassLoader.loadClass.overload(\'java.lang.String\').implementation = function (className) {\n    //console.log(className);\n    var result = this.loadClass(className)\n    //console.log("class: ", result);\n    //console.log("class.class: ", result.class);\n    //console.log("xxxxxxxx: ", result.getDeclaredMethods());\n    if (\'com.xiaojianbang.app.Dynamic\' === className) {\n      Java.classFactory.loader = this\n      var dynamic = Java.use(\'com.xiaojianbang.app.Dynamic\')\n      console.log(\'dynamic: \', dynamic)\n      //var clazz = dynamic.class;\n      //console.log("xxxxxxxx: ", clazz.getDeclaredMethods()[0].invoke(clazz.newInstance(), []));\n      //console.log(dynamic.$new().sayHello());\n      dynamic.sayHello.implementation = function () {\n        console.log(\'dynamic.sayHello is called\')\n        return \'xiaojianbang\'\n      }\n      console.log(dynamic.$new().sayHello())\n    }\n    return result\n  }\n})\n')),(0,r.kt)("h3",{id:"dx"},"dx"),(0,r.kt)("p",null,"bat: android\\SDK\\build-tools\\sdk \u7248\u672c\\dx.bat"),(0,r.kt)("p",null,"jar \u5305: android\\SDK\\build-tools\\sdk \u7248\u672c\\lib\\dx.jar"),(0,r.kt)("h4",{id:"\u4f7f\u7528-1"},"\u4f7f\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"dx --dex --output=C:\\Users\\zeyu\\Desktop\\com\\output.dex C:\\Users\\zeyu\\Desktop\\com\\*\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"C:\\Users\\zeyu\\Desktop\\com\\*"),"\u4e0b\u5b58\u653e java \u4ee3\u7801\u7f16\u8bd1\u540e\u7684.class \u5c06\u5176\u8f6c\u4e3a dex \u6587\u4ef6\uff0c\u4e5f\u53ef\u6307\u5b9a.class \u6587\u4ef6"),(0,r.kt)("p",null,"\u6ce8: ",(0,r.kt)("inlineCode",{parentName:"p"},"C:\\Users\\zeyu\\Desktop\\com\\*")," \u7edd\u5bf9\u8def\u5f84\u53ef\u80fd\u4f1a\u62a5\u9519\uff0c\u53ef\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u3002"),(0,r.kt)("h4",{id:"baksmali-\u4e0e-smali"},"baksmali \u4e0e smali"),(0,r.kt)("p",null,"github: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/JesusFreke/smali"},"JesusFreke/smali: smali/baksmali (github.com)")),(0,r.kt)("p",null,"\u4e0b\u8f7d\u5730\u5740: ",(0,r.kt)("a",{parentName:"p",href:"https://bitbucket.org/JesusFreke/smali/downloads/"},"JesusFreke / smali / Downloads \u2014 Bitbucket")),(0,r.kt)("p",null,"baksmali \u5c06 dex \u7f16\u8bd1\u6210 smali"),(0,r.kt)("p",null,"smali \u5c06 smali \u7f16\u8bd1\u6210 dex"),(0,r.kt)("h5",{id:"\u4f7f\u7528-2"},"\u4f7f\u7528"),(0,r.kt)("p",null,"\u53cd\u7f16\u8bd1 dex"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"java -jar baksmali-2.5.2.jar d classes.dex # \u5c06\u4f1a\u751f\u6210out\u7684\u6587\u4ef6\u5939\n")),(0,r.kt)("p",null,"\u56de\u7f16\u8bd1 dex"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"java -jar smali-2.5.2.jar a out # \u5c06\u4f1a\u751f\u6210out.dex\u6587\u4ef6\n")),(0,r.kt)("h4",{id:"apktool"},"apktool"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/iBotPeaches/Apktool"},"iBotPeaches/Apktool: A tool for reverse engineering Android apk files (github.com)")),(0,r.kt)("p",null,"\u5b89\u88c5\u6587\u6863: ",(0,r.kt)("a",{parentName:"p",href:"https://ibotpeaches.github.io/Apktool/install/"},"Apktool - How to Install (ibotpeaches.github.io)")),(0,r.kt)("h4",{id:"apksigner"},"apksigner"),(0,r.kt)("p",null,"jar \u5305: android\\SDK\\build-tools\\sdk \u7248\u672c\\lib\\apksigner.jar"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"apksigner sign --ks xxx.jks xxx.apk\nKeystore password for signer #1:\n#\n")),(0,r.kt)("h4",{id:"frida-\u6ce8\u5165-dex-\u6587\u4ef6"},"frida \u6ce8\u5165 dex \u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'Java.openClassFile("/data/local/tmp/xxx.dex").load();\n\n// \u5c31\u53ef\u4ee5\u5728\u5185\u5b58\u4e2d\u4f7f\u7528\u52a0\u8f7d\u540e\u7684\u7c7b\n')),(0,r.kt)("h2",{id:"\u8131\u79bb-pc-\u4f7f\u7528-frida"},"\u8131\u79bb PC \u4f7f\u7528 frida"),(0,r.kt)("h3",{id:"termux"},"Termux"),(0,r.kt)("p",null,"\u4f7f\u7528 Termux \u7ec8\u7aef\uff0c\u8865\u9f50 python\uff0cnode \u73af\u5883\uff0c\u76f8\u5f53\u4e8e\u624b\u673a\u7aef\u8fd0\u884c\u7535\u8111\u7aef\u7684 frida\uff0c\u672c\u8d28\u4e0a\u4e0e\u7535\u8111\u7aef\u76f8\u540c\u3002"),(0,r.kt)("h3",{id:"frida-inject"},"frida-inject"),(0,r.kt)("p",null,"\u540c fridaserver\uff0c\u4e0b\u8f7d frida-inject \u79fb\u52a8\u5230\u624b\u673a\u4e0a\uff0c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"adb push C:\\Users\\kuizuo\\Desktop\\frida-inject-15.1.14-android-arm64 /data/local/tmp/fiarm64\n\nadb shell\nsu\ncd data/local/tmp\nchmod 777 fiarm64\n")),(0,r.kt)("h5",{id:"\u4f7f\u7528-3"},"\u4f7f\u7528"),(0,r.kt)("p",null,"\u524d\u63d0\uff0chook \u7684 js \u811a\u672c\u4e5f\u79fb\u52a8\u5230 fiarm64 \u76f8\u540c\u8def\u5f84\u6216\u6307\u5b9a\u8def\u5f84\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./fiarm64 -n \u5305\u540d -s \u811a\u672c.js\n./fiarm64 -p pid -s \u811a\u672c.js # ps -A \u53ef\u67e5\u770bpid\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u52a0-e\uff0c\u2013eternalize \u4f7f\u5176\u5728\u540e\u53f0\u8fd0\u884c\u3002"),(0,r.kt)("h3",{id:"frida-gadgetso"},"frida-gadget.so"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u514d root \u4f7f\u7528 frida"),"\uff0c\u4f46\u9700\u8981\u91cd\u6253\u5305 app\uff0c\u6bd4\u8f83\u7a33\u5b9a\u3002\u53ef\u901a\u8fc7\u9b54\u6539\u7cfb\u7edf\uff0c\u8ba9\u7cfb\u7edf\u5e2e\u6211\u4eec\u6ce8\u5165 so\uff0c\u514d\u53bb\u91cd\u6253\u5305\u7684\u7e41\u7410"),(0,r.kt)("h5",{id:"\u73af\u5883"},"\u73af\u5883"),(0,r.kt)("p",null,"abd\u3001aapt\u3001jarsigner\u3001apksigner\u3001apktool\uff08\u8fd9\u4e9b\u90fd\u9700\u8981\u6dfb\u52a0\u5230\u73af\u5883\u53d8\u91cf\u4e2d\uff09"),(0,r.kt)("h5",{id:"\u4f7f\u7528-4"},"\u4f7f\u7528"),(0,r.kt)("p",null,"\u4f7f\u7528\u5230 objection patchapk \u547d\u4ee4\uff0c\u9009\u9879\u5982\u4e0b"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u9009\u9879"),(0,r.kt)("th",{parentName:"tr",align:null},"\u4f8b\u5b50"),(0,r.kt)("th",{parentName:"tr",align:null},"\u529f\u80fd"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-s xxx.apk"),(0,r.kt)("td",{parentName:"tr",align:null},"-s xxx.apk"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5b9a apk \u6587\u4ef6")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-a so \u7248\u672c"),(0,r.kt)("td",{parentName:"tr",align:null},"-a arm64-v8a"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5b9a\u5b89\u5353 so \u7248\u672c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-V frida-gadget \u7248\u672c\u53f7"),(0,r.kt)("td",{parentName:"tr",align:null},"-V 15.1.14"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5b9a frida-gadget \u7248\u672c\u53f7\uff0c\u9ed8\u8ba4\u6700\u65b0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-d, \u2013enable-debug"),(0,r.kt)("td",{parentName:"tr",align:null},"-d"),(0,r.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u5141\u8bb8\u8c03\u8bd5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"-c, \u2013gadget-config TEXT"),(0,r.kt)("td",{parentName:"tr",align:null},"-c config.txt"),(0,r.kt)("td",{parentName:"tr",align:null},"\u52a0\u8f7d",(0,r.kt)("a",{parentName:"td",href:"https://frida.re/docs/gadget/#script"},"\u914d\u7f6e"),"\u65b9\u5f0f\u6253\u5305")))),(0,r.kt)("p",null,"frida-gadget \u53ef\u80fd\u4f1a\u4e0b\u8f7d\u5931\u8d25\uff0c\u53bb github \u4e0b\u8f7d",(0,r.kt)("a",{parentName:"p",href:"https://github.com/frida/frida/releases/download/15.1.14/frida-gadget-15.1.14-android-arm64.so.xz"},"frida-gadget-15.1.14-android-arm64.so.xz"),"\uff0c\u89e3\u538b\u540e\u5c06 gadget \u6587\u4ef6\u66f4\u540d",(0,r.kt)("inlineCode",{parentName:"p"},"libfrida-gadget.so"),"\u4e3a\u5b58\u653e\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"C:\\Users\\zeyu\\.objection\\android\\arm64-v8a")),(0,r.kt)("p",null,"\u6267\u884c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"objection patchapk -a arm64-v8a -V 15.1.14 -s xxx.apk\n")),(0,r.kt)("p",null,"\u5c06\u4f1a\u751f\u6210 xxx.objection.apk \u6587\u4ef6\uff0c\u5378\u8f7d\u539f app\uff08\u4e0e\u539f apk \u7b7e\u540d\u4e0d\u4e00\u6837\uff0c\u65e0\u6cd5\u8986\u76d6\u5b89\u88c5\uff09\uff0c\u91cd\u65b0\u5b89\u88c5"),(0,r.kt)("p",null,"\u91cd\u65b0\u6253\u5f00\u5c06\u4f1a\u8fdb\u5165\u767d\u5c4f\uff0c\u6b63\u5e38\u73b0\u8c61\uff0c\u7b49\u5f85 frida \u53bb\u8fde\u63a5\uff0c\u76f8\u5f53\u4e8e apk \u4e2d\u8fd0\u884c\u4e86\u4e00\u4e2a frida-server\u3002"))}c.isMDXComponent=!0}}]);
"use strict";(self.webpackChunkninjee=self.webpackChunkninjee||[]).push([[7051],{4137:function(e,t,n){n.d(t,{Zo:function(){return A},kt:function(){return s}});var l=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,l,a=function(e,t){if(null==e)return{};var n,l,a={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=l.createContext({}),u=function(e){var t=l.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},A=function(e){var t=u(e.components);return l.createElement(p.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},m=l.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,A=i(e,["components","mdxType","originalType","parentName"]),m=u(n),s=a,c=m["".concat(p,".").concat(s)]||m[s]||k[s]||r;return n?l.createElement(c,o(o({ref:t},A),{},{components:n})):l.createElement(c,o({ref:t},A))}));function s(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var u=2;u<r;u++)o[u]=n[u];return l.createElement.apply(null,o)}return l.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7006:function(e,t,n){n.r(t),n.d(t,{assets:function(){return A},contentTitle:function(){return p},default:function(){return s},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return k}});var l=n(7462),a=n(3366),r=(n(7294),n(4137)),o=["components"],i={title:"1. React\u7b14\u8bb0",sidebar_position:1,date:new Date("2022-08-05T00:00:00.000Z"),tags:["React"]},p=void 0,u={unversionedId:"frontEnd/React/React_Note",id:"frontEnd/React/React_Note",title:"1. React\u7b14\u8bb0",description:"React \u67b6\u6784\u4f53\u7cfb\u4e09\u5927\u6a21\u5757",source:"@site/docs/frontEnd/React/React_Note.md",sourceDirName:"frontEnd/React",slug:"/frontEnd/React/React_Note",permalink:"/docs/frontEnd/React/React_Note",tags:[{label:"React",permalink:"/docs/tags/react"}],version:"current",sidebarPosition:1,frontMatter:{title:"1. React\u7b14\u8bb0",sidebar_position:1,date:"2022-08-05T00:00:00.000Z",tags:["React"]},sidebar:"React",previous:{title:"\u6982\u8ff0",permalink:"/docs/frontEnd/React"}},A={},k=[{value:"React \u8bbe\u8ba1\u7406\u5ff5",id:"react-\u8bbe\u8ba1\u7406\u5ff5",level:2},{value:"\u95ee\u9898\uff1aReact \u8fd0\u884c\u673a\u5236 / \u67b6\u6784",id:"\u95ee\u9898react-\u8fd0\u884c\u673a\u5236--\u67b6\u6784",level:3},{value:"\u8bbe\u8ba1\u7406\u5ff5",id:"\u8bbe\u8ba1\u7406\u5ff5",level:5},{value:"\u5f02\u6b65\u53ef\u4e2d\u65ad",id:"\u5f02\u6b65\u53ef\u4e2d\u65ad",level:5},{value:"1 \u8c03\u5ea6\u9636\u6bb5",id:"1-\u8c03\u5ea6\u9636\u6bb5",level:4},{value:"2 \u534f\u8c03\u9636\u6bb5",id:"2-\u534f\u8c03\u9636\u6bb5",level:4},{value:"\u8be5\u9636\u6bb5\u7684\u7279\u70b9\uff1a",id:"\u8be5\u9636\u6bb5\u7684\u7279\u70b9",level:5},{value:"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c\uff1a",id:"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c",level:5},{value:"3 \u6e32\u67d3\u9636\u6bb5",id:"3-\u6e32\u67d3\u9636\u6bb5",level:4},{value:"\u95ee\u9898\uff1aalgebraic effects",id:"\u95ee\u9898algebraic-effects",level:3},{value:"algebraic effects \u7684\u7531\u6765",id:"algebraic-effects-\u7684\u7531\u6765",level:4},{value:"Algebraic Effects \u89e3\u51b3\u7684\u95ee\u9898",id:"algebraic-effects-\u89e3\u51b3\u7684\u95ee\u9898",level:4},{value:"React Hooks \u601d\u60f3",id:"react-hooks-\u601d\u60f3",level:4},{value:"\u95ee\u9898\uff1a\u521d\u6b21\u6e32\u67d3 / \u66f4\u65b0 \u7684\u533a\u522b",id:"\u95ee\u9898\u521d\u6b21\u6e32\u67d3--\u66f4\u65b0-\u7684\u533a\u522b",level:3},{value:"\u521d\u6b21\u6e32\u67d3",id:"\u521d\u6b21\u6e32\u67d3",level:5},{value:"\u66f4\u65b0 Update",id:"\u66f4\u65b0-update",level:5},{value:"\u518d\u6b21\u66f4\u65b0",id:"\u518d\u6b21\u66f4\u65b0",level:5},{value:"\u95ee\u9898\uff1a\u54ea\u4e9b\u65b9\u5f0f\u53ef\u4ee5\u89e6\u53d1 update \u66f4\u65b0\uff1f",id:"\u95ee\u9898\u54ea\u4e9b\u65b9\u5f0f\u53ef\u4ee5\u89e6\u53d1-update-\u66f4\u65b0",level:3},{value:"diff \u76f8\u5173",id:"diff-\u76f8\u5173",level:2},{value:"\u95ee\u9898\uff1a\u4ec0\u4e48\u662f virtual DOM",id:"\u95ee\u9898\u4ec0\u4e48\u662f-virtual-dom",level:3},{value:"\u95ee\u9898\uff1avirtual DOM \u7684\u4f18\u52bf",id:"\u95ee\u9898virtual-dom-\u7684\u4f18\u52bf",level:3},{value:"1. \u63d0\u9ad8\u6548\u7387",id:"1-\u63d0\u9ad8\u6548\u7387",level:5},{value:"2. \u63d0\u5347\u6027\u80fd",id:"2-\u63d0\u5347\u6027\u80fd",level:5},{value:"3. \u589e\u5f3a\u517c\u5bb9\u6027",id:"3-\u589e\u5f3a\u517c\u5bb9\u6027",level:5},{value:"\u95ee\u9898\uff1adiff \u539f\u7406",id:"\u95ee\u9898diff-\u539f\u7406",level:3},{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:5},{value:"tree diff",id:"tree-diff",level:5},{value:"component diff",id:"component-diff",level:5},{value:"element diff",id:"element-diff",level:5},{value:"\u95ee\u9898\uff1a\u53cc\u7f13\u5b58\u6a21\u578b",id:"\u95ee\u9898\u53cc\u7f13\u5b58\u6a21\u578b",level:3},{value:"Fiber",id:"fiber",level:2},{value:"\u95ee\u98981 \u4e3a\u4ec0\u4e48\u8981\u5f15\u5165 Fiber \u67b6\u6784\uff1f",id:"\u95ee\u98981-\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165-fiber-\u67b6\u6784",level:3},{value:"\u95ee\u98982 \u4ec0\u4e48\u662f Fiber",id:"\u95ee\u98982-\u4ec0\u4e48\u662f-fiber",level:3},{value:"1 \u6d41\u7a0b\u63a7\u5236\u673a\u5236",id:"1-\u6d41\u7a0b\u63a7\u5236\u673a\u5236",level:4},{value:"2 \u6267\u884c\u5355\u5143",id:"2-\u6267\u884c\u5355\u5143",level:4},{value:"3 \u4e00\u79cd\u6570\u636e\u7ed3\u6784",id:"3-\u4e00\u79cd\u6570\u636e\u7ed3\u6784",level:4},{value:"\u95ee\u98983 Fiber \u7684\u7ed3\u6784",id:"\u95ee\u98983-fiber-\u7684\u7ed3\u6784",level:3},{value:"\u5176\u4ed6",id:"\u5176\u4ed6",level:2},{value:"\u95ee\u9898\uff1aJSX, element, fiber, dom \u7684\u5173\u7cfb",id:"\u95ee\u9898jsx-element-fiber-dom-\u7684\u5173\u7cfb",level:3},{value:"\u95ee\u9898\uff1aFiber \u66f4\u65b0\u673a\u5236",id:"\u95ee\u9898fiber-\u66f4\u65b0\u673a\u5236",level:3},{value:"\u95ee\u9898\uff1auseEffect \u548c useLayoutEffect \u7684\u533a\u522b",id:"\u95ee\u9898useeffect-\u548c-uselayouteffect-\u7684\u533a\u522b",level:3},{value:"\u95ee\u9898\uff1aReact \u751f\u547d\u5468\u671f\uff088\uff09",id:"\u95ee\u9898react-\u751f\u547d\u5468\u671f8",level:3},{value:"\u534f\u8c03\u9636\u6bb5 render",id:"\u534f\u8c03\u9636\u6bb5-render",level:4},{value:"\u6e32\u67d3\u9636\u6bb5 commit",id:"\u6e32\u67d3\u9636\u6bb5-commit",level:4},{value:"\u95ee\u9898\uff1aReact 17 \u4e3a\u4ec0\u4e48\u4f1a\u5e9f\u5f03 3 \u4e2a\u751f\u547d\u5468\u671f",id:"\u95ee\u9898react-17-\u4e3a\u4ec0\u4e48\u4f1a\u5e9f\u5f03-3-\u4e2a\u751f\u547d\u5468\u671f",level:4},{value:"\u95ee\u9898\uff1a\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u6267\u884c\u987a\u5e8f",id:"\u95ee\u9898\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u6267\u884c\u987a\u5e8f",level:3},{value:"\u95ee\u9898\uff1aReact hooks",id:"\u95ee\u9898react-hooks",level:3},{value:"Hooks \u7684\u7279\u70b9",id:"hooks-\u7684\u7279\u70b9",level:4},{value:"Hooks \u4ecb\u7ecd (9)",id:"hooks-\u4ecb\u7ecd-9",level:4},{value:"useState",id:"usestate",level:4},{value:"useReducer",id:"usereducer",level:4},{value:"useEffect",id:"useeffect",level:4},{value:"useLayoutEffect",id:"uselayouteffect",level:4},{value:"useContext",id:"usecontext",level:4},{value:"useRef",id:"useref",level:4},{value:"useImperativeHandle",id:"useimperativehandle",level:4},{value:"useMemo",id:"usememo",level:4},{value:"useCallback",id:"usecallback",level:4},{value:"\u95ee\u9898\uff1aComponent\u3001PureComponent \u3001memo()",id:"\u95ee\u9898componentpurecomponent-memo",level:3}],m={toc:k};function s(e){var t=e.components,i=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,l.Z)({},m,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"React \u67b6\u6784\u4f53\u7cfb\u4e09\u5927\u6a21\u5757"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8c03\u5ea6"),(0,r.kt)("li",{parentName:"ul"},"\u534f\u8c03"),(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3")),(0,r.kt)("h2",{id:"react-\u8bbe\u8ba1\u7406\u5ff5"},"React \u8bbe\u8ba1\u7406\u5ff5"),(0,r.kt)("h3",{id:"\u95ee\u9898react-\u8fd0\u884c\u673a\u5236--\u67b6\u6784"},"\u95ee\u9898\uff1aReact \u8fd0\u884c\u673a\u5236 / \u67b6\u6784"),(0,r.kt)("h5",{id:"\u8bbe\u8ba1\u7406\u5ff5"},"\u8bbe\u8ba1\u7406\u5ff5"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u7684\u6027\u80fd\u74f6\u9888\u5728 CPU \u548c IO\u3002"),(0,r.kt)("p",null,"React \u89e3\u51b3 CPU / IO \u7684\u74f6\u9888\uff1a",(0,r.kt)("strong",{parentName:"p"},"\u5f02\u6b65\u53ef\u4e2d\u65ad\u7684\u66f4\u65b0"),"\u3002"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u7684\u5237\u65b0\u7387\u901a\u5e38\u4e3a 60Hz/s\uff0c\u4e5f\u5c31\u662f 16.6ms \u5237\u65b0\u4e00\u6b21\u9875\u9762\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"16.6ms \u4e2d\uff0c\u6d4f\u89c8\u5668\u9700\u8981\u5b8c\u6210\uff1aJS\u811a\u672c\u6267\u884c\u3001\u6837\u5f0f\u5e03\u5c40\u3001\u6837\u5f0f\u7ed8\u5236\u3002")),(0,r.kt)("p",null,"\u5f53\u6e32\u67d3\u7684\u5904\u7406\u65f6\u95f4\u8d85\u8fc7 16.6ms\uff0c\u9875\u9762\u5c31\u4f1a\u5361\u987f\u3002\u901a\u5e38\u4f7f\u7528\u8282\u6d41\uff08\u95f4\u9694\u89e6\u53d1\uff09\u3001\u9632\u6296\uff08\u6700\u540e\u4e00\u4e2a\u89e6\u53d1\uff09\uff0c\u90fd\u662f\u901a\u8fc7\u9650\u5236\u66f4\u65b0\u9891\u7387\u6765\u63d0\u5347\u6027\u80fd\u3002"),(0,r.kt)("p",null,"React \u628a\u540c\u6b65\u66f4\u65b0\uff0c\u53d8\u4e3a\u5f02\u6b65\u53ef\u4e2d\u65ad\u8fdb\u884c\u66f4\u65b0\u3002React \u901a\u8fc7 fiber \u628a\u6e32\u67d3\u4efb\u52a1\u5207\u5206\u4e3a\u591a\u4e2a\u5c0f\u6bb5\uff0c\u6bcf\u4e2a\u5c0f\u6bb5\u6267\u884c\u5b8c\u6bd5\u540e\u4f1a\u628a\u4e3b\u52a8\u6743\u4ea4\u8fd8\u6d4f\u89c8\u5668\uff0c\u6d4f\u89c8\u5668\u5219\u53ef\u6839\u636e\u5f53\u524d\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\uff0c\u628a\u5269\u4f59\u65f6\u95f4\u5206\u914d\u7ed9\u66f4\u91cd\u8981\u7684\u4efb\u52a1\uff0c\u4ee5\u786e\u4fdd\u5c3d\u53ef\u80fd\u7684\u54cd\u5e94\u53ca\u65f6\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"16.6ms \u4e2d\uff0c\u5f53\u6d4f\u89c8\u5668\u6267\u884c\u5b8c\u91cd\u8981\u4efb\u52a1\u540e\uff0c\u4f1a\u628a\u5269\u4f59\u65f6\u95f4\u4ea4\u7ed9 React \u53d6\u6267\u884c\u5c1a\u672a\u5904\u7406\u5b8c\u7684\u4efb\u52a1\uff0c\u5982\u679c\u5269\u4f59\u65f6\u95f4\u4e0d\u591f\uff0c\u5c31\u4f1a\u628a\u5269\u4f59\u4efb\u52a1\u5728\u4e0b\u4e00\u4e2a 16.6ms \u5468\u671f\u4e2d\u6267\u884c\u3002")),(0,r.kt)("p",null,"\u8fd9\u6837\uff0c\u6d4f\u89c8\u5668\u5c31\u6709\u5145\u8db3\u7684\u65f6\u95f4\u8fdb\u884c\u6837\u5f0f\u5e03\u5c40\u548c\u9875\u9762\u7ed8\u5236\uff0c\u800c React \u4e5f\u53ef\u4ee5\u5728\u5206\u914d\u7ed9\u81ea\u5df1\u7684\u65f6\u95f4\u5185\u6267\u884c\u5b8c\u4efb\u52a1\u3002"),(0,r.kt)("h5",{id:"\u5f02\u6b65\u53ef\u4e2d\u65ad"},"\u5f02\u6b65\u53ef\u4e2d\u65ad"),(0,r.kt)("p",null,"React 15+ \u5b9e\u73b0\u4e86\u5f02\u6b65\u53ef\u4e2d\u65ad\u7684\u67b6\u6784\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Scheduler \u8c03\u5ea6\u5668\uff1a\u8c03\u5ea6\u66f4\u65b0\uff0c\u7ed9\u66f4\u65b0\u4efb\u52a1\u5b89\u6392\u4f18\u5148\u7ea7\u3002"),(0,r.kt)("li",{parentName:"ul"},"Reconcoler \u534f\u8c03\u5668\uff1a\u51b3\u5b9a\u9700\u8981\u66f4\u65b0\u4ec0\u4e48\u7ec4\u4ef6\uff0c\u5f53\u66f4\u9ad8\u4f18\u4efb\u52a1\u6765\u5230\u65f6\uff0c\u53ef\u4e2d\u65ad\u5f53\u524d\u4efb\u52a1\u3002"),(0,r.kt)("li",{parentName:"ul"},"Renderer \u6e32\u67d3\u5668\uff1a\u5c06\u7ec4\u4ef6\u66f4\u65b0\u5230\u89c6\u56fe\u4e2d\uff0c\u6e32\u67d3\u8fc7\u7a0b\u662f\u540c\u6b65\u4e14\u4e0d\u53ef\u4e2d\u65ad\u7684\uff0c\u9700\u8981\u4e00\u6c14\u5475\u6210\u3002")),(0,r.kt)("p",null,"\u5728 render \u51fd\u6570\u7684\u6267\u884c\u5468\u671f\u4e2d\uff0c\u6709\u8c03\u5ea6\uff08\u4e8b\u4ef6\u89e6\u53d1\uff09\u3001\u534f\u8c03\uff08render\uff09\u3001\u6e32\u67d3\uff08commit\uff09\u4e09\u4e2a\u9636\u6bb5\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220806230807382",src:n(626).Z,width:"1412",height:"602"})),(0,r.kt)("h4",{id:"1-\u8c03\u5ea6\u9636\u6bb5"},"1 \u8c03\u5ea6\u9636\u6bb5"),(0,r.kt)("p",null,"\u5f53 React \u9700\u8981\u66f4\u65b0\u65f6\uff0c\u66f4\u65b0\u4efb\u52a1\u9996\u5148\u88ab Scheduler \u8c03\u5ea6\u5668 \u5904\u7406\u3002"),(0,r.kt)("p",null,"\u5904\u7406\u7684\u5de5\u4f5c\u6709\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u521b\u5efa\u9879\u76ee\u6839 Fiber \u8282\u70b9"),"\u3002\u9996\u6b21\u6e32\u67d3\u9875\u9762\u65f6\uff0c\u4f1a\u521b\u5efa\u552f\u4e00\u7684\u6839\u8282\u70b9 FiberRoot Node\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u521b\u5efa\u5e94\u7528\u6839 Fiber \u8282\u70b9"),"\u3002\u6bcf\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"ReactDOM.render()")," \u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a rootFiber\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u521d\u59cb\u5316\u4e8b\u4ef6"),"\u3002Scheduler \u4f1a\u628a\u4efb\u52a1\u6309\u7167\u4f18\u5148\u7ea7\u6392\u5e8f\uff0c\u8ba9\u66f4\u9ad8\u4f18\u7684\u4efb\u52a1\u9996\u5148\u8fdb\u5165 Reconciler \u534f\u8c03\u5668\u8fdb\u884c\u4e0b\u4e00\u6b65\u5904\u7406\u3002")),(0,r.kt)("h4",{id:"2-\u534f\u8c03\u9636\u6bb5"},"2 \u534f\u8c03\u9636\u6bb5"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u534f\u8c03\u9636\u6bb5\u662f Reconcoler \u534f\u8c03\u5668\u5728\u53c2\u4e0e\uff0c\u4e5f\u88ab\u79f0\u4e3a render \u9636\u6bb5"),"\uff0c\u5982\u4e0b\u56fe renderRootSync \u90fd\u4e3a\u534f\u8c03\u9636\u6bb5\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220806231908259",src:n(4343).Z,width:"680",height:"386"})),(0,r.kt)("p",null,"Scheduler \u8c03\u5ea6\u5668\u4f1a\u901a\u8fc7 diff \u7b97\u6cd5\uff0c\u5904\u7406\u4f20\u5165\u7684\u66f4\u65b0\u4efb\u52a1\u3002diff \u5b8c\u6bd5\u540e\uff0c\u4f1a\u7531 fiber \u6784\u6210\u4e00\u9897\u65b0\u7684 virtualDOM \u6811\uff0c\u7136\u540e\u63d0\u4ea4\u7ed9 Renderer \u6e32\u67d3\u5668\u8fdb\u4e00\u6b65\u5904\u7406\u3002"),(0,r.kt)("h5",{id:"\u8be5\u9636\u6bb5\u7684\u7279\u70b9"},"\u8be5\u9636\u6bb5\u7684\u7279\u70b9\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u53ef\u6682\u505c"),"\u3002\u800c\u5728 Reconciler \u5728\u8fdb\u884c diff \u7b97\u6cd5\u65f6\uff0c\u5982\u679c\u8c03\u5ea6\u5668\u4f20\u6765\u4e00\u4e2a\u66f4\u9ad8\u4f18\u7684\u4efb\u52a1\uff0c\u90a3\u4e48\u5f53\u524d\u5904\u7406\u7684\u66f4\u65b0\u4efb\u52a1\u4f1a\u88ab\u6682\u505c\uff0c\u8ba9\u8c03\u5ea6\u5668\u653e\u5165\u4efb\u52a1\u961f\u5217\u4e2d\uff0c\u4f18\u5148\u5904\u7406\u4f20\u5165\u7684\u66f4\u9ad8\u4f18\u4efb\u52a1\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u7528\u6237\u900f\u660e"),"\u3002\u7531\u4e8e\u8c03\u5ea6\u5668\u548c\u534f\u8c03\u5668\u662f\u5728\u5185\u5b58\u4e2d\u5de5\u4f5c\uff0c\u5373\u4f7f diff \u4e2d\u65ad\uff0c\u7528\u6237\u4e5f\u65e0\u6cd5\u611f\u77e5\u5230\u9875\u9762\u6e32\u67d3\u88ab\u4e2d\u65ad / \u5361\u987f\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6784\u5efa work In Progres \u6811"),"\u3002diff \u7b97\u6cd5\u4f1a\u6784\u5efa\u4e00\u9897\u865a\u62df dom \u6811\uff0c\u89c6\u56fe\u4e0a\u771f\u5b9e\u5b58\u5728\u7684\u8282\u70b9\uff0c\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u8282\u70b9\u5728\u865a\u62df dom \u4e0a\u3002\u9700\u8981\u66f4\u65b0\u7684\u8282\u70b9\u4f1a\u88ab\u6253\u4e0a\u6807\u8bb0 Update\u3002\u88ab\u6253\u4e86\u6807\u8bb0\u7684\u865a\u62df dom \u4f1a\u4ea4\u7ed9\u6e32\u67d3\u5668\u3002")),(0,r.kt)("h5",{id:"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c"},"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8c03\u548c work IN Progress Tree"),"\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u6784\u5efa work IN Progress Tree\u3002"),(0,r.kt)("p",null,"\u6784\u5efa\u8fc7\u7a0b\u662f\u4e00\u4e2a\u9012\u5f52\u8fc7\u7a0b\uff0c\u4ece  ",(0,r.kt)("inlineCode",{parentName:"p"},"rootFiber"),"  \u5f00\u59cb\u5411\u4e0b\u6df1\u5ea6\u4f18\u5148\u904d\u5386\u7684\uff0c\u5177\u4f53\u53ef\u4ee5\u5206\u4e3a n \u4e2a\uff1a\u9012\u9636\u6bb5 + \u5f52\u9636\u6bb5\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff081\uff09\u9012\u9636\u6bb5")),(0,r.kt)("p",null,"\u9012\u9636\u6bb5\uff0c\u662f\u5411\u4e0b\u8c03\u548c\u7684\u8fc7\u7a0b\u3002"),(0,r.kt)("p",null,"\u8c03\u7528 ",(0,r.kt)("strong",{parentName:"p"},"beginWork")," \u65b9\u6cd5\uff0c\u4ece  ",(0,r.kt)("inlineCode",{parentName:"p"},"rootFiber"),"  \u5f00\u59cb\u5411\u4e0b\u6df1\u5ea6\u4f18\u5148\u904d\u5386\uff0c\u4e3a\u904d\u5386\u5230\u7684\u6bcf\u4e2a fiber \u8282\u70b9\u3002"),(0,r.kt)("p",null,"\u8be5\u65b9\u6cd5\u4f1a\u6839\u636e\u4f20\u5165\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber\u8282\u70b9")," \u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5b50Fiber\u8282\u70b9"),"\uff0c\u5e76\u5c06\u8fd9\u4e24\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber\u8282\u70b9")," \u8fde\u63a5\u8d77\u6765\uff08",(0,r.kt)("strong",{parentName:"p"},"fiber.child")," \u6307\u9488\uff09\u3002\u5f53\u904d\u5386\u5230\u53f6\u5b50\u8282\u70b9\uff08\u5373\u6ca1\u6709\u5b50\u7ec4\u4ef6\u7684\u7ec4\u4ef6\uff09\u65f6\u5c31\u4f1a\u8fdb\u5165 \u201c\u5f52\u201d \u9636\u6bb5\u3002"),(0,r.kt)("p",null,"\u5982\u679c\u4e0d\u662f\u521d\u6b21\u6e32\u67d3\uff0c\u800c\u662f\u66f4\u65b0\u9875\u9762\uff0c\u6b64\u65f6\u5df2\u7ecf\u5b58\u5728\u4e00\u4e2a\u6784\u5efa\u597d\u7684 ",(0,r.kt)("strong",{parentName:"p"},"Current Tree"),"\uff0c",(0,r.kt)("strong",{parentName:"p"},"beginWork")," \u65b9\u6cd5\u4f1a\u7531 fiberRoot \u6839\u8282\u70b9\uff0c\u6309\u7167 ",(0,r.kt)("strong",{parentName:"p"},"child")," \u6307\u9488\u9010\u5c42\u5411\u4e0b\u8c03\u548c\u3002"),(0,r.kt)("p",null,"beginWork \u5177\u4f53\u7684\u5de5\u4f5c\u5982\u4e0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u7ec4\u4ef6\uff0c\u6267\u884c\u90e8\u5206\u751f\u547d\u5468\u671f\uff0c\u6267\u884c render \uff0c\u5f97\u5230\u6700\u65b0\u7684 children\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5411\u4e0b\u904d\u5386\u8c03\u548c children \uff0c\u590d\u7528 oldFiber ( diff \u7b97\u6cd5)\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6253\u4e0d\u540c\u7684\u526f\u4f5c\u7528\u6807\u7b7e effectTag \uff0c\u6bd4\u5982\u7c7b\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\uff0c\u6216\u8005\u5143\u7d20\u7684\u589e\u52a0\uff0c\u5220\u9664\uff0c\u66f4\u65b0\u3002\u8fd9\u4e9b\u88ab\u6807\u8bb0\u7684\u8282\u70b9\uff0c\u4f1a\u5728\u5f52\u9636\u6bb5\u6536\u96c6\u8d77\u6765\uff0c\u5f62\u6210\u5355\u9879\u94fe\u8868 effectList\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// \u751f\u547d\u5468\u671f\u94a9\u5b50\u4f1a\u5728\u534f\u8c03\u9636\u6bb5\u88ab\u8c03\u7528\uff1a\nconstructor\ncomponentWillMount \u5e9f\u5f03\ncomponentWillReceiveProps \u5e9f\u5f03\nstatic getDerivedStateFromProps\nshouldComponentUpdate\ncomponentWillUpdate \u5e9f\u5f03\nrender\n\n\n// \u5e38\u89c1\u7684 effect tag\nexport const Placement = /*             */ 0b0000000000010;  // \u63d2\u5165\u8282\u70b9\nexport const Update = /*                */ 0b0000000000100;  // \u66f4\u65b0fiber\nexport const Deletion = /*              */ 0b0000000001000;  // \u5220\u9664fiebr\nexport const Snapshot = /*              */ 0b0000100000000;  // \u5feb\u7167\nexport const Passive = /*               */ 0b0001000000000;  // useEffect\u7684\u526f\u4f5c\u7528\nexport const Callback = /*              */ 0b0000000100000;  // setState\u7684 callback\nexport const Ref = /*                   */ 0b0000010000000;  // ref\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff082\uff09\u5f52\u9636\u6bb5")),(0,r.kt)("p",null,"\u5f52\u9636\u6bb5\uff0c\u662f\u5411\u4e0a\u5e76\u5f52\u7684\u8fc7\u7a0b\u3002"),(0,r.kt)("p",null,"\u8c03\u7528 ",(0,r.kt)("strong",{parentName:"p"},"completeWork")," \u65b9\u6cd5\uff0c\u6765\u5904\u7406\u5f53\u524d\u7684 Fiber \u8282\u70b9\u3002"),(0,r.kt)("p",null,"\u5f53\u67d0\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber\u8282\u70b9")," \u6267\u884c\u5b8c ",(0,r.kt)("inlineCode",{parentName:"p"},"completeWork"),"\uff0c\u5982\u679c\u5176\u5b58\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5144\u5f1fFiber\u8282\u70b9"),"\uff08",(0,r.kt)("strong",{parentName:"p"},"fiber.sibling")," \u6307\u9488 \uff09\uff0c\u4f1a\u8fdb\u5165\u5176 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5144\u5f1fFiber")," \u7684 \u201c\u9012\u201d\u9636\u6bb5\u3002\u5982\u679c\u4e0d\u5b58\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5144\u5f1fFiber"),"\uff0c\u4f1a\u8fdb\u5165 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u7236\u7ea7Fiber")," \u7684\u201c\u5f52\u201d\u9636\u6bb5\uff08",(0,r.kt)("strong",{parentName:"p"},"fiber.return")," \u6307\u9488\uff09\u3002"),(0,r.kt)("p",null,"\u5728\u6b64\u671f\u95f4\u4f1a\u5f62\u6210 effectList \u5355\u9879\u526f\u4f5c\u7528\u94fe\u8868\u3002\u5982\u679c\u662f\u521d\u6b21\u6e32\u67d3\u7684\u521d\u59cb\u5316\u6d41\u7a0b\uff0c\u4f1a\u521b\u5efa DOM \uff0c\u5bf9\u4e8e DOM \u5143\u7d20\u8fdb\u884c\u4e8b\u4ef6\u6536\u96c6\uff0c\u5904\u7406 style\uff0cclassName \u7b49\u5de5\u4f5c\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"completeUnitOfWork\n\u4f1a\u5c06 effectTag \u7684 Fiber \u8282\u70b9\u4f1a\u88ab\u4fdd\u5b58\u5728\u4e00\u6761\u88ab\u79f0\u4e3a effectList \u7684\u5355\u5411\u94fe\u8868\u4e2d\u3002\u5728 \u4e4b\u540e\u7684 commit \u9636\u6bb5\uff0c\u5c06\u4e0d\u518d\u9700\u8981\u904d\u5386\u6bcf\u4e00\u4e2a fiber \uff0c\u53ea\u9700\u8981\u6267\u884c\u66f4\u65b0 effectList \u5c31\u53ef\u4ee5\u4e86\u3002"),(0,r.kt)("li",{parentName:"ul"},"completeWork \u9636\u6bb5\n\u5bf9\u4e8e\u7ec4\u4ef6\uff0c\u4f1a\u5904\u7406 context \uff1b\n\u5bf9\u4e8e\u5143\u7d20\u6807\u7b7e\u521d\u59cb\u5316\uff0c\u4f1a\u521b\u5efa\u771f\u5b9e DOM \uff0c\u5c06\u5b50\u5b59 DOM \u8282\u70b9\u63d2\u5165\u521a\u751f\u6210\u7684 DOM \u8282\u70b9\u4e2d\uff1b\n\u4f1a\u89e6\u53d1 diffProperties \u5904\u7406 props \uff0c\u6bd4\u5982\u4e8b\u4ef6\u6536\u96c6\uff0cstyle\uff0cclassName \u5904\u7406\uff0c\u572815\u7ae0\u8bb2\u5230\u8fc7\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff083\uff09\u8fdb\u5165\u5faa\u73af")),(0,r.kt)("p",null,"\u201c\u9012\u201d\u548c\u201c\u5f52\u201d\u9636\u6bb5\u4f1a\u4ea4\u9519\u6267\u884c\uff0c\u76f4\u5230 \u201c\u5f52\u201d \u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"rootFiber")," \u6839\u7ed3\u70b9\u3002\u81f3\u6b64\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"render\u9636\u6bb5")," \u7684\u5de5\u4f5c\u5c31\u7ed3\u675f\u4e86\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6784\u6210\uff08\u8c03\u548c\uff09\u4e86\u7531 fiber\u8282\u70b9\u6784\u6210\u7684 work IN Progress Tree \u6811\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6784\u6210\u4e86\u63a5\u4e0b\u6765 commit \u9636\u6bb5\u9700\u8981\u6267\u884c\u66f4\u65b0\u7684 effectList \u526f\u4f5c\u7528\u94fe\u8868\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 00.27.04",src:n(8872).Z,width:"2130",height:"1850"})),(0,r.kt)("h4",{id:"3-\u6e32\u67d3\u9636\u6bb5"},"3 \u6e32\u67d3\u9636\u6bb5"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6e32\u67d3\u5668\u5de5\u4f5c\u7684\u9636\u6bb5\uff0c\u662f Renderer \u6e32\u67d3\u5668\u5728\u53c2\u4e0e\uff0c\u88ab\u79f0\u4e3a commit \u9636\u6bb5"),"\uff0c\u4e0b\u56fe\u4e2d\uff0ccommitRoot \u5c31\u662f commit \u9636\u6bb5\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220806232428977",src:n(5477).Z,width:"980",height:"420"})),(0,r.kt)("p",null,"\u672c\u6b21\u66f4\u65b0\u7531\u54ea\u4e9b\u7ec4\u4ef6\u9700\u8981\u66f4\u65b0\u89c6\u56fe\uff0c\u4f1a\u8ba9\u6e32\u67d3\u5668\u6765\u5206\u522b\u6267\u884c\u8fd9\u4e9b\u89c6\u56fe\u66f4\u65b0\u64cd\u4f5c\u3002"),(0,r.kt)("p",null,"\u6bcf\u4e00\u4e2a\u5b50\u9636\u6bb5\u90fd\u662f\u4e00\u4e2a while \u5faa\u73af\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u4ece\u5934\u5f00\u59cb")," \u904d\u5386\u526f\u4f5c\u7528\u94fe\u8868\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u89c6\u56fe\u66f4\u65b0\u64cd\u4f5c\uff1a\u5bf9 DOM \u8282\u70b9\u7684\u589e\u3001\u5220\u3001\u67e5\u3001\u6539\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u5668\u628a\u88ab\u6253\u4e86\u6807\u8bb0\u7684\u865a\u62df dom \u5bf9\u5e94\u7684\u771f\u5b9e dom \u8282\u70b9\u6267\u884c\u66f4\u65b0 dom \u7684\u64cd\u4f5c\u3002"),(0,r.kt)("li",{parentName:"ul"},"Mutation \u7a81\u53d8\uff0c\u5bf9\u4e8e\u6d4f\u89c8\u5668\u6765\u8bf4\uff0c\u5c31\u662f DOM \u64cd\u4f5c\u3002")),(0,r.kt)("p",null,"\u8be5\u9636\u6bb5\u89e6\u53d1\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u6709\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// before mutation \u9636\u6bb5\ngetSnapshotBeforeUpdate\n\n// mutation \u9636\u6bb5\ncomponentWillUnmount\n\n// layout \u9636\u6bb5\ncomponentDidMount\ncomponentDidUpdate\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff081\uff09mutation \u524d\u9636\u6bb5")),(0,r.kt)("p",null,"\u901a\u5e38\u88ab\u79f0\u4e4b\u4e3a before mutation \u9636\u6bb5\uff0c\u8c03\u7528\u51fd\u6570 ",(0,r.kt)("inlineCode",{parentName:"p"},"commitBeforeMutationEffects"),"\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"class \u7ec4\u4ef6"),"\u3002\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"getSnapshotBeforeUpdate")," \u751f\u547d\u5468\u671f\u51fd\u6570\u3002\u56e0\u4e3a Before mutation \u8fd8\u6ca1\u4fee\u6539\u771f\u5b9e\u7684 DOM \u6240\u4ee5\u6b64\u65f6\u7c7b\u7ec4\u4ef6\u53ef\u4ee5\u83b7\u5f97\u66f4\u65b0 DOM \u524d\u7684\u5feb\u7167\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u51fd\u6570\u7ec4\u4ef6"),"\u3002\u521b\u5efa\u5fae\u4efb\u52a1\uff0c\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"li"},"useEffect")," \u7684\u56de\u8c03\u51fd\u6570\u8bbe\u5b9a normal Scheduler Priority\uff0c\u7136\u540e\u7b49\u5f85 commit \u5b8c\u6210\u540e\uff0c\u518d ",(0,r.kt)("strong",{parentName:"li"},"\u5f02\u6b65\u6267\u884c"),"\u3002\u9632\u6b62\u540c\u6b65\u6267\u884c\u65f6\u963b\u585e\u6d4f\u89c8\u5668\u505a\u89c6\u56fe\u6e32\u67d3\uff08\u5982\u679c\u5bf9 dom \u64cd\u4f5c\uff0c\u5219\u53c8\u8981\u91cd\u534f\u8c03\uff09\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff082\uff09mutaiton \u9636\u6bb5")),(0,r.kt)("p",null,"\u901a\u5e38\u88ab\u79f0\u4e4b\u4e3a mutation \u9636\u6bb5\uff0c\u8c03\u7528\u51fd\u6570 ",(0,r.kt)("inlineCode",{parentName:"p"},"commitMutationEffects"),"\u3002"),(0,r.kt)("p",null,"\u904d\u5386\u5305\u542b EffectTag \u7684 fiber \u8282\u70b9\uff0c\u6240\u7ec4\u6210\u7684 effectList \u94fe\u8868\u3002\u5904\u7406\u6bcf\u4e00\u4e2a fiber \u8282\u70b9\u7684\u526f\u4f5c\u7528\uff0c\u8fd9\u4e9b\u526f\u4f5c\u7528\u6709\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"DOM \u76f8\u5173\u64cd\u4f5c"),"\uff1a\u589e\u5220\u6539\u3002Placement \u63d2\u5165\uff0cUpdate \u66f4\u65b0 DOM \u5c5e\u6027\uff0cDeletion \u5220\u9664\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"class \u7ec4\u4ef6"),"\u3002\u8c03\u7528 class \u7ec4\u4ef6 componentWillUnmount \u751f\u547d\u5468\u671f\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u51fd\u6570\u7ec4\u4ef6"),"\u3002\u6267\u884c useLayoutEffect \u7684\u9500\u6bc1\u51fd\u6570\uff0cuseLayoutEffect \u662f ",(0,r.kt)("strong",{parentName:"li"},"\u540c\u6b65\u6267\u884c")," \u7684\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Ref \u5c5e\u6027"),"\u3002\u89e3\u7ed1/\u66f4\u65b0 Ref \u5c5e\u6027\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff082.1\uff09\u66f4\u6539 current \u6307\u9488")),(0,r.kt)("p",null,"\u5728\u8fdb\u5165 layout \u8282\u70b9\u524d\uff0c\u4f1a\u6267\u884c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"root.current = finishedWork;\n")),(0,r.kt)("p",null,"\u8fd9\u5c31\u662f React \u67b6\u6784\u7684\u53cc\u7f13\u5b58\u673a\u5236\u4e2d\uff0cWork In Progress Fiber \u6811\u5b8c\u6210\u6e32\u67d3\uff0c\u6b64\u65f6 ",(0,r.kt)("inlineCode",{parentName:"p"},"fiberRoot.current")," \u6307\u9488\u4f1a\u4ece\u4e4b\u524d\u7684 current Fiber \u6811\uff0c\u6307\u5411\u73b0\u5728\u7684 Work In Progress Fiber \u6811\u3002\u6b64\u65f6\uff0cWork In Progress Fiber \u6811\uff0c\u5c31\u53d8\u6210\u4e86\u65b0\u7684 Current Fiber \u6811\u3002"),(0,r.kt)("p",null,"\u5728\u8be5\u5b9e\u9645\u89e6\u53d1\uff0c\u662f\u56e0\u4e3a\u5728 layout \u9636\u6bb5\u4f1a\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"componentDidMount")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"componentDidUpdate "),"\u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u6b64\u65f6\uff0cCurrent Fiber \u6811\u5df2\u7ecf\u6307\u5411\u4e86\u672c\u6b21\u5b8c\u6210\u7684 Work In Progress Fiber \u6811\uff0c\u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u4f1a\u5bf9\u65b0\u7684 Current Fiber \u6811\u8fdb\u884c\u64cd\u4f5c\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff083\uff09mutation \u540e\u9636\u6bb5")),(0,r.kt)("p",null,"\u901a\u5e38\u88ab\u79f0\u4e4b\u4e3a layout \u9636\u6bb5\uff0c\u8c03\u7528\u51fd\u6570 ",(0,r.kt)("inlineCode",{parentName:"p"},"commitLayoutEffects"),"\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u51fd\u6570\u7ec4\u4ef6"),"\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6267\u884c useLayoutEffect \u7684\u56de\u8c03\u51fd\u6570\uff0c\u662f ",(0,r.kt)("strong",{parentName:"li"},"\u540c\u6b65\u6267\u884c")," \u7684\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7ed1\u5b9a useEffect \u7684\u9500\u6bc1 + \u56de\u8c03\u51fd\u6570\uff0c\u4ee5\u4fbf\u5728 commit \u9636\u6bb5\u5b8c\u6210\u540e\uff0c",(0,r.kt)("strong",{parentName:"li"},"\u5f02\u6b65\u6267\u884c")," useEffect \u9500\u6bc1 + \u56de\u8c03\u51fd\u6570\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u7c7b\u7ec4\u4ef6"),"\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6839\u636e\u7ec4\u4ef6\u72b6\u6001\uff0c\u540c\u6b65\u6267\u884c\uff0c\u8c03\u7528 class \u751f\u547d\u5468\u671f\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"ComponentDidMount\uff08\u7ec4\u4ef6\u6302\u8f7d\uff09\u3001ComponentDidUpdate\uff08\u7ec4\u4ef6\u5378\u8f7d\uff09"))),(0,r.kt)("li",{parentName:"ul"},"\u540c\u6b65\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"this.setState(arg, callback)")," \u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"callback"),"\u56de\u8c03\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u5904\u7406 Ref \u5c5e\u6027\u3002")),(0,r.kt)("h3",{id:"\u95ee\u9898algebraic-effects"},"\u95ee\u9898\uff1aalgebraic effects"),(0,r.kt)("p",null,"Process \u8fdb\u7a0b\u3001Thread \u7ebf\u7a0b\u3001Coroutine \u534f\u7a0b\u3001Fiber \u7ea4\u7a0b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"JavaScript \u901a\u8fc7 Generator\uff0c\u5728\u534f\u7a0b\u5c42\u9762\u5b9e\u73b0\u4e86\u5f02\u6b65\u53ef\u4e2d\u65ad\u66f4\u65b0\u3002")),(0,r.kt)("p",null,"algebraic effects \u4ee3\u6570\u6548\u5e94\uff1a\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u4e2d\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u5c06\u526f\u4f5c\u7528\u4ece\u51fd\u6570\u8c03\u7528\u4e2d\u5206\u79bb\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/380855727"},"https://zhuanlan.zhihu.com/p/380855727"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6844903976299675662"},"https://juejin.cn/post/6844903976299675662"))))),(0,r.kt)("h4",{id:"algebraic-effects-\u7684\u7531\u6765"},"algebraic effects \u7684\u7531\u6765"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u5f02\u6b65\u7f16\u7a0b\u4e2d\uff0c\u5982\u679c\u60f3\u7528\u540c\u6b65\u7684\u601d\u7ef4\u7f16\u5199\u4ee3\u7801\uff0c\u5c31\u8981\u4f7f\u7528 async/await\u3002\u4f46 async \u51fd\u6570\u5177\u6709\u4f20\u67d3\u6027\uff0c\u8c03\u7528 async \u7684\u51fd\u6570\u4e5f\u5fc5\u987b\u8981\u7528 async \u5b9a\u4e49\u3002\u8fd9\u6837\u9010\u6e10\u4f20\u67d3\u51fa\u53bb\uff0c\u6240\u6709\u7684\u51fd\u6570\u90fd\u9700\u8981\u53d8\u6210\u5f02\u6b65\u51fd\u6570\uff0c\u9020\u6210\u4e86\u5927\u8303\u56f4\u5f71\u54cd\uff0c\u540c\u6b65\u5f02\u6b65\u4ee3\u7801\u4e5f\u4e0d\u6613\u533a\u5206\u3002")),(0,r.kt)("p",null,"\u65b0\u7684\u9700\u6c42\uff1a\u5728\u540c\u6b65\u4ee3\u7801\u4e2d\uff0c\u53ef\u4ee5\u8c03\u7528\u5f02\u6b65\u51fd\u6570\u5e76\u83b7\u5f97\u7ed3\u679c\u3002\u4f46\u4e0d\u5f71\u54cd\u540c\u6b65\u51fd\u6570\u7684\u903b\u8f91\uff08\u540c\u6b65\u51fd\u6570\u4e0d\u8981 async \u5b9a\u4e49\uff09"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"try/catch  + throw \u5177\u6709\u8df3\u51fa\u5f53\u524d\u4ee3\u7801\u5757\uff08throw \u533a\uff09\uff0c\u7136\u540e\u5192\u6ce1\u5230 try/catch \u88ab\u6355\u83b7\uff0c\u5728 catch \u7ee7\u7eed\u6267\u884c\u4ee3\u7801\u7684\u80fd\u529b\u3002")),(0,r.kt)("p",null,"\u65b0\u7684\u9700\u6c42\uff1aJs \u4e2d\uff0c\u5177\u6709\u4ece\u540c\u6b65\u4ee3\u7801\u8df3\u51fa\u7684\u903b\u8f91\uff0c\u5c31\u662f try/catch \u4e86\uff0c\u4f46\u53ea\u80fd\u4ece throw \u8df3\u51fa\u5230 catch\uff0c\u4e0d\u53ef\u4ee5\u518d\u643a\u5e26\u7ed3\u679c\u56de\u5230 throw \u4e2d\u3002\u6211\u4eec\u5982\u4f55\u5b9a\u4e49\u8fd9\u6837\u7684\u529f\u80fd\u5462\uff1f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6b64\u65f6\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u53ef\u4ee5\u5728 throw \u533a\u6682\u505c\u6267\u884c\uff0c\u4ece catch \u533a\u57df\u83b7\u53d6\u7b54\u6848\uff0c\u518d\u8df3\u56de throw \u5904\u7ee7\u7eed\u6267\u884c\u4ee3\u7801\u7684 \u201c\u5f02\u6b65\u201d \u80fd\u529b\u3002\u8fd9\u5c31\u662f\u8bb8\u591a\u6587\u7ae0\u4e2d\u8bf4\u7684\u5b9a\u4e49\u4e00\u4e2a\u8bed\u6cd5\uff1aperform\uff0ctry/handle\uff0cresume with\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"function getName(user) {\n  let name = user.name;\n  if (name === null) {\n    // 1. \u6211\u4eec\u5728\u8fd9\u91cc perform \u4e86\u4e00\u4e2a effect\uff1aname = perform 'ask_name';\n    name = perform 'ask_name';\n    // 4. \u2026\u2026 \u7136\u540e\u6700\u7ec8\u56de\u5230\u4e86\u8fd9\u91cc\uff08name \u73b0\u5728\u662f\u300cArya Stark\u300d\u4e86 \n  }\n  return name;\n}\n\nfunction makeFriends(user1, user2) {\n  user1.friendNames.add(getName(user2));\n  user2.friendNames.add(getName(user1));\n}\n\nconst arya = { name: null };\nconst gendry = { name: 'Gendry' };\n\ntry {\n  makeFriends(arya, gendry);\n} handle (effect) {\n  // 2. \u6211\u4eec\u8df3\u5230\u4e86handler\uff08\u5c31\u50cf try/catch\uff09\n  if (effect === 'ask_name') {\n    // 3. \u7136\u800c\u6211\u4eec\u53ef\u4ee5 resume with \u4e00\u4e2a\u503c\uff08\u8fd9\u5c31\u4e0d\u50cf try / catch \u4e86\uff01\uff09\n    resume with 'Arya Stark';\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7 perform + resume with \u5b9e\u73b0\u5bf9\u540e\u7eed\u6d41\u7a0b\u7684\u63a7\u5236\uff0c\u63a7\u5236\u53cd\u8f6c + \u63a7\u5236\u6062\u590d\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7 try/handle \u5b9e\u73b0\u8de8\u8c03\u7528\u6808\u6355\u83b7\u5f53\u524d continuation\uff08\u5ef6\u7eed\u2014\uff09\uff0c\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5c31\u662f\u8ba9\u540c\u6b65\u4ee3\u7801\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u4e0b\u53bb\u7684\u90a3\u4e2a\u503c\uff08name\uff09\u3002resume with \u53ef\u4ee5\u66ff\u6362 \u5f53\u524d\u7684 continuaiton\uff0c\u8ba9 perform \u5904\u6062\u590d\u6267\u884c\u3002")),(0,r.kt)("p",null,"\u9700\u6c42\u6ee1\u8db3\uff1a\u901a\u8fc7\u4e0a\u8ff0\u7684\u8bed\u6cd5\u7cd6\uff0c\u5b9e\u73b0\u4e86\u5728\u540c\u6b65\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570\u4f46\u4e0d\u5f71\u54cd\u540c\u6b65\u4ee3\u7801\u533a\u7684\u76ee\u7684\u3002"),(0,r.kt)("h4",{id:"algebraic-effects-\u89e3\u51b3\u7684\u95ee\u9898"},"Algebraic Effects \u89e3\u51b3\u7684\u95ee\u9898"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},'\u5206\u79bb\u4e86 "\u4e3b\u903b\u8f91\u505a\u4ec0\u4e48" \u548c "\u526f\u4f5c\u7528\u5b9e\u73b0"'),"\u3002"),(0,r.kt)("p",null,"\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4e3b\u903b\u8f91")," \u5c31\u662f getName \u51fd\u6570\u8981\u901a\u8fc7 user \u5bf9\u8c61\u83b7\u5f97\u5e76\u8fd4\u56de name\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u526f\u4f5c\u7528")," \u5c31\u662f\u5f53\u51fa\u73b0\u627e\u4e0d\u5230\u540d\u5b57\u65f6\uff0c\u901a\u8fc7 perform \u62ff\u5230\u4e00\u4e2a\u540d\u5b57\u3002")),(0,r.kt)("p",null,"\u6240\u4ee5\uff0c\u526f\u4f5c\u7528\u7684\u5b9e\u73b0\uff1aperform \u5904\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"ask_name")," \u6362\u6765\u4e86 resume with \u5904\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Arya Stark"),"\u3002\u5c31\u662f\u4ee3\u6570\u6548\u5e94\u9700\u8981\u89e3\u51b3\u7684\u6838\u5fc3\u95ee\u9898\u3002\u901a\u8fc7\u7a7f\u900f\u8c03\u7528\u6808\u7684\u6362\u5143\u6cd5\u5b9e\u73b0\u526f\u4f5c\u7528\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Algebraic: \u4ee3\u6570\u5f0f\uff0c\u53ef\u4ee5\u7406\u89e3\u6210\u521d\u4e2d\u6570\u5b66\u7684 ",(0,r.kt)("strong",{parentName:"li"},"\u6362\u5143\u6cd5"),"\u3002"),(0,r.kt)("li",{parentName:"ul"},"Effect\uff1a\u526f\u4f5c\u7528\u3002")),(0,r.kt)("p",null,"\u603b\u7ed3\u6765\u8bf4\uff0c\u4ee3\u6570\u6548\u5e94\u89e3\u51b3\u4e86 ",(0,r.kt)("strong",{parentName:"p"},'\u5206\u79bb\u4e86 "\u4e3b\u903b\u8f91\u505a\u4ec0\u4e48" \u548c "\u526f\u4f5c\u7528\u5b9e\u73b0"'),"\uff0c\u4e5f\u5c31\u662f\u786e\u4fdd\u4e3b\u903b\u8f91\u548c\u4ee3\u7801\u4e0d\u53d7\u5f71\u54cd\u7684\u60c5\u51b5\u4e0b\uff0c\u5b9e\u73b0\u526f\u4f5c\u7528\u3002\u8fd9\u9700\u8981\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u7a7f\u900f\u80fd\u529b\uff1a\u53ef\u4ee5\u8de8\u8c03\u7528\u6808\u83b7\u53d6\u5f53\u524d Continuation\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u6062\u590d\u6267\u884c\uff1a\u53ef\u4ee5\u66ff\u6362\u5f53\u524d Continuation \u5185 Effect \u7684\u5b9e\u73b0\u3002")),(0,r.kt)("h4",{id:"react-hooks-\u601d\u60f3"},"React Hooks \u601d\u60f3"),(0,r.kt)("p",null,"React Hooks \u7684\u4ee3\u7801\u793a\u4f8b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function useLog(id) { \n  useEffect(() => { \n    console.log(id, 'mount') \n    return () => { \n      console.log(id, 'unmount') \n    } \n  }, []) \n} \n \nfunction Foo() { \n  useLog('Example') \n  return <div>Foo</div> \n} \n \nfunction Bar() { \n  useLog('Bar') \n  return <div>Bar</div> \n} \n")),(0,r.kt)("p",null,"\u7a7f\u900f\u80fd\u529b\uff1a"),(0,r.kt)("p",null,"useHook \u5b9e\u73b0\u4e86\u7a7f\u900f\u8c03\u7528\u6808\u7684\u6548\u679c\u3002\u4e0d\u8bba hooks \u5982\u4f55\u5d4c\u5957\u5728\u4f5c\u7528\u57df\u4e2d\uff0c\u53ea\u8981\u4fdd\u8bc1\u662f\u540c\u6b65\u8c03\u7528 hooks\uff0c\u90fd\u80fd\u6b63\u786e\u4f5c\u7528\u4e8e\u5bf9\u5e94\u7ec4\u4ef6\u3002"),(0,r.kt)("p",null,"\u6bcf\u4e00\u4e2a Function Component \u770b\u4f5c\u662f React \u91cc\u7684 Continuation\uff0c\u5bf9 Continuation \u7684\u8c03\u5ea6\u662f\u4ea4\u7ed9 React Fiber \u63a7\u5236\u7684\uff0c\u4e5f\u5c31\u662f fiber \u5b9e\u73b0\u4e86\u4ee3\u6570\u6548\u5e94\u3002"),(0,r.kt)("p",null,"\u6062\u590d\u6267\u884c\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"useHook(callback)")," \u4e2d\uff0ccallback \u662f\u8be5\u7ec4\u4ef6\u526f\u4f5c\u7528\u7684\u5b9e\u73b0\uff0chook \u62bd\u8c61\u51fa\u4e86 React \u7ec4\u4ef6\u91cc\u7684\u526f\u4f5c\u7528\u3002\u8ba9\u7ec4\u4ef6\u5185\u7684\u4e3b\u903b\u8f91\u4e0d\u53d7\u5f71\u54cd\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898\u521d\u6b21\u6e32\u67d3--\u66f4\u65b0-\u7684\u533a\u522b"},"\u95ee\u9898\uff1a\u521d\u6b21\u6e32\u67d3 / \u66f4\u65b0 \u7684\u533a\u522b"),(0,r.kt)("h5",{id:"\u521d\u6b21\u6e32\u67d3"},"\u521d\u6b21\u6e32\u67d3"),(0,r.kt)("p",null,"\u521d\u6b21\u6e32\u67d3\u65f6\uff0c\u6ca1\u6709\u4e24\u9897\u76f8\u540c\u7684 fiber tree\u3002 FiberRootNode.current \u4f1a\u6307\u5411\u4e00\u4e2a\u5355\u72ec\u7684 RootFiberNode \u8282\u70b9\uff0c\u5176\u8282\u70b9\u4e0b\u6ca1\u6709\u4efb\u4f55\u5b50\u8282\u70b9\uff08\u5373",(0,r.kt)("inlineCode",{parentName:"p"},"current Fiber\u6811"),"\u4e3a\u7a7a\uff09\u3002"),(0,r.kt)("p",null,"\u4e8e\u6b64\u540c\u65f6\uff0c\u4f1a\u5728\u5185\u5b58\u4e2d\u6784\u5efa Work In Progress Fiber Tree\u3002WIP \u6811\u548c CUR \u6811\u7684 FiberNode \u8282\u70b9\u4f1a\u901a\u8fc7 .alternate \u76f8\u4e92\u6307\u5411\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-07 22.42.10",src:n(7991).Z,width:"2286",height:"1828"})),(0,r.kt)("p",null,"\u5f53 workInProgress \u6811\u6784\u5efa\u5b8c\u6210\u540e\uff0c\u4ee3\u7801\u4e2d\u79f0\u4e4b\u4e3a finishedTree\uff0c\u6b64\u65f6 ",(0,r.kt)("inlineCode",{parentName:"p"},".current")," \u6307\u9488\u6307\u5411 finishedTree\uff0c\u4f7f\u5176\u53d8\u4e3a current fiber tree\uff0c\u521d\u59cb\u5316\u6d41\u7a0b\u5728\u534f\u8c03\u9636\u6bb5\u7684\u4efb\u52a1\u5b8c\u6210\u3002"),(0,r.kt)("h5",{id:"\u66f4\u65b0-update"},"\u66f4\u65b0 Update"),(0,r.kt)("p",null,"\u57fa\u4e8e\u4e0a\u8ff0 tree\uff0c\u5f53\u7528\u6237\u70b9\u51fb\u4e00\u6b21\u6309\u94ae\uff0c\u53d1\u751f\u9875\u9762\u66f4\u65b0\u65f6\uff0c\u4f1a\u91cd\u65b0\u521b\u5efa\u4e00\u9897 workInProgress tree\u3002"),(0,r.kt)("p",null,"\u901a\u8fc7 diff \u7b97\u6cd5\uff0cworkInProgress tree \u4f1a\u51b3\u5b9a\u662f\u5426\u590d\u7528 current fiber tree \u540c\u4e00\u5c42\u7ea7\u7684 fiber \u8282\u70b9\u6570\u636e\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u80fd\u88ab\u590d\u7528\uff0c\u672c\u6b21\u66f4\u65b0\u4e2d\uff0c\u9700\u8981\u505a\u7ec4\u4ef6\u7684 update\u3001\u5143\u7d20\u7684 move \u548c update \u7b49\u64cd\u4f5c\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u80fd\u590d\u7528\uff0c\u672c\u6b21\u66f4\u65b0\u4e2d\uff0c\u9700\u8981\u505a\u7ec4\u4ef6\u7684 mount \u548c umount\u3001\u5143\u7d20\u7684 insert \u548c delete \u7b49\u64cd\u4f5c\u3002")),(0,r.kt)("p",null,"\u5728\u6784\u5efa workInProgress Fiber \u6811\u65f6,  ",(0,r.kt)("strong",{parentName:"p"},"\u4f1a\u5c1d\u8bd5\u590d\u7528 current Fiber \u6811\u4e2d\u5df2\u6709\u7684 Fiber \u8282\u70b9\u5185\u7684\u5c5e\u6027"),"\u3002\u5728 ",(0,r.kt)("strong",{parentName:"p"},"\u9996\u5c4f\u6e32\u67d3")," \u65f6\uff0c\u53ea\u6709 rootFiber \u5b58\u5728\u5bf9\u5e94\u7684 current fiber\uff08\u5373 rootFiber.alternate\uff09\uff0c\u65e0\u6cd5\u590d\u7528\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5904\u4e8e\u540c\u4e00\u5c42\u6b21\u7684\u8282\u70b9\uff0c\u4f1a\u901a\u8fc7 .alternate \u5c5e\u6027\u76f8\u4e92\u6307\u5411\uff0cworkInProgress tree \u4e5f\u4f1a\u4f18\u5148\u590d\u7528 current fiber tree  \u5904\u5728\u540c\u4e00\u5c42\u6b21\u8282\u70b9\u7684\u5c5e\u6027\u3002"))),(0,r.kt)("p",null,"RootFiber \u5df2\u7ecf\u521b\u5efa\u4e0d\u9700\u8981\u590d\u5236\uff0c\u4f46\u5176\u5b50\u8282\u70b9\u7531\u4e8e\u5c1a\u4e0d\u5b58\u5728\uff0c \u5219 react \u9700\u8981\u91cd\u65b0\u521b\u5efa\u4e00\u4efd\uff0c\u548c current \u6811\u4e0a\u7684 fiber \u5efa\u7acb\u8d77 alternate \u5173\u8054\uff0c\u7136\u540e\u590d\u5236 current \u6811\u4e0a\u8282\u70b9\u7684\u5c5e\u6027\u3002\u6e32\u67d3\u5b8c\u6bd5\u540e\uff0cworkInProgresss \u518d\u6b21\u53d8\u6210 current \u6811\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-07 22.49.01",src:n(762).Z,width:"2502",height:"1458"})),(0,r.kt)("h5",{id:"\u518d\u6b21\u66f4\u65b0"},"\u518d\u6b21\u66f4\u65b0"),(0,r.kt)("p",null,"\u5982\u679c\u8fdb\u884c\u4e0b\u4e00\u6b21\u66f4\u65b0\uff0c\u90a3\u4e48\u4f1a\u5c06 current \u7684 alternate \u4f5c\u4e3a\u57fa\u7840\uff08\u5982\u56fe\u53f3\u6811\uff09\uff0c\u590d\u5236\u4e00\u4efd\u4f5c\u4e3a workInProgresss \uff0c\u7136\u540e\u8fdb\u884c\u66f4\u65b0\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6240\u8c13 \u201c\u590d\u5236\u201d\uff0c\u5177\u4f53\u662f\u6307\u5728\u6784\u5efa workInProgress Fiber \u6811\u65f6\u4f1a\u5c1d\u8bd5\u590d\u7528 current Fiber \u6811\u4e2d\u5df2\u6709\u7684 Fiber \u8282\u70b9\uff08.alternate \u53ef\u4ee5\u76f8\u4e92\u6307\u5411\u7684\uff0c\u540c\u4e00\u5c42\u6b21\u7684\u8282\u70b9\uff09\u5185\u7684\u5c5e\u6027\u3002\u800c\u51b3\u5b9a\u662f\u5426\u590d\u7528\u8fc7\u7a0b\uff0c\u5c31\u662f diff \u7b97\u6cd5\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7118259566868955167"},"https://juejin.cn/post/7118259566868955167")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/lizuncong/mini-react/blob/master/docs/render/%E6%B7%B1%E5%85%A5%E6%A6%82%E8%BF%B0%20React%E5%88%9D%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%8F%8A%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%E4%B8%BB%E6%B5%81%E7%A8%8B.md"},"https://github.com/lizuncong/mini-react/blob/master/docs/render/%E6%B7%B1%E5%85%A5%E6%A6%82%E8%BF%B0%20React%E5%88%9D%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%8F%8A%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%E4%B8%BB%E6%B5%81%E7%A8%8B.md")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://www.jianshu.com/p/6660d3ab0394"},"https://www.jianshu.com/p/6660d3ab0394"))),(0,r.kt)("h3",{id:"\u95ee\u9898\u54ea\u4e9b\u65b9\u5f0f\u53ef\u4ee5\u89e6\u53d1-update-\u66f4\u65b0"},"\u95ee\u9898\uff1a\u54ea\u4e9b\u65b9\u5f0f\u53ef\u4ee5\u89e6\u53d1 update \u66f4\u65b0\uff1f"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u7528\u6237\u6765\u8bf4\uff0c\u5bf9 UI \u7684\u64cd\u4f5c\u90fd\u6709\u53ef\u80fd\u89e6\u53d1 update \u66f4\u65b0\uff1a\u62d6\u52a8\u7ec4\u4ef6\u3001\u8f93\u5165\u6587\u672c\u3001\u70b9\u51fb\u6309\u94ae\u6539\u53d8 state \u7b49\u7b49\u3002"),(0,r.kt)("p",null,"\u5bf9 React \u5185\u90e8\u6765\u8bf4\uff0c\u901a\u8fc7\u5bf9 DOM \u4e8b\u4ef6\u76d1\u542c\uff0c\u4f1a\u89e6\u53d1\u5bf9\u5e94\u7684\u56de\u8c03\u51fd\u6570\uff0c\u6309\u7167\u53ef\u4ee5\u89e6\u53d1\u66f4\u65b0\u7684\u65b9\u6cd5\u6240\u96b6\u5c5e\u7684\u7ec4\u4ef6\u5206\u7c7b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ReactDOM.render()")," \u2014\u2014 HostRoot"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"this.setState()")," \u2014\u2014 ClassComponent"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"this.forceUpdate()")," \u2014\u2014 ClassComponent"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useState()")," \u2014\u2014 FunctionComponent"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useReducer()")," \u2014\u2014 FunctionComponent")),(0,r.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0c\u4e00\u5171\u4e09\u79cd\u7ec4\u4ef6\uff08",(0,r.kt)("inlineCode",{parentName:"p"},"HostRoot")," | ",(0,r.kt)("inlineCode",{parentName:"p"},"ClassComponent")," | ",(0,r.kt)("inlineCode",{parentName:"p"},"FunctionComponent"),"\uff09\u53ef\u4ee5\u89e6\u53d1 update \u66f4\u65b0\u3002"),(0,r.kt)("h2",{id:"diff-\u76f8\u5173"},"diff \u76f8\u5173"),(0,r.kt)("h3",{id:"\u95ee\u9898\u4ec0\u4e48\u662f-virtual-dom"},"\u95ee\u9898\uff1a\u4ec0\u4e48\u662f virtual DOM"),(0,r.kt)("p",null,"\u4ece\u7ed3\u6784\u6765\u770b\uff1a\u865a\u62df DOM \u662f\u4e00\u4e2a JavaScript \u5bf9\u8c61\u3002\u5176\u4fdd\u5b58\u4e86\u6bcf\u4e00\u4e2a\u8282\u70b9\u7684 type\u3001props\u3001key\u3001ref\u3001children \u7b49\u4fe1\u606f\uff08\u5177\u4f53\u770b fiber \u7ed3\u6784\uff09\u3002"),(0,r.kt)("p",null,"\u4ece\u672c\u8d28\u6765\u770b\uff1a\u5728 React \u8fd0\u884c\u65f6\uff0c\u6709\u4e24\u9897 virtual DOM\uff08\u53cc\u7f13\u5b58\u673a\u5236\uff09\uff1acurrent fiber \u6811 + work in progress fiber \u6811\u3002\u5176\u662f\u7531\u4e8e fiber \u5bf9\u8c61\u6240\u7ec4\u6210\u7684\u3002"),(0,r.kt)("p",null,"\u4ece\u6765\u6e90\u6765\u770b\uff1a\u865a\u62df DOM \u662f\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"React.creatElement()")," \u521b\u5efa\u7684 React Element \u6784\u5efa\u7684 DOM \u6811\u3002"),(0,r.kt)("p",null,"\u5bf9\u6bd4\u771f\u5b9eDOM\u6765\u770b\uff1avirtual DOM\u8981\u6bd4\u771f\u5b9e DOM \u8f7b\u7684\u591a\uff0c\u5c11\u4e86\u5f88\u591a\u7528\u4e0d\u5230\u7684\u9ed8\u8ba4\u5c5e\u6027\u548c\u65b9\u6cd5\u3002"),(0,r.kt)("p",null,"\u6d4b\u8bd5\uff1a"),(0,r.kt)("p",null,"\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"React.createElement")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"document.createElement")," \u521b\u5efa\u8282\u70b9\u5e76\u6253\u5370\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const VDOM = React.createElement('div', {}, '\u5c0f\u675c\u675c');\nconst DOM = document.createElement(\"div\");\nDOM.innerHTML = '\u5c0f\u675c\u675c';\n\nconsole.log(`\u865a\u62dfDOM\uff1a`, VDOM);\nconsole.log(`\u771f\u5b9eDOM\uff1a`, DOM);\n")),(0,r.kt)("p",null,"\u7ed3\u679c\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1.png",src:n(8571).Z,width:"1166",height:"482"})),(0,r.kt)("p",null,"\u865a\u62df DOM \u662f\u4e00\u4e2a js \u5bf9\u8c61\uff0c\u800c\u771f\u5b9e DOM \u4e0a\u8fd8\u6302\u5728\u4e86\u8bb8\u591a\u9ed8\u8ba4\u5c5e\u6027\u548c\u65b9\u6cd5\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"2.png",src:n(5277).Z,width:"970",height:"730"})),(0,r.kt)("p",null,"\u865a\u62df DOM \u7684\u7ed3\u6784\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"type\uff1a\u5b9e\u9645\u7684\u6807\u7b7e"),(0,r.kt)("li",{parentName:"ul"},"props\uff1a\u6807\u7b7e\u5185\u90e8\u7684\u5c5e\u6027\uff08\u9664 ",(0,r.kt)("inlineCode",{parentName:"li"},"key")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"ref")," \uff0c\u4f1a\u5f62\u6210\u5355\u72ec\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"key")," \u540d\uff09"),(0,r.kt)("li",{parentName:"ul"},"children: \u4e3a\u8282\u70b9\u5185\u5bb9")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// \u8f6c\u5316\u524d\n<div className='Index'>\n  <div>Hello World 123</div>\n  <ul>\n    <li>React</li>\n    <li>Vue</li>\n  </ul>\n</div>\n\n// \u8f6c\u5316\u540e\n{\n  type: 'div',\n    props: { class: 'Index' },\n      children: [\n        {\n          type: 'div',\n          children: 'Hello World 123'\n        },\n        {\n          type: 'ul',\n          children: [\n            {\n              type: 'li',\n              children: 'React'\n            },\n            {\n              type: 'li',\n              children: 'Vue'\n            },\n          ]\n        }\n      ]\n}\n")),(0,r.kt)("h3",{id:"\u95ee\u9898virtual-dom-\u7684\u4f18\u52bf"},"\u95ee\u9898\uff1avirtual DOM \u7684\u4f18\u52bf"),(0,r.kt)("p",null,"\u4e3b\u8981\u6709\u4e09\uff1a\u63d0\u9ad8\u6548\u7387\u3001\u63d0\u5347\u6027\u80fd\u3001\u589e\u5f3a\u517c\u5bb9\u6027\u3002"),(0,r.kt)("h5",{id:"1-\u63d0\u9ad8\u6548\u7387"},"1. \u63d0\u9ad8\u6548\u7387"),(0,r.kt)("p",null,"\u4f7f\u7528\u539f\u751f JS \u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u7684\u5173\u6ce8\u70b9\u5728 ",(0,r.kt)("strong",{parentName:"p"},"\u64cd\u4f5cDOM")," \u4e0a\uff0c\u800c ",(0,r.kt)("inlineCode",{parentName:"p"},"React")," \u4f1a\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"virtual DOM")," \u6765\u786e\u4fdd ",(0,r.kt)("inlineCode",{parentName:"p"},"DOM")," \u7684\u5339\u914d\u3002\u7a0b\u5e8f\u5458\u53ea\u9700\u4f7f\u7528 JSX \u6765\u8fdb\u884c\u58f0\u660e\u5f0f\u7f16\u7a0b\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u7a0b\u5e8f\u5458\u4e0d\u9700\u5173\u7cfb dom \u662f\u5982\u4f55\u6784\u5efa / \u64cd\u4f5c / \u66f4\u65b0\u7684\uff0cReact \u4f1a\u5904\u7406\u4e00\u5207\uff0c\u800c\u53ea\u9700\u8981\u5173\u7cfb\u4e1a\u52a1\u903b\u8f91\u3002"),(0,r.kt)("h5",{id:"2-\u63d0\u5347\u6027\u80fd"},"2. \u63d0\u5347\u6027\u80fd"),(0,r.kt)("p",null,"\u865a\u62df DOM \u901a\u8fc7 diff \u7b97\u6cd5 + \u57fa\u4e8e\u53cc\u7f13\u5b58\u7684\u6279\u91cf\u5904\u7406\u673a\u5236\uff0c\u4f18\u5316\u4e86\u6bcf\u6b21\u66f4\u65b0\u771f\u5b9e DOM \u5f97\u64cd\u4f5c\uff0c\u4f7f\u66f4\u65b0\u5c3d\u53ef\u80fd\u7684\u5c40\u90e8\u3001\u6539\u52a8\u5c3d\u53ef\u80fd\u7684\u5c11\uff0c\u4ece\u800c\u51cf\u5c11\u5bf9\u771f\u5b9e DOM \u7684\u64cd\u4f5c\uff0c\u6700\u7ec8\u63d0\u5347\u6027\u80fd\u3002"),(0,r.kt)("h5",{id:"3-\u589e\u5f3a\u517c\u5bb9\u6027"},"3. \u589e\u5f3a\u517c\u5bb9\u6027"),(0,r.kt)("p",null,"\u57fa\u4e8e virtual DOM\uff0c\u8ba9 React \u53ef\u4ee5\u517c\u5bb9\u5404\u79cd\u6d4f\u89c8\u5668\uff0c\u751a\u81f3\u8de8\u5e73\u53f0\u517c\u5bb9\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"React")," \u57fa\u4e8e\u865a\u62df DOM \u5b9e\u73b0\u4e86\u4e00\u5957\u81ea\u5df1\u7684\u4e8b\u4ef6\u673a\u5236\uff0c\u5e76\u4e14\u6a21\u62df\u4e86\u4e8b\u4ef6\u5192\u6ce1\u548c\u6355\u83b7\u7684\u8fc7\u7a0b\uff0c\u91c7\u53d6 ",(0,r.kt)("strong",{parentName:"li"},"\u4e8b\u4ef6\u4ee3\u7406"),"\u3001",(0,r.kt)("strong",{parentName:"li"},"\u6279\u91cf\u66f4\u65b0")," \u7b49\u65b9\u6cd5\uff0c\u4ece\u800c\u78e8\u5e73\u4e86\u5404\u4e2a\u6d4f\u89c8\u5668\u7684\u4e8b\u4ef6\u517c\u5bb9\u6027\u95ee\u9898\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u8de8\u5e73\u53f0\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"React")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"React Native")," \u90fd\u662f\u6839\u636e ",(0,r.kt)("strong",{parentName:"li"},"\u865a\u62dfDOM")," \u6e32\u67d3\u51fa\u76f8\u5e94\u5e73\u53f0\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"UI")," \u5c42\uff0c\u53ea\u4e0d\u8fc7\u4e0d\u540c\u7684\u5e73\u53f0\u6709\u4e0d\u540c\u7684\u6e32\u67d3\u5f15\u64ce\u800c\u5df2\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://juejin.cn/post/7116326409961734152"},"https://juejin.cn/post/7116326409961734152")))),(0,r.kt)("h3",{id:"\u95ee\u9898diff-\u539f\u7406"},"\u95ee\u9898\uff1adiff \u539f\u7406"),(0,r.kt)("h5",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,r.kt)("p",null,"\u4ece React \u7684\u8fd0\u884c\u539f\u7406\u6765\u8bf4\uff0cReact diff \u662f\u534f\u8c03\uff08",(0,r.kt)("strong",{parentName:"p"},"reconciliation"),"\uff09\u9636\u6bb5\u7684\u4e3b\u8981\u4efb\u52a1\uff0c\u534f\u8c03\u9636\u6bb5\u4e5f\u79f0 render \u9636\u6bb5\u3002React diff \u4f1a\u8ba1\u7b97\u51fa Virtual DOM \u4e2d\u771f\u6b63\u53d8\u5316\u7684\u90e8\u5206\uff0c\u5e76\u6784\u5efa\u597d\u4e00\u9897 Work In Progress Fiber Tree \u548c\u4e00\u4e2a EffectList \u5355\u9879\u7b26\u4f5c\u7528\u94fe\u8868\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u6307\u540d\u54ea\u4e9b\u8282\u70b9\u9700\u8981\u88ab\u66f4\u65b0"),"\u3002\u5728\u6e32\u67d3\u9636\u6bb5\uff08commit \u9636\u6bb5\uff09\uff0cReact \u4f1a\u53ea\u9488\u5bf9 effectList \u4e0a\u7684 fiber \u8282\u70b9\u8fdb\u884c DOM \u64cd\u4f5c\uff0c\u800c\u4e0d\u662f\u5bf9\u6574\u4e2a\u9875\u9762\uff08\u6811\uff09\u8fdb\u884c\u91cd\u65b0\u6e32\u67d3\u3002"),(0,r.kt)("p",null,"\u4f20\u7edf diff \u7b97\u6cd5\u4f7f\u7528\u5faa\u73af\u9012\u5f52\u5bf9\u8282\u70b9\u4e00\u6b21\u5bf9\u6bd4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a ",(0,r.kt)("em",{parentName:"p"},"O(n^3)")," \u3002React \u6539\u8fdb\u540e\u5c06\u65f6\u95f4\u590d\u6742\u5ea6\u964d\u4e3a ",(0,r.kt)("em",{parentName:"p"},"O(n)"),"\u3002"),(0,r.kt)("p",null,"React diff \u7684\u7b56\u7565\u6709\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Web UI \u4e2d DOM \u8282\u70b9\u8de8\u5c42\u7ea7\u7684\u79fb\u52a8\u64cd\u4f5c\u7279\u522b\u5c11\uff0c\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u62e5\u6709\u76f8\u540c\u7c7b\u7684\u4e24\u4e2a\u7ec4\u4ef6\u5c06\u4f1a\u751f\u6210\u76f8\u4f3c\u7684\u6811\u5f62\u7ed3\u6784\uff0c\u62e5\u6709\u4e0d\u540c\u7c7b\u7684\u4e24\u4e2a\u7ec4\u4ef6\u5c06\u4f1a\u751f\u6210\u4e0d\u540c\u7684\u6811\u5f62\u7ed3\u6784\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5bf9\u4e8e\u540c\u4e00\u5c42\u7ea7\u7684\u4e00\u7ec4\u5b50\u8282\u70b9\uff0c\u5b83\u4eec\u53ef\u4ee5\u901a\u8fc7\u552f\u4e00 id \u8fdb\u884c\u533a\u5206\u3002")),(0,r.kt)("p",null,"\u57fa\u4e8e\u4ee5\u4e0a\u4e09\u4e2a\u524d\u63d0\u7b56\u7565\uff0cReact \u5206\u522b\u5bf9 tree diff\u3001component diff \u4ee5\u53ca element diff \u8fdb\u884c\u7b97\u6cd5\u4f18\u5316\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"tree diff\u3001component diff\u3001element diff")),(0,r.kt)("h5",{id:"tree-diff"},"tree diff"),(0,r.kt)("p",null,"\u57fa\u4e8e\u7b56\u7565\u4e00\uff0cReact \u5bf9\u6811\u7684 diff \u7b97\u6cd5\u8fdb\u884c\u4f18\u5316\uff0c\u5373\u4e24\u68f5\u6811\u53ea\u4f1a\u5bf9\u540c\u4e00\u5c42\u6b21\u7684\u8282\u70b9\u8fdb\u884c\u6bd4\u8f83\uff0c\u800c\u4e0d\u8003\u8651\u8de8\u7b49\u6b21\u7684\u8282\u70b9\u6bd4\u8f83\u3002\u800c\u5728\u521d\u6b21\u6784\u5efa fiber tree \u65f6\uff0c\u57fa\u4e8e\u53cc\u7f13\u5b58\u7684\u601d\u60f3\uff0c\u5df2\u7ecf\u6784\u5efa\u597d\u4e86 work in progress fiber tree \u548c current fiber tree\uff0c\u4e14\u4e24\u68f5\u6811\u7684\u7edf\u4e00\u5c42\u7ea7\u7684 fiber \u8282\u70b9\u4f1a\u7528 fiber.alternate \u76f8\u4e92\u8fde\u63a5\u3002\u8fd9\u6837\u5bf9\u4e00\u68f5\u6811\u53ea\u9700\u904d\u5386\u4e00\u6b21\uff0c\u4fbf\u80fd\u5b8c\u6210\u6574\u4e2a DOM \u6811\u7684\u6bd4\u8f83\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u8de8\u5c42\u7ea7\u79fb\u52a8\u64cd\u4f5c\u7684\u5904\u7406"),"\u3002React \u5bf9\u8282\u70b9\u8de8\u5c42\u7ea7\u7684\u79fb\u52a8\u64cd\u4f5c\u4e0d\u4f1a diff \u6bd4\u8f83\uff0c\u53ea\u6709\u9500\u6bc1\u65e7\u8282\u70b9\u548c\u91cd\u65b0\u521b\u5efa\u3002\u6240\u4ee5\u901a\u8fc7\u540c\u5c42\u904d\u5386\uff0cReact \u53d1\u73b0\u540c\u7ea7\u8282\u70b9\u5df2\u7ecf\u53d1\u751f\u53d8\u5316\uff0c\u5219\u4f1a\u628a\u8be5\u8282\u70b9\u548c\u5176\u5b50\u8282\u70b9\u5168\u90e8\u9500\u6bc1\uff0c\u7136\u540e\u91cd\u65b0\u521b\u5efa\u65b0\u8282\u70b9\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\ud83d\ude80 \u6027\u80fd\u4f18\u5316"),"\uff1a\u5728\u9875\u9762\u4e2d\u4f7f\u7528 antd \u7684 model \u6a21\u6001\u6846\u65f6\uff0c\u5c3d\u53ef\u80fd\u4e0d\u8981\u79fb\u9664\u8be5\u8282\u70b9\uff0c\u800c\u662f\u4f7f\u7528 css \u9690\u85cf\u6389\u3002"),(0,r.kt)("h5",{id:"component-diff"},"component diff"),(0,r.kt)("p",null,"React \u662f\u57fa\u4e8e\u7ec4\u4ef6\u6784\u5efa\u5e94\u7528\u7684\uff0cdiff \u7b97\u6cd5\u4f1a\u5728\u7ec4\u4ef6\u95f4\u4e5f\u6709\u4f18\u5316\uff0c\u57fa\u4e8e\u7b56\u7565 2\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u662f\u4e0d\u540c\u7c7b\u578b\u7684\u7ec4\u4ef6\u8fdb\u884c diff\uff0c\u548c \u201c\u8de8\u5c42\u7ea7\u7684\u79fb\u52a8\u64cd\u4f5c\u201d \u4e00\u6837\uff0c\u4f1a\u76f4\u63a5\u9500\u6bc1\u6574\u4e2a\u65e7\u7ec4\u4ef6\uff0c\u91cd\u65b0\u521b\u5efa\u65b0\u7ec4\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u662f\u540c\u4e00\u7c7b\u578b\u7684\u7ec4\u4ef6\u8fdb\u884c diff\uff0c\u5219 DOM \u7ed3\u6784\u5927\u81f4\u76f8\u4f3c\uff0c\u4f1a\u6309\u7167 tree diff \u7b97\u6cd5\u8fdb\u884c\u6bd4\u8f83\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\ud83d\ude80 \u6027\u80fd\u4f18\u5316"),"\uff1a\u5982\u679c\u662f\u540c\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u672c\u6b21\u66f4\u65b0\u65f6 Virtual DOM \u6ca1\u6709\u4efb\u4f55\u53d8\u5316\uff08props\u3001state \u4e5f\u6ca1\u6709\u53d8\u5316\uff09\uff0c\u90a3\u4e48\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6027\u80fd\u4f18\u5316\u544a\u77e5 React \uff0cdiff \u4f1a\u8df3\u8fc7\u8be5\u7ec4\u4ef6\u7684\u5bf9\u6bd4\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e class \u7ec4\u4ef6\u6765\u8bf4\uff0c\u901a\u8fc7 shouldComponentUpdate + shallowEqual\uff0c\u6216\u76f4\u63a5\u4f7f\u7528 PureComponent\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e function \u7ec4\u4ef6\u6765\u8bf4\uff0c\u901a\u8fc7 React.memo \u5305\u88f9\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"shouldComponentUpdate")," "),(0,r.kt)("p",{parentName:"blockquote"},"render \uff08\u8c03\u5408\uff09\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u3002",(0,r.kt)("strong",{parentName:"p"},"\u7528\u4e8e\u62e6\u622a\u7ec4\u4ef6\u6e32\u67d3"),"\u3002"),(0,r.kt)("ol",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ol"},"\u7236\u7ec4\u4ef6\u66f4\u65b0\uff0c\u5b50\u7ec4\u4ef6\u5fc5\u987b\u66f4\u65b0\u3002")),(0,r.kt)("p",{parentName:"blockquote"},"\u5f53\u4f7f\u7528component\u65f6\uff0c\u7236\u7ec4\u4ef6\u7684state\u6216prop\u66f4\u65b0\u65f6\uff0c\u65e0\u8bba\u5b50\u7ec4\u4ef6\u7684state\u3001prop\u662f\u5426\u66f4\u65b0\uff0c\u90fd\u4f1a\u89e6\u53d1\u5b50\u7ec4\u4ef6\u7684\u66f4\u65b0\uff0c\u8fd9\u4f1a\u5f62\u6210\u5f88\u591a\u6ca1\u5fc5\u8981\u7684render\uff0c\u6d6a\u8d39\u5f88\u591a\u6027\u80fd\u3002"),(0,r.kt)("ol",{parentName:"blockquote",start:2},(0,r.kt)("li",{parentName:"ol"},"shallowEqual \u53ef\u4ee5\u6d45\u5bf9\u6bd4\u7ec4\u4ef6\u7684 props \u548c state \u662f\u5426\u53d1\u751f\u53d8\u5316\uff0c\u4ece\u800c\u907f\u514d\u65e0\u610f\u4e49\u7684 render\u3002")),(0,r.kt)("p",{parentName:"blockquote"},"\u5728 shouldComponentUpdate \u4e2d\uff0c\u4f7f\u7528 shallowEqual \u6bd4\u8f83\u7ec4\u4ef6\u7684 props \u548c state \u662f\u5426\u53d1\u751f\u53d8\u5316\uff0c\u6700\u540e\u8fd4\u56de true \u7684\u65f6\u5019\uff0c\u5f53\u524d\u7ec4\u4ef6\u8fdb\u884c render\uff1b\u8fd4\u56de false \u5219\u4e0d\u8fdb\u884c render\u3002"),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"PureComponent / React.memo")),(0,r.kt)("p",{parentName:"blockquote"},"PureComponent \u662f\u9488\u5bf9\u7c7b\u7ec4\u4ef6\u7684\u8bed\u6cd5\u7cd6\uff0c\u800c React.memo \u8ba9\u51fd\u6570\u7ec4\u4ef6\u4e5f\u53ef\u4ee5\u4f7f\u7528\uff0c\u901a\u8fc7 React.memo \u5305\u88f9\u51fd\u6570\u7ec4\u4ef6\uff0c\u56de\u8fd4\u56de\u4e00\u4e2a\u9ad8\u9636\u7ec4\u4ef6\u3002"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"\u53e6\uff1a\u51fd\u6570\u7ec4\u4ef6\u6ca1\u6709 shouldComponentUpdate \u5468\u671f\u3002")),(0,r.kt)("p",{parentName:"blockquote"},"React \u7ed9\u51fa\u4e86\u5b98\u65b9\u7684\u5b9a\u4e49\uff1a\u4f7f\u7528 PureComponent \u5b9a\u4e49\u7ec4\u4ef6\u3002\u53ef\u4ee5\u5b8c\u6210\u4e0a\u8ff0 2 \u7684\u64cd\u4f5c\u3002PureComponent \u4f1a\u5728 shouldComponentUpdate \u5468\u671f\u8fdb\u884c\u4e00\u6b21 shallowEqual \u6d45\u5bf9\u6bd4\uff0c\u4ece\u800c\u5c3d\u53ef\u80fd\u907f\u514d render\u3002")),(0,r.kt)("h5",{id:"element-diff"},"element diff"),(0,r.kt)("p",null,"\u5f53 fiber \u8282\u70b9\u5904\u4e8e\u540c\u4e00\u5c42\u7ea7\u65f6\uff0cReact diff \u63d0\u4f9b\u4e86\u4e09\u79cd\u8282\u70b9\u64cd\u4f5c\uff0c\u5206\u522b\u4e3a\uff1a",(0,r.kt)("strong",{parentName:"p"},"INSERT_MARKUP"),"\uff08\u63d2\u5165\uff09\u3001",(0,r.kt)("strong",{parentName:"p"},"MOVE_EXISTING"),"\uff08\u79fb\u52a8\uff09\u548c ",(0,r.kt)("strong",{parentName:"p"},"REMOVE_NODE"),"\uff08\u5220\u9664\uff09\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u63d2\u5165"),"\uff1a\u5f53\u524d\u8282\u70b9\u6240\u5728\u7684\u7ec4\u4ef6\uff0c\u4e0d\u5728\u539f\u6765\u7684\u96c6\u5408\u4e2d\u5b58\u5728\uff0c\u5373\u662f\u5168\u65b0\u7684\u8282\u70b9\uff0c\u6267\u884c\u63d2\u5165\u64cd\u4f5c\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u79fb\u52a8"),"\uff1a\u5f53\u524d\u8282\u70b9\u6240\u5728\u7684\u7ec4\u4ef6\uff0c\u5b58\u5728\u4e8e\u539f\u6765\u7684\u96c6\u5408\u4e2d\uff0c\u4e14\u8282\u70b9\u5185\u53ef\u66f4\u65b0\uff08 DOM \u7ed3\u6784\u76f8\u4f3c\u7b49\u9012\u5f52\u5224\u65ad\uff09\uff0c\u5219\u6839\u636e React \u552f\u4e00 key \u8fdb\u884c\u533a\u5206\uff0c\u5e76\u4e14\u6267\u884c\u79fb\u52a8\u64cd\u4f5c\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982\uff1a(A,B,C,D) \u2192 (A,D,B,C)\uff0c\u4f20\u7edf diff \u4f1a\u628a B,C,D \u5168\u90e8\u9500\u6bc1\u5e76\u91cd\u65b0\u521b\u5efa\uff0c\u800c React \u4ec5\u79fb\u52a8\u4f4d\u7f6e\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5220\u9664"),"\uff1a\u5f53\u524d\u8282\u70b9\u7684\u6240\u5728\u7ec4\u4ef6\u867d\u7136\u5b58\u5728\u5728\u539f\u6765\u7684\u96c6\u5408\u4e2d\uff0c\u4f46\u8282\u70b9\u4e0d\u80fd\u76f4\u63a5\u590d\u7528\u548c\u66f4\u65b0\uff0c\u6240\u4ee5\u9700\u8981\u5220\u9664\u65e7\u8282\u70b9\u3002\u6216\u65e7\u8282\u70b9\u5df2\u7ecf\u4e0d\u518d\u9700\u8981\uff0c\u6267\u884c\u9500\u6bc1\u3002")),(0,r.kt)("p",null,"\u8282\u70b9\u95f4\u7684\u79fb\u52a8\u7b56\u7565\uff0c\u662f\u901a\u8fc7\u8282\u70b9\u4e0b\u6807 lastIndex/_mountIndex \u5224\u65ad\uff0c\u8fd9\u91cc\u4e0d\u7ec6\u8bf4\u4e86\u3002"),(0,r.kt)("p",null,"\u53ef\u5426\u590d\u7528\u7684\u539f\u5219\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c key \u672a\u5b9a\u4e49\uff0c\u5219\u9ed8\u8ba4 key = null\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u66f4\u65b0\u540e\uff0c\u5224\u65ad key \u662f\u5426\u6539\u53d8\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"key \u6539\u53d8\uff0c\u4e0d\u80fd\u590d\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"key \u6ca1\u6539\u53d8\uff0c\u7ee7\u7eed\u5224\u65ad type \u662f\u5426\u6539\u53d8\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"type \u6539\u53d8\uff0c\u4e0d\u80fd\u590d\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"type \u6ca1\u53d8\uff0c\u5f53\u524d\u8282\u70b9\u53ef\u4ee5\u590d\u7528\u3002\u9700\u8981\u5224\u65ad\u5176 children \u4e0b\u7684\u8282\u70b9\u662f\u5426\u9700\u8981\u66f4\u65b0\u3002")))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\ud83d\ude80 \u6027\u80fd\u4f18\u5316"),"\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5bf9\u540c\u4e00\u5c42\u7ea7\u7684\u4e00\u7ec4\u5b50\u8282\u70b9\uff0c\u53ef\u4ee5\u7ed9\u5b83\u4eec\u6dfb\u52a0\u552f\u4e00\u7684 key \u8fdb\u884c\u533a\u5206\uff0c\u5219 React \u53ef\u4ee5\u5728\u66f4\u65b0\u524d\u540e\u901a\u8fc7 key \u53bb\u5224\u65ad\u8be5\u8282\u70b9\u53ca\u5176\u5b50\u8282\u70b9\u662f\u5426\u53d1\u751f\u66f4\u65b0\uff0c\u63d0\u5347\u6027\u80fd\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5c3d\u53ef\u80fd\u4fdd\u6301 DOM \u7ed3\u6784\u7a33\u5b9a\uff0c\u51cf\u5c11\u5927\u91cf\u79fb\u52a8\u540c\u7ea7\u8282\u70b9\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u4ece\u961f\u5934\u63d2\u5165\u65b0\u8282\u70b9 / \u5c06\u5bf9\u5c3e\u5df4\u7684\u8282\u70b9\u79fb\u52a8\u5230\u961f\u5934\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u53c2\u8003\uff1a"),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7116326409961734152"},"https://juejin.cn/post/7116326409961734152")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6844903944796258317"},"https://juejin.cn/post/6844903944796258317")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/20346379"},"https://zhuanlan.zhihu.com/p/20346379")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/book/6945998773818490884/section/6959807335720026150"},"https://juejin.cn/book/6945998773818490884/section/6959807335720026150"))),(0,r.kt)("h3",{id:"\u95ee\u9898\u53cc\u7f13\u5b58\u6a21\u578b"},"\u95ee\u9898\uff1a\u53cc\u7f13\u5b58\u6a21\u578b"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4ea7\u751f\u539f\u56e0"),"\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u53cc\u7f13\u5b58\u6a21\u578b\u662f\u4e00\u4e2a\u89e3\u51b3\u56fe\u5f62\u7f16\u7a0b\u4e2d \u201c",(0,r.kt)("strong",{parentName:"li"},"\u95ea\u70c1\u95ee\u9898"),"\u201d \u7684\u65b9\u6848\u3002\u5176\u57fa\u672c\u539f\u7406\u662f\u5728\u5185\u5b58\u4e2d\u7ed8\u5236\u5f53\u524d\u5e27\uff0c\u7ed8\u5236\u5b8c\u6bd5\u540e\u76f4\u63a5\u7528\u5f53\u524d\u5e27\u66ff\u6362\u4e0a\u4e00\u5e27\uff0c\u7531\u4e8e\u7701\u6389\u4e86\u5e27\u4e0e\u5e27\u4e4b\u95f4\u66ff\u6362\u7684\u65f6\u95f4\u56e0\u6b64\u53ef\u4ee5\u6709\u6548\u7684\u907f\u514d\u95ea\u70c1\u95ee\u9898\u3002 "),(0,r.kt)("li",{parentName:"ol"},"react 15+ \u7684\u65b0\u67b6\u6784\uff0c\u534f\u8c03\u9636\u6bb5\u7684\u5f02\u6b65\u53ef\u4e2d\u65ad\u3002\u901a\u8fc7\u53cc\u7f13\u5b58\uff0c\u5f53\u66f4\u9ad8\u4f18\u4efb\u52a1\u6765\u5230\uff0c\u9700\u8981\u4e2d\u65ad\u5f53\u524d diff \u7684\u6811\u65f6\uff0c\u7531\u4e8e\u5b58\u5728 current fiber tree \u6b63\u5e38\u5de5\u4f5c\u3002\u6240\u4ee5 workInProgress fiber tree \u7684\u4e2d\u65ad\u5e76\u91cd\u65b0\u6784\u5efa\uff0c\u4e0d\u4f1a\u5f71\u54cd\u9875\u9762\u7684\u6b63\u5e38\u5c55\u793a\uff0c\u5bf9\u7528\u6237\u900f\u660e\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u65bd\u9636\u6bb5"),"\uff1a\u5728\u534f\u8c03\u9636\u6bb5\uff0creact \u901a\u8fc7 \u53cc\u7f13\u5b58\u673a\u5236\u8f93\u51fa\u4e24\u9897 fiber tree\uff08work in progress fiber tree \u5185\u5b58\u4e2d\u7684\u6811\uff0ccurrent fiber tree \u6e32\u67d3\u6811\uff09\u3002\u8fd9\u4e24\u68f5\u6811\u4e2d\uff0c\u540c\u7ea7\u8282\u70b9\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"fiber.alternate")," \u6307\u9488\u76f8\u4e92\u8fde\u63a5\u3002current fiber tree \u4ee3\u8868\u4e86\u9875\u9762\u6b63\u5728\u5c55\u793a\u7684 DOM \u5185\u5bb9\uff0c\u800c work in progress fiber tree \u662f\u5185\u5b58\u4e2d react \u6b63\u5728\u6784\u5efa\u7684 fiber tree\uff0c\u662f\u672c\u6b21\u66f4\u65b0\u4e4b\u540e\u9875\u9762\u5c55\u793a\u7684 DOM \u5185\u5bb9\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u65bd\u8fc7\u7a0b"),"\uff1a\u5f53\u89e6\u53d1\u66f4\u65b0\u65f6\uff0creact \u4f1a\u901a\u8fc7 diff \u7b97\u6cd5\uff08\u5b98\u65b9\u79f0 Reconciliation\uff09\u5bf9\u6bd4 current fiber tree\uff0c\u6784\u5efa\u4e00\u9897 work in progress fiber tree\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u6784\u5efa workInProgress Fiber \u6811\u65f6,  ",(0,r.kt)("strong",{parentName:"li"},"\u4f1a\u5c1d\u8bd5\u590d\u7528 current Fiber \u6811\u4e2d\u5df2\u6709\u7684 Fiber \u8282\u70b9\u5185\u7684\u5c5e\u6027"),"\u3002\u5728 ",(0,r.kt)("strong",{parentName:"li"},"\u9996\u5c4f\u6e32\u67d3")," \u65f6\uff0c\u53ea\u6709 rootFiber \u5b58\u5728\u5bf9\u5e94\u7684 current fiber\uff08\u5373 rootFiber.alternate\uff09\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u66f4\u591a\u89c1\u95ee\u9898\uff1a\u521d\u6b21\u6e32\u67d3 / \u66f4\u65b0\u7684\u533a\u522b\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u5f15\u5165\u534f\u8c03\u9636\u6bb5\u7684\u5de5\u4f5c\u5185\u5bb9\uff1a\u6df1\u5ea6\u904d\u5386\u4f18\u5148\u3001\u9012\u9636\u6bb5\u3001\u5f52\u9636\u6bb5\u3001\u6784\u5efa effectList \u526f\u4f5c\u7528\u94fe\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u9636\u6bb5\uff1a\u5728\u4e0b\u4e00\u6b21\u6e32\u67d3\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u590d\u7528\u7f13\u5b58\u6811\u505a\u4e3a\u4e0b\u4e00\u6b21\u6e32\u67d3\u6811\uff0c\u4e0a\u4e00\u6b21\u7684\u6e32\u67d3\u6811\u53c8\u4f5c\u4e3a\u7f13\u5b58\u6811\uff0c\u8fd9\u6837\u53ef\u4ee5\u9632\u6b62\u53ea\u7528\u4e00\u9897\u6811\u66f4\u65b0\u72b6\u6001\u7684\u4e22\u5931\u7684\u60c5\u51b5\uff0c\u53c8\u52a0\u5feb\u4e86 DOM \u8282\u70b9\u7684\u66ff\u6362\u4e0e\u66f4\u65b0\u3002")),(0,r.kt)("p",null,"\u603b\u7ed3\uff1a\u4e00\u4e2a\u5143\u7d20\u6700\u591a\u5b58\u5728\u4e24\u4e2a\u7248\u672c\u7684 fiber \u8282\u70b9\uff0c\u4e00\u4e2a current \u7248\u672c\u548c\u5f53\u524d\u6d4f\u89c8\u5668\u9875\u9762\u5bf9\u5e94\uff0c\u4e00\u4e2a WorkInProgress \u7248\u672c\uff0cWorkInProgress \u7248\u672c\u662f\u6b63\u5728\u534f\u8c03\u7684\u8282\u70b9\u3002"),(0,r.kt)("h2",{id:"fiber"},"Fiber"),(0,r.kt)("h3",{id:"\u95ee\u98981-\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165-fiber-\u67b6\u6784"},"\u95ee\u98981 \u4e3a\u4ec0\u4e48\u8981\u5f15\u5165 Fiber \u67b6\u6784\uff1f"),(0,r.kt)("p",null,"fiber \u662f\u9488\u5bf9\u5355\u8fdb\u7a0b\u7684\u4e00\u79cd\u8c03\u5ea6\u7b56\u7565\u3002"),(0,r.kt)("p",null,"\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u4ecb\u7ecd\u8fc7\u5e38\u89c1\u7684\u5355\u5904\u7406\u8fdb\u7a0b\u8c03\u5ea6\u7b56\u7565\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5148\u5230\u5148\u5f97(First-Come-First-Served, FCFS)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f18\u70b9\uff1a\u7b80\u5355\uff0c\u6613\u5b9e\u73b0"),(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a\u5bf9\u77ed\u8fdb\u7a0b\u4e0d\u5229\u3001\u5bf9 I/O \u5bc6\u96c6\u578b\u8fdb\u7a0b\u4e0d\u7406\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u8f6e\u8f6c",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u62a2\u5360\u7b56\u7565\u3002\u786e\u5b9a\u5408\u7406\u7684\u65f6\u95f4\u7247\u957f\u5ea6\uff0c\u516c\u5e73\u5730\u7ed9\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u4e00\u5b9a\u7684\u6267\u884c\u65f6\u95f4\uff0c\u5f53\u65f6\u95f4\u6d88\u8017\u5b8c\u6bd5\u6216\u963b\u585e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c31\u4f1a\u8c03\u5ea6\u5176\u4ed6\u8fdb\u7a0b\uff0c\u5c06\u6267\u884c\u6743\u62a2\u5360\u8fc7\u6765\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u6700\u77ed\u8fdb\u7a0b\u4f18\u5148(Shortest Process Next, SPN)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a\u5bf9\u957f\u8fdb\u7a0b\u4e0d\u5229\uff0c\u4f1a\u9965\u997f\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u6700\u77ed\u5269\u4f59\u65f6\u95f4(Shortest Remaining Time, SRT)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6839\u636e\u5269\u4f59\u65f6\u95f4\u7684\u957f\u77ed\uff0c\u4f18\u5148\u6267\u884c\u53ef\u6700\u5feb\u5b8c\u6210\u7684\u8fdb\u7a0b\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a\u5bf9\u957f\u8fdb\u7a0b\u4e0d\u5229\uff0c\u4f1a\u9965\u997f\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u6700\u9ad8\u54cd\u5e94\u6bd4\u4f18\u5148(HRRN)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u54cd\u5e94\u6bd4 = \uff08\u7b49\u5f85\u6267\u884c\u65f6\u95f4 + \u8fdb\u7a0b\u6267\u884c\u65f6\u95f4\uff09 / \u8fdb\u7a0b\u6267\u884c\u65f6\u95f4"),(0,r.kt)("li",{parentName:"ul"},"\u89e3\u51b3\u957f\u8fdb\u7a0b\u9965\u997f\u95ee\u9898\uff0c\u5f15\u5165\u4e86\u7b49\u5f85\u6267\u884c\u65f6\u95f4\uff0c\u8ba9\u7b49\u5f85\u65f6\u95f4\u8f83\u957f\u7684\u53ef\u4ee5\u5c3d\u53ef\u80fd\u4f18\u5148\u6267\u884c\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u53cd\u9988\u6cd5\uff0c\u591a\u961f\u5217",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u8fdb\u7a0b\u4e00\u5f00\u59cb\u90fd\u6709\u76f8\u540c\u7684\u4f18\u5148\u7ea7\uff0c\u6bcf\u6b21\u88ab\u62a2\u5360(\u9700\u8981\u914d\u5408\u5176\u4ed6\u62a2\u5360\u7b56\u7565\u4f7f\u7528\uff0c\u5982\u8f6e\u8f6c)\uff0c\u4f18\u5148\u7ea7\u5c31\u4f1a\u964d\u4f4e\u4e00\u7ea7\u3002\u56e0\u6b64\u901a\u5e38\u5b83\u4f1a\u6839\u636e\u4f18\u5148\u7ea7\u5212\u5206\u591a\u4e2a\u961f\u5217")))),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u4e2d\uff0cJavaScript \u7684\u6267\u884c\u4e5f\u662f\u5355\u7ebf\u7a0b\u7684\u3002Javascript \u5f15\u64ce\u548c\u9875\u9762\u6e32\u67d3\u5f15\u64ce\u5728\u540c\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"\u6e32\u67d3\u7ebf\u7a0b"),"\uff0cGUI \u6e32\u67d3\u548c Javascript\u6267\u884c \u4e24\u8005\u662f\u4e92\u65a5\u7684\u3002\u5982\u679c\u8ba9 js\u6267\u884c\u957f\u671f\u5360\u636e\u6e32\u67d3\u8fdb\u7a0b\uff0c\u6d4f\u89c8\u5668\u5c31\u4f1a\u5448\u73b0 \u201c\u5361\u6b7b\u201d \u72b6\u6001\uff0c\u9875\u9762\u65e0\u6cd5\u5237\u65b0\u3002"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u2019\u524d\u7aef\u6846\u67b6\u2018\u6765\u8bf4\uff0c\u89e3\u51b3\u8fd9\u79cd\u95ee\u9898\u6709\u4e09\u4e2a\u65b9\u5411:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"1\ufe0f\u20e3 \u4f18\u5316\u6bcf\u4e2a\u4efb\u52a1\uff0c\u8ba9\u5b83\u6709\u591a\u5feb\u5c31\u591a\u5feb\u3002\u6324\u538bCPU\u8fd0\u7b97\u91cf"),(0,r.kt)("li",{parentName:"ul"},"2\ufe0f\u20e3 \u5feb\u901f\u54cd\u5e94\u7528\u6237\uff0c\u8ba9\u7528\u6237\u89c9\u5f97\u591f\u5feb\uff0c\u4e0d\u80fd\u963b\u585e\u7528\u6237\u7684\u4ea4\u4e92"),(0,r.kt)("li",{parentName:"ul"},"3\ufe0f\u20e3 \u5c1d\u8bd5 Worker \u591a\u7ebf\u7a0b")),(0,r.kt)("p",null,"Vue \u4ece1\u20e3\ufe0f\u89d2\u5ea6\u5165\u624b\uff0c\u901a\u8fc7\u6a21\u7248 + \u54cd\u5e94\u5f0f\u673a\u5236\uff0c\u63d0\u5347\u4efb\u52a1\u8fd0\u884c\u901f\u5ea6\u3002"),(0,r.kt)("p",null,"React \u4ece2\u20e3\ufe0f\u89d2\u5ea6\u5165\u624b\uff0c\u901a\u8fc7 fiber \u67b6\u6784\uff0c\u628a\u4efb\u52a1\u5207\u5206\uff0c\u63d0\u5347\u6d4f\u89c8\u5668\u54cd\u5e94\u901f\u5ea6\u3002"),(0,r.kt)("p",null,"\u5177\u4f53\u4e3a\uff1a"),(0,r.kt)("p",null,"React \u6709\u4e09\u5927\u6a21\u5757\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Scheduler \u8c03\u5ea6\u5668\uff1a\u8c03\u5ea6\u66f4\u65b0.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Reconcoler \u534f\u8c03\u5668\uff1a\u51b3\u5b9a\u9700\u8981\u66f4\u65b0\u4ec0\u4e48\u7ec4\u4ef6.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Renderer \u6e32\u67d3\u5668\uff1a\u5c06\u7ec4\u4ef6\u66f4\u65b0\u5230\u89c6\u56fe\u4e2d."))),(0,r.kt)("p",null,"\u5176\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Reconcilation")," \u534f\u8c03\u9636\u6bb5\u662f CPU \u5bc6\u96c6\u578b\u64cd\u4f5c\uff0cfiber \u628a\u8be5\u73af\u8282\u5207\u5206\uff0c\u4f7f ",(0,r.kt)("inlineCode",{parentName:"p"},"Reconcilation")," \u8fc7\u7a0b\u53d8\u6210\u53ef\u4e2d\u65ad\uff0c\u9002\u65f6\u7684\u8ba9\u51fa CPU \u6267\u884c\u6743\uff0816.6ms\uff09\uff0c\u597d\u5904\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u518d\u4e00\u6b21\u6027\u64cd\u4f5c\u5927\u91cf DOM \u8282\u70b9\uff0c\u800c\u662f\u5206\u6279\u5ef6\u65f6\u5bf9 DOM \u8fdb\u884c\u64cd\u4f5c\u3002\u63d0\u5347\u4e86\u6d4f\u89c8\u5668\u7684\u54cd\u5e94\u901f\u5ea6\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7ed9\u6d4f\u89c8\u5668\u4e00\u70b9\u5598\u606f\u7684\u673a\u4f1a\uff0c\u4ed6\u4f1a\u5bf9\u4ee3\u7801\u8fdb\u884c\u7f16\u8bd1\u4f18\u5316\uff08JIT\uff09\u53ca\u8fdb\u884c\u70ed\u4ee3\u7801\u4f18\u5316\uff0c\u6216\u8005\u5bf9reflow\u8fdb\u884c\u4fee\u6b63")),(0,r.kt)("h3",{id:"\u95ee\u98982-\u4ec0\u4e48\u662f-fiber"},"\u95ee\u98982 \u4ec0\u4e48\u662f Fiber"),(0,r.kt)("p",null,"\u662f\u4e00\u79cd\u6d41\u7a0b\u63a7\u5236\u673a\u5236\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u52a8\u6001\u6267\u884c\u5355\u5143"),(0,r.kt)("li",{parentName:"ul"},"\u4e00\u79cd\u9759\u6001\u6570\u636e\u7ed3\u6784")),(0,r.kt)("h4",{id:"1-\u6d41\u7a0b\u63a7\u5236\u673a\u5236"},"1 \u6d41\u7a0b\u63a7\u5236\u673a\u5236"),(0,r.kt)("p",null,"Fiber \u4e5f\u79f0\u534f\u7a0b\u3001\u6216\u8005\u7ea4\u7a0b\u3002 \u662f\u4e00\u79cd\u63a7\u5236\u6d41\u7a0b\u7684\u8ba9\u51fa\u673a\u5236\u3002\u534f\u7a0b\u548c\u7ebf\u7a0b\u5e76\u4e0d\u4e00\u6837\uff0c\u534f\u7a0b\u672c\u8eab\u662f\u6ca1\u6709\u5e76\u53d1\u6216\u8005\u5e76\u884c\u80fd\u529b\u7684\uff08\u9700\u8981\u914d\u5408\u7ebf\u7a0b\uff09\u3002"),(0,r.kt)("p",null,"Fiber \u5b9e\u73b0\u4e86\u4ee3\u6570\u6548\u5e94\uff08\u770b\u4ee3\u6570\u6548\u5e94\u7684\u4f8b\u5b50\uff09\uff0c\u53ef\u4ee5\u8fd1\u4f3c\u7684\u7406\u89e3\u4e3a\u662f async/await + try/catch \u7684\u7ed3\u5408\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u666e\u901a\u51fd\u6570\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\u65e0\u6cd5\u88ab\u4e2d\u65ad\u548c\u6062\u590d\uff1aasync/await \u5b9e\u73b0\u4e86\u4e2d\u65ad\u548c\u6062\u590d\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4f46\u56e0\u6b64\u5bfc\u81f4\u4e86\u526f\u4f5c\u7528\uff1aasync\u5177\u6709\u4f20\u67d3\u6027\uff0c\u9700\u8981\u5168\u90e8\u7684\u51fd\u6570\u90fd\u4e3a async\u3002\u5982\u679c\u53ef\u4ee5\u7c7b\u4f3c try/catch \u7684\u6548\u679c\uff0c\u8ba9\u526f\u4f5c\u7528\u548c\u4e3b\u903b\u8f91\u5206\u79bb\uff0c\u5219\u4ee3\u7801\u903b\u8f91\u66f4\u6e05\u6670\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"React \u6e32\u67d3\u7684\u8fc7\u7a0b\u53ef\u4ee5\u88ab\u4e2d\u65ad\uff0c\u53ef\u4ee5\u5c06\u63a7\u5236\u6743\u4ea4\u56de\u6d4f\u89c8\u5668\uff0c\u8ba9\u4f4d\u7ed9\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\uff0c\u6d4f\u89c8\u5668\u7a7a\u95f2\u540e\u518d\u6062\u590d\u6e32\u67d3")),(0,r.kt)("p",null,"\u5408\u4f5c\u5f0f\u8c03\u5ea6 Cooperative Scheduling\uff1a\u6d4f\u89c8\u5668\u4e2d\u6ca1\u6709\u62a2\u5360\u673a\u5236\uff0c\u65e0\u6cd5\u4e2d\u65ad\u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1\uff0c\u6240\u4ee5 React \u9700\u8981\u5177\u5907\u8ba9\u51fa\u673a\u5236\uff0c\u4e3b\u52a8\u8ba9\u51fa\u63a7\u5236\u6743\u3002"),(0,r.kt)("p",null,"\u8fd9\u662f\u4e00\u79cd\u7ed9\u4e88\u4fe1\u4efb\u7684\u5951\u7ea6\u5408\u4f5c\u673a\u5236\uff1aReact \u4f1a\u6839\u636e\u81ea\u5df1\u7684\u4efb\u52a1\u91cf\uff0c\u5411\u6d4f\u89c8\u5668\u7533\u8bf7\u9002\u91cf\u7684\u65f6\u95f4\u7247\u3002\u800c\u6d4f\u89c8\u5668\u4f1a\u5148\u6267\u884c\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\uff0c\u518d\u628a\u5269\u4f59\u65f6\u95f4\u5206\u7ed9 React\uff0cReact \u4e5f\u4f1a\u5728\u89c4\u5b9a\u7684\u65f6\u95f4\u5185\u5b8c\u6210\u4efb\u52a1\u6267\u884c\uff0c\u5f52\u8fd8\u63a7\u5236\u6743\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(8554).Z,width:"1268",height:"700"})),(0,r.kt)("p",null,"\u90a3\u4e48\uff0c\u5982\u4f55\u786e\u5b9a\u5269\u4f59\u65f6\u95f4\u5462\uff1f\u6216\u8005\u54ea\u4e9b\u4efb\u52a1\u662f\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u5462\uff1f"),(0,r.kt)("p",null,"\u5728\u4e00\u5e27\uff0816.6 ms\uff09\u4e2d\uff0c\u6d4f\u89c8\u5668\u4f1a\u6267\u884c\u4ee5\u4e0b\u4efb\u52a1\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5904\u7406\u7528\u6237\u8f93\u5165\u4e8b\u4ef6"),(0,r.kt)("li",{parentName:"ul"},"Javascript\u6267\u884c"),(0,r.kt)("li",{parentName:"ul"},"requestAnimation \u8c03\u7528"),(0,r.kt)("li",{parentName:"ul"},"\u5e03\u5c40 Layout"),(0,r.kt)("li",{parentName:"ul"},"\u7ed8\u5236 Paint")),(0,r.kt)("p",null,"\u5982\u679c\u5728\u6267\u884c\u5b8c\u8fd9\u4e9b\u5fc5\u987b\u4efb\u52a1\u540e\uff0c\u8fd8\u6709\u5269\u4f59\u7684\u65f6\u95f4\uff0c\u5c31\u53ef\u7ed9 React \u53bb\u4f7f\u7528\uff1a"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," \u7684\u56de\u8c03\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(2743).Z,width:"737",height:"139"})),(0,r.kt)("p",null,"\u4e3a\u4e86\u907f\u514d\u5269\u4f59\u65f6\u95f4\u4e0d\u8db3\uff0c\u4efb\u52a1\u88ab\u997f\u6b7b\uff0cReact \u5b9a\u4e49\u4e86\u4e00\u4e2a\u8d85\u65f6\u65f6\u95f4\u3002\u5982\u679c\u4efb\u52a1\u7b49\u5f85\u65f6\u95f4\u5230\u8fbe\u8d85\u65f6\u65f6\u95f4\u540e\uff0c\u5c31\u4f1a\u63d0\u5347\u4f18\u5148\u7ea7\uff0c\u7acb\u5373\u6267\u884c\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Immediate"),"(-1) - \u8fd9\u4e2a\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u4f1a\u540c\u6b65\u6267\u884c, \u6216\u8005\u8bf4\u8981\u9a6c\u4e0a\u6267\u884c\u4e14\u4e0d\u80fd\u4e2d\u65ad"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"UserBlocking"),"(250ms) \u8fd9\u4e9b\u4efb\u52a1\u4e00\u822c\u662f\u7528\u6237\u4ea4\u4e92\u7684\u7ed3\u679c, \u9700\u8981\u5373\u65f6\u5f97\u5230\u53cd\u9988"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Normal")," (5s) \u5e94\u5bf9\u54ea\u4e9b\u4e0d\u9700\u8981\u7acb\u5373\u611f\u53d7\u5230\u7684\u4efb\u52a1\uff0c\u4f8b\u5982\u7f51\u7edc\u8bf7\u6c42"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Low")," (10s) \u8fd9\u4e9b\u4efb\u52a1\u53ef\u4ee5\u653e\u540e\uff0c\u4f46\u662f\u6700\u7ec8\u5e94\u8be5\u5f97\u5230\u6267\u884c. \u4f8b\u5982\u5206\u6790\u901a\u77e5"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Idle")," (\u6ca1\u6709\u8d85\u65f6\u65f6\u95f4) \u4e00\u4e9b\u6ca1\u6709\u5fc5\u8981\u505a\u7684\u4efb\u52a1 (e.g. \u6bd4\u5982\u9690\u85cf\u7684\u5185\u5bb9), \u53ef\u80fd\u4f1a\u88ab\u997f\u6b7b")),(0,r.kt)("h4",{id:"2-\u6267\u884c\u5355\u5143"},"2 \u6267\u884c\u5355\u5143"),(0,r.kt)("p",null,"FIber \u53e6\u4e00\u4e2a\u6982\u5ff5\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u6216\u8005\u8bf4\u6267\u884c\u5355\u5143\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5c06\u5b83\u89c6\u4f5c\u4e00\u4e2a\u6267\u884c\u5355\u5143\uff0c\u6bcf\u6b21\u6267\u884c\u5b8c\u4e00\u4e2a '\u6267\u884c\u5355\u5143'\uff0cReact \u5c31\u4f1a\u68c0\u67e5\u73b0\u5728\u8fd8\u5269\u591a\u5c11\u65f6\u95f4\uff0c\u5982\u679c\u6ca1\u6709\u65f6\u95f4\u5c31\u5c06\u63a7\u5236\u6743\u8ba9\u51fa\u53bb\u3002")),(0,r.kt)("p",null,"\u6d41\u7a0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5047\u8bbe\u7528\u6237\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"setState")," \u66f4\u65b0\u7ec4\u4ef6, \u8fd9\u4e2a\u5f85\u66f4\u65b0\u7684\u4efb\u52a1\u4f1a\u5148\u653e\u5165\u961f\u5217\u4e2d\uff0c\u7136\u540e\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," \u8bf7\u6c42\u6d4f\u89c8\u5668\u8c03\u5ea6\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6d4f\u89c8\u5668\u6709\u7a7a\u95f2\u65f6\u95f4\uff0c\u6216\u8005\u4efb\u52a1\u8d85\u65f6\uff0c\u5c31\u4f1a\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"performWork")," \u6765\u5faa\u73af\u904d\u5386\uff0c\u5e76\u6267\u884c\u961f\u5217\u4e2d\u7684\u4efb\u52a1\u3002"))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"workLoop")," \uff1a\u5b83\u4f1a\u4ece\u66f4\u65b0\u961f\u5217 (updateQueue) \u4e2d\u5f39\u51fa\u66f4\u65b0\u4efb\u52a1\u6765\u6267\u884c\uff0c\u6bcf\u6267\u884c\u5b8c\u4e00\u4e2a \u2018",(0,r.kt)("inlineCode",{parentName:"p"},"\u6267\u884c\u5355\u5143"),"\u2018 \uff0c\u5c31\u68c0\u67e5\u4e00\u4e0b\u5269\u4f59\u65f6\u95f4\u662f\u5426\u5145\u8db3\uff0c\u5982\u679c\u5145\u8db3\u5c31\u8fdb\u884c\u6267\u884c\u4e0b\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"\u6267\u884c\u5355\u5143"),"\uff0c\u53cd\u4e4b\u5219\u505c\u6b62\u6267\u884c\uff0c\u4fdd\u5b58\u73b0\u573a\uff0c\u7b49\u4e0b\u4e00\u6b21\u6709\u6267\u884c\u6743\u65f6\u6062\u590d\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(9923).Z,width:"1056",height:"1089"})),(0,r.kt)("h4",{id:"3-\u4e00\u79cd\u6570\u636e\u7ed3\u6784"},"3 \u4e00\u79cd\u6570\u636e\u7ed3\u6784"),(0,r.kt)("p",null,"\u67e5\u770b\u95ee\u98983."),(0,r.kt)("h3",{id:"\u95ee\u98983-fiber-\u7684\u7ed3\u6784"},"\u95ee\u98983 Fiber \u7684\u7ed3\u6784"),(0,r.kt)("p",null,"\u5728 React 16\u4ee5\u524d\uff0cReconcilation \u662f\u540c\u6b65\u7684\u3001\u9012\u5f52\u6267\u884c\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cDom \u7684\u6784\u5efa\u57fa\u4e8e ",(0,r.kt)("strong",{parentName:"p"},"\u51fd\u6570\u8c03\u7528\u6808")," \u7684Reconcilation\u7b97\u6cd5\uff0c\u56e0\u6b64\u901a\u5e38\u4e5f\u79f0\u5b83\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"Stack Reconcilation"),"\u3002"),(0,r.kt)("p",null,"\u4f46\u57fa\u4e8e\u8c03\u7528\u6808\u7684\u65b9\u5f0f\u4e0d\u80fd\u968f\u610f\u4e2d\u65ad / \u6062\u590d\u73b0\u573a\uff0c\u4e5f\u4e0d\u5229\u4e8e\u5f02\u6b65\u5904\u7406\u7684\u4ee3\u6570\u6548\u5e94\u5b9e\u73b0\u3002 \u5982\u679c\u8981\u6062\u590d\u9012\u5f52\u73b0\u573a\uff0c\u53ef\u80fd\u9700\u8981\u4ece\u5934\u5f00\u59cb\uff0c\u6062\u590d\u5230\u4e4b\u524d\u7684\u8c03\u7528\u6808\u3002"),(0,r.kt)("p",null,"\u6240\u4ee5\uff0cReact 16 \u901a\u8fc7\u6a21\u62df\u51fd\u6570\u8c03\u7528\u6808\uff0c\u5c06\u9012\u5f52\u8f6c\u5316\u6210\u8fed\u4ee3\uff0c\u4f7f\u7528 ",(0,r.kt)("strong",{parentName:"p"},"\u94fe\u8868")," \u6784\u5efa\u3002"),(0,r.kt)("p",null," \u6bcf\u4e2a VirtualDOM \u8282\u70b9\uff0c\u90fd\u4f7f\u7528\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber")," \u8868\u793a\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"interface Fiber {\n  /**\n   * \u269b\ufe0f \u8282\u70b9\u7684\u7c7b\u578b\u4fe1\u606f\n   */\n  // \u6807\u8bb0 Fiber \u7c7b\u578b: \u51fd\u6570/\u7c7b\u7ec4\u4ef6\u3001\u6839\u5143\u7d20\u3001dom\u5143\u7d20\u3001\u6587\u672c\u8282\u70b9\u3001Fragment\u3001MemoComponent\u7b49\n  tag: WorkTag,\n  // \u8282\u70b9\u5143\u7d20\u7c7b\u578b, \u662f\u5177\u4f53\u7684\u7c7b\u7ec4\u4ef6\u3001\u51fd\u6570\u7ec4\u4ef6\u3001\u5bbf\u4e3b\u7ec4\u4ef6(\u5b57\u7b26\u4e32)\n  type: any,\n\n  /**\n   * \u269b\ufe0f \u7ed3\u6784\u4fe1\u606f\n   */ \n  // \u6307\u5411\u7236\u8282\u70b9\uff0c\u6216\u8005render\u8be5\u8282\u70b9\u7684\u7ec4\u4ef6\n  return: Fiber | null,\n  // \u6307\u5411\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9\n  child: Fiber | null,\n  // \u6307\u5411\u4e0b\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9\n  sibling: Fiber | null,\n    \n  /**\n   * \u269b\ufe0f \u8282\u70b9\u72b6\u6001 state\n   */\n  // \u8282\u70b9\u5b9e\u4f8b(\u72b6\u6001)\uff1a\n  //        \u5bf9\u4e8e\u5bbf\u4e3b\u7ec4\u4ef6\uff0c\u8fd9\u91cc\u4fdd\u5b58\u5bbf\u4e3b\u7ec4\u4ef6\u7684\u5b9e\u4f8b, \u4f8b\u5982DOM\u8282\u70b9\u3002\n  //        \u5bf9\u4e8e\u7c7b\u7ec4\u4ef6\u6765\u8bf4\uff0c\u8fd9\u91cc\u4fdd\u5b58\u7c7b\u7ec4\u4ef6\u7684\u5b9e\u4f8b\n  //        \u5bf9\u4e8e\u51fd\u6570\u7ec4\u4ef6\u8bf4\uff0c\u8fd9\u91cc\u4e3a\u7a7a\uff0c\u56e0\u4e3a\u51fd\u6570\u7ec4\u4ef6\u6ca1\u6709\u5b9e\u4f8b\n  stateNode: any,\n  // \u65b0\u7684\u3001\u5f85\u5904\u7406\u7684props\n  pendingProps: any,\n  // \u4e0a\u4e00\u6b21\u6e32\u67d3\u7684props\n  memoizedProps: any, // The props used to create the output.\n  // \u4e0a\u4e00\u6b21\u6e32\u67d3\u7684\u7ec4\u4ef6\u72b6\u6001\n  memoizedState: any,\n\n  /**\n   * \u269b\ufe0f \u526f\u4f5c\u7528\n   */\n  // \u5f53\u524d\u8282\u70b9\u7684\u526f\u4f5c\u7528\u7c7b\u578b\uff0c\u4f8b\u5982\u8282\u70b9\u66f4\u65b0\u3001\u5220\u9664\u3001\u79fb\u52a8\n  effectTag: SideEffectTag,\n  // \u548c\u8282\u70b9\u5173\u7cfb\u4e00\u6837\uff0cReact \u540c\u6837\u4f7f\u7528\u94fe\u8868\u6765\u5c06\u6240\u6709\u6709\u526f\u4f5c\u7528\u7684Fiber\u8fde\u63a5\u8d77\u6765\n  nextEffect: Fiber | null,\n\n  /**\n   * \u269b\ufe0f \u66ff\u8eab\n   * \u6307\u5411\u65e7\u6811\u4e2d\u7684\u8282\u70b9\uff0c\u5982\u679c\u8282\u70b9\u4e0d\u53d1\u751f\u4efb\u4f55\u6539\u53d8\uff0c\u5c31\u4f1a\u76f4\u63a5\u4f7f\u7528\u65e7\u8282\u70b9\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u521b\u5efa\n   */\n  alternate: Fiber | null,\n}\n")),(0,r.kt)("p",null,"Fiber \u5305\u542b\u7684\u5c5e\u6027\u53ef\u4ee5\u5212\u5206\u4e3a 5 \u4e2a\u90e8\u5206:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\ud83c\udd95 \u7ed3\u6784\u4fe1\u606f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Fiber \u4f7f\u7528\u94fe\u8868\u7684\u5f62\u5f0f\u6765\u8868\u793a\u8282\u70b9\u5728\u6811\u4e2d\u7684\u5b9a\u4f4d\uff0c\u5c06 virtualDom \u6784\u5efa\u8d77\u6765\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u8282\u70b9\u7c7b\u578b\u4fe1\u606f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"tag \u8868\u793a\u8282\u70b9\u7684\u5206\u7c7b\u3001type \u4fdd\u5b58\u5177\u4f53\u7684\u7c7b\u578b\u503c\uff0c\u5982div\u3001Component\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u8282\u70b9\u7684\u72b6\u6001"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u8282\u70b9\u7684\u7ec4\u4ef6\u5b9e\u4f8b\u3001props\u3001state \u7b49\uff0c\u5b83\u4eec\u5c06\u5f71\u54cd\u7ec4\u4ef6\u7684\u8f93\u51fa\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\ud83c\udd95 \u526f\u4f5c\u7528"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728 Reconciliation \u8fc7\u7a0b\u4e2d\u53d1\u73b0\u7684 '\u526f\u4f5c\u7528'(",(0,r.kt)("strong",{parentName:"li"},"\u53d8\u66f4\u9700\u6c42"),") \u5c31\u4fdd\u5b58\u5728\u8282\u70b9\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"effectTag")," \u4e2d(\u60f3\u8c61\u4e3a\u6253\u4e0a\u4e00\u4e2a\u6807\u8bb0)\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u94fe\u8868\u7ed3\u6784\uff0c\u5c06\u672c\u6b21\u6e32\u67d3\u7684\u6240\u6709\u8282\u70b9\u526f\u4f5c\u7528\u90fd\u6536\u96c6\u8d77\u6765\u3002\u5728\u904d\u5386\u8fc7\u7a0b\u4e2d React \u4f1a\u5c06\u6240\u6709\u6709 \u2018\u526f\u4f5c\u7528\u2019 \u7684\u8282\u70b9\u90fd\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"nextEffect")," \u8fde\u63a5\u8d77\u6765\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\ud83c\udd95 \u66ff\u8eab")," ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"React \u5728 Reconciliation \u8fc7\u7a0b\u4e2d\u4f1a\u6784\u5efa\u4e00\u9897\u65b0\u7684 virtualDOm (\u5b98\u65b9\u79f0\u4e3a",(0,r.kt)("strong",{parentName:"li"},"workInProgress tree"),"\uff0c",(0,r.kt)("strong",{parentName:"li"},"WIP\u6811"),")\u3002\u662f\u4e00\u9897\u8868\u793a\u5f53\u524d\u5de5\u4f5c\u8fdb\u5ea6\u7684\u6811\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8fd8\u6709\u4e00\u9897\u8868\u793a\u5df2\u6e32\u67d3\u754c\u9762\u7684",(0,r.kt)("strong",{parentName:"li"},"\u65e7\u6811\uff08current tree\uff09"),"\uff0c\u8fd9\u68f5\u6811\u4ee3\u8868\u4e86\u5df2\u7ecf\u6e32\u67d3\u7684\u5e76\u6b63\u5728\u663e\u793a\u7684\u9875\u9762\u3002"),(0,r.kt)("li",{parentName:"ul"},"React\u5c31\u662f\u4e00\u8fb9\u548c\u65e7\u6811\u6bd4\u5bf9\uff0c\u4e00\u8fb9\u6784\u5efaWIP\u6811\u7684\u3002 alternate \u6307\u5411\u65e7\u6811\u7684\u540c\u7b49\u8282\u70b9\u3002")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(6407).Z,width:"915",height:"690"})),(0,r.kt)("p",null,"\u4e0a\u56fe\u662f Reconciliation \u5b8c\u6210\u540e\u7684\u72b6\u6001\uff0c\u5de6\u8fb9\u662f\u65e7\u6811\uff0c\u53f3\u8fb9\u662fWIP\u6811\u3002\u5bf9\u4e8e\u9700\u8981\u53d8\u66f4\u7684\u8282\u70b9\uff0c\u90fd\u6253\u4e0a\u4e86'\u6807\u7b7e'\u3002 \u5728\u63d0\u4ea4\u9636\u6bb5\uff0cReact \u5c31\u4f1a\u5c06\u8fd9\u4e9b\u6253\u4e0a\u6807\u7b7e\u7684\u8282\u70b9\u5e94\u7528\u53d8\u66f4\u3002"),(0,r.kt)("h2",{id:"\u5176\u4ed6"},"\u5176\u4ed6"),(0,r.kt)("h3",{id:"\u95ee\u9898jsx-element-fiber-dom-\u7684\u5173\u7cfb"},"\u95ee\u9898\uff1aJSX, element, fiber, dom \u7684\u5173\u7cfb"),(0,r.kt)("p",null,"\u9996\u5148\u5fc5\u987b\u9700\u8981\u5f04\u660e\u767d React.element \uff0cfiber \u548c\u771f\u5b9e DOM \u4e09\u8005\u662f\u4ec0\u4e48\u5173\u7cfb\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"jsx \u8bed\u6cd5\uff0c\u662f\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"li"},"React.creatElement()")," \u7684\u8bed\u6cd5\u7cd6\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"jsx \u8bed\u6cd5\u6700\u7ec8\u4f1a\u88ab babel \u8f6c\u8bd1\u4e3a\u5404\u79cd ",(0,r.kt)("inlineCode",{parentName:"li"},"React.creatElement()"),"\u3002\u6700\u7ec8\uff0c\u8fd9\u4e9b\u4ee3\u7801\u4f1a\u88ab\u6267\u884c\uff0c\u4ece\u800c\u521b\u5efa React element \u5bf9\u8c61\uff0c"))),(0,r.kt)("li",{parentName:"ul"},"React element \u662f js \u5bf9\u8c61\uff0c\u4e0a\u9762\u4fdd\u5b58\u4e86 props\uff0cchildren \u7b49\u4fe1\u606f\u3002"),(0,r.kt)("li",{parentName:"ul"},"DOM \u662f\u5143\u7d20\u5728\u6d4f\u89c8\u5668\u4e0a\u7ed9\u7528\u6237\u76f4\u89c2\u7684\u8868\u8c61\u3002"),(0,r.kt)("li",{parentName:"ul"},"fiber \u53ef\u4ee5\u8bf4\u662f\u662f element \u548c\u771f\u5b9e DOM \u4e4b\u95f4\u7684\u4ea4\u6d41\u67a2\u7ebd\u7ad9\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6bcf\u4e00\u4e2a\u7c7b\u578b element \u90fd\u4f1a\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5bf9\u5e94\u7684 fiber \u7c7b\u578b\uff0celement \u53d8\u5316\u5f15\u8d77\u66f4\u65b0\u6d41\u7a0b\u90fd\u662f\u901a\u8fc7 fiber \u5c42\u9762\u505a\u4e00\u6b21\u8c03\u548c\u6539\u53d8\uff0cfiber \u901a\u8fc7\u94fe\u8868\u5f62\u5f0f\uff0c\u6784\u5efa\u51fa\u4e00\u9897 virtualDOM \u6811\u3002\u6700\u7ec8\u4f1a\u5728\u6e32\u67d3\u9636\u6bb5\uff0c\u8f6c\u5316\u4e3a\u771f\u5b9e DOM \u5e76\u6e32\u67d3\u5728\u9875\u9762\u4e0a\u3002")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"2.jpg",src:n(1515).Z,width:"1590",height:"360"})),(0,r.kt)("p",null,"JSX \u6700\u7ec8\u4f1a\u8f6c\u53d8\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"React.createElement()")," \u5e76\u6267\u884c\uff0c\u4ece\u800c\u521b\u5efa React element\uff0c\u6700\u7ec8\u5408\u5e76\u5230 fiber \u8282\u70b9\u4e0a\u3002\u800c fiber \u8282\u70b9\u4e4b\u95f4\u901a\u8fc7\u94fe\u8868\u8fde\u63a5\uff0c\u6700\u7ec8\u6784\u9020\u4e3a\u4e00\u9897 virtualDOM \u6811\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898fiber-\u66f4\u65b0\u673a\u5236"},"\u95ee\u9898\uff1aFiber \u66f4\u65b0\u673a\u5236"),(0,r.kt)("p",null,"\u521d\u59cb\u5316\u66f4\u65b0\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa fiberRoot \u548c rootFiber")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fiberRoot"),"\uff1a\u9996\u6b21\u6784\u5efa\u5e94\u7528\uff0c \u521b\u5efa\u552f\u4e00\u7684 fiberRoot \u8282\u70b9\uff0c\u662f\u6574\u4e2a React \u5e94\u7528\u7684\u6839\u57fa\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"rootFiber"),"\uff1a \u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"ReactDOM.render()")," \u6e32\u67d3\u51fa\u6765\u7684\u3002\u4e00\u4e2a React \u5e94\u7528\u53ef\u4ee5\u6709\u591a ReactDOM.render \u521b\u5efa\u7684 rootFiber \uff0c\u4f46\u662f\u53ea\u80fd\u6709\u4e00\u4e2a fiberRoot\uff08\u5e94\u7528\u6839\u8282\u70b9\uff09\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// rootFiber\nReactDOM.render(<Index/>, document.getElementById('app'));\n")),(0,r.kt)("p",null,"\u7b2c\u4e00\u6b21\u6302\u8f7d\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5c06 fiberRoot \u548c rootFiber \u5efa\u7acb\u8d77\u5173\u8054\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fiberRoot.current = rootFiber;"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"3.jpg",src:n(7180).Z,width:"722",height:"460"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6b65\uff1aworkInProgress \u548c current")),(0,r.kt)("h3",{id:"\u95ee\u9898useeffect-\u548c-uselayouteffect-\u7684\u533a\u522b"},"\u95ee\u9898\uff1auseEffect \u548c useLayoutEffect \u7684\u533a\u522b"),(0,r.kt)("p",null,"useEffect \u662f\u5f02\u6b65\u8c03\u7528\u7684\uff0cuseLayoutEffect \u662f\u540c\u6b65\u8c03\u7528\u7684\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"useEffect \u5728 before mutation \u9636\u6bb5\u7ed9\u5b83\u5b9a\u4e49 mormal \u4f18\u5148\u7ea7\uff0c\u7136\u540e\u7ed1\u5b9a\u8c03\u7528\u65f6\u673a\uff0c\u5728 commit \u9636\u6bb5\u5b8c\u6210\u540e\u5f02\u6b65\u8c03\u7528\u3002\u5728 layout \u9636\u6bb5\uff0c\u4f1a\u7ed1\u5b9a useEffect \u7684 \u9500\u6bc1\u51fd\u6570\u3001\u56de\u8c03\u51fd\u6570\u3002\u5728 commit \u9636\u6bb5\u5b8c\u6210\u540e\uff0c\u6309\u7167\u4f18\u5148\u7ea7\uff0c\u6700\u7ec8\u4f1a\u5f02\u6b65\u6267\u884c \u9500\u6bc1\u51fd\u6570\u3001\u56de\u8c03\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ul"},"useLayoutEffect \u5728 muation \u9636\u6bb5\u4f1a\u6267\u884c\u9500\u6bc1\u51fd\u6570\uff0c\u5728layout \u9636\u6bb5\u4f1a\u6267\u884c\u56de\u8c03\u51fd\u6570\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-07 00.18.02",src:n(8769).Z,width:"2202",height:"1218"})),(0,r.kt)("h3",{id:"\u95ee\u9898react-\u751f\u547d\u5468\u671f8"},"\u95ee\u9898\uff1aReact \u751f\u547d\u5468\u671f\uff088\uff09"),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/"},"https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/")))),(0,r.kt)("p",null,"\u7c7b\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\uff0c\u4ece React \u8fd0\u884c\u9636\u6bb5 + \u7ec4\u4ef6\u5904\u7406\u7c7b\u578b\u6765\u5206\u6790\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"React \u8fd0\u884c\u6709\u4e09\u4e2a\u9636\u6bb5\uff1a\u8c03\u5ea6\u3001\u534f\u8c03\u3001\u6e32\u67d3\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7ec4\u4ef6\u7684\u5904\u7406\u6709\u4e09\u4e2a\u7c7b\u578b\uff1a\u6302\u8f7d\u3001\u66f4\u65b0\u3001\u5378\u8f7d\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 15.34.10",src:n(6180).Z,width:"2232",height:"1476"})),(0,r.kt)("p",null,"\u7ec4\u4ef6\u6302\u8f7d\u4f1a\u6267\u884c\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u534f\u8c03\u9636\u6bb5\uff1aconstructor\u3001static getDerivedStateFrpmProps\u3001render")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6e32\u67d3\u9636\u6bb5\uff1acomponentDidMount"))),(0,r.kt)("p",null,"\u7ec4\u4ef6\u66f4\u65b0\u4f1a\u6267\u884c\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u534f\u8c03\u9636\u6bb5\uff1astatic getDerivedStateFrpmProps\u3001shouldComponentUpdate\uff08forceUpdate\u4e0d\u6267\u884c\uff09\u3001render"),(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u9636\u6bb5\uff1agetSnapshotBeforeUpdate\u3001componentDidUpdate")),(0,r.kt)("p",null,"\u7ec4\u4ef6\u5378\u8f7d\u4f1a\u6267\u884c\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u9636\u6bb5\uff1acomponentWillUnmount")),(0,r.kt)("h4",{id:"\u534f\u8c03\u9636\u6bb5-render"},"\u534f\u8c03\u9636\u6bb5 render"),(0,r.kt)("p",null,"\u534f\u8c03\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u662f\u4e0d\u5305\u542b\u526f\u4f5c\u7528\u7684\u3002"),(0,r.kt)("p",null,"\u7ec4\u4ef6\u6302\u8f7d\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"constructor(props)")),"\n\u7c7b\u7ec4\u4ef6\u7684\u7ee7\u627f\u3001props \u4f20\u9012\u3001\u521d\u59cb\u5316 state\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u521d\u59cb\u5316\u9636\u6bb5\u6267\u884c\uff0c\u53ef\u76f4\u63a5\u5bf9 ",(0,r.kt)("inlineCode",{parentName:"li"},"this.state")," \u8d4b\u503c\u3002\u5176\u4ed6\u751f\u547d\u5468\u671f\u51fd\u6570\u4e2d\u53ea\u80fd\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"this.setState")," \u4fee\u6539 state\uff0c\u4e0d\u80fd\u76f4\u63a5\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"this.state")," \u8d4b\u503c\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"constructor(props) {\n  super(props);\n  this.state = {number: 0};\n  this.handlexxx = this.handlexxx.bind(this);\n}\n")),(0,r.kt)("p",null,"\u5171\u6709\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"static get\xadDerived\xadState\xadFrom\xadProps\uff08props, state)"))),(0,r.kt)("p",null,"\u505a\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"componentWillMount"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"componentWillUpdate")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"componentWillReceiveProps")," \u7684\u66ff\u4ee3\u65b9\u6848\u3002\u5728\u8c03\u7528 render \u524d\uff0c\u6700\u540e\u4e00\u6b21\u4fee\u6539 state \u7684\u673a\u4f1a\u3002\u5b83\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7528\u6765\u66f4\u65b0 state\uff1b\u8fd4\u56de null \u5219\u4e0d\u66f4\u65b0\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u505a\u4e3a\u9759\u6001\u65b9\u6cd5\uff0c\u5176\u5185\u90e8\u4f7f\u7528 this \u62ff\u4e0d\u5230\u7ec4\u4ef6\u5b9e\u4f8b\u3002")),(0,r.kt)("p",null,"\u7ec4\u4ef6\u66f4\u65b0\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"shouldComponentUpdate(nextProps, nextState)"))),(0,r.kt)("p",null,"\u53ea\u6709\u5728\u901a\u8fc7\u4fee\u6539 props \u6216 state \u65f6\u624d\u4f1a\u89e6\u53d1\u3002\u9996\u6b21\u6e32\u67d3\u548c forceUpdate \u4e0d\u4f1a\u89e6\u53d1\u3002\u8fd9\u91cc\u662f React \u7ed9\u7528\u6237\u5224\u65ad\uff0c\u7ec4\u4ef6\u662f\u5426\u5e94\u5f53\u66f4\u65b0\u7684\u65f6\u673a\u3002\u5982\u679c\u8fd4\u56de flase\uff0c\u5219\u7ec4\u4ef6\u4e0d\u4f1a\u8c03\u7528 render \u53ca\u4ee5\u540e\u7684\u65b9\u6cd5\uff0c\u4e0d\u4f1a\u66f4\u65b0\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6027\u80fd\u4f18\u5316"),"\u3002\u901a\u8fc7\u5c06  ",(0,r.kt)("inlineCode",{parentName:"li"},"this.props")," \u548c nextProps \u6bd4\u8f83\uff0c\u4ee5\u53ca\u5c06 ",(0,r.kt)("inlineCode",{parentName:"li"},"this.state")," \u4e0e nextState \u6bd4\u8f83\uff0c\u5e76\u8fd4\u56de false\uff0c\u8ba9\u7ec4\u4ef6\u8df3\u8fc7\u66f4\u65b0\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5173\u8054\u77e5\u8bc6"),"\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"Diff"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"PureComponent"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"React.memo()"),"\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"render"))),(0,r.kt)("p",null,"render \u51fd\u6570\u5fc5\u987b\u5b9e\u73b0\uff0c\u5b83\u7684\u8fd4\u56de\u503c\u5c06\u6784\u5efa\u4e3a fiber node\uff0c\u53c2\u4e0e\u5230 WorkInProgress Fiber Tree \u7684\u6784\u5efa\u3002"),(0,r.kt)("p",null,"render \u51fd\u6570\u662f\u7eaf\u51fd\u6570\uff0c\u76f8\u540c\u7684 state \u548c props\uff0c\u5b83\u603b\u662f\u8fd4\u56de\u76f8\u540c\u7684\u6e32\u67d3\u7ed3\u679c\u3002"),(0,r.kt)("p",null,"render \u4f1a\u8fd4\u56de\uff1aReact Element\u3001Fragments\u3001string / number\uff08\u4f1a\u5f53\u4f5c\u6587\u672c\u8282\u70b9\uff09\u3001false / null\uff08\u7a7a\uff09\u3002"),(0,r.kt)("h4",{id:"\u6e32\u67d3\u9636\u6bb5-commit"},"\u6e32\u67d3\u9636\u6bb5 commit"),(0,r.kt)("p",null,"\u6e32\u67d3\u9636\u6bb5\u53c8\u6709\u4e09\u4e2a\u9636\u6bb5\uff1abefore mutation\u3001mutation\u3001layout\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"(1) \u5728 before mutation \u65f6")),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"getSnapshotBeforeUpdate(prevProps, prevState)")," \u7ec4\u4ef6\u66f4\u65b0")," "),(0,r.kt)("p",null,"\u5728\u9875\u9762\u5373\u5c06\u6e32\u67d3\u3001DOM \u6811\u5c1a\u672a\u6539\u53d8\u65f6\u89e6\u53d1\u3002\u53ef\u4ee5\u5728\u8fd9\u91cc\u83b7\u53d6 DOM \u6539\u53d8\u524d\u7684\u4fe1\u606f\u3002"),(0,r.kt)("p",null,"\u5b83\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\uff1a\u4e0a\u4e00\u4e2a\u72b6\u6001\u7684 props \u548c\u4e0a\u4e00\u4e2a\u72b6\u6001\u7684 state\u3002\u5b83\u7684\u8fd4\u56de\u503c\u5c06\u4f1a\u4f20\u9012\u7ed9 componentDidUpdate \u751f\u547d\u5468\u671f\u94a9\u5b50\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f\uff1a"),"\u83b7\u53d6\u66f4\u65b0\u524d DOM \u7684\u4fe1\u606f\u65f6\u3002\u4f8b\u5982\uff1a\u9700\u8981\u4ee5\u7279\u6b8a\u65b9\u5f0f\u5904\u7406\u6eda\u52a8\u4f4d\u7f6e\u7684\u804a\u5929\u7ebf\u7a0b\u7b49\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"(2) \u5728 mutaiton \u65f6")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"componentWillUnmount")," \u7ec4\u4ef6\u5378\u8f7d")),(0,r.kt)("p",null,"\u4f1a\u5728\u7ec4\u4ef6\u5378\u8f7d\u4ee5\u53ca\u9500\u6bc1\u4e4b\u524d\u8c03\u7528\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f"),"\uff1a\u6267\u884c\u7ec4\u4ef6\u7684\u6e05\u7406\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a\u6e05\u9664 timer\u3001\u53d6\u6d88\u7f51\u7edc\u8bf7\u6c42\u3001\u6e05\u9664\u8ba2\u9605\u7b49\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"(3) \u5728 layout \u65f6")),(0,r.kt)("p",null,"layout \u9636\u6bb5\uff0c\u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u7684\u8c03\u7528\u65f6\u673a\u662f\u76f8\u540c\u7684\uff0c\u4e00\u4e2a\u662f\u9488\u5bf9\u7ec4\u4ef6\u9996\u6b21\u6302\u8f7d\uff0c\u4e00\u4e2a\u662f\u9488\u5bf9\u7ec4\u4ef6\u66f4\u65b0\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"componentDidMount")," \u7ec4\u4ef6\u6302\u8f7d")),(0,r.kt)("p",null,"\u8be5\u751f\u547d\u5468\u671f\u65b9\u6cd5\u4f1a\u5728\u7ec4\u4ef6\u6302\u8f7d\u4e4b\u540e\u6267\u884c\uff0c\u4e5f\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u4e5f\u5c31\u662f\u5c06\u7ec4\u4ef6\u5bf9\u5e94\u7684 DOM \u63d2\u5165 DOM \u6811\u4e2d\u4e4b\u540e\u8c03\u7528\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6ce8\u610f\u907f\u514d"),"\uff1a\u5b83\u4f1a\u5728\u6d4f\u89c8\u5668\u66f4\u65b0\u89c6\u56fe\u4e4b\u524d\u8c03\u7528\uff0c\u5982\u679c\u5728 componentDidMount \u4e2d",(0,r.kt)("strong",{parentName:"li"},"\u76f4\u63a5\u8c03\u7528")," ",(0,r.kt)("inlineCode",{parentName:"li"},"this.setState"),"\uff0c\u5b83\u4f1a\u89e6\u53d1\u989d\u5916\u7684\u6e32\u67d3\uff0c\u4f1a\u518d\u4e00\u6b21\u8c03\u7528 render \u51fd\u6570\uff0c\u4f46\u662f\u6d4f\u89c8\u5668\u4e2d\u89c6\u56fe\u7684\u66f4\u65b0\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4f7f\u7528\u573a\u666f"),"\uff1a\u4f9d\u8d56\u4e8e DOM \u7684\u521d\u59cb\u5316\u64cd\u4f5c\u3002\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\u3001\u76d1\u542c\u4e8b\u4ef6\u3001\u83b7\u53d6\u5230\u771f\u5b9e DOM\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"componentDidMount(){\n  fetch('https://api.github.com/users').then(res=>res.json()).then(users=>{\n    console.log(users);\n    this.setState({users});\n  });\n}\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"componentDidUpdate(prevProps, PrevState, snapshot) ")," \u7ec4\u4ef6\u66f4\u65b0")),(0,r.kt)("p",null,"\u8be5\u751f\u547d\u5468\u671f\u65b9\u6cd5\u4f1a\u5728\u7ec4\u4ef6\u66f4\u65b0\u4e4b\u540e\u6267\u884c\uff0c\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\u3002"),(0,r.kt)("p",null,"\u8be5\u51fd\u6570\u6709\u4e09\u4e2a\u53c2\u6570\uff1a\u524d\u4e00\u4e2a\u72b6\u6001\u7684 props\uff0c\u524d\u4e00\u4e2a\u72b6\u6001\u7684 state\u3001getSnapshotBeforeUpdate \u7684\u8fd4\u56de\u503c\u3002"),(0,r.kt)("p",null,"\u53ef\u4ee5\uff08\u4e0d\u5efa\u8bae\uff09\u5728\u751f\u547d\u5468\u671f\u4e2d\u76f4\u63a5\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"this.setState"),"\u3002\u4f46\u5fc5\u987b\u5305\u88f9\u5728\u4e00\u4e2a\u6761\u4ef6\u8bed\u53e5\u4e2d\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6b7b\u5faa\u73af\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f\uff1a"),"\u5bf9 DOM \u8fdb\u884c\u64cd\u4f5c\uff0c\u6216\u8005\u8fdb\u884c\u7f51\u7edc\u8bf7\u6c42\u3002"),(0,r.kt)("h4",{id:"\u95ee\u9898react-17-\u4e3a\u4ec0\u4e48\u4f1a\u5e9f\u5f03-3-\u4e2a\u751f\u547d\u5468\u671f"},"\u95ee\u9898\uff1aReact 17 \u4e3a\u4ec0\u4e48\u4f1a\u5e9f\u5f03 3 \u4e2a\u751f\u547d\u5468\u671f"),(0,r.kt)("p",null,"componentWillMount\u3001componentWillReceiveProps\u3001componentWillUpdate \u8fd9\u4e09\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u5728 React 17 \u7248\u672c\u88ab\u5e9f\u5f03\u3002\u800c React \u6dfb\u52a0\u9759\u6001\u65b9\u6cd5 static getDerivedStateFromProps \u6765\u4ee3\u66ff\u3002"),(0,r.kt)("p",null,"React 16 \u66f4\u65b0\u4e86 fiber \u67b6\u6784\uff0c\u63d0\u51fa\u4e86\u8c03\u5ea6\u3001\u534f\u8c03\u3001\u6e32\u67d3\u4e09\u5927\u9636\u6bb5\u3002\u5176\u4e2d\u534f\u8c03\u9636\u6bb5\u662f\u5f02\u6b65\u53ef\u4e2d\u65ad\u7684\uff0c\u5982\u679c\u8c03\u5ea6\u9636\u6bb5\u5b89\u6392\u4e86\u4f18\u5148\u7ea7\u66f4\u9ad8\u7684\u4efb\u52a1\uff0c\u5f53\u524d\u534f\u8c03\u7684\u4efb\u52a1\u53ef\u88ab\u4e2d\u65ad\u3002"),(0,r.kt)("p",null,"\u8fd9\u5bfc\u81f4\u534f\u8c03\uff08render\uff09\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u53ef\u80fd\u4f1a\u88ab\u591a\u6b21\u6267\u884c\uff0c\u6240\u4ee5\u8fd9\u4e9b\u51fd\u6570\u9700\u8981\u5b9e\u73b0\u65e0\u526f\u4f5c\u7528\u7684\u7eaf\u51fd\u6570\u3002\u5982\u679c\u4f7f\u7528\u65e7\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u5728\u8fd9\u91cc\u5b9a\u4e49\u4e86\u7f51\u7edc\u8bf7\u6c42\uff0c\u90a3\u4e48\u6709\u53ef\u80fd\u4f1a\u6267\u884c\u591a\u6b21\u7f51\u7edc\u8bf7\u6c42\u3002\u800c\u901a\u8fc7\u65b0\u7684\u9759\u6001\u65b9\u6cd5 getDerivedStateFromProps\uff0c\u5f00\u53d1\u8005\u65e0\u6cd5\u4ece this \u6b63\u5e38\u83b7\u53d6\u7ec4\u4ef6\u5b9e\u4f8b\uff0c\u90a3\u4e48\u5c31\u4e0d\u80fd\u4fee\u6539 state \u548c\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\u4e86\u3002\u907f\u514d\u751f\u547d\u5468\u671f\u7684\u4e0d\u5b89\u5168\u4f7f\u7528\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u6267\u884c\u987a\u5e8f"},"\u95ee\u9898\uff1a\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u6267\u884c\u987a\u5e8f"),(0,r.kt)("p",null,"\u7236\u5b50\u7ec4\u4ef6\u95f4\uff0c\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u89e6\u53d1\u987a\u5e8f\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(9549).Z,width:"316",height:"251"})),(0,r.kt)("p",null,"\u603b\u7ed3\uff1a"),(0,r.kt)("p",null,"\u5728 render \u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u81ea\u4e0a\u800c\u4e0b\u8c03\u7528\uff0c\u5373\u7236\u7ec4\u4ef6\u5148\u8c03\u7528\uff0c\u5b50\u7ec4\u4ef6\u540e\u8c03\u7528\u3002"),(0,r.kt)("p",null,"\u7136\u540e\u662f commit \u9636\u6bb5\u4e2d\uff0c\u5212\u5206\u6bcf\u4e00\u4e2a\u5b50\u9636\u6bb5\u3002\u6bcf\u4e2a\u5728\u9636\u6bb5\u90fd\u662f\u5b50\u7ec4\u4ef6\u5148\u8c03\u7528\uff0c\u540e\u7236\u7ec4\u4ef6\u8c03\u7528\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"before mutation\uff1agetSnapshotBeforeUpdate\uff08\u66f4\u65b0\uff09"),(0,r.kt)("li",{parentName:"ul"},"mutation\uff1acomponentWillUnmoun (\u5378\u8f7d)"),(0,r.kt)("li",{parentName:"ul"},"layout\uff1acomponentDidMount\uff08\u6302\u8f7d\uff09\u6216 componentDidUpdate\uff08\u66f4\u65b0\uff09")),(0,r.kt)("p",null,"\u6700\u540e\u7684\u751f\u547d\u5468\u671f\u51fd\u6570"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {count: 0,}\n    console.log('App constructor');\n  }\n\n  static getDerivedStateFromProps() {\n    console.log('App static getDerivedStateFromProps');\n    return null;\n  }\n\n  shouldComponentUpdate(nextProps) {\n    console.log('App shouldComponentUpdate');\n    return true;\n  }\n\n  getSnapshotBeforeUpdate(prevProps) {\n    console.log('App getSnapshotBeforeUpdate');\n    return null;\n  }\n  \n  componentDidMount() {\n    console.log('App componentDidMount');\n  }\n\n  componentDidUpdate() {\n    console.log('App componentDidUpdate');\n  }\n\n  render() {\n    console.log('App render');\n    return (\n      <div>\n        <div onClick={() => this.setState((count) => ({ count: count + 1 }))}>App</div>\n        <Child order={1} />\n        <Child order={2} />\n      </div>\n    )\n  }\n}\n\nclass Child extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {count: 0}\n    console.log(`Child${this.props.order} constructor`);\n  }\n\n  static getDerivedStateFromProps(props) {\n    console.log(`Child${props.order} static getDerivedStateFromProps`);\n    return null;\n  }\n\n  shouldComponentUpdate(nextProps) {\n    console.log(`Child${nextProps.order} shouldComponentUpdate`);\n    return true;\n  }\n\n  getSnapshotBeforeUpdate(prevProps) {\n    console.log(`Child${prevProps.order} getSnapshotBeforeUpdate`);\n    return null;\n  }\n  \n  componentDidMount() {\n    console.log(`Child${this.props.order} componentDidMount`);\n  }\n  \n  componentDidUpdate() {\n    console.log(`Child${this.props.order} componentDidUpdate`);\n  }\n\n  render() {\n    console.log(`Child${this.props.order} render`);\n    return (\n      <div onClick={() => this.setState((count) => ({ count: count + 1 }))}>\n        Child{this.props.order}\n      </div>\n    )\n  }\n}\n\nexport default App;\n")),(0,r.kt)("p",null,"\u9996\u6b21\u6e32\u67d3\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 16.24.03",src:n(8444).Z,width:"2556",height:"1132"})),(0,r.kt)("p",null,"\u5b50\u7ec4\u4ef6\u72b6\u6001\u6539\u53d8\uff1a\u5f53\u70b9\u51fb\u6587\u5b57 Child1 \u65f6\uff0c\u5176\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 16.30.47",src:n(8381).Z,width:"1502",height:"312"})),(0,r.kt)("p",null,"\u7236\u7ec4\u4ef6\u72b6\u6001\u6539\u53d8\uff1a\u70b9\u51fb\u7236\u7ec4\u4ef6\u6587\u5b57\uff0c\u8ba9 ",(0,r.kt)("inlineCode",{parentName:"p"},"this.seteState")," \u89e6\u53d1"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 16.34.02",src:n(5918).Z,width:"1500",height:"720"})),(0,r.kt)("h3",{id:"\u95ee\u9898react-hooks"},"\u95ee\u9898\uff1aReact hooks"),(0,r.kt)("p",null,"React 16+ \u5f00\u59cb\uff0c\u901a\u8fc7 fiber \u7ed3\u6784\u5b9e\u73b0\u4e86\u534f\u8c03\u9636\u6bb5\u7684\u5f02\u6b65\u53ef\u4e2d\u65ad\u3002\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u4f1a\u88ab\u8f6c\u5316\u4e3a fiber node\uff0c\u53c2\u4e0e WorkInProgress fiber tree \u7684\u6784\u5efa\u3002"),(0,r.kt)("h4",{id:"hooks-\u7684\u7279\u70b9"},"Hooks \u7684\u7279\u70b9"),(0,r.kt)("p",null,"\u5728\u8c03\u548c\u9636\u6bb5\uff0chooks \u4f1a\u88ab\u521d\u59cb\u5316\u5e76\u7ed1\u5b9a\u5728\u51fd\u6570\u7ec4\u4ef6 fiber.memoizedState \u4e0a\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u7c7b\u7ec4\u4ef6 fiber \uff0c\u7528 memoizedState \u4fdd\u5b58 state \u4fe1\u606f\uff1b",(0,r.kt)("strong",{parentName:"li"},"\u5bf9\u4e8e\u51fd\u6570\u7ec4\u4ef6 fiber \uff0c\u7528 memoizedState \u4fdd\u5b58 hooks \u4fe1\u606f"),"\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u94fe\u8868"),"\u3002\u5728 memoizedState \u5c5e\u6027\u4e2d\uff0chooks \u901a\u8fc7 .next \u5c5e\u6027\u628a\u7ed1\u5b9a\u5728\u5f53\u524d\u51fd\u6570\u7ec4\u4ef6\u7684 hooks \u8fde\u63a5\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u94fe\u8868\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u521b\u5efa"),"\u3002\u51fd\u6570\u7ec4\u4ef6\u7684 hooks \u5728\u6302\u8f7d\u4f1a\u8c03\u7528 Mount \u51fd\u6570\uff0c\u5728\u66f4\u65b0\u65f6\u4f1a\u8c03\u7528 update\u51fd\u6570\u3002\u6bd4\u5982\u7b2c\u4e00\u6b21\u8c03\u7528 useState \u4f1a\u6267\u884c mountState\uff0c\u540e\u9762\u518d\u8c03\u7528 useState \u4f1a\u6267\u884c updateState\u3002\u800c\u8fd9\u4e2a\u51fd\u6570\u7684\u6267\u884c\uff0c\u4f1a\u6839\u636e\u4e0d\u540c\u7684 hooks \u4f1a\u751f\u6210\u5bf9\u5e94\u7684 hooks \u5bf9\u8c61\uff0c\u7ed1\u5b9a\u5728 next \u94fe\u4e0a\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"updateQueue \u5b58\u653e\u6bcf\u4e2a useEffect/useLayoutEffect \u4ea7\u751f\u7684\u526f\u4f5c\u7528\u7ec4\u6210\u7684\u94fe\u8868\u3002\u5728 commit \u9636\u6bb5\u66f4\u65b0\u8fd9\u4e9b\u526f\u4f5c\u7528\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6709\u5e8f"),"\u3002\u6240\u4ee5\uff0cReact \u7528\u94fe\u8868\u6765\u4e25\u683c\u4fdd\u8bc1 hooks \u7684\u987a\u5e8f\u3002\u5982\u679c\u6211\u4eec\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u5bf9 hooks \u7684\u6dfb\u52a0\u4f7f\u7528 if \u5224\u65ad\u8bed\u53e5\u3002\u8fd9\u4f1a\u5bfc\u81f4\u4e00\u6b21\u66f4\u65b0\u7684\u524d\u540e hooks \u94fe\u4e0d\u4e00\u81f4\uff0c\u5177\u4f53\u6765\u8bf4\uff0ccurrent tree \u548c  WorkInProgress \u4e2d\uff0c\u5bf9\u540c\u4e00\u4e2a\u51fd\u6570\u7ec4\u4ef6\u7684 hooks \u94fe\u4fdd\u5b58\u7684\u5185\u5bb9\u4e0d\u4e00\u81f4\u3002\u5982\u679c\u6b64\u65f6 WorkIn Progress \u8981\u4ece current \u4e2d\u8bfb\u53d6 ",(0,r.kt)("inlineCode",{parentName:"p"},"state"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"ref")," \u7b49\u4fe1\u606f\uff0c\u539f\u672c\u6309\u7167 next \u94fe\u6761\u53bb\u5bf9\u7b49\u8bfb\u53d6\uff08\u7c7b\u4f3c\u6570\u7ec4\u4e0b\u6807\u8bfb\u53d6\uff09\uff0c\u4f46\u56e0\u4e3a\u524d\u540e\u4e24\u6b21 hooks \u94fe\u5df2\u7ecf\u53d1\u751f\u6539\u53d8\uff0c\u5bf9\u7b49\u4f4d\u7684 hooks \u5bf9\u8c61\u4e0d\u4e00\u81f4\uff0c\u6240\u4ee5\u53d1\u751f\u9519\u8bef\uff0cReact \u9632\u6b62\u9519\u8bef\u53d1\u751f\uff0c\u4f1a\u629b\u51fa\u9519\u8bef\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48 Hooks \u4e0d\u53ef\u4ee5\u5728\u6761\u4ef6\u8bed\u53e5\u5b9a\u4e49\u4e86\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 17.20.09",src:n(5088).Z,width:"2352",height:"1770"})),(0,r.kt)("h4",{id:"hooks-\u4ecb\u7ecd-9"},"Hooks \u4ecb\u7ecd (9)"),(0,r.kt)("p",null,"\u6570\u636e\u66f4\u65b0\u9a71\u52a8\uff1auseState\u3001useReducer"),(0,r.kt)("p",null,"\u6267\u884c\u526f\u4f5c\u7528\uff1auseEffect\u3001useLayoutEffect"),(0,r.kt)("p",null,"\u72b6\u6001\u83b7\u53d6/\u4f20\u9012\uff1auseContext\u3001useRef\u3001useImperativeHandle"),(0,r.kt)("p",null,"\u72b6\u6001\u6d3e\u751f/\u4fdd\u5b58\uff1auseMemo\u3001useCallback"),(0,r.kt)("h4",{id:"usestate"},"useState"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const [ state , setState ] = useState(initData);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"state\uff1a\u76ee\u7684\u63d0\u4f9b\u7ed9 UI \uff0c\u4f5c\u4e3a\u6e32\u67d3\u89c6\u56fe\u7684\u6570\u636e\u6e90\u3002"),(0,r.kt)("li",{parentName:"ul"},"setState\uff1a\u6539\u53d8 state \u7684\u51fd\u6570\uff0c\u63a8\u52a8\u51fd\u6570\u7ec4\u4ef6\u6e32\u67d3\u7684\u89e6\u53d1\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ul"},"initData\uff1a\u83b7\u5f97 state \u7684\u521d\u59cb\u503c\u3002\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u5982\u679c\u662f\u5177\u4f53\u503c\uff0c\u76f4\u63a5\u4f5c\u4e3a\u521d\u59cb\u503c\u3002 \u5982\u679c\u662f\u51fd\u6570\uff0c\u6267\u884c\u51fd\u6570\u7684\u8fd4\u56de\u503c\u505a\u4e3a\u521d\u59cb\u5316\u503c\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6ce8\u610f\u4e8b\u9879"),"\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u201c\u6240\u8c13\u5f02\u6b65\u201d"),"\uff0c\u5728\u51fd\u6570\u7ec4\u4ef6\u4e00\u6b21\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\uff0cstate \u7684\u503c\u662f\u56fa\u5b9a\u4e0d\u53d8\u7684\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4e14\u5f53\u524d\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\u83b7\u53d6\u4e0d\u5230 setState \u6539\u53d8\u7684\u503c\uff0c\u53ea\u6709\u5728\u4e0b\u4e00\u6b21 render \u540e\u624d\u80fd\u83b7\u53d6\u5230\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6d45\u5bf9\u6bd4"),"\uff0c\u5982\u679c setState \u4f20\u5165\u4e86\u76f8\u540c\u7684\u503c\uff0c\u7ec4\u4ef6\u5c31\u4e0d\u4f1a\u89e6\u53d1 render \u66f4\u65b0\u3002")),(0,r.kt)("h4",{id:"usereducer"},"useReducer"),(0,r.kt)("p",null,"useReducer \u662f react-hooks \u63d0\u4f9b\u7684\u80fd\u591f\u5728\u65e0\u72b6\u6001\u7ec4\u4ef6\u4e2d\u8fd0\u884c\u7684\uff0c\u7c7b\u4f3c redux \u7684\u529f\u80fd api\u3002"),(0,r.kt)("p",null,"useReducer \u662f useState hooks \u7684\u6269\u5c55\u3002\u5728\u903b\u8f91\u76f8\u5bf9\u590d\u6742\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u7528 reducer \u7684 switch \u8fdb\u884c\u5224\u65ad\uff0c\u901a\u8fc7 dispatch \u8fbe\u5230\u5bf9\u540c\u4e00\u4e2a state \u6709\u4e0d\u540c\u7684\u66f4\u65b0\u65b9\u6cd5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const [ state , dispatch ] = useReducer((state, action) => {\n  switch(action.type) {\n      //\u589e\u52a0\u3001\u51cf\u5c11\u3001\u6e05\u7a7a\u3001\u8d4b\u503c..\n      return newState;\n  }\n});\n\n// \u4f7f\u7528\uff1a\ndispatch({ type: "increment" });\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"state\uff1a\u76ee\u7684\u63d0\u4f9b\u7ed9 UI \uff0c\u4f5c\u4e3a\u6e32\u67d3\u89c6\u56fe\u7684\u6570\u636e\u6e90\u3002"),(0,r.kt)("li",{parentName:"ul"},"dispatch\uff1a\u6539\u53d8 state \u7684\u51fd\u6570\uff0c\u63a8\u52a8\u51fd\u6570\u7ec4\u4ef6\u6e32\u67d3\u7684\u89e6\u53d1\u51fd\u6570\u3002\u548c useState \u7684 setState \u4e00\u6837\u3002"),(0,r.kt)("li",{parentName:"ul"},"reducer\uff1a\u76f8\u5f53\u4e8e redux \u7684 reducer\u3002\u662f\u4e00\u4e2a\u5165\u53c2\u6709 \u65e7state + action\u3001\u5185\u90e8\u6709 switch \u7684\u7eaf\u51fd\u6570\u3002\u51fd\u6570\u5185\u90e8\u5b9e\u73b0\u4e86\u6839\u636e\u4e0d\u540c\u7684 type\uff0c\u5bf9 state \u8fdb\u884c\u64cd\u4f5c\u5e76\u8fd4\u56de\uff0c\u4ece\u800c\u66f4\u65b0 state\u3002")),(0,r.kt)("p",null,"\u4f7f\u7528\u65b9\u5f0f\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u5c01\u88c5"),"\u3002\u5f53\u5bf9 state \u66f4\u65b0\u7684\u903b\u8f91\u76f8\u5bf9\u590d\u6742\uff0c\u53ef\u4ee5\u901a\u8fc7 useReducer \u5305\u88c5\u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u590d\u7528"),"\u3002\u5982\u679c\u591a\u4e2a\u7ec4\u4ef6\u5747\u6709\u4e00\u4e2a\u76f8\u540c\u7684\u5224\u65ad\u65b9\u5f0f\uff08\u53ef\u4ee5\u7528\u540c\u4e00\u4e2a switch \u5224\u65ad\uff09\uff0c\u90a3\u4e48\u5355\u72ec\u5b9a\u4e49\u4e00\u4e2a reducer \u7eaf\u51fd\u6570\uff0c\u7136\u540e\u4e0d\u540c\u7684\u7ec4\u4ef6 import \u5f15\u5165\u8fd9\u4e2a reducer \u5373\u53ef\u3002")),(0,r.kt)("h4",{id:"useeffect"},"useEffect"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"useEffect(()=>{\n  // code..\n  return destory;\n},[dep1, dep2])\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a callback\uff0c\u4e3b\u4f53\u4e3a useEffect \u7684\u56de\u8c03\u51fd\u6570\uff0c\u5f53\u4f9d\u8d56\u53d1\u751f\u53d8\u5316\u65f6\u6267\u884c\u3002"),(0,r.kt)("li",{parentName:"ul"},"return destory \u9500\u6bc1\u51fd\u6570\uff0c\u4f5c\u4e3a\u4e0b\u4e00\u6b21 callback \u6267\u884c\u4e4b\u524d\u8c03\u7528\uff0c\u7528\u4e8e\u6e05\u9664\u4e0a\u4e00\u6b21 callback \u4ea7\u751f\u7684\u526f\u4f5c\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u4f9d\u8d56\uff0c\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5f53\u4f9d\u8d56\u9879\u6539\u53d8\uff0c\u5c31\u4f1a\u6267\u884c\u4e0a\u4e00\u6b21\u7684\u9500\u6bc1\u51fd\u6570\uff0c\u65b0\u7684\u56de\u8c03\u51fd\u6570\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e0d\u6dfb\u52a0\u4efb\u4f55\u4f9d\u8d56\uff0c\u7ec4\u4ef6 render \u5c31\u4f1a\u89e6\u53d1\uff0c\u6302\u8f7d / \u66f4\u65b0\u90fd\u4f1a\u89e6\u53d1\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u6dfb\u52a0\u7a7a\u6570\u7ec4 ",(0,r.kt)("inlineCode",{parentName:"li"},"[]"),"\uff0c\u7ec4\u4ef6\u53ea\u6709\u5728\u6302\u8f7d\u65f6\u89e6\u53d1\u3002")))),(0,r.kt)("p",null,"useEffect \u662f ",(0,r.kt)("strong",{parentName:"p"},"\u5f02\u6b65\u8c03\u7528")," \u7684\u3002\u5173\u8054\u77e5\u8bc6\uff1a\u6e32\u67d3\uff08commit\u9636\u6bb5\u5de5\u4f5c\u6d41\u7a0b\uff09\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"before mutation\uff1a\u521b\u5efa\u5fae\u4efb\u52a1\uff0c\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"li"},"useEffect")," \u7684\u56de\u8c03\u51fd\u6570\u8bbe\u5b9a normal Scheduler Priority\uff0c\u52a0\u5165\u4efb\u52a1\u961f\u5217\u3002"),(0,r.kt)("li",{parentName:"ul"},"layout\uff1a\u7ed1\u5b9a useEffect \u7684\u9500\u6bc1 + \u56de\u8c03\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ul"},"commit \u5b8c\u6210\uff0c\u7b49\u5f85\u4e3b\u7ebf\u7a0b\u4efb\u52a1\u5b8c\u6210\uff08DOM \u66f4\u65b0\uff0c\u89c6\u56fe\u7ed8\u5236\u5b8c\u6bd5\uff09\u3002\u5f02\u6b65\u6267\u884c useEffect \u7684\uff08\u4e0a\u4e00\u6b21\uff09\u9500\u6bc1\u51fd\u6570 + \uff08\u672c\u6b21\uff09\u56de\u8c03\u51fd\u6570\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"useEffect \u56de\u8c03\u51fd\u6570\u4e0d\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u7ed8\u5236\u89c6\u56fe\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u65b9\u5f0f"),"\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u56de\u8c03\u51fd\u6570\uff1a\u521d\u59cb\u5316 state\u3001\u5f02\u6b65\u6570\u636e\u8bf7\u6c42\u3001\u6ce8\u518c\u4e8b\u4ef6\u76d1\u542c\u3001\u8bbe\u7f6e\u5b9a\u65f6\u5668\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u9500\u6bc1\u51fd\u6570\uff1a\u6ce8\u9500\u4e8b\u4ef6\u76d1\u542c\u3001\u6e05\u695a\u5b9a\u65f6\u5668\u3002")),(0,r.kt)("h4",{id:"uselayouteffect"},"useLayoutEffect"),(0,r.kt)("p",null,"\u53c2\u6570\u903b\u8f91\u548c useEffect \u76f8\u540c\uff0c\u53ea\u662f\u89e6\u53d1\u65f6\u673a\u4e0d\u540c\uff0cuseLayoutEffect \u540c\u6b65\u8c03\u7528\u3002\u5728\u6e32\u67d3\u9636\u6bb5\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"mutation \u9636\u6bb5\uff1a\u6267\u884c useLayoutEffecta \u7684\u9500\u6bc1\u51fd\u6570\uff1b"),(0,r.kt)("li",{parentName:"ul"},"layout \u9636\u6bb5\uff1a\u6267\u884c useLayoutEffect \u7684\u56de\u8c03\u51fd\u6570\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u65b9\u5f0f\uff1a")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u56de\u8c03\u51fd\u6570\uff1a\u5728\u6700\u540e\u7ed8\u5236 dom \u524d\uff0c\u9700\u8981\u5bf9 dom \u8fdb\u884c\u8c03\u6574\uff0c\u6ce8\u610f\u4e0d\u8981\u6b7b\u5faa\u73af\u3002")),(0,r.kt)("p",null,"useEffect \u548c useLayoutEffect \u7684\u533a\u522b\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u524d\u8005\u5f02\u6b65\u8c03\u7528\uff0c\u540e\u8005\u540c\u6b65\u8c03\u7528\uff08\u53c2\u8003\u5728 commit \u9636\u6bb5\u7684\u5904\u7406\u6d41\u7a0b\uff09\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u524d\u8005\u4e0d\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u7ed8\u5236\uff0c\u540e\u8005\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u7ed8\u5236\u3002")),(0,r.kt)("p",null,"\u6240\u4ee5\uff0c\u5982\u679c\u8981\u5bf9 DOM \u8fdb\u884c\u4fee\u6539\uff0c\u5219\u4e0d\u53ef\u4ee5\u5728 useEffect \u4e2d\u8bbe\u7f6e\uff0c useEffect \u6267\u884c\u662f\u5728\u6d4f\u89c8\u5668\u7ed8\u5236\u89c6\u56fe\u4e4b\u540e\uff0c\u63a5\u4e0b\u6765\u53c8\u6539 DOM \uff0c\u4f1a\u5bfc\u81f4\u6d4f\u89c8\u5668\u518d\u6b21\u56de\u6d41\u548c\u91cd\u7ed8\u3002\u800c useLayoutEffect \u5728 commit \u9636\u6bb5\u540c\u6b65\u6267\u884c\uff0c\u963b\u585e\u6d4f\u89c8\u5668\u7684\u7ed8\u5236\uff0c\u91cd\u65b0\u8fdb\u5165\u534f\u8c03\u9636\u6bb5\uff0c\u5219\u9875\u9762\u4e0d\u4f1a\u53d1\u751f\u753b\u9762\u95ea\u73b0\uff0c\u6296\u52a8\u7684\u95ee\u9898\u3002"),(0,r.kt)("h4",{id:"usecontext"},"useContext"),(0,r.kt)("p",null,"useContext \u53ef\u4ee5\u4ee3\u66ff ",(0,r.kt)("inlineCode",{parentName:"p"},"context.Consumer")," \u6765\u83b7\u53d6 Provider \u4e2d\u4fdd\u5b58\u7684 value \u503c\uff0c\u800c\u4e0d\u9700\u8981\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"comsumer"),"\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"Context")," \u53ef\u4ee5\u907f\u514d\u7684\u7ec4\u4ef6\u7684\u5c42\u5c42 ",(0,r.kt)("inlineCode",{parentName:"li"},"props")," \u5d4c\u5957\u7684\u95ee\u9898\u3002\u4f46\u662f\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"context.Consumer")," \u62ff\u503c\u65f6\uff0c\u4f1a\u5305\u88f9\u4e00\u5c42 ",(0,r.kt)("inlineCode",{parentName:"li"},"<Comsumer>")," \u7ec4\u4ef6\u3002")),(0,r.kt)("p",null,"\u4f7f\u7528 useContext hook \u53ef\u4ee5\u4e0d\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"<Consumer>")," \u5d4c\u5957\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u65b9\u5f0f"),"\uff1a\u83b7\u53d6\u5168\u5c40\u7684class \u524d\u7f00\uff0c\u6216\u8005\u56fd\u9645\u5316\uff0cUI \u4e3b\u9898\u989c\u8272\u7b49\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"/* \u7528useContext\u65b9\u5f0f */\nconst DemoContext1 = ()=> {\n  const value = useContext(Context);\n  return <div> my name is { value.name }</div>\n}\n\n/* \u7528Context.Consumer \u65b9\u5f0f */\nconst DemoContext2 = ()=>{\n  return <Context.Consumer>\n    { (value)=> <div> my name is { value.name }</div> }\n  </Context.Consumer>\n}\n\nexport default ()=>{\n  return <div>\n    <Context.Provider value={{ name:'alien' , age:18 }} >\n      <DemoContext1 />\n      <DemoContext2 />\n    </Context.Provider>\n  </div>\n}\n")),(0,r.kt)("h4",{id:"useref"},"useRef"),(0,r.kt)("p",null,"useRef \u7528\u6765\u4fdd\u6301\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u63a5\u53d7\u4e00\u4e2a\u72b6\u6001 initState \u4f5c\u4e3a\u521d\u59cb\u503c\uff0c\u8fd4\u56de\u4e00\u4e2a ref \u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},".current")," \u5c5e\u6027\u5c31\u662f ref \u5bf9\u8c61\u4fdd\u6301\u5f15\u7528\u7684\u5bf9\u8c61\uff08initState\uff09\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},".current")," \u6765\u6539\u53d8\u5f15\u7528\u72b6\u6001\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const cur = React.useRef(initState);\ncur.current  // ref element\n")),(0,r.kt)("p",null,"\u7279\u70b9\uff1a\u4e0d\u8bba\u8be5\u7ec4\u4ef6\u5982\u4f55\u66f4\u65b0\uff0c\u8be5\u5f15\u7528\u90fd\u4e0d\u4f1a\u88ab\u9500\u6bc1\uff0c\u800c\u4e00\u76f4\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\u4e0d\u53d8\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u65b9\u5f0f"),"\uff1a\u901a\u5e38\u7528\u6765\u4fdd\u6301\u5bf9 DOM \u5143\u7d20\u7684\u5f15\u7528\uff0c\u6216\u5bf9\u4e00\u4e2a\u56fa\u5b9a\u72b6\u6001\u7684\u5f15\u7528\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const DemoUseRef = () =>{\n  const dom = useRef(null);\n  const handerSubmit = () =>{\n    console.log(dom.current);\n    //  \u6253\u5370dom\u8282\u70b9\uff1a<div>\u8868\u5355\u7ec4\u4ef6</div>  \n  }\n  return <div>\n    <div ref={dom}>\u8868\u5355\u7ec4\u4ef6</div>\n    {/* ref \u6807\u8bb0\u5f53\u524ddom\u8282\u70b9 */}\n    <button onClick={()=>handerSubmit()}>\u63d0\u4ea4</button> \n  </div>\n}\n")),(0,r.kt)("h4",{id:"useimperativehandle"},"useImperativeHandle"),(0,r.kt)("p",null,"\u7528\u4e8e\u7236\u7ec4\u4ef6\u8c03\u7528\u5b50\u7ec4\u4ef6\u7684\u5c5e\u6027/\u65b9\u6cd5\u3002\u5b50\u7ec4\u4ef6\u5bf9\u5916\u66b4\u9732 / \u63d0\u4f9b\u90e8\u5206\u529f\u80fd\uff0c\u4f9b\u7236\u7ec4\u4ef6\u8c03\u7528\u3002"),(0,r.kt)("p",null,"\u5f15\uff1a",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"React.forwardRef()"))," \u7528\u4e8e\u8f6c\u53d1 ref\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u628a\u4e00\u4e2a\u51fd\u6570\u7ec4\u4ef6\uff08\u6709 props, ref \u4e24\u4e2a\u53c2\u6570\uff09\u4f20\u5165 forwardRef\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a \u7ed1\u5b9a\u597d ref \u7684\u65b0\u7ec4\u4ef6\u3002")),(0,r.kt)("p",null,"\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u901a\u8fc7 forwardRef\uff0cFather \u4f20\u9012\u7ed9 Son \u4e00\u4e2a sonRef \u5bf9\u8c61\u3002\u800c Son \u63a5\u6536\u5230 sonRef \u540e\uff0c\u628a\u5b83\u7ed1\u5b9a\u5728 input DOM \u5143\u7d20\u4e0a\u3002\u8fd9\u6837\uff0c\u7236\u7ec4\u4ef6\u5c31\u6301\u6709\u4e86\u4e00\u4e2a\u5b50\u7ec4\u4ef6\u4e2d input \u5143\u7d20\u7684\u5f15\u7528\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'import React,{useRef,forwardRef} from \'react\'\n\nconst Son = forwardRef((props, ref) => {\n  return <div>\n    <input type="text" defaultValue={props.value} ref={ref} />\n  </div>\n})\n\nconst Father = () => {\n  const sonRef = useRef(null);\n  return <div>\n    <Son ref={sonRef} value=\'\u5b50\u7ec4\u4ef6\' />\n    <button onClick={() => console.log(sonRef.current)}>\u70b9\u51fb\u6253\u5370 sonRef</button>\n   \n  </div>\n}\n\n// \u70b9\u51fb\u5b50\u7ec4\u4ef6\u7684 button \u540e\uff0c\u63a7\u5236\u680f\u8f93\u51fa\uff1a<input type="text" value="\u5b50\u7ec4\u4ef6"></input>\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u4ee3\u7801\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://codesandbox.io/s/festive-elion-4w514b?file=/src/App.js"},"https://codesandbox.io/s/festive-elion-4w514b?file=/src/App.js"))),(0,r.kt)("p",null,"\u4e0a\u9762\u7684\u4f8b\u5b50\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e Son \u6765\u8bf4\uff0c\u5165\u53c2 ",(0,r.kt)("inlineCode",{parentName:"p"},"ref")," \u5c31\u662f\u7236\u7ec4\u4ef6\u53d1\u6765\u7684\uff0c\u7528\u4e8e\u8c03\u7528\u5b50\u7ec4\u4ef6\u7684\u5f15\u7528\u3002\u4f46\u6709\u65f6\u5b50\u7ec4\u4ef6\u9700\u8981\u5bf9\u7236\u7ec4\u4ef6\u66b4\u9732\u66f4\u591a\u6307\u5b9a\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u8fd9\u662f\u5c31\u9700\u8981 ",(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle")," \u5bf9\u5176\u6253\u5305\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"useImperativeHandle"),"  \u63a5\u6536\u4e09\u4e2a\u53c2\u6570\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ref\uff1a\u7236\u7ec4\u4ef6\u4f20\u9012\u8fc7\u6765\u7684 ref\uff0c\u4e5f\u5c31\u662f\u5c06\u8981\u7ed1\u5b9a\u7684 ref \u5f15\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"callback\uff1a\u521d\u59cb\u5316\u65f6\u4f1a\u8c03\u7528\u8be5\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u4f1a\u7ed1\u5b9a\u5728 ref \u5f15\u7528\u4e0a\uff0c\u88ab\u7236\u7ec4\u4ef6\u5f15\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"deps\uff1a\u6570\u7ec4\uff0c\u6210\u5458\u662f\u4f9d\u8d56\u9879\uff0c\u5f53\u4f9d\u8d56\u53d1\u751f\u6539\u53d8\uff0c\u5c31\u4f1a\u91cd\u65b0\u6267\u884c callback\uff0c\u91cd\u65b0\u6dfb\u52a0\u7ed1\u5b9a\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const SonComponent = forwardRef((props, ref) => {\n\n  useImperativeHandle(ref,() => {\n    return {\n      handle1: () => {},\n      handle2: () => {}\n      // ..\n    }\n  }, deps);\n\n}\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f"),"\uff1a\u5f53\u7236\u7ec4\u4ef6\u9700\u8981\u4f7f\u7528\u5b50\u7ec4\u4ef6\u90e8\u5206\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u800c\u5b50\u7ec4\u4ef6\u4e0d\u5e0c\u671b\u628a\u81ea\u5df1\u5168\u90e8\u5185\u5bb9\u90fd\u5bf9\u5916\u66b4\u9732\u65f6\uff0c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"forward.Ref")," + ",(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle")," \u7684\u914d\u5408\uff0c\u53ef\u4ee5\u9488\u5bf9\u6027\u7684\u66b4\u9732\u90e8\u5206\u529f\u80fd\u3002\u5b9e\u73b0\u7236\u7ec4\u4ef6\u8c03\u7528\u5b50\u7ec4\u4ef6\u7684\u90e8\u5206\u65b9\u6cd5\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7236\u7ec4\u4ef6\u662f\u4e00\u4e2a\u63d0\u4ea4\u7ec4\u4ef6\uff0cn \u4e2a\u5b50\u7ec4\u4ef6\u662f\u8868\u5355\u3002\u7236\u7ec4\u4ef6\u9700\u8981\u8c03\u7528\u5168\u90e8\u5b50\u7ec4\u4ef6\u7684\u63d0\u4ea4\u51fd\u6570\uff0c\u8ba9\u5b50\u7ec4\u4ef6\u628a\u8868\u5355\u4fe1\u606f\u63d0\u4ea4\u7ed9\u7236\u7ec4\u4ef6\u3002")),(0,r.kt)("h4",{id:"usememo"},"useMemo"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const memoizedValue = useMemo(() => { \n  // function \n}, deps);\n")),(0,r.kt)("p",null,"\u6027\u80fd\u4f18\u5316\u3002useMemo \u4f1a\u7f13\u5b58\u4e00\u4e2a ",(0,r.kt)("strong",{parentName:"p"},"\u5f15\u7528"),"\uff0c\u8fd9\u4e2a\u5f15\u7528\u53ef\u4ee5\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u503c\u3001\u5bf9\u8c61\u3001\u51fd\u6570\u3002\u5728\u521d\u59cb\u5316\u7ec4\u4ef6\u65f6\uff0c\u4f1a\u8c03\u7528\u56de\u8c03\u51fd\u6570\uff0c\u5e76\u8ba9 ",(0,r.kt)("inlineCode",{parentName:"p"},"memoizedValue")," \u7f13\u5b58\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002\u5f53 deps \u4f9d\u8d56\u9879\u4e0d\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5373\u4f7f\u53d1\u751f\u591a\u6b21 render\uff0c\u4e5f\u4e0d\u4f1a\u91cd\u65b0\u6267\u884c\u56de\u8c03\u51fd\u6570\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"memoizedValue")," \u4f1a\u4e00\u76f4\u6301\u76f8\u540c\u7684\u5f15\u7528\uff0c\u4ece\u800c\u8282\u7701\u76f8\u540c\u4ee3\u7801\u7684\u6267\u884c\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f"),"\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u590d\u6742\u8ba1\u7b97\uff0c\u5f53\u521b\u5efa\u4e00\u4e2a\u503c\uff0c\u4f1a\u4ea7\u751f\u9ad8\u6602\u7684\u5f00\u9500\uff08\u6bd4\u5982\u8ba1\u7b97\u4e0a\u5343\u6b21\u624d\u4f1a\u751f\u6210\u53d8\u91cf\u503c\uff09\uff0c\u6709\u5fc5\u8981\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"useMemo"),"\uff0c\u5f53\u7136\u8fd9\u79cd\u573a\u666f\u5c11\u4e4b\u53c8\u5c11\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7 props \uff0c\u7236\u7ec4\u4ef6\u7ed9\u5b50\u7ec4\u4ef6\u4f20\u9012\u5c40\u90e8\u53d8\u91cf\u3002\u7236\u7ec4\u4ef6\u628a\u8fd9\u4e2a\u5c40\u90e8\u53d8\u91cf\u901a\u8fc7 useMemo \u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u3002\u4e0d\u8bba\u7236\u7ec4\u4ef6\u5982\u4f55 rerender\uff0c\u8be5\u53d8\u91cf\u4e0d\u4f1a\u53d1\u751f\u6539\u53d8\u3002\u6240\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"memo()")," \u7684\u5305\u88f9\u7684\u5b50\u7ec4\u4ef6\uff0c\u4f1a\u5bf9\u4f20\u5165\u7684\u53d8\u91cf shallow equal\uff0c\u987a\u5229\u7684\u907f\u514d\u91cd\u65b0\u6e32\u67d3\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u4f20\u5165\u53d8\u91cf\u5728\u7236\u7ec4\u4ef6\u4e2d\uff0c\u6ca1\u6709\u901a\u8fc7 useMemo \u5305\u88f9\uff0c\u4ec5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"memo()"),"\u5305\u88f9\u81ea\u7ec4\u4ef6\u662f\u6ca1\u7528\u7684\u3002\u52a0\u5165\u4f20\u5165\u53d8\u91cf\u662f\u4e00\u4e2a\u5bf9\u8c61 object\uff0c\u7236\u7ec4\u4ef6\u6bcf\u6b21 render \u90fd\u4f1a\u5bfc\u81f4\u8be5 object \u91cd\u65b0\u521b\u5efa\uff0c\u5b50\u7ec4\u4ef6\u7684 shallow equal \u4f1a\u53d1\u73b0\u524d\u540e object \u5730\u5740\u4e0d\u4e00\u81f4\uff0c\u4ece\u800c\u5224\u5b9a\u4e3a props \u53d1\u751f\u6539\u53d8\uff0c\u800c\u91cd\u65b0 render\u3002")))),(0,r.kt)("h4",{id:"usecallback"},"useCallback"),(0,r.kt)("p",null,"\u548c useMemo \u7684\u529f\u80fd\u3001\u89e6\u53d1\u673a\u5236\u76f8\u540c\uff0c\u5728\u4f9d\u8d56\u9879\u53d8\u5316\u540e\uff0c\u4f1a\u8ba9 ",(0,r.kt)("inlineCode",{parentName:"p"},"memoizedValue")," \u91cd\u65b0\u7f13\u5b58\u5f15\u7528\u3002\u4e0d\u540c\u7684\u662f\uff0cuseMemo \u4f1a\u6267\u884c\u56de\u8c03\u51fd\u6570\uff0c\u5e76\u7f13\u5b58\u5f97\u5230\u7684\u51fd\u6570\u8fd4\u56de\u503c\uff1b\u800c useCallback \u76f4\u63a5\u7f13\u5b58\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5e76\u4e0d\u4f1a\u6267\u884c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const memoizedValue = useCallback(() => { \n  // function \n}, deps);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\u5e76\u4e0d\u4f1a\u6267\u884c\uff0c\u800c\u662f\u76f4\u63a5\u7f13\u5b58\u3002"),(0,r.kt)("li",{parentName:"ul"},"useCallback \u662f useMemo \u7684\u4e00\u79cd\u7279\u4f8b\uff0c\u56e0\u4e3a useMemo \u53ef\u4ee5\u5f15\u7528/\u7f13\u5b58\u4efb\u4f55\u503c\uff08\u5bf9\u8c61\u3001\u51fd\u6570\uff09\uff0c\u800c useCallback \u53ea\u80fd\u5f15\u7528/\u7f13\u5b58\u51fd\u6570\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u573a\u666f"),"\uff1a\u7236\u7ec4\u4ef6\u7ed9\u5b50\u7ec4\u4ef6\u4f20\u9012\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u65f6\uff0c\u4f1a\u628a\u8be5\u56de\u8c03\u51fd\u6570\u901a\u8fc7 useCallback \u5305\u88f9\u540e\u518d\u8fd4\u56de\u3002\u539f\u7406\u540c useMemo \u4e00\u6837\uff0c\u5b50\u7ec4\u4ef6\u9700\u8981\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"memo()")," \u5305\u88f9\u3002\u8fd9\u6837\uff0c\u5373\u4f7f\u7236\u7ec4\u4ef6 render\uff0c\u4f46\u88ab useCallback \u5305\u88f9\u7684\u56de\u8c03\u51fd\u6570\u4e0d\u4f1a\u53d1\u751f\u6539\u53d8\uff0c\u6240\u4ee5\u5b50\u7ec4\u4ef6\u901a\u8fc7 shallow equal\uff0c\u987a\u5229\u907f\u514d\u91cd\u65b0\u6e32\u67d3\u3002"),(0,r.kt)("p",null,"useMemo \u548c useCallback \u7684\u533a\u522b\uff1a"),(0,r.kt)("p",null,"\u76f8\u540c\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4ece\u903b\u8f91\u4e0a\u6765\u8bf4\uff0c\u89e6\u53d1\u903b\u8f91\u76f8\u540c\uff0c\u4e24\u4e2a hooks \u7684\u8fd4\u56de\u503c ",(0,r.kt)("inlineCode",{parentName:"li"},"memoizedValue")," \u4f1a\u5bf9\u4e00\u4e2a\u503c\u4fdd\u6301\u5f15\u7528(\u7f13\u5b58)\u3002\u5728\u4f9d\u8d56\u9879\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0d\u8bba\u7ec4\u4ef6 render \u591a\u5c11\u6b21\uff0c\u90fd\u4e0d\u8be5\u5f15\u7528(\u7f13\u5b58)\u90fd\u4e0d\u4f1a\u66f4\u65b0\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4ece\u76ee\u7684\u4e0a\u6765\u8bf4\uff0c\u4e24\u8005\u90fd\u662f\u6027\u80fd\u4f18\u5316\uff0c\u5c3d\u53ef\u80fd\u51cf\u5c11\u5b50\u7ec4\u4ef6\u7684 render\u3002")),(0,r.kt)("p",null,"\u4e0d\u540c\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4ece\u4ee3\u7801\u4e0a\u6765\u8bf4\uff0cuseMemo \u7684\u56de\u8c03\u51fd\u6570\u4f1a\u88ab\u6267\u884c\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"memoizedValue")," \u7f13\u5b58\u88ab\u6267\u884c\u7684\u8fd4\u56de\u503c\uff1buseCallback \u7684\u56de\u8c03\u51fd\u6570\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u800c\u662f\u88ab ",(0,r.kt)("inlineCode",{parentName:"li"},"memoizedValue")," \u76f4\u63a5\u7f13\u5b58\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4ece\u6548\u679c\u4e0a\u6765\u8bf4\uff0cuseMemo \u53ef\u4ee5\u7f13\u5b58\u4efb\u4f55\u503c\uff08\u57fa\u672c\u503c\u3001\u5bf9\u8c61\u3001\u51fd\u6570\uff09\uff0c\u800c useCallback \u4ec5\u80fd\u7f13\u5b58\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4ece\u539f\u7406\u4e0a\u6765\u8bf4\uff0cuseCallback \u662f useMemo \u7684\u8bed\u6cd5\u7cd6\uff0c\u662f\u4e00\u4e2a\u7279\u4f8b\u3002useMemo \u9664\u4e86\u53ef\u4ee5\u907f\u514d\u5b50\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u5916\uff0c\u8fd8\u53ef\u4ee5\u5305\u88f9\u8ba1\u7b97\u590d\u6742\u7684\u51fd\u6570\uff0c\u51cf\u5c11\u590d\u6742\u8ba1\u7b97\u7684\u6267\u884c\u6b21\u6570\u3002")),(0,r.kt)("h3",{id:"\u95ee\u9898componentpurecomponent-memo"},"\u95ee\u9898\uff1aComponent\u3001PureComponent \u3001memo()"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"PureComponent")," \u7ec4\u4ef6\u521b\u5efa\u4e86\u9ed8\u8ba4\u7684 ",(0,r.kt)("inlineCode",{parentName:"strong"},"shouldComponentUpdate")," \u884c\u4e3a\u3002")),(0,r.kt)("p",null,"\u8fd9\u4e2a\u9ed8\u8ba4\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"shouldComponentUpdate")," \u884c\u4e3a\u4f1a\u6267\u884c shallow equal\uff0c\u9010\u4e00\u6bd4\u8f83\u5373\u5c06 render \u524d\u540e\uff0c ",(0,r.kt)("inlineCode",{parentName:"p"},"props")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," \u662f\u5426\u53d1\u751f\u6539\u53d8\uff0c\u5982\u679c\u6ca1\u6709\u6539\u53d8\uff0c\u5c31\u4f1a\u963b\u6b62\u7ec4\u4ef6\u63a5\u4e0b\u6765\u7684 render \u4ee5\u53ca\u4e4b\u540e\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u6267\u884c\uff0c\u63d0\u5347\u6027\u80fd\u3002"),(0,r.kt)("p",null,"\u800c\u51fd\u6570\u7ec4\u4ef6\u6ca1\u6709\u751f\u547d\u5468\u671f\u7684\u6982\u5ff5\uff0c\u4e5f\u65e0\u6cd5\u4f7f\u7528 PureComponent\uff0c\u6240\u4ee5 React 16+ \u5b9a\u4e49\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"React.memo()")," \u65b9\u6cd5\uff0c\u5b83\u65e2\u53ef\u4ee5\u5305\u88f9 class component\uff0c\u4e5f\u53ef\u4ee5\u5305\u88f9 function component\uff0c\u8fbe\u5230\u548c PureComponent \u76f8\u540c\u7684\u6548\u679c\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u901a\u5e38\u548c useMemo\u3001useCallback hooks \u914d\u5408\u4f7f\u7528\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u6765\u6e90\uff1a"),(0,r.kt)("p",{parentName:"blockquote"},"React\u8bfe\u7a0b\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://ke.segmentfault.com/course/1650000023864436/section/1500000023864578"},"https://ke.segmentfault.com/course/1650000023864436/section/1500000023864578")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/lizuncong/mini-react/blob/master/docs/render/%E6%B7%B1%E5%85%A5%E6%A6%82%E8%BF%B0%20React%E5%88%9D%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%8F%8A%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%E4%B8%BB%E6%B5%81%E7%A8%8B.md"},"https://github.com/lizuncong/mini-react/blob/master/docs/render/%E6%B7%B1%E5%85%A5%E6%A6%82%E8%BF%B0%20React%E5%88%9D%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%8F%8A%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%E4%B8%BB%E6%B5%81%E7%A8%8B.md")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://segmentfault.com/a/1190000039227345"},"https://segmentfault.com/a/1190000039227345")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6844903975112671239"},"https://juejin.cn/post/6844903975112671239")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7118259566868955167"},"https://juejin.cn/post/7118259566868955167"))))}s.isMDXComponent=!0},1515:function(e,t,n){t.Z=n.p+"assets/images/0a90368f24f0477aaf0d446a8f6736db~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0-075ad7c9c4b513ce7afa653459291b2b.awebp"},8554:function(e,t,n){t.Z=n.p+"assets/images/16deecc37fdd60d7~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0-5175c162183af87a410334df21557a68.awebp"},2743:function(e,t,n){t.Z=n.p+"assets/images/16deecc43c710e16~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0-af1ecf1eda7814df686431778089fc93.awebp"},6407:function(e,t,n){t.Z=n.p+"assets/images/16deecce3162b355~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0-c4218249f9dea90c20684edbe11ebc2c.awebp"},9923:function(e,t,n){t.Z=n.p+"assets/images/16deed1711f281b3~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0-d0240fc89f86c4d1a73102992edf1a0f.awebp"},9549:function(e,t){t.Z="data:;base64,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"},8571:function(e,t,n){t.Z=n.p+"assets/images/58db2ee32bde44b3afd5e2e6af3e3647~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0-ce22e7fc31e9aefa33fb0a3d08b5ef3d.awebp"},5277:function(e,t,n){t.Z=n.p+"assets/images/c859397a03024903939f934907052cc2~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0-bf7010e65b450f32e10625812a9b8bb0.awebp"},7180:function(e,t){t.Z="data:;base64,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"},626:function(e,t,n){t.Z=n.p+"assets/images/image-20220806230807382-ce972a80313ee829768b13c49c111bbd.png"},4343:function(e,t,n){t.Z=n.p+"assets/images/image-20220806231908259-29f8253c8f951b76032810417729e781.png"},5477:function(e,t,n){t.Z=n.p+"assets/images/image-20220806232428977-7a5bc8cbc0acce02ca01ee1931d01d5b.png"},8769:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-07 00.18.02-62b446f9b882330ff0d1a9fb7e7a6396.png"},7991:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-07 22.42.10-c47e67c927e51a566be8b8deb428a236.png"},762:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-07 22.49.01-a6ffd18d89304be80d7459a9d8483400.png"},8872:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 00.27.04-d65a2edb1c300496eae515e26cb61e62.png"},6180:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 15.34.10-ae118d8fe5719e54706b8bdb9f950749.png"},8444:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 16.24.03-ebd2b8661bae741e57107481283bc6ce.png"},8381:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 16.30.47-96e47245bb84c61e16a392adfedcbee4.png"},5918:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 16.34.02-288ce5471743627342f90822e8ec7fcd.png"},5088:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 17.20.09-f2c36c052e7c1f262bc0a0af85a2c8cb.png"}}]);
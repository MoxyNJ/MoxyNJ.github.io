"use strict";(self.webpackChunkninjee=self.webpackChunkninjee||[]).push([[7051],{4137:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return c}});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var p=a.createContext({}),o=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):A(A({},t),e)),n},u=function(e){var t=o(e.components);return a.createElement(p.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,p=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=o(n),c=l,s=m["".concat(p,".").concat(c)]||m[c]||k[c]||r;return n?a.createElement(s,A(A({ref:t},u),{},{components:n})):a.createElement(s,A({ref:t},u))}));function c(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,A=new Array(r);A[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:l,A[1]=i;for(var o=2;o<r;o++)A[o]=n[o];return a.createElement.apply(null,A)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7006:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return i},metadata:function(){return o},toc:function(){return k}});var a=n(7462),l=n(3366),r=(n(7294),n(4137)),A=["components"],i={title:"1. React\u7b14\u8bb0",sidebar_position:1,date:new Date("2022-08-05T00:00:00.000Z"),tags:["React"]},p=void 0,o={unversionedId:"frontEnd/React/React_Note",id:"frontEnd/React/React_Note",title:"1. React\u7b14\u8bb0",description:"React \u67b6\u6784\u4f53\u7cfb\u4e09\u5927\u6a21\u5757",source:"@site/docs/frontEnd/React/React_Note.md",sourceDirName:"frontEnd/React",slug:"/frontEnd/React/React_Note",permalink:"/docs/frontEnd/React/React_Note",tags:[{label:"React",permalink:"/docs/tags/react"}],version:"current",sidebarPosition:1,frontMatter:{title:"1. React\u7b14\u8bb0",sidebar_position:1,date:"2022-08-05T00:00:00.000Z",tags:["React"]},sidebar:"React",previous:{title:"\u6982\u8ff0",permalink:"/docs/frontEnd/React"}},u={},k=[{value:"React \u8bbe\u8ba1\u7406\u5ff5",id:"react-\u8bbe\u8ba1\u7406\u5ff5",level:2},{value:"\u95ee\u9898\uff1areact \u67b6\u6784",id:"\u95ee\u9898react-\u67b6\u6784",level:3},{value:"\u8bbe\u8ba1\u7406\u5ff5",id:"\u8bbe\u8ba1\u7406\u5ff5",level:5},{value:"\u5f02\u6b65\u53ef\u4e2d\u65ad",id:"\u5f02\u6b65\u53ef\u4e2d\u65ad",level:5},{value:"1 \u8c03\u5ea6\u9636\u6bb5",id:"1-\u8c03\u5ea6\u9636\u6bb5",level:4},{value:"2 \u534f\u8c03\u9636\u6bb5",id:"2-\u534f\u8c03\u9636\u6bb5",level:4},{value:"\u8be5\u9636\u6bb5\u7684\u7279\u70b9\uff1a",id:"\u8be5\u9636\u6bb5\u7684\u7279\u70b9",level:5},{value:"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c\uff1a",id:"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c",level:5},{value:"3 \u6e32\u67d3\u9636\u6bb5",id:"3-\u6e32\u67d3\u9636\u6bb5",level:4},{value:"\u95ee\u9898\uff1aalgebraic effects",id:"\u95ee\u9898algebraic-effects",level:3},{value:"algebraic effects \u7684\u7531\u6765",id:"algebraic-effects-\u7684\u7531\u6765",level:4},{value:"Algebraic Effects \u89e3\u51b3\u7684\u95ee\u9898",id:"algebraic-effects-\u89e3\u51b3\u7684\u95ee\u9898",level:4},{value:"React Hooks \u601d\u60f3",id:"react-hooks-\u601d\u60f3",level:4},{value:"\u95ee\u9898\uff1a\u521d\u6b21\u6e32\u67d3 / \u66f4\u65b0 \u7684\u533a\u522b",id:"\u95ee\u9898\u521d\u6b21\u6e32\u67d3--\u66f4\u65b0-\u7684\u533a\u522b",level:3},{value:"\u521d\u6b21\u6e32\u67d3",id:"\u521d\u6b21\u6e32\u67d3",level:5},{value:"\u66f4\u65b0 Update",id:"\u66f4\u65b0-update",level:5},{value:"\u518d\u6b21\u66f4\u65b0",id:"\u518d\u6b21\u66f4\u65b0",level:5},{value:"diff \u76f8\u5173",id:"diff-\u76f8\u5173",level:2},{value:"\u95ee\u9898\uff1a\u4ec0\u4e48\u662f virtual DOM",id:"\u95ee\u9898\u4ec0\u4e48\u662f-virtual-dom",level:3},{value:"\u95ee\u9898\uff1avirtual DOM \u7684\u4f18\u52bf",id:"\u95ee\u9898virtual-dom-\u7684\u4f18\u52bf",level:3},{value:"1. \u63d0\u9ad8\u6548\u7387",id:"1-\u63d0\u9ad8\u6548\u7387",level:5},{value:"2. \u63d0\u5347\u6027\u80fd",id:"2-\u63d0\u5347\u6027\u80fd",level:5},{value:"3. \u589e\u5f3a\u517c\u5bb9\u6027",id:"3-\u589e\u5f3a\u517c\u5bb9\u6027",level:5},{value:"\u95ee\u9898\uff1adiff \u539f\u7406",id:"\u95ee\u9898diff-\u539f\u7406",level:3},{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:5},{value:"tree diff",id:"tree-diff",level:5},{value:"component diff",id:"component-diff",level:5},{value:"element diff",id:"element-diff",level:5},{value:"\u95ee\u9898\uff1a\u53cc\u7f13\u5b58\u6a21\u578b",id:"\u95ee\u9898\u53cc\u7f13\u5b58\u6a21\u578b",level:3},{value:"Fiber",id:"fiber",level:2},{value:"\u95ee\u98981 \u4e3a\u4ec0\u4e48\u8981\u5f15\u5165 Fiber \u67b6\u6784\uff1f",id:"\u95ee\u98981-\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165-fiber-\u67b6\u6784",level:3},{value:"\u95ee\u98982 \u4ec0\u4e48\u662f Fiber",id:"\u95ee\u98982-\u4ec0\u4e48\u662f-fiber",level:3},{value:"1 \u6d41\u7a0b\u63a7\u5236\u673a\u5236",id:"1-\u6d41\u7a0b\u63a7\u5236\u673a\u5236",level:4},{value:"2 \u6267\u884c\u5355\u5143",id:"2-\u6267\u884c\u5355\u5143",level:4},{value:"3 \u4e00\u79cd\u6570\u636e\u7ed3\u6784",id:"3-\u4e00\u79cd\u6570\u636e\u7ed3\u6784",level:4},{value:"\u95ee\u98983 Fiber \u7684\u7ed3\u6784",id:"\u95ee\u98983-fiber-\u7684\u7ed3\u6784",level:3},{value:"\u5176\u4ed6",id:"\u5176\u4ed6",level:2},{value:"\u95ee\u9898\uff1aJSX, element, fiber, dom \u7684\u5173\u7cfb",id:"\u95ee\u9898jsx-element-fiber-dom-\u7684\u5173\u7cfb",level:3},{value:"\u95ee\u9898\uff1aFiber \u66f4\u65b0\u673a\u5236",id:"\u95ee\u9898fiber-\u66f4\u65b0\u673a\u5236",level:3},{value:"\u95ee\u9898\uff1auseEffect \u548c useLayoutEffect \u7684\u533a\u522b",id:"\u95ee\u9898useeffect-\u548c-uselayouteffect-\u7684\u533a\u522b",level:3}],m={toc:k};function c(e){var t=e.components,i=(0,l.Z)(e,A);return(0,r.kt)("wrapper",(0,a.Z)({},m,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"React \u67b6\u6784\u4f53\u7cfb\u4e09\u5927\u6a21\u5757"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8c03\u5ea6"),(0,r.kt)("li",{parentName:"ul"},"\u534f\u8c03"),(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3")),(0,r.kt)("h2",{id:"react-\u8bbe\u8ba1\u7406\u5ff5"},"React \u8bbe\u8ba1\u7406\u5ff5"),(0,r.kt)("h3",{id:"\u95ee\u9898react-\u67b6\u6784"},"\u95ee\u9898\uff1areact \u67b6\u6784"),(0,r.kt)("h5",{id:"\u8bbe\u8ba1\u7406\u5ff5"},"\u8bbe\u8ba1\u7406\u5ff5"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u7684\u6027\u80fd\u74f6\u9888\u5728 CPU \u548c IO\u3002"),(0,r.kt)("p",null,"React \u89e3\u51b3 CPU / IO \u7684\u74f6\u9888\uff1a",(0,r.kt)("strong",{parentName:"p"},"\u5f02\u6b65\u53ef\u4e2d\u65ad\u7684\u66f4\u65b0"),"\u3002"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u7684\u5237\u65b0\u7387\u901a\u5e38\u4e3a 60Hz/s\uff0c\u4e5f\u5c31\u662f 16.6ms \u5237\u65b0\u4e00\u6b21\u9875\u9762\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"16.6ms \u4e2d\uff0c\u6d4f\u89c8\u5668\u9700\u8981\u5b8c\u6210\uff1aJS\u811a\u672c\u6267\u884c\u3001\u6837\u5f0f\u5e03\u5c40\u3001\u6837\u5f0f\u7ed8\u5236\u3002")),(0,r.kt)("p",null,"\u5f53\u6e32\u67d3\u7684\u5904\u7406\u65f6\u95f4\u8d85\u8fc7 16.6ms\uff0c\u9875\u9762\u5c31\u4f1a\u5361\u987f\u3002\u901a\u5e38\u4f7f\u7528\u8282\u6d41\uff08\u95f4\u9694\u89e6\u53d1\uff09\u3001\u9632\u6296\uff08\u6700\u540e\u4e00\u4e2a\u89e6\u53d1\uff09\uff0c\u90fd\u662f\u901a\u8fc7\u9650\u5236\u66f4\u65b0\u9891\u7387\u6765\u63d0\u5347\u6027\u80fd\u3002"),(0,r.kt)("p",null,"React \u628a\u540c\u6b65\u66f4\u65b0\uff0c\u53d8\u4e3a\u5f02\u6b65\u53ef\u4e2d\u65ad\u8fdb\u884c\u66f4\u65b0\u3002React \u901a\u8fc7 fiber \u628a\u6e32\u67d3\u4efb\u52a1\u5207\u5206\u4e3a\u591a\u4e2a\u5c0f\u6bb5\uff0c\u6bcf\u4e2a\u5c0f\u6bb5\u6267\u884c\u5b8c\u6bd5\u540e\u4f1a\u628a\u4e3b\u52a8\u6743\u4ea4\u8fd8\u6d4f\u89c8\u5668\uff0c\u6d4f\u89c8\u5668\u5219\u53ef\u6839\u636e\u5f53\u524d\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\uff0c\u628a\u5269\u4f59\u65f6\u95f4\u5206\u914d\u7ed9\u66f4\u91cd\u8981\u7684\u4efb\u52a1\uff0c\u4ee5\u786e\u4fdd\u5c3d\u53ef\u80fd\u7684\u54cd\u5e94\u53ca\u65f6\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"16.6ms \u4e2d\uff0c\u5f53\u6d4f\u89c8\u5668\u6267\u884c\u5b8c\u91cd\u8981\u4efb\u52a1\u540e\uff0c\u4f1a\u628a\u5269\u4f59\u65f6\u95f4\u4ea4\u7ed9 React \u53d6\u6267\u884c\u5c1a\u672a\u5904\u7406\u5b8c\u7684\u4efb\u52a1\uff0c\u5982\u679c\u5269\u4f59\u65f6\u95f4\u4e0d\u591f\uff0c\u5c31\u4f1a\u628a\u5269\u4f59\u4efb\u52a1\u5728\u4e0b\u4e00\u4e2a 16.6ms \u5468\u671f\u4e2d\u6267\u884c\u3002")),(0,r.kt)("p",null,"\u8fd9\u6837\uff0c\u6d4f\u89c8\u5668\u5c31\u6709\u5145\u8db3\u7684\u65f6\u95f4\u8fdb\u884c\u6837\u5f0f\u5e03\u5c40\u548c\u9875\u9762\u7ed8\u5236\uff0c\u800c React \u4e5f\u53ef\u4ee5\u5728\u5206\u914d\u7ed9\u81ea\u5df1\u7684\u65f6\u95f4\u5185\u6267\u884c\u5b8c\u4efb\u52a1\u3002"),(0,r.kt)("h5",{id:"\u5f02\u6b65\u53ef\u4e2d\u65ad"},"\u5f02\u6b65\u53ef\u4e2d\u65ad"),(0,r.kt)("p",null,"React 15+ \u5b9e\u73b0\u4e86\u5f02\u6b65\u53ef\u4e2d\u65ad\u7684\u67b6\u6784\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Scheduler \u8c03\u5ea6\u5668\uff1a\u8c03\u5ea6\u66f4\u65b0\uff0c\u7ed9\u66f4\u65b0\u4efb\u52a1\u5b89\u6392\u4f18\u5148\u7ea7\u3002"),(0,r.kt)("li",{parentName:"ul"},"Reconcoler \u534f\u8c03\u5668\uff1a\u51b3\u5b9a\u9700\u8981\u66f4\u65b0\u4ec0\u4e48\u7ec4\u4ef6\uff0c\u5f53\u66f4\u9ad8\u4f18\u4efb\u52a1\u6765\u5230\u65f6\uff0c\u53ef\u4e2d\u65ad\u5f53\u524d\u4efb\u52a1\u3002"),(0,r.kt)("li",{parentName:"ul"},"Renderer \u6e32\u67d3\u5668\uff1a\u5c06\u7ec4\u4ef6\u66f4\u65b0\u5230\u89c6\u56fe\u4e2d\uff0c\u6e32\u67d3\u8fc7\u7a0b\u662f\u540c\u6b65\u4e14\u4e0d\u53ef\u4e2d\u65ad\u7684\uff0c\u9700\u8981\u4e00\u6c14\u5475\u6210\u3002")),(0,r.kt)("p",null,"\u5728 render \u51fd\u6570\u7684\u6267\u884c\u5468\u671f\u4e2d\uff0c\u6709\u8c03\u5ea6\uff08\u4e8b\u4ef6\u89e6\u53d1\uff09\u3001\u534f\u8c03\uff08render\uff09\u3001\u6e32\u67d3\uff08commit\uff09\u4e09\u4e2a\u9636\u6bb5\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220806230807382",src:n(626).Z,width:"1412",height:"602"})),(0,r.kt)("h4",{id:"1-\u8c03\u5ea6\u9636\u6bb5"},"1 \u8c03\u5ea6\u9636\u6bb5"),(0,r.kt)("p",null,"\u5f53 React \u9700\u8981\u66f4\u65b0\u65f6\uff0c\u66f4\u65b0\u4efb\u52a1\u9996\u5148\u88ab Scheduler \u8c03\u5ea6\u5668 \u5904\u7406\u3002"),(0,r.kt)("p",null,"\u5904\u7406\u7684\u5de5\u4f5c\u6709\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u521b\u5efa\u9879\u76ee\u6839 Fiber \u8282\u70b9"),"\u3002\u9996\u6b21\u6e32\u67d3\u9875\u9762\u65f6\uff0c\u4f1a\u521b\u5efa\u552f\u4e00\u7684\u6839\u8282\u70b9 FiberRoot Node\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u521b\u5efa\u5e94\u7528\u6839 Fiber \u8282\u70b9"),"\u3002\u6bcf\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"ReactDOM.render()")," \u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a rootFiber\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u521d\u59cb\u5316\u4e8b\u4ef6"),"\u3002Scheduler \u4f1a\u628a\u4efb\u52a1\u6309\u7167\u4f18\u5148\u7ea7\u6392\u5e8f\uff0c\u8ba9\u66f4\u9ad8\u4f18\u7684\u4efb\u52a1\u9996\u5148\u8fdb\u5165 Reconciler \u534f\u8c03\u5668\u8fdb\u884c\u4e0b\u4e00\u6b65\u5904\u7406\u3002")),(0,r.kt)("h4",{id:"2-\u534f\u8c03\u9636\u6bb5"},"2 \u534f\u8c03\u9636\u6bb5"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u534f\u8c03\u9636\u6bb5\u662f Reconcoler \u534f\u8c03\u5668\u5728\u53c2\u4e0e\uff0c\u4e5f\u88ab\u79f0\u4e3a render \u9636\u6bb5"),"\uff0c\u5982\u4e0b\u56fe renderRootSync \u90fd\u4e3a\u534f\u8c03\u9636\u6bb5\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220806231908259",src:n(4343).Z,width:"680",height:"386"})),(0,r.kt)("p",null,"Scheduler \u8c03\u5ea6\u5668\u4f1a\u901a\u8fc7 diff \u7b97\u6cd5\uff0c\u5904\u7406\u4f20\u5165\u7684\u66f4\u65b0\u4efb\u52a1\u3002diff \u5b8c\u6bd5\u540e\uff0c\u4f1a\u7531 fiber \u6784\u6210\u4e00\u9897\u65b0\u7684 virtualDOM \u6811\uff0c\u7136\u540e\u63d0\u4ea4\u7ed9 Renderer \u6e32\u67d3\u5668\u8fdb\u4e00\u6b65\u5904\u7406\u3002"),(0,r.kt)("h5",{id:"\u8be5\u9636\u6bb5\u7684\u7279\u70b9"},"\u8be5\u9636\u6bb5\u7684\u7279\u70b9\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u53ef\u6682\u505c"),"\u3002\u800c\u5728 Reconciler \u5728\u8fdb\u884c diff \u7b97\u6cd5\u65f6\uff0c\u5982\u679c\u8c03\u5ea6\u5668\u4f20\u6765\u4e00\u4e2a\u66f4\u9ad8\u4f18\u7684\u4efb\u52a1\uff0c\u90a3\u4e48\u5f53\u524d\u5904\u7406\u7684\u66f4\u65b0\u4efb\u52a1\u4f1a\u88ab\u6682\u505c\uff0c\u8ba9\u8c03\u5ea6\u5668\u653e\u5165\u4efb\u52a1\u961f\u5217\u4e2d\uff0c\u4f18\u5148\u5904\u7406\u4f20\u5165\u7684\u66f4\u9ad8\u4f18\u4efb\u52a1\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u7528\u6237\u900f\u660e"),"\u3002\u7531\u4e8e\u8c03\u5ea6\u5668\u548c\u534f\u8c03\u5668\u662f\u5728\u5185\u5b58\u4e2d\u5de5\u4f5c\uff0c\u5373\u4f7f diff \u4e2d\u65ad\uff0c\u7528\u6237\u4e5f\u65e0\u6cd5\u611f\u77e5\u5230\u9875\u9762\u6e32\u67d3\u88ab\u4e2d\u65ad / \u5361\u987f\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6784\u5efa work In Progres \u6811"),"\u3002diff \u7b97\u6cd5\u4f1a\u6784\u5efa\u4e00\u9897\u865a\u62df dom \u6811\uff0c\u89c6\u56fe\u4e0a\u771f\u5b9e\u5b58\u5728\u7684\u8282\u70b9\uff0c\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u8282\u70b9\u5728\u865a\u62df dom \u4e0a\u3002\u9700\u8981\u66f4\u65b0\u7684\u8282\u70b9\u4f1a\u88ab\u6253\u4e0a\u6807\u8bb0 Update\u3002\u88ab\u6253\u4e86\u6807\u8bb0\u7684\u865a\u62df dom \u4f1a\u4ea4\u7ed9\u6e32\u67d3\u5668\u3002")),(0,r.kt)("h5",{id:"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c"},"\u8be5\u9636\u6bb5\u7684\u5de5\u4f5c\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8c03\u548c work IN Progress Tree"),"\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u6784\u5efa work IN Progress Tree\u3002"),(0,r.kt)("p",null,"\u6784\u5efa\u8fc7\u7a0b\u662f\u4e00\u4e2a\u9012\u5f52\u8fc7\u7a0b\uff0c\u4ece  ",(0,r.kt)("inlineCode",{parentName:"p"},"rootFiber"),"  \u5f00\u59cb\u5411\u4e0b\u6df1\u5ea6\u4f18\u5148\u904d\u5386\u7684\uff0c\u5177\u4f53\u53ef\u4ee5\u5206\u4e3a n \u4e2a\uff1a\u9012\u9636\u6bb5 + \u5f52\u9636\u6bb5\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff081\uff09\u9012\u9636\u6bb5")),(0,r.kt)("p",null,"\u9012\u9636\u6bb5\uff0c\u662f\u5411\u4e0b\u8c03\u548c\u7684\u8fc7\u7a0b\u3002"),(0,r.kt)("p",null,"\u8c03\u7528 ",(0,r.kt)("strong",{parentName:"p"},"beginWork")," \u65b9\u6cd5\uff0c\u4ece  ",(0,r.kt)("inlineCode",{parentName:"p"},"rootFiber"),"  \u5f00\u59cb\u5411\u4e0b\u6df1\u5ea6\u4f18\u5148\u904d\u5386\uff0c\u4e3a\u904d\u5386\u5230\u7684\u6bcf\u4e2a fiber \u8282\u70b9\u3002"),(0,r.kt)("p",null,"\u8be5\u65b9\u6cd5\u4f1a\u6839\u636e\u4f20\u5165\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber\u8282\u70b9")," \u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5b50Fiber\u8282\u70b9"),"\uff0c\u5e76\u5c06\u8fd9\u4e24\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber\u8282\u70b9")," \u8fde\u63a5\u8d77\u6765\uff08",(0,r.kt)("strong",{parentName:"p"},"fiber.child")," \u6307\u9488\uff09\u3002\u5f53\u904d\u5386\u5230\u53f6\u5b50\u8282\u70b9\uff08\u5373\u6ca1\u6709\u5b50\u7ec4\u4ef6\u7684\u7ec4\u4ef6\uff09\u65f6\u5c31\u4f1a\u8fdb\u5165 \u201c\u5f52\u201d \u9636\u6bb5\u3002"),(0,r.kt)("p",null,"\u5982\u679c\u4e0d\u662f\u521d\u6b21\u6e32\u67d3\uff0c\u800c\u662f\u66f4\u65b0\u9875\u9762\uff0c\u6b64\u65f6\u5df2\u7ecf\u5b58\u5728\u4e00\u4e2a\u6784\u5efa\u597d\u7684 ",(0,r.kt)("strong",{parentName:"p"},"Current Tree"),"\uff0c",(0,r.kt)("strong",{parentName:"p"},"beginWork")," \u65b9\u6cd5\u4f1a\u7531 fiberRoot \u6839\u8282\u70b9\uff0c\u6309\u7167 ",(0,r.kt)("strong",{parentName:"p"},"child")," \u6307\u9488\u9010\u5c42\u5411\u4e0b\u8c03\u548c\u3002"),(0,r.kt)("p",null,"beginWork \u5177\u4f53\u7684\u5de5\u4f5c\u5982\u4e0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u7ec4\u4ef6\uff0c\u6267\u884c\u90e8\u5206\u751f\u547d\u5468\u671f\uff0c\u6267\u884c render \uff0c\u5f97\u5230\u6700\u65b0\u7684 children\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5411\u4e0b\u904d\u5386\u8c03\u548c children \uff0c\u590d\u7528 oldFiber ( diff \u7b97\u6cd5)\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6253\u4e0d\u540c\u7684\u526f\u4f5c\u7528\u6807\u7b7e effectTag \uff0c\u6bd4\u5982\u7c7b\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\uff0c\u6216\u8005\u5143\u7d20\u7684\u589e\u52a0\uff0c\u5220\u9664\uff0c\u66f4\u65b0\u3002\u8fd9\u4e9b\u88ab\u6807\u8bb0\u7684\u8282\u70b9\uff0c\u4f1a\u5728\u5f52\u9636\u6bb5\u6536\u96c6\u8d77\u6765\uff0c\u5f62\u6210\u5355\u9879\u94fe\u8868 effectList\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// \u751f\u547d\u5468\u671f\u94a9\u5b50\u4f1a\u5728\u534f\u8c03\u9636\u6bb5\u88ab\u8c03\u7528\uff1a\nconstructor\ncomponentWillMount \u5e9f\u5f03\ncomponentWillReceiveProps \u5e9f\u5f03\nstatic getDerivedStateFromProps\nshouldComponentUpdate\ncomponentWillUpdate \u5e9f\u5f03\nrender\n\n\n// \u5e38\u89c1\u7684 effect tag\nexport const Placement = /*             */ 0b0000000000010;  // \u63d2\u5165\u8282\u70b9\nexport const Update = /*                */ 0b0000000000100;  // \u66f4\u65b0fiber\nexport const Deletion = /*              */ 0b0000000001000;  // \u5220\u9664fiebr\nexport const Snapshot = /*              */ 0b0000100000000;  // \u5feb\u7167\nexport const Passive = /*               */ 0b0001000000000;  // useEffect\u7684\u526f\u4f5c\u7528\nexport const Callback = /*              */ 0b0000000100000;  // setState\u7684 callback\nexport const Ref = /*                   */ 0b0000010000000;  // ref\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff082\uff09\u5f52\u9636\u6bb5")),(0,r.kt)("p",null,"\u5f52\u9636\u6bb5\uff0c\u662f\u5411\u4e0a\u5e76\u5f52\u7684\u8fc7\u7a0b\u3002"),(0,r.kt)("p",null,"\u8c03\u7528 ",(0,r.kt)("strong",{parentName:"p"},"completeWork")," \u65b9\u6cd5\uff0c\u6765\u5904\u7406\u5f53\u524d\u7684 Fiber \u8282\u70b9\u3002"),(0,r.kt)("p",null,"\u5f53\u67d0\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber\u8282\u70b9")," \u6267\u884c\u5b8c ",(0,r.kt)("inlineCode",{parentName:"p"},"completeWork"),"\uff0c\u5982\u679c\u5176\u5b58\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5144\u5f1fFiber\u8282\u70b9"),"\uff08",(0,r.kt)("strong",{parentName:"p"},"fiber.sibling")," \u6307\u9488 \uff09\uff0c\u4f1a\u8fdb\u5165\u5176 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5144\u5f1fFiber")," \u7684 \u201c\u9012\u201d\u9636\u6bb5\u3002\u5982\u679c\u4e0d\u5b58\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5144\u5f1fFiber"),"\uff0c\u4f1a\u8fdb\u5165 ",(0,r.kt)("inlineCode",{parentName:"p"},"\u7236\u7ea7Fiber")," \u7684\u201c\u5f52\u201d\u9636\u6bb5\uff08",(0,r.kt)("strong",{parentName:"p"},"fiber.return")," \u6307\u9488\uff09\u3002"),(0,r.kt)("p",null,"\u5728\u6b64\u671f\u95f4\u4f1a\u5f62\u6210 effectList \u5355\u9879\u526f\u4f5c\u7528\u94fe\u8868\u3002\u5982\u679c\u662f\u521d\u6b21\u6e32\u67d3\u7684\u521d\u59cb\u5316\u6d41\u7a0b\uff0c\u4f1a\u521b\u5efa DOM \uff0c\u5bf9\u4e8e DOM \u5143\u7d20\u8fdb\u884c\u4e8b\u4ef6\u6536\u96c6\uff0c\u5904\u7406 style\uff0cclassName \u7b49\u5de5\u4f5c\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"completeUnitOfWork\n\u4f1a\u5c06 effectTag \u7684 Fiber \u8282\u70b9\u4f1a\u88ab\u4fdd\u5b58\u5728\u4e00\u6761\u88ab\u79f0\u4e3a effectList \u7684\u5355\u5411\u94fe\u8868\u4e2d\u3002\u5728 \u4e4b\u540e\u7684 commit \u9636\u6bb5\uff0c\u5c06\u4e0d\u518d\u9700\u8981\u904d\u5386\u6bcf\u4e00\u4e2a fiber \uff0c\u53ea\u9700\u8981\u6267\u884c\u66f4\u65b0 effectList \u5c31\u53ef\u4ee5\u4e86\u3002"),(0,r.kt)("li",{parentName:"ul"},"completeWork \u9636\u6bb5\n\u5bf9\u4e8e\u7ec4\u4ef6\uff0c\u4f1a\u5904\u7406 context \uff1b\n\u5bf9\u4e8e\u5143\u7d20\u6807\u7b7e\u521d\u59cb\u5316\uff0c\u4f1a\u521b\u5efa\u771f\u5b9e DOM \uff0c\u5c06\u5b50\u5b59 DOM \u8282\u70b9\u63d2\u5165\u521a\u751f\u6210\u7684 DOM \u8282\u70b9\u4e2d\uff1b\n\u4f1a\u89e6\u53d1 diffProperties \u5904\u7406 props \uff0c\u6bd4\u5982\u4e8b\u4ef6\u6536\u96c6\uff0cstyle\uff0cclassName \u5904\u7406\uff0c\u572815\u7ae0\u8bb2\u5230\u8fc7\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff083\uff09\u8fdb\u5165\u5faa\u73af")),(0,r.kt)("p",null,"\u201c\u9012\u201d\u548c\u201c\u5f52\u201d\u9636\u6bb5\u4f1a\u4ea4\u9519\u6267\u884c\uff0c\u76f4\u5230 \u201c\u5f52\u201d \u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"rootFiber")," \u6839\u7ed3\u70b9\u3002\u81f3\u6b64\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"render\u9636\u6bb5")," \u7684\u5de5\u4f5c\u5c31\u7ed3\u675f\u4e86\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6784\u6210\uff08\u8c03\u548c\uff09\u4e86\u7531 fiber\u8282\u70b9\u6784\u6210\u7684 work IN Progress Tree \u6811\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6784\u6210\u4e86\u63a5\u4e0b\u6765 commit \u9636\u6bb5\u9700\u8981\u6267\u884c\u66f4\u65b0\u7684 effectList \u526f\u4f5c\u7528\u94fe\u8868\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-08 00.27.04",src:n(8872).Z,width:"2130",height:"1850"})),(0,r.kt)("h4",{id:"3-\u6e32\u67d3\u9636\u6bb5"},"3 \u6e32\u67d3\u9636\u6bb5"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6e32\u67d3\u5668\u5de5\u4f5c\u7684\u9636\u6bb5\uff0c\u662f Renderer \u6e32\u67d3\u5668\u5728\u53c2\u4e0e\uff0c\u88ab\u79f0\u4e3a commit \u9636\u6bb5"),"\uff0c\u4e0b\u56fe\u4e2d\uff0ccommitRoot \u5c31\u662f commit \u9636\u6bb5\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220806232428977",src:n(5477).Z,width:"980",height:"420"})),(0,r.kt)("p",null,"\u672c\u6b21\u66f4\u65b0\u7531\u54ea\u4e9b\u7ec4\u4ef6\u9700\u8981\u66f4\u65b0\u89c6\u56fe\uff0c\u4f1a\u8ba9\u6e32\u67d3\u5668\u6765\u5206\u522b\u6267\u884c\u8fd9\u4e9b\u89c6\u56fe\u66f4\u65b0\u64cd\u4f5c\u3002"),(0,r.kt)("p",null,"\u6bcf\u4e00\u4e2a\u5b50\u9636\u6bb5\u90fd\u662f\u4e00\u4e2a while \u5faa\u73af\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u4ece\u5934\u5f00\u59cb")," \u904d\u5386\u526f\u4f5c\u7528\u94fe\u8868\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u89c6\u56fe\u66f4\u65b0\u64cd\u4f5c\uff1a\u5bf9 DOM \u8282\u70b9\u7684\u589e\u3001\u5220\u3001\u67e5\u3001\u6539\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u5668\u628a\u88ab\u6253\u4e86\u6807\u8bb0\u7684\u865a\u62df dom \u5bf9\u5e94\u7684\u771f\u5b9e dom \u8282\u70b9\u6267\u884c\u66f4\u65b0 dom \u7684\u64cd\u4f5c\u3002"),(0,r.kt)("li",{parentName:"ul"},"Mutation \u7a81\u53d8\uff0c\u5bf9\u4e8e\u6d4f\u89c8\u5668\u6765\u8bf4\uff0c\u5c31\u662f DOM \u64cd\u4f5c\u3002")),(0,r.kt)("p",null,"\u8be5\u9636\u6bb5\u89e6\u53d1\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u6709\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// before mutation \u9636\u6bb5\ngetSnapshotBeforeUpdate\n\n// mutation \u9636\u6bb5\ncomponentWillUnmount\n\n// layout \u9636\u6bb5\ncomponentDidMount\ncomponentDidUpdate\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff081\uff09mutation \u524d\u9636\u6bb5")),(0,r.kt)("p",null,"\u901a\u5e38\u88ab\u79f0\u4e4b\u4e3a before mutation \u9636\u6bb5\uff0c\u8c03\u7528\u51fd\u6570 ",(0,r.kt)("inlineCode",{parentName:"p"},"commitBeforeMutationEffects"),"\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"class \u7ec4\u4ef6"),"\u3002\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"getSnapshotBeforeUpdate")," \u751f\u547d\u5468\u671f\u51fd\u6570\u3002\u56e0\u4e3a Before mutation \u8fd8\u6ca1\u4fee\u6539\u771f\u5b9e\u7684 DOM \u6240\u4ee5\u6b64\u65f6\u7c7b\u7ec4\u4ef6\u53ef\u4ee5\u83b7\u5f97\u66f4\u65b0 DOM \u524d\u7684\u5feb\u7167\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u51fd\u6570\u7ec4\u4ef6"),"\u3002\u521b\u5efa\u5fae\u4efb\u52a1\uff0c\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"li"},"useEffect")," \u7684\u56de\u8c03\u51fd\u6570\u8bbe\u5b9a normal Scheduler Priority\uff0c\u7136\u540e\u7b49\u5f85 commit \u5b8c\u6210\u540e\uff0c\u518d ",(0,r.kt)("strong",{parentName:"li"},"\u5f02\u6b65\u6267\u884c"),"\u3002\u9632\u6b62\u540c\u6b65\u6267\u884c\u65f6\u963b\u585e\u6d4f\u89c8\u5668\u505a\u89c6\u56fe\u6e32\u67d3\uff08\u5982\u679c\u5bf9 dom \u64cd\u4f5c\uff0c\u5219\u53c8\u8981\u91cd\u534f\u8c03\uff09\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff082\uff09mutaiton \u9636\u6bb5")),(0,r.kt)("p",null,"\u901a\u5e38\u88ab\u79f0\u4e4b\u4e3a mutation \u9636\u6bb5\uff0c\u8c03\u7528\u51fd\u6570 ",(0,r.kt)("inlineCode",{parentName:"p"},"commitMutationEffects"),"\u3002"),(0,r.kt)("p",null,"\u904d\u5386\u5305\u542b EffectTag \u7684 fiber \u8282\u70b9\uff0c\u6240\u7ec4\u6210\u7684 effectList \u94fe\u8868\u3002\u5904\u7406\u6bcf\u4e00\u4e2a fiber \u8282\u70b9\u7684\u526f\u4f5c\u7528\uff0c\u8fd9\u4e9b\u526f\u4f5c\u7528\u6709\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"DOM \u76f8\u5173\u64cd\u4f5c"),"\uff1a\u589e\u5220\u6539\u3002Placement \u63d2\u5165\uff0cUpdate \u66f4\u65b0 DOM \u5c5e\u6027\uff0cDeletion \u5220\u9664\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"class \u7ec4\u4ef6"),"\u3002\u8c03\u7528 class \u7ec4\u4ef6 componentWillUnmount \u751f\u547d\u5468\u671f\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u51fd\u6570\u7ec4\u4ef6"),"\u3002\u6267\u884c useLayoutEffect \u7684\u9500\u6bc1\u51fd\u6570\uff0cuseLayoutEffect \u662f ",(0,r.kt)("strong",{parentName:"li"},"\u540c\u6b65\u6267\u884c")," \u7684\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Ref \u5c5e\u6027"),"\u3002\u89e3\u7ed1/\u66f4\u65b0 Ref \u5c5e\u6027\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff082.1\uff09\u66f4\u6539 current \u6307\u9488")),(0,r.kt)("p",null,"\u5728\u8fdb\u5165 layout \u8282\u70b9\u524d\uff0c\u4f1a\u6267\u884c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"root.current = finishedWork;\n")),(0,r.kt)("p",null,"\u8fd9\u5c31\u662f React \u67b6\u6784\u7684\u53cc\u7f13\u5b58\u673a\u5236\u4e2d\uff0cWork In Progress Fiber \u6811\u5b8c\u6210\u6e32\u67d3\uff0c\u6b64\u65f6 ",(0,r.kt)("inlineCode",{parentName:"p"},"fiberRoot.current")," \u6307\u9488\u4f1a\u4ece\u4e4b\u524d\u7684 current Fiber \u6811\uff0c\u6307\u5411\u73b0\u5728\u7684 Work In Progress Fiber \u6811\u3002\u6b64\u65f6\uff0cWork In Progress Fiber \u6811\uff0c\u5c31\u53d8\u6210\u4e86\u65b0\u7684 Current Fiber \u6811\u3002"),(0,r.kt)("p",null,"\u5728\u8be5\u5b9e\u9645\u89e6\u53d1\uff0c\u662f\u56e0\u4e3a\u5728 layout \u9636\u6bb5\u4f1a\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"componentDidMount")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"componentDidUpdate "),"\u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u6b64\u65f6\uff0cCurrent Fiber \u6811\u5df2\u7ecf\u6307\u5411\u4e86\u672c\u6b21\u5b8c\u6210\u7684 Work In Progress Fiber \u6811\uff0c\u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u4f1a\u5bf9\u65b0\u7684 Current Fiber \u6811\u8fdb\u884c\u64cd\u4f5c\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff083\uff09mutation \u540e\u9636\u6bb5")),(0,r.kt)("p",null,"\u901a\u5e38\u88ab\u79f0\u4e4b\u4e3a layout \u9636\u6bb5\uff0c\u8c03\u7528\u51fd\u6570 ",(0,r.kt)("inlineCode",{parentName:"p"},"commitLayoutEffects"),"\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u51fd\u6570\u7ec4\u4ef6"),"\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6267\u884c useLayoutEffect \u7684\u56de\u8c03\u51fd\u6570\uff0c\u662f ",(0,r.kt)("strong",{parentName:"li"},"\u540c\u6b65\u6267\u884c")," \u7684\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7ed1\u5b9a useEffect \u7684\u9500\u6bc1 + \u56de\u8c03\u51fd\u6570\uff0c\u4ee5\u4fbf\u5728 commit \u9636\u6bb5\u5b8c\u6210\u540e\uff0c",(0,r.kt)("strong",{parentName:"li"},"\u5f02\u6b65\u6267\u884c")," useEffect \u9500\u6bc1 + \u56de\u8c03\u51fd\u6570\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u7c7b\u7ec4\u4ef6"),"\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6839\u636e\u7ec4\u4ef6\u72b6\u6001\uff0c\u540c\u6b65\u6267\u884c\uff0c\u8c03\u7528 class \u751f\u547d\u5468\u671f\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"ComponentDidMount\uff08\u7ec4\u4ef6\u6302\u8f7d\uff09\u3001ComponentDidUpdate\uff08\u7ec4\u4ef6\u5378\u8f7d\uff09"))),(0,r.kt)("li",{parentName:"ul"},"\u540c\u6b65\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"this.setState(arg, callback)")," \u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"callback"),"\u56de\u8c03\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u5904\u7406 Ref \u5c5e\u6027\u3002")),(0,r.kt)("h3",{id:"\u95ee\u9898algebraic-effects"},"\u95ee\u9898\uff1aalgebraic effects"),(0,r.kt)("p",null,"Process \u8fdb\u7a0b\u3001Thread \u7ebf\u7a0b\u3001Coroutine \u534f\u7a0b\u3001Fiber \u7ea4\u7a0b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"JavaScript \u901a\u8fc7 Generator\uff0c\u5728\u534f\u7a0b\u5c42\u9762\u5b9e\u73b0\u4e86\u5f02\u6b65\u53ef\u4e2d\u65ad\u66f4\u65b0\u3002")),(0,r.kt)("p",null,"algebraic effects \u4ee3\u6570\u6548\u5e94\uff1a\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u4e2d\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u5c06\u526f\u4f5c\u7528\u4ece\u51fd\u6570\u8c03\u7528\u4e2d\u5206\u79bb\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/380855727"},"https://zhuanlan.zhihu.com/p/380855727"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6844903976299675662"},"https://juejin.cn/post/6844903976299675662"))))),(0,r.kt)("h4",{id:"algebraic-effects-\u7684\u7531\u6765"},"algebraic effects \u7684\u7531\u6765"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u5f02\u6b65\u7f16\u7a0b\u4e2d\uff0c\u5982\u679c\u60f3\u7528\u540c\u6b65\u7684\u601d\u7ef4\u7f16\u5199\u4ee3\u7801\uff0c\u5c31\u8981\u4f7f\u7528 async/await\u3002\u4f46 async \u51fd\u6570\u5177\u6709\u4f20\u67d3\u6027\uff0c\u8c03\u7528 async \u7684\u51fd\u6570\u4e5f\u5fc5\u987b\u8981\u7528 async \u5b9a\u4e49\u3002\u8fd9\u6837\u9010\u6e10\u4f20\u67d3\u51fa\u53bb\uff0c\u6240\u6709\u7684\u51fd\u6570\u90fd\u9700\u8981\u53d8\u6210\u5f02\u6b65\u51fd\u6570\uff0c\u9020\u6210\u4e86\u5927\u8303\u56f4\u5f71\u54cd\uff0c\u540c\u6b65\u5f02\u6b65\u4ee3\u7801\u4e5f\u4e0d\u6613\u533a\u5206\u3002")),(0,r.kt)("p",null,"\u65b0\u7684\u9700\u6c42\uff1a\u5728\u540c\u6b65\u4ee3\u7801\u4e2d\uff0c\u53ef\u4ee5\u8c03\u7528\u5f02\u6b65\u51fd\u6570\u5e76\u83b7\u5f97\u7ed3\u679c\u3002\u4f46\u4e0d\u5f71\u54cd\u540c\u6b65\u51fd\u6570\u7684\u903b\u8f91\uff08\u540c\u6b65\u51fd\u6570\u4e0d\u8981 async \u5b9a\u4e49\uff09"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"try/catch  + throw \u5177\u6709\u8df3\u51fa\u5f53\u524d\u4ee3\u7801\u5757\uff08throw \u533a\uff09\uff0c\u7136\u540e\u5192\u6ce1\u5230 try/catch \u88ab\u6355\u83b7\uff0c\u5728 catch \u7ee7\u7eed\u6267\u884c\u4ee3\u7801\u7684\u80fd\u529b\u3002")),(0,r.kt)("p",null,"\u65b0\u7684\u9700\u6c42\uff1aJs \u4e2d\uff0c\u5177\u6709\u4ece\u540c\u6b65\u4ee3\u7801\u8df3\u51fa\u7684\u903b\u8f91\uff0c\u5c31\u662f try/catch \u4e86\uff0c\u4f46\u53ea\u80fd\u4ece throw \u8df3\u51fa\u5230 catch\uff0c\u4e0d\u53ef\u4ee5\u518d\u643a\u5e26\u7ed3\u679c\u56de\u5230 throw \u4e2d\u3002\u6211\u4eec\u5982\u4f55\u5b9a\u4e49\u8fd9\u6837\u7684\u529f\u80fd\u5462\uff1f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6b64\u65f6\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u53ef\u4ee5\u5728 throw \u533a\u6682\u505c\u6267\u884c\uff0c\u4ece catch \u533a\u57df\u83b7\u53d6\u7b54\u6848\uff0c\u518d\u8df3\u56de throw \u5904\u7ee7\u7eed\u6267\u884c\u4ee3\u7801\u7684 \u201c\u5f02\u6b65\u201d \u80fd\u529b\u3002\u8fd9\u5c31\u662f\u8bb8\u591a\u6587\u7ae0\u4e2d\u8bf4\u7684\u5b9a\u4e49\u4e00\u4e2a\u8bed\u6cd5\uff1aperform\uff0ctry/handle\uff0cresume with\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"function getName(user) {\n  let name = user.name;\n  if (name === null) {\n    // 1. \u6211\u4eec\u5728\u8fd9\u91cc perform \u4e86\u4e00\u4e2a effect\uff1aname = perform 'ask_name';\n    name = perform 'ask_name';\n    // 4. \u2026\u2026 \u7136\u540e\u6700\u7ec8\u56de\u5230\u4e86\u8fd9\u91cc\uff08name \u73b0\u5728\u662f\u300cArya Stark\u300d\u4e86 \n  }\n  return name;\n}\n\nfunction makeFriends(user1, user2) {\n  user1.friendNames.add(getName(user2));\n  user2.friendNames.add(getName(user1));\n}\n\nconst arya = { name: null };\nconst gendry = { name: 'Gendry' };\n\ntry {\n  makeFriends(arya, gendry);\n} handle (effect) {\n  // 2. \u6211\u4eec\u8df3\u5230\u4e86handler\uff08\u5c31\u50cf try/catch\uff09\n  if (effect === 'ask_name') {\n    // 3. \u7136\u800c\u6211\u4eec\u53ef\u4ee5 resume with \u4e00\u4e2a\u503c\uff08\u8fd9\u5c31\u4e0d\u50cf try / catch \u4e86\uff01\uff09\n    resume with 'Arya Stark';\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7 perform + resume with \u5b9e\u73b0\u5bf9\u540e\u7eed\u6d41\u7a0b\u7684\u63a7\u5236\uff0c\u63a7\u5236\u53cd\u8f6c + \u63a7\u5236\u6062\u590d\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7 try/handle \u5b9e\u73b0\u8de8\u8c03\u7528\u6808\u6355\u83b7\u5f53\u524d continuation\uff08\u5ef6\u7eed\u2014\uff09\uff0c\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5c31\u662f\u8ba9\u540c\u6b65\u4ee3\u7801\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u4e0b\u53bb\u7684\u90a3\u4e2a\u503c\uff08name\uff09\u3002resume with \u53ef\u4ee5\u66ff\u6362 \u5f53\u524d\u7684 continuaiton\uff0c\u8ba9 perform \u5904\u6062\u590d\u6267\u884c\u3002")),(0,r.kt)("p",null,"\u9700\u6c42\u6ee1\u8db3\uff1a\u901a\u8fc7\u4e0a\u8ff0\u7684\u8bed\u6cd5\u7cd6\uff0c\u5b9e\u73b0\u4e86\u5728\u540c\u6b65\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570\u4f46\u4e0d\u5f71\u54cd\u540c\u6b65\u4ee3\u7801\u533a\u7684\u76ee\u7684\u3002"),(0,r.kt)("h4",{id:"algebraic-effects-\u89e3\u51b3\u7684\u95ee\u9898"},"Algebraic Effects \u89e3\u51b3\u7684\u95ee\u9898"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},'\u5206\u79bb\u4e86 "\u4e3b\u903b\u8f91\u505a\u4ec0\u4e48" \u548c "\u526f\u4f5c\u7528\u5b9e\u73b0"'),"\u3002"),(0,r.kt)("p",null,"\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4e3b\u903b\u8f91")," \u5c31\u662f getName \u51fd\u6570\u8981\u901a\u8fc7 user \u5bf9\u8c61\u83b7\u5f97\u5e76\u8fd4\u56de name\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u526f\u4f5c\u7528")," \u5c31\u662f\u5f53\u51fa\u73b0\u627e\u4e0d\u5230\u540d\u5b57\u65f6\uff0c\u901a\u8fc7 perform \u62ff\u5230\u4e00\u4e2a\u540d\u5b57\u3002")),(0,r.kt)("p",null,"\u6240\u4ee5\uff0c\u526f\u4f5c\u7528\u7684\u5b9e\u73b0\uff1aperform \u5904\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"ask_name")," \u6362\u6765\u4e86 resume with \u5904\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Arya Stark"),"\u3002\u5c31\u662f\u4ee3\u6570\u6548\u5e94\u9700\u8981\u89e3\u51b3\u7684\u6838\u5fc3\u95ee\u9898\u3002\u901a\u8fc7\u7a7f\u900f\u8c03\u7528\u6808\u7684\u6362\u5143\u6cd5\u5b9e\u73b0\u526f\u4f5c\u7528\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Algebraic: \u4ee3\u6570\u5f0f\uff0c\u53ef\u4ee5\u7406\u89e3\u6210\u521d\u4e2d\u6570\u5b66\u7684 ",(0,r.kt)("strong",{parentName:"li"},"\u6362\u5143\u6cd5"),"\u3002"),(0,r.kt)("li",{parentName:"ul"},"Effect\uff1a\u526f\u4f5c\u7528\u3002")),(0,r.kt)("p",null,"\u603b\u7ed3\u6765\u8bf4\uff0c\u4ee3\u6570\u6548\u5e94\u89e3\u51b3\u4e86 ",(0,r.kt)("strong",{parentName:"p"},'\u5206\u79bb\u4e86 "\u4e3b\u903b\u8f91\u505a\u4ec0\u4e48" \u548c "\u526f\u4f5c\u7528\u5b9e\u73b0"'),"\uff0c\u4e5f\u5c31\u662f\u786e\u4fdd\u4e3b\u903b\u8f91\u548c\u4ee3\u7801\u4e0d\u53d7\u5f71\u54cd\u7684\u60c5\u51b5\u4e0b\uff0c\u5b9e\u73b0\u526f\u4f5c\u7528\u3002\u8fd9\u9700\u8981\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u7a7f\u900f\u80fd\u529b\uff1a\u53ef\u4ee5\u8de8\u8c03\u7528\u6808\u83b7\u53d6\u5f53\u524d Continuation\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u6062\u590d\u6267\u884c\uff1a\u53ef\u4ee5\u66ff\u6362\u5f53\u524d Continuation \u5185 Effect \u7684\u5b9e\u73b0\u3002")),(0,r.kt)("h4",{id:"react-hooks-\u601d\u60f3"},"React Hooks \u601d\u60f3"),(0,r.kt)("p",null,"React Hooks \u7684\u4ee3\u7801\u793a\u4f8b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function useLog(id) { \n  useEffect(() => { \n    console.log(id, 'mount') \n    return () => { \n      console.log(id, 'unmount') \n    } \n  }, []) \n} \n \nfunction Foo() { \n  useLog('Example') \n  return <div>Foo</div> \n} \n \nfunction Bar() { \n  useLog('Bar') \n  return <div>Bar</div> \n} \n")),(0,r.kt)("p",null,"\u7a7f\u900f\u80fd\u529b\uff1a"),(0,r.kt)("p",null,"useHook \u5b9e\u73b0\u4e86\u7a7f\u900f\u8c03\u7528\u6808\u7684\u6548\u679c\u3002\u4e0d\u8bba hooks \u5982\u4f55\u5d4c\u5957\u5728\u4f5c\u7528\u57df\u4e2d\uff0c\u53ea\u8981\u4fdd\u8bc1\u662f\u540c\u6b65\u8c03\u7528 hooks\uff0c\u90fd\u80fd\u6b63\u786e\u4f5c\u7528\u4e8e\u5bf9\u5e94\u7ec4\u4ef6\u3002"),(0,r.kt)("p",null,"\u6bcf\u4e00\u4e2a Function Component \u770b\u4f5c\u662f React \u91cc\u7684 Continuation\uff0c\u5bf9 Continuation \u7684\u8c03\u5ea6\u662f\u4ea4\u7ed9 React Fiber \u63a7\u5236\u7684\uff0c\u4e5f\u5c31\u662f fiber \u5b9e\u73b0\u4e86\u4ee3\u6570\u6548\u5e94\u3002"),(0,r.kt)("p",null,"\u6062\u590d\u6267\u884c\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"useHook(callback)")," \u4e2d\uff0ccallback \u662f\u8be5\u7ec4\u4ef6\u526f\u4f5c\u7528\u7684\u5b9e\u73b0\uff0chook \u62bd\u8c61\u51fa\u4e86 React \u7ec4\u4ef6\u91cc\u7684\u526f\u4f5c\u7528\u3002\u8ba9\u7ec4\u4ef6\u5185\u7684\u4e3b\u903b\u8f91\u4e0d\u53d7\u5f71\u54cd\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898\u521d\u6b21\u6e32\u67d3--\u66f4\u65b0-\u7684\u533a\u522b"},"\u95ee\u9898\uff1a\u521d\u6b21\u6e32\u67d3 / \u66f4\u65b0 \u7684\u533a\u522b"),(0,r.kt)("h5",{id:"\u521d\u6b21\u6e32\u67d3"},"\u521d\u6b21\u6e32\u67d3"),(0,r.kt)("p",null,"\u521d\u6b21\u6e32\u67d3\u65f6\uff0c\u6ca1\u6709\u4e24\u9897\u76f8\u540c\u7684 fiber tree\u3002 FiberRootNode.current \u4f1a\u6307\u5411\u4e00\u4e2a\u5355\u72ec\u7684 RootFiberNode \u8282\u70b9\uff0c\u5176\u8282\u70b9\u4e0b\u6ca1\u6709\u4efb\u4f55\u5b50\u8282\u70b9\uff08\u5373",(0,r.kt)("inlineCode",{parentName:"p"},"current Fiber\u6811"),"\u4e3a\u7a7a\uff09\u3002"),(0,r.kt)("p",null,"\u4e8e\u6b64\u540c\u65f6\uff0c\u4f1a\u5728\u5185\u5b58\u4e2d\u6784\u5efa Work In Progress Fiber Tree\u3002WIP \u6811\u548c CUR \u6811\u7684 FiberNode \u8282\u70b9\u4f1a\u901a\u8fc7 .alternate \u76f8\u4e92\u6307\u5411\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-07 22.42.10",src:n(7991).Z,width:"2286",height:"1828"})),(0,r.kt)("p",null,"\u5f53 workInProgress \u6811\u6784\u5efa\u5b8c\u6210\u540e\uff0c\u4ee3\u7801\u4e2d\u79f0\u4e4b\u4e3a finishedTree\uff0c\u6b64\u65f6 ",(0,r.kt)("inlineCode",{parentName:"p"},".current")," \u6307\u9488\u6307\u5411 finishedTree\uff0c\u4f7f\u5176\u53d8\u4e3a current fiber tree\uff0c\u521d\u59cb\u5316\u6d41\u7a0b\u5728\u534f\u8c03\u9636\u6bb5\u7684\u4efb\u52a1\u5b8c\u6210\u3002"),(0,r.kt)("h5",{id:"\u66f4\u65b0-update"},"\u66f4\u65b0 Update"),(0,r.kt)("p",null,"\u57fa\u4e8e\u4e0a\u8ff0 tree\uff0c\u5f53\u7528\u6237\u70b9\u51fb\u4e00\u6b21\u6309\u94ae\uff0c\u53d1\u751f\u9875\u9762\u66f4\u65b0\u65f6\uff0c\u4f1a\u91cd\u65b0\u521b\u5efa\u4e00\u9897 workInProgress tree\u3002"),(0,r.kt)("p",null,"\u901a\u8fc7 diff \u7b97\u6cd5\uff0cworkInProgress tree \u4f1a\u51b3\u5b9a\u662f\u5426\u590d\u7528 current fiber tree \u540c\u4e00\u5c42\u7ea7\u7684 fiber \u8282\u70b9\u6570\u636e\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u80fd\u88ab\u590d\u7528\uff0c\u672c\u6b21\u66f4\u65b0\u4e2d\uff0c\u9700\u8981\u505a\u7ec4\u4ef6\u7684 update\u3001\u5143\u7d20\u7684 move \u548c update \u7b49\u64cd\u4f5c\uff1b"),(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u80fd\u590d\u7528\uff0c\u672c\u6b21\u66f4\u65b0\u4e2d\uff0c\u9700\u8981\u505a\u7ec4\u4ef6\u7684 mount \u548c umount\u3001\u5143\u7d20\u7684 insert \u548c delete \u7b49\u64cd\u4f5c\u3002")),(0,r.kt)("p",null,"\u5728\u6784\u5efa workInProgress Fiber \u6811\u65f6,  ",(0,r.kt)("strong",{parentName:"p"},"\u4f1a\u5c1d\u8bd5\u590d\u7528 current Fiber \u6811\u4e2d\u5df2\u6709\u7684 Fiber \u8282\u70b9\u5185\u7684\u5c5e\u6027"),"\u3002\u5728 ",(0,r.kt)("strong",{parentName:"p"},"\u9996\u5c4f\u6e32\u67d3")," \u65f6\uff0c\u53ea\u6709 rootFiber \u5b58\u5728\u5bf9\u5e94\u7684 current fiber\uff08\u5373 rootFiber.alternate\uff09\uff0c\u65e0\u6cd5\u590d\u7528\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5904\u4e8e\u540c\u4e00\u5c42\u6b21\u7684\u8282\u70b9\uff0c\u4f1a\u901a\u8fc7 .alternate \u5c5e\u6027\u76f8\u4e92\u6307\u5411\uff0cworkInProgress tree \u4e5f\u4f1a\u4f18\u5148\u590d\u7528 current fiber tree  \u5904\u5728\u540c\u4e00\u5c42\u6b21\u8282\u70b9\u7684\u5c5e\u6027\u3002"))),(0,r.kt)("p",null,"RootFiber \u5df2\u7ecf\u521b\u5efa\u4e0d\u9700\u8981\u590d\u5236\uff0c\u4f46\u5176\u5b50\u8282\u70b9\u7531\u4e8e\u5c1a\u4e0d\u5b58\u5728\uff0c \u5219 react \u9700\u8981\u91cd\u65b0\u521b\u5efa\u4e00\u4efd\uff0c\u548c current \u6811\u4e0a\u7684 fiber \u5efa\u7acb\u8d77 alternate \u5173\u8054\uff0c\u7136\u540e\u590d\u5236 current \u6811\u4e0a\u8282\u70b9\u7684\u5c5e\u6027\u3002\u6e32\u67d3\u5b8c\u6bd5\u540e\uff0cworkInProgresss \u518d\u6b21\u53d8\u6210 current \u6811\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-07 22.49.01",src:n(762).Z,width:"2502",height:"1458"})),(0,r.kt)("h5",{id:"\u518d\u6b21\u66f4\u65b0"},"\u518d\u6b21\u66f4\u65b0"),(0,r.kt)("p",null,"\u5982\u679c\u8fdb\u884c\u4e0b\u4e00\u6b21\u66f4\u65b0\uff0c\u90a3\u4e48\u4f1a\u5c06 current \u7684 alternate \u4f5c\u4e3a\u57fa\u7840\uff08\u5982\u56fe\u53f3\u6811\uff09\uff0c\u590d\u5236\u4e00\u4efd\u4f5c\u4e3a workInProgresss \uff0c\u7136\u540e\u8fdb\u884c\u66f4\u65b0\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6240\u8c13 \u201c\u590d\u5236\u201d\uff0c\u5177\u4f53\u662f\u6307\u5728\u6784\u5efa workInProgress Fiber \u6811\u65f6\u4f1a\u5c1d\u8bd5\u590d\u7528 current Fiber \u6811\u4e2d\u5df2\u6709\u7684 Fiber \u8282\u70b9\uff08.alternate \u53ef\u4ee5\u76f8\u4e92\u6307\u5411\u7684\uff0c\u540c\u4e00\u5c42\u6b21\u7684\u8282\u70b9\uff09\u5185\u7684\u5c5e\u6027\u3002\u800c\u51b3\u5b9a\u662f\u5426\u590d\u7528\u8fc7\u7a0b\uff0c\u5c31\u662f diff \u7b97\u6cd5\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7118259566868955167"},"https://juejin.cn/post/7118259566868955167")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/lizuncong/mini-react/blob/master/docs/render/%E6%B7%B1%E5%85%A5%E6%A6%82%E8%BF%B0%20React%E5%88%9D%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%8F%8A%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%E4%B8%BB%E6%B5%81%E7%A8%8B.md"},"https://github.com/lizuncong/mini-react/blob/master/docs/render/%E6%B7%B1%E5%85%A5%E6%A6%82%E8%BF%B0%20React%E5%88%9D%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%8F%8A%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%E4%B8%BB%E6%B5%81%E7%A8%8B.md")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://www.jianshu.com/p/6660d3ab0394"},"https://www.jianshu.com/p/6660d3ab0394"))),(0,r.kt)("h2",{id:"diff-\u76f8\u5173"},"diff \u76f8\u5173"),(0,r.kt)("h3",{id:"\u95ee\u9898\u4ec0\u4e48\u662f-virtual-dom"},"\u95ee\u9898\uff1a\u4ec0\u4e48\u662f virtual DOM"),(0,r.kt)("p",null,"\u4ece\u7ed3\u6784\u6765\u770b\uff1a\u865a\u62df DOM \u662f\u4e00\u4e2a JavaScript \u5bf9\u8c61\u3002\u5176\u4fdd\u5b58\u4e86\u6bcf\u4e00\u4e2a\u8282\u70b9\u7684 type\u3001props\u3001key\u3001ref\u3001children \u7b49\u4fe1\u606f\uff08\u5177\u4f53\u770b fiber \u7ed3\u6784\uff09\u3002"),(0,r.kt)("p",null,"\u4ece\u672c\u8d28\u6765\u770b\uff1a\u5728 React \u8fd0\u884c\u65f6\uff0c\u6709\u4e24\u9897 virtual DOM\uff08\u53cc\u7f13\u5b58\u673a\u5236\uff09\uff1acurrent fiber \u6811 + work in progress fiber \u6811\u3002\u5176\u662f\u7531\u4e8e fiber \u5bf9\u8c61\u6240\u7ec4\u6210\u7684\u3002"),(0,r.kt)("p",null,"\u4ece\u6765\u6e90\u6765\u770b\uff1a\u865a\u62df DOM \u662f\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"React.creatElement()")," \u521b\u5efa\u7684 React Element \u6784\u5efa\u7684 DOM \u6811\u3002"),(0,r.kt)("p",null,"\u5bf9\u6bd4\u771f\u5b9eDOM\u6765\u770b\uff1avirtual DOM\u8981\u6bd4\u771f\u5b9e DOM \u8f7b\u7684\u591a\uff0c\u5c11\u4e86\u5f88\u591a\u7528\u4e0d\u5230\u7684\u9ed8\u8ba4\u5c5e\u6027\u548c\u65b9\u6cd5\u3002"),(0,r.kt)("p",null,"\u6d4b\u8bd5\uff1a"),(0,r.kt)("p",null,"\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"React.createElement")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"document.createElement")," \u521b\u5efa\u8282\u70b9\u5e76\u6253\u5370\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const VDOM = React.createElement('div', {}, '\u5c0f\u675c\u675c');\nconst DOM = document.createElement(\"div\");\nDOM.innerHTML = '\u5c0f\u675c\u675c';\n\nconsole.log(`\u865a\u62dfDOM\uff1a`, VDOM);\nconsole.log(`\u771f\u5b9eDOM\uff1a`, DOM);\n")),(0,r.kt)("p",null,"\u7ed3\u679c\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1.png",src:n(8571).Z,width:"1166",height:"482"})),(0,r.kt)("p",null,"\u865a\u62df DOM \u662f\u4e00\u4e2a js \u5bf9\u8c61\uff0c\u800c\u771f\u5b9e DOM \u4e0a\u8fd8\u6302\u5728\u4e86\u8bb8\u591a\u9ed8\u8ba4\u5c5e\u6027\u548c\u65b9\u6cd5\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"2.png",src:n(5277).Z,width:"970",height:"730"})),(0,r.kt)("p",null,"\u865a\u62df DOM \u7684\u7ed3\u6784\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"type\uff1a\u5b9e\u9645\u7684\u6807\u7b7e"),(0,r.kt)("li",{parentName:"ul"},"props\uff1a\u6807\u7b7e\u5185\u90e8\u7684\u5c5e\u6027\uff08\u9664 ",(0,r.kt)("inlineCode",{parentName:"li"},"key")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"ref")," \uff0c\u4f1a\u5f62\u6210\u5355\u72ec\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"key")," \u540d\uff09"),(0,r.kt)("li",{parentName:"ul"},"children: \u4e3a\u8282\u70b9\u5185\u5bb9")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// \u8f6c\u5316\u524d\n<div className='Index'>\n  <div>Hello World 123</div>\n  <ul>\n    <li>React</li>\n    <li>Vue</li>\n  </ul>\n</div>\n\n// \u8f6c\u5316\u540e\n{\n  type: 'div',\n    props: { class: 'Index' },\n      children: [\n        {\n          type: 'div',\n          children: 'Hello World 123'\n        },\n        {\n          type: 'ul',\n          children: [\n            {\n              type: 'li',\n              children: 'React'\n            },\n            {\n              type: 'li',\n              children: 'Vue'\n            },\n          ]\n        }\n      ]\n}\n")),(0,r.kt)("h3",{id:"\u95ee\u9898virtual-dom-\u7684\u4f18\u52bf"},"\u95ee\u9898\uff1avirtual DOM \u7684\u4f18\u52bf"),(0,r.kt)("p",null,"\u4e3b\u8981\u6709\u4e09\uff1a\u63d0\u9ad8\u6548\u7387\u3001\u63d0\u5347\u6027\u80fd\u3001\u589e\u5f3a\u517c\u5bb9\u6027\u3002"),(0,r.kt)("h5",{id:"1-\u63d0\u9ad8\u6548\u7387"},"1. \u63d0\u9ad8\u6548\u7387"),(0,r.kt)("p",null,"\u4f7f\u7528\u539f\u751f JS \u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u7684\u5173\u6ce8\u70b9\u5728 ",(0,r.kt)("strong",{parentName:"p"},"\u64cd\u4f5cDOM")," \u4e0a\uff0c\u800c ",(0,r.kt)("inlineCode",{parentName:"p"},"React")," \u4f1a\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"virtual DOM")," \u6765\u786e\u4fdd ",(0,r.kt)("inlineCode",{parentName:"p"},"DOM")," \u7684\u5339\u914d\u3002\u7a0b\u5e8f\u5458\u53ea\u9700\u4f7f\u7528 JSX \u6765\u8fdb\u884c\u58f0\u660e\u5f0f\u7f16\u7a0b\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u7a0b\u5e8f\u5458\u4e0d\u9700\u5173\u7cfb dom \u662f\u5982\u4f55\u6784\u5efa / \u64cd\u4f5c / \u66f4\u65b0\u7684\uff0cReact \u4f1a\u5904\u7406\u4e00\u5207\uff0c\u800c\u53ea\u9700\u8981\u5173\u7cfb\u4e1a\u52a1\u903b\u8f91\u3002"),(0,r.kt)("h5",{id:"2-\u63d0\u5347\u6027\u80fd"},"2. \u63d0\u5347\u6027\u80fd"),(0,r.kt)("p",null,"\u865a\u62df DOM \u901a\u8fc7 diff \u7b97\u6cd5 + \u57fa\u4e8e\u53cc\u7f13\u5b58\u7684\u6279\u91cf\u5904\u7406\u673a\u5236\uff0c\u4f18\u5316\u4e86\u6bcf\u6b21\u66f4\u65b0\u771f\u5b9e DOM \u5f97\u64cd\u4f5c\uff0c\u4f7f\u66f4\u65b0\u5c3d\u53ef\u80fd\u7684\u5c40\u90e8\u3001\u6539\u52a8\u5c3d\u53ef\u80fd\u7684\u5c11\uff0c\u4ece\u800c\u51cf\u5c11\u5bf9\u771f\u5b9e DOM \u7684\u64cd\u4f5c\uff0c\u6700\u7ec8\u63d0\u5347\u6027\u80fd\u3002"),(0,r.kt)("h5",{id:"3-\u589e\u5f3a\u517c\u5bb9\u6027"},"3. \u589e\u5f3a\u517c\u5bb9\u6027"),(0,r.kt)("p",null,"\u57fa\u4e8e virtual DOM\uff0c\u8ba9 React \u53ef\u4ee5\u517c\u5bb9\u5404\u79cd\u6d4f\u89c8\u5668\uff0c\u751a\u81f3\u8de8\u5e73\u53f0\u517c\u5bb9\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"React")," \u57fa\u4e8e\u865a\u62df DOM \u5b9e\u73b0\u4e86\u4e00\u5957\u81ea\u5df1\u7684\u4e8b\u4ef6\u673a\u5236\uff0c\u5e76\u4e14\u6a21\u62df\u4e86\u4e8b\u4ef6\u5192\u6ce1\u548c\u6355\u83b7\u7684\u8fc7\u7a0b\uff0c\u91c7\u53d6 ",(0,r.kt)("strong",{parentName:"li"},"\u4e8b\u4ef6\u4ee3\u7406"),"\u3001",(0,r.kt)("strong",{parentName:"li"},"\u6279\u91cf\u66f4\u65b0")," \u7b49\u65b9\u6cd5\uff0c\u4ece\u800c\u78e8\u5e73\u4e86\u5404\u4e2a\u6d4f\u89c8\u5668\u7684\u4e8b\u4ef6\u517c\u5bb9\u6027\u95ee\u9898\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u8de8\u5e73\u53f0\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"React")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"React Native")," \u90fd\u662f\u6839\u636e ",(0,r.kt)("strong",{parentName:"li"},"\u865a\u62dfDOM")," \u6e32\u67d3\u51fa\u76f8\u5e94\u5e73\u53f0\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"UI")," \u5c42\uff0c\u53ea\u4e0d\u8fc7\u4e0d\u540c\u7684\u5e73\u53f0\u6709\u4e0d\u540c\u7684\u6e32\u67d3\u5f15\u64ce\u800c\u5df2\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://juejin.cn/post/7116326409961734152"},"https://juejin.cn/post/7116326409961734152")))),(0,r.kt)("h3",{id:"\u95ee\u9898diff-\u539f\u7406"},"\u95ee\u9898\uff1adiff \u539f\u7406"),(0,r.kt)("h5",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,r.kt)("p",null,"\u4ece React \u7684\u8fd0\u884c\u539f\u7406\u6765\u8bf4\uff0cReact diff \u662f\u534f\u8c03\uff08",(0,r.kt)("strong",{parentName:"p"},"reconciliation"),"\uff09\u9636\u6bb5\u7684\u4e3b\u8981\u4efb\u52a1\uff0c\u534f\u8c03\u9636\u6bb5\u4e5f\u79f0 render \u9636\u6bb5\u3002React diff \u4f1a\u8ba1\u7b97\u51fa Virtual DOM \u4e2d\u771f\u6b63\u53d8\u5316\u7684\u90e8\u5206\uff0c\u5e76\u6784\u5efa\u597d\u4e00\u9897 Work In Progress Fiber Tree \u548c\u4e00\u4e2a EffectList \u5355\u9879\u7b26\u4f5c\u7528\u94fe\u8868\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u6307\u540d\u54ea\u4e9b\u8282\u70b9\u9700\u8981\u88ab\u66f4\u65b0"),"\u3002\u5728\u6e32\u67d3\u9636\u6bb5\uff08commit \u9636\u6bb5\uff09\uff0cReact \u4f1a\u53ea\u9488\u5bf9 effectList \u4e0a\u7684 fiber \u8282\u70b9\u8fdb\u884c DOM \u64cd\u4f5c\uff0c\u800c\u4e0d\u662f\u5bf9\u6574\u4e2a\u9875\u9762\uff08\u6811\uff09\u8fdb\u884c\u91cd\u65b0\u6e32\u67d3\u3002"),(0,r.kt)("p",null,"\u4f20\u7edf diff \u7b97\u6cd5\u4f7f\u7528\u5faa\u73af\u9012\u5f52\u5bf9\u8282\u70b9\u4e00\u6b21\u5bf9\u6bd4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a ",(0,r.kt)("em",{parentName:"p"},"O(n^3)")," \u3002React \u6539\u8fdb\u540e\u5c06\u65f6\u95f4\u590d\u6742\u5ea6\u964d\u4e3a ",(0,r.kt)("em",{parentName:"p"},"O(n)"),"\u3002"),(0,r.kt)("p",null,"React diff \u7684\u7b56\u7565\u6709\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Web UI \u4e2d DOM \u8282\u70b9\u8de8\u5c42\u7ea7\u7684\u79fb\u52a8\u64cd\u4f5c\u7279\u522b\u5c11\uff0c\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u62e5\u6709\u76f8\u540c\u7c7b\u7684\u4e24\u4e2a\u7ec4\u4ef6\u5c06\u4f1a\u751f\u6210\u76f8\u4f3c\u7684\u6811\u5f62\u7ed3\u6784\uff0c\u62e5\u6709\u4e0d\u540c\u7c7b\u7684\u4e24\u4e2a\u7ec4\u4ef6\u5c06\u4f1a\u751f\u6210\u4e0d\u540c\u7684\u6811\u5f62\u7ed3\u6784\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5bf9\u4e8e\u540c\u4e00\u5c42\u7ea7\u7684\u4e00\u7ec4\u5b50\u8282\u70b9\uff0c\u5b83\u4eec\u53ef\u4ee5\u901a\u8fc7\u552f\u4e00 id \u8fdb\u884c\u533a\u5206\u3002")),(0,r.kt)("p",null,"\u57fa\u4e8e\u4ee5\u4e0a\u4e09\u4e2a\u524d\u63d0\u7b56\u7565\uff0cReact \u5206\u522b\u5bf9 tree diff\u3001component diff \u4ee5\u53ca element diff \u8fdb\u884c\u7b97\u6cd5\u4f18\u5316\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"tree diff\u3001component diff\u3001element diff")),(0,r.kt)("h5",{id:"tree-diff"},"tree diff"),(0,r.kt)("p",null,"\u57fa\u4e8e\u7b56\u7565\u4e00\uff0cReact \u5bf9\u6811\u7684 diff \u7b97\u6cd5\u8fdb\u884c\u4f18\u5316\uff0c\u5373\u4e24\u68f5\u6811\u53ea\u4f1a\u5bf9\u540c\u4e00\u5c42\u6b21\u7684\u8282\u70b9\u8fdb\u884c\u6bd4\u8f83\uff0c\u800c\u4e0d\u8003\u8651\u8de8\u7b49\u6b21\u7684\u8282\u70b9\u6bd4\u8f83\u3002\u800c\u5728\u521d\u6b21\u6784\u5efa fiber tree \u65f6\uff0c\u57fa\u4e8e\u53cc\u7f13\u5b58\u7684\u601d\u60f3\uff0c\u5df2\u7ecf\u6784\u5efa\u597d\u4e86 work in progress fiber tree \u548c current fiber tree\uff0c\u4e14\u4e24\u68f5\u6811\u7684\u7edf\u4e00\u5c42\u7ea7\u7684 fiber \u8282\u70b9\u4f1a\u7528 fiber.alternate \u76f8\u4e92\u8fde\u63a5\u3002\u8fd9\u6837\u5bf9\u4e00\u68f5\u6811\u53ea\u9700\u904d\u5386\u4e00\u6b21\uff0c\u4fbf\u80fd\u5b8c\u6210\u6574\u4e2a DOM \u6811\u7684\u6bd4\u8f83\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u8de8\u5c42\u7ea7\u79fb\u52a8\u64cd\u4f5c\u7684\u5904\u7406"),"\u3002React \u5bf9\u8282\u70b9\u8de8\u5c42\u7ea7\u7684\u79fb\u52a8\u64cd\u4f5c\u4e0d\u4f1a diff \u6bd4\u8f83\uff0c\u53ea\u6709\u9500\u6bc1\u65e7\u8282\u70b9\u548c\u91cd\u65b0\u521b\u5efa\u3002\u6240\u4ee5\u901a\u8fc7\u540c\u5c42\u904d\u5386\uff0cReact \u53d1\u73b0\u540c\u7ea7\u8282\u70b9\u5df2\u7ecf\u53d1\u751f\u53d8\u5316\uff0c\u5219\u4f1a\u628a\u8be5\u8282\u70b9\u548c\u5176\u5b50\u8282\u70b9\u5168\u90e8\u9500\u6bc1\uff0c\u7136\u540e\u91cd\u65b0\u521b\u5efa\u65b0\u8282\u70b9\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\ud83d\ude80 \u6027\u80fd\u4f18\u5316"),"\uff1a\u5728\u9875\u9762\u4e2d\u4f7f\u7528 antd \u7684 model \u6a21\u6001\u6846\u65f6\uff0c\u5c3d\u53ef\u80fd\u4e0d\u8981\u79fb\u9664\u8be5\u8282\u70b9\uff0c\u800c\u662f\u4f7f\u7528 css \u9690\u85cf\u6389\u3002"),(0,r.kt)("h5",{id:"component-diff"},"component diff"),(0,r.kt)("p",null,"React \u662f\u57fa\u4e8e\u7ec4\u4ef6\u6784\u5efa\u5e94\u7528\u7684\uff0cdiff \u7b97\u6cd5\u4f1a\u5728\u7ec4\u4ef6\u95f4\u4e5f\u6709\u4f18\u5316\uff0c\u57fa\u4e8e\u7b56\u7565 2\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u662f\u4e0d\u540c\u7c7b\u578b\u7684\u7ec4\u4ef6\u8fdb\u884c diff\uff0c\u548c \u201c\u8de8\u5c42\u7ea7\u7684\u79fb\u52a8\u64cd\u4f5c\u201d \u4e00\u6837\uff0c\u4f1a\u76f4\u63a5\u9500\u6bc1\u6574\u4e2a\u65e7\u7ec4\u4ef6\uff0c\u91cd\u65b0\u521b\u5efa\u65b0\u7ec4\u4ef6\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u662f\u540c\u4e00\u7c7b\u578b\u7684\u7ec4\u4ef6\u8fdb\u884c diff\uff0c\u5219 DOM \u7ed3\u6784\u5927\u81f4\u76f8\u4f3c\uff0c\u4f1a\u6309\u7167 tree diff \u7b97\u6cd5\u8fdb\u884c\u6bd4\u8f83\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\ud83d\ude80 \u6027\u80fd\u4f18\u5316"),"\uff1a\u5982\u679c\u662f\u540c\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u672c\u6b21\u66f4\u65b0\u65f6 Virtual DOM \u6ca1\u6709\u4efb\u4f55\u53d8\u5316\uff08props\u3001state \u4e5f\u6ca1\u6709\u53d8\u5316\uff09\uff0c\u90a3\u4e48\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6027\u80fd\u4f18\u5316\u544a\u77e5 React \uff0cdiff \u4f1a\u8df3\u8fc7\u8be5\u7ec4\u4ef6\u7684\u5bf9\u6bd4\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e class \u7ec4\u4ef6\u6765\u8bf4\uff0c\u901a\u8fc7 shouldComponentUpdate + shallowEqual\uff0c\u6216\u76f4\u63a5\u4f7f\u7528 PureComponent\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e function \u7ec4\u4ef6\u6765\u8bf4\uff0c\u901a\u8fc7 React.memo \u5305\u88f9\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"shouldComponentUpdate")," "),(0,r.kt)("p",{parentName:"blockquote"},"render \uff08\u8c03\u5408\uff09\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u3002",(0,r.kt)("strong",{parentName:"p"},"\u7528\u4e8e\u62e6\u622a\u7ec4\u4ef6\u6e32\u67d3"),"\u3002"),(0,r.kt)("ol",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ol"},"\u7236\u7ec4\u4ef6\u66f4\u65b0\uff0c\u5b50\u7ec4\u4ef6\u5fc5\u987b\u66f4\u65b0\u3002")),(0,r.kt)("p",{parentName:"blockquote"},"\u5f53\u4f7f\u7528component\u65f6\uff0c\u7236\u7ec4\u4ef6\u7684state\u6216prop\u66f4\u65b0\u65f6\uff0c\u65e0\u8bba\u5b50\u7ec4\u4ef6\u7684state\u3001prop\u662f\u5426\u66f4\u65b0\uff0c\u90fd\u4f1a\u89e6\u53d1\u5b50\u7ec4\u4ef6\u7684\u66f4\u65b0\uff0c\u8fd9\u4f1a\u5f62\u6210\u5f88\u591a\u6ca1\u5fc5\u8981\u7684render\uff0c\u6d6a\u8d39\u5f88\u591a\u6027\u80fd\u3002"),(0,r.kt)("ol",{parentName:"blockquote",start:2},(0,r.kt)("li",{parentName:"ol"},"shallowEqual \u53ef\u4ee5\u6d45\u5bf9\u6bd4\u7ec4\u4ef6\u7684 props \u548c state \u662f\u5426\u53d1\u751f\u53d8\u5316\uff0c\u4ece\u800c\u907f\u514d\u65e0\u610f\u4e49\u7684 render\u3002")),(0,r.kt)("p",{parentName:"blockquote"},"\u5728 shouldComponentUpdate \u4e2d\uff0c\u4f7f\u7528 shallowEqual \u6bd4\u8f83\u7ec4\u4ef6\u7684 props \u548c state \u662f\u5426\u53d1\u751f\u53d8\u5316\uff0c\u6700\u540e\u8fd4\u56de true \u7684\u65f6\u5019\uff0c\u5f53\u524d\u7ec4\u4ef6\u8fdb\u884c render\uff1b\u8fd4\u56de false \u5219\u4e0d\u8fdb\u884c render\u3002"),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"PureComponent / React.memo")),(0,r.kt)("p",{parentName:"blockquote"},"PureComponent \u662f\u9488\u5bf9\u7c7b\u7ec4\u4ef6\u7684\u8bed\u6cd5\u7cd6\uff0c\u800c React.memo \u8ba9\u51fd\u6570\u7ec4\u4ef6\u4e5f\u53ef\u4ee5\u4f7f\u7528\uff0c\u901a\u8fc7 React.memo \u5305\u88f9\u51fd\u6570\u7ec4\u4ef6\uff0c\u56de\u8fd4\u56de\u4e00\u4e2a\u9ad8\u9636\u7ec4\u4ef6\u3002"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"\u53e6\uff1a\u51fd\u6570\u7ec4\u4ef6\u6ca1\u6709 shouldComponentUpdate \u5468\u671f\u3002")),(0,r.kt)("p",{parentName:"blockquote"},"React \u7ed9\u51fa\u4e86\u5b98\u65b9\u7684\u5b9a\u4e49\uff1a\u4f7f\u7528 PureComponent \u5b9a\u4e49\u7ec4\u4ef6\u3002\u53ef\u4ee5\u5b8c\u6210\u4e0a\u8ff0 2 \u7684\u64cd\u4f5c\u3002PureComponent \u4f1a\u5728 shouldComponentUpdate \u5468\u671f\u8fdb\u884c\u4e00\u6b21 shallowEqual \u6d45\u5bf9\u6bd4\uff0c\u4ece\u800c\u5c3d\u53ef\u80fd\u907f\u514d render\u3002")),(0,r.kt)("h5",{id:"element-diff"},"element diff"),(0,r.kt)("p",null,"\u5f53 fiber \u8282\u70b9\u5904\u4e8e\u540c\u4e00\u5c42\u7ea7\u65f6\uff0cReact diff \u63d0\u4f9b\u4e86\u4e09\u79cd\u8282\u70b9\u64cd\u4f5c\uff0c\u5206\u522b\u4e3a\uff1a",(0,r.kt)("strong",{parentName:"p"},"INSERT_MARKUP"),"\uff08\u63d2\u5165\uff09\u3001",(0,r.kt)("strong",{parentName:"p"},"MOVE_EXISTING"),"\uff08\u79fb\u52a8\uff09\u548c ",(0,r.kt)("strong",{parentName:"p"},"REMOVE_NODE"),"\uff08\u5220\u9664\uff09\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u63d2\u5165"),"\uff1a\u5f53\u524d\u8282\u70b9\u6240\u5728\u7684\u7ec4\u4ef6\uff0c\u4e0d\u5728\u539f\u6765\u7684\u96c6\u5408\u4e2d\u5b58\u5728\uff0c\u5373\u662f\u5168\u65b0\u7684\u8282\u70b9\uff0c\u6267\u884c\u63d2\u5165\u64cd\u4f5c\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u79fb\u52a8"),"\uff1a\u5f53\u524d\u8282\u70b9\u6240\u5728\u7684\u7ec4\u4ef6\uff0c\u5b58\u5728\u4e8e\u539f\u6765\u7684\u96c6\u5408\u4e2d\uff0c\u4e14\u8282\u70b9\u5185\u53ef\u66f4\u65b0\uff08 DOM \u7ed3\u6784\u76f8\u4f3c\u7b49\u9012\u5f52\u5224\u65ad\uff09\uff0c\u5219\u6839\u636e React \u552f\u4e00 key \u8fdb\u884c\u533a\u5206\uff0c\u5e76\u4e14\u6267\u884c\u79fb\u52a8\u64cd\u4f5c\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982\uff1a(A,B,C,D) \u2192 (A,D,B,C)\uff0c\u4f20\u7edf diff \u4f1a\u628a B,C,D \u5168\u90e8\u9500\u6bc1\u5e76\u91cd\u65b0\u521b\u5efa\uff0c\u800c React \u4ec5\u79fb\u52a8\u4f4d\u7f6e\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5220\u9664"),"\uff1a\u5f53\u524d\u8282\u70b9\u7684\u6240\u5728\u7ec4\u4ef6\u867d\u7136\u5b58\u5728\u5728\u539f\u6765\u7684\u96c6\u5408\u4e2d\uff0c\u4f46\u8282\u70b9\u4e0d\u80fd\u76f4\u63a5\u590d\u7528\u548c\u66f4\u65b0\uff0c\u6240\u4ee5\u9700\u8981\u5220\u9664\u65e7\u8282\u70b9\u3002\u6216\u65e7\u8282\u70b9\u5df2\u7ecf\u4e0d\u518d\u9700\u8981\uff0c\u6267\u884c\u9500\u6bc1\u3002")),(0,r.kt)("p",null,"\u8282\u70b9\u95f4\u7684\u79fb\u52a8\u7b56\u7565\uff0c\u662f\u901a\u8fc7\u8282\u70b9\u4e0b\u6807 lastIndex/_mountIndex \u5224\u65ad\uff0c\u8fd9\u91cc\u4e0d\u7ec6\u8bf4\u4e86\u3002"),(0,r.kt)("p",null,"\u53ef\u5426\u590d\u7528\u7684\u539f\u5219\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c key \u672a\u5b9a\u4e49\uff0c\u5219\u9ed8\u8ba4 key = null\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u66f4\u65b0\u540e\uff0c\u5224\u65ad key \u662f\u5426\u6539\u53d8\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"key \u6539\u53d8\uff0c\u4e0d\u80fd\u590d\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"key \u6ca1\u6539\u53d8\uff0c\u7ee7\u7eed\u5224\u65ad type \u662f\u5426\u6539\u53d8\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"type \u6539\u53d8\uff0c\u4e0d\u80fd\u590d\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"type \u6ca1\u53d8\uff0c\u5f53\u524d\u8282\u70b9\u53ef\u4ee5\u590d\u7528\u3002\u9700\u8981\u5224\u65ad\u5176 children \u4e0b\u7684\u8282\u70b9\u662f\u5426\u9700\u8981\u66f4\u65b0\u3002")))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\ud83d\ude80 \u6027\u80fd\u4f18\u5316"),"\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5bf9\u540c\u4e00\u5c42\u7ea7\u7684\u4e00\u7ec4\u5b50\u8282\u70b9\uff0c\u53ef\u4ee5\u7ed9\u5b83\u4eec\u6dfb\u52a0\u552f\u4e00\u7684 key \u8fdb\u884c\u533a\u5206\uff0c\u5219 React \u53ef\u4ee5\u5728\u66f4\u65b0\u524d\u540e\u901a\u8fc7 key \u53bb\u5224\u65ad\u8be5\u8282\u70b9\u53ca\u5176\u5b50\u8282\u70b9\u662f\u5426\u53d1\u751f\u66f4\u65b0\uff0c\u63d0\u5347\u6027\u80fd\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5c3d\u53ef\u80fd\u4fdd\u6301 DOM \u7ed3\u6784\u7a33\u5b9a\uff0c\u51cf\u5c11\u5927\u91cf\u79fb\u52a8\u540c\u7ea7\u8282\u70b9\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u4ece\u961f\u5934\u63d2\u5165\u65b0\u8282\u70b9 / \u5c06\u5bf9\u5c3e\u5df4\u7684\u8282\u70b9\u79fb\u52a8\u5230\u961f\u5934\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u53c2\u8003\uff1a"),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7116326409961734152"},"https://juejin.cn/post/7116326409961734152")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6844903944796258317"},"https://juejin.cn/post/6844903944796258317")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/20346379"},"https://zhuanlan.zhihu.com/p/20346379")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/book/6945998773818490884/section/6959807335720026150"},"https://juejin.cn/book/6945998773818490884/section/6959807335720026150"))),(0,r.kt)("h3",{id:"\u95ee\u9898\u53cc\u7f13\u5b58\u6a21\u578b"},"\u95ee\u9898\uff1a\u53cc\u7f13\u5b58\u6a21\u578b"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4ea7\u751f\u539f\u56e0"),"\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u53cc\u7f13\u5b58\u6a21\u578b\u662f\u4e00\u4e2a\u89e3\u51b3\u56fe\u5f62\u7f16\u7a0b\u4e2d \u201c",(0,r.kt)("strong",{parentName:"li"},"\u95ea\u70c1\u95ee\u9898"),"\u201d \u7684\u65b9\u6848\u3002\u5176\u57fa\u672c\u539f\u7406\u662f\u5728\u5185\u5b58\u4e2d\u7ed8\u5236\u5f53\u524d\u5e27\uff0c\u7ed8\u5236\u5b8c\u6bd5\u540e\u76f4\u63a5\u7528\u5f53\u524d\u5e27\u66ff\u6362\u4e0a\u4e00\u5e27\uff0c\u7531\u4e8e\u7701\u6389\u4e86\u5e27\u4e0e\u5e27\u4e4b\u95f4\u66ff\u6362\u7684\u65f6\u95f4\u56e0\u6b64\u53ef\u4ee5\u6709\u6548\u7684\u907f\u514d\u95ea\u70c1\u95ee\u9898\u3002 "),(0,r.kt)("li",{parentName:"ol"},"react 15+ \u7684\u65b0\u67b6\u6784\uff0c\u534f\u8c03\u9636\u6bb5\u7684\u5f02\u6b65\u53ef\u4e2d\u65ad\u3002\u901a\u8fc7\u53cc\u7f13\u5b58\uff0c\u5f53\u66f4\u9ad8\u4f18\u4efb\u52a1\u6765\u5230\uff0c\u9700\u8981\u4e2d\u65ad\u5f53\u524d diff \u7684\u6811\u65f6\uff0c\u7531\u4e8e\u5b58\u5728 current fiber tree \u6b63\u5e38\u5de5\u4f5c\u3002\u6240\u4ee5 workInProgress fiber tree \u7684\u4e2d\u65ad\u5e76\u91cd\u65b0\u6784\u5efa\uff0c\u4e0d\u4f1a\u5f71\u54cd\u9875\u9762\u7684\u6b63\u5e38\u5c55\u793a\uff0c\u5bf9\u7528\u6237\u900f\u660e\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u65bd\u9636\u6bb5"),"\uff1a\u5728\u534f\u8c03\u9636\u6bb5\uff0creact \u901a\u8fc7 \u53cc\u7f13\u5b58\u673a\u5236\u8f93\u51fa\u4e24\u9897 fiber tree\uff08work in progress fiber tree \u5185\u5b58\u4e2d\u7684\u6811\uff0ccurrent fiber tree \u6e32\u67d3\u6811\uff09\u3002\u8fd9\u4e24\u68f5\u6811\u4e2d\uff0c\u540c\u7ea7\u8282\u70b9\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"fiber.alternate")," \u6307\u9488\u76f8\u4e92\u8fde\u63a5\u3002current fiber tree \u4ee3\u8868\u4e86\u9875\u9762\u6b63\u5728\u5c55\u793a\u7684 DOM \u5185\u5bb9\uff0c\u800c work in progress fiber tree \u662f\u5185\u5b58\u4e2d react \u6b63\u5728\u6784\u5efa\u7684 fiber tree\uff0c\u662f\u672c\u6b21\u66f4\u65b0\u4e4b\u540e\u9875\u9762\u5c55\u793a\u7684 DOM \u5185\u5bb9\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u65bd\u8fc7\u7a0b"),"\uff1a\u5f53\u89e6\u53d1\u66f4\u65b0\u65f6\uff0creact \u4f1a\u901a\u8fc7 diff \u7b97\u6cd5\uff08\u5b98\u65b9\u79f0 Reconciliation\uff09\u5bf9\u6bd4 current fiber tree\uff0c\u6784\u5efa\u4e00\u9897 work in progress fiber tree\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u6784\u5efa workInProgress Fiber \u6811\u65f6,  ",(0,r.kt)("strong",{parentName:"li"},"\u4f1a\u5c1d\u8bd5\u590d\u7528 current Fiber \u6811\u4e2d\u5df2\u6709\u7684 Fiber \u8282\u70b9\u5185\u7684\u5c5e\u6027"),"\u3002\u5728 ",(0,r.kt)("strong",{parentName:"li"},"\u9996\u5c4f\u6e32\u67d3")," \u65f6\uff0c\u53ea\u6709 rootFiber \u5b58\u5728\u5bf9\u5e94\u7684 current fiber\uff08\u5373 rootFiber.alternate\uff09\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u66f4\u591a\u89c1\u95ee\u9898\uff1a\u521d\u6b21\u6e32\u67d3 / \u66f4\u65b0\u7684\u533a\u522b\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u5f15\u5165\u534f\u8c03\u9636\u6bb5\u7684\u5de5\u4f5c\u5185\u5bb9\uff1a\u6df1\u5ea6\u904d\u5386\u4f18\u5148\u3001\u9012\u9636\u6bb5\u3001\u5f52\u9636\u6bb5\u3001\u6784\u5efa effectList \u526f\u4f5c\u7528\u94fe\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u9636\u6bb5\uff1a\u5728\u4e0b\u4e00\u6b21\u6e32\u67d3\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u590d\u7528\u7f13\u5b58\u6811\u505a\u4e3a\u4e0b\u4e00\u6b21\u6e32\u67d3\u6811\uff0c\u4e0a\u4e00\u6b21\u7684\u6e32\u67d3\u6811\u53c8\u4f5c\u4e3a\u7f13\u5b58\u6811\uff0c\u8fd9\u6837\u53ef\u4ee5\u9632\u6b62\u53ea\u7528\u4e00\u9897\u6811\u66f4\u65b0\u72b6\u6001\u7684\u4e22\u5931\u7684\u60c5\u51b5\uff0c\u53c8\u52a0\u5feb\u4e86 DOM \u8282\u70b9\u7684\u66ff\u6362\u4e0e\u66f4\u65b0\u3002")),(0,r.kt)("p",null,"\u603b\u7ed3\uff1a\u4e00\u4e2a\u5143\u7d20\u6700\u591a\u5b58\u5728\u4e24\u4e2a\u7248\u672c\u7684 fiber \u8282\u70b9\uff0c\u4e00\u4e2a current \u7248\u672c\u548c\u5f53\u524d\u6d4f\u89c8\u5668\u9875\u9762\u5bf9\u5e94\uff0c\u4e00\u4e2a WorkInProgress \u7248\u672c\uff0cWorkInProgress \u7248\u672c\u662f\u6b63\u5728\u534f\u8c03\u7684\u8282\u70b9\u3002"),(0,r.kt)("h2",{id:"fiber"},"Fiber"),(0,r.kt)("h3",{id:"\u95ee\u98981-\u4e3a\u4ec0\u4e48\u8981\u5f15\u5165-fiber-\u67b6\u6784"},"\u95ee\u98981 \u4e3a\u4ec0\u4e48\u8981\u5f15\u5165 Fiber \u67b6\u6784\uff1f"),(0,r.kt)("p",null,"fiber \u662f\u9488\u5bf9\u5355\u8fdb\u7a0b\u7684\u4e00\u79cd\u8c03\u5ea6\u7b56\u7565\u3002"),(0,r.kt)("p",null,"\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u4ecb\u7ecd\u8fc7\u5e38\u89c1\u7684\u5355\u5904\u7406\u8fdb\u7a0b\u8c03\u5ea6\u7b56\u7565\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5148\u5230\u5148\u5f97(First-Come-First-Served, FCFS)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f18\u70b9\uff1a\u7b80\u5355\uff0c\u6613\u5b9e\u73b0"),(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a\u5bf9\u77ed\u8fdb\u7a0b\u4e0d\u5229\u3001\u5bf9 I/O \u5bc6\u96c6\u578b\u8fdb\u7a0b\u4e0d\u7406\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u8f6e\u8f6c",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u62a2\u5360\u7b56\u7565\u3002\u786e\u5b9a\u5408\u7406\u7684\u65f6\u95f4\u7247\u957f\u5ea6\uff0c\u516c\u5e73\u5730\u7ed9\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u4e00\u5b9a\u7684\u6267\u884c\u65f6\u95f4\uff0c\u5f53\u65f6\u95f4\u6d88\u8017\u5b8c\u6bd5\u6216\u963b\u585e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c31\u4f1a\u8c03\u5ea6\u5176\u4ed6\u8fdb\u7a0b\uff0c\u5c06\u6267\u884c\u6743\u62a2\u5360\u8fc7\u6765\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u6700\u77ed\u8fdb\u7a0b\u4f18\u5148(Shortest Process Next, SPN)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a\u5bf9\u957f\u8fdb\u7a0b\u4e0d\u5229\uff0c\u4f1a\u9965\u997f\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u6700\u77ed\u5269\u4f59\u65f6\u95f4(Shortest Remaining Time, SRT)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6839\u636e\u5269\u4f59\u65f6\u95f4\u7684\u957f\u77ed\uff0c\u4f18\u5148\u6267\u884c\u53ef\u6700\u5feb\u5b8c\u6210\u7684\u8fdb\u7a0b\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a\u5bf9\u957f\u8fdb\u7a0b\u4e0d\u5229\uff0c\u4f1a\u9965\u997f\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u6700\u9ad8\u54cd\u5e94\u6bd4\u4f18\u5148(HRRN)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u54cd\u5e94\u6bd4 = \uff08\u7b49\u5f85\u6267\u884c\u65f6\u95f4 + \u8fdb\u7a0b\u6267\u884c\u65f6\u95f4\uff09 / \u8fdb\u7a0b\u6267\u884c\u65f6\u95f4"),(0,r.kt)("li",{parentName:"ul"},"\u89e3\u51b3\u957f\u8fdb\u7a0b\u9965\u997f\u95ee\u9898\uff0c\u5f15\u5165\u4e86\u7b49\u5f85\u6267\u884c\u65f6\u95f4\uff0c\u8ba9\u7b49\u5f85\u65f6\u95f4\u8f83\u957f\u7684\u53ef\u4ee5\u5c3d\u53ef\u80fd\u4f18\u5148\u6267\u884c\u3002"))),(0,r.kt)("li",{parentName:"ul"},"\u53cd\u9988\u6cd5\uff0c\u591a\u961f\u5217",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u8fdb\u7a0b\u4e00\u5f00\u59cb\u90fd\u6709\u76f8\u540c\u7684\u4f18\u5148\u7ea7\uff0c\u6bcf\u6b21\u88ab\u62a2\u5360(\u9700\u8981\u914d\u5408\u5176\u4ed6\u62a2\u5360\u7b56\u7565\u4f7f\u7528\uff0c\u5982\u8f6e\u8f6c)\uff0c\u4f18\u5148\u7ea7\u5c31\u4f1a\u964d\u4f4e\u4e00\u7ea7\u3002\u56e0\u6b64\u901a\u5e38\u5b83\u4f1a\u6839\u636e\u4f18\u5148\u7ea7\u5212\u5206\u591a\u4e2a\u961f\u5217")))),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u4e2d\uff0cJavaScript \u7684\u6267\u884c\u4e5f\u662f\u5355\u7ebf\u7a0b\u7684\u3002Javascript \u5f15\u64ce\u548c\u9875\u9762\u6e32\u67d3\u5f15\u64ce\u5728\u540c\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"\u6e32\u67d3\u7ebf\u7a0b"),"\uff0cGUI \u6e32\u67d3\u548c Javascript\u6267\u884c \u4e24\u8005\u662f\u4e92\u65a5\u7684\u3002\u5982\u679c\u8ba9 js\u6267\u884c\u957f\u671f\u5360\u636e\u6e32\u67d3\u8fdb\u7a0b\uff0c\u6d4f\u89c8\u5668\u5c31\u4f1a\u5448\u73b0 \u201c\u5361\u6b7b\u201d \u72b6\u6001\uff0c\u9875\u9762\u65e0\u6cd5\u5237\u65b0\u3002"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u2019\u524d\u7aef\u6846\u67b6\u2018\u6765\u8bf4\uff0c\u89e3\u51b3\u8fd9\u79cd\u95ee\u9898\u6709\u4e09\u4e2a\u65b9\u5411:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"1\ufe0f\u20e3 \u4f18\u5316\u6bcf\u4e2a\u4efb\u52a1\uff0c\u8ba9\u5b83\u6709\u591a\u5feb\u5c31\u591a\u5feb\u3002\u6324\u538bCPU\u8fd0\u7b97\u91cf"),(0,r.kt)("li",{parentName:"ul"},"2\ufe0f\u20e3 \u5feb\u901f\u54cd\u5e94\u7528\u6237\uff0c\u8ba9\u7528\u6237\u89c9\u5f97\u591f\u5feb\uff0c\u4e0d\u80fd\u963b\u585e\u7528\u6237\u7684\u4ea4\u4e92"),(0,r.kt)("li",{parentName:"ul"},"3\ufe0f\u20e3 \u5c1d\u8bd5 Worker \u591a\u7ebf\u7a0b")),(0,r.kt)("p",null,"Vue \u4ece1\u20e3\ufe0f\u89d2\u5ea6\u5165\u624b\uff0c\u901a\u8fc7\u6a21\u7248 + \u54cd\u5e94\u5f0f\u673a\u5236\uff0c\u63d0\u5347\u4efb\u52a1\u8fd0\u884c\u901f\u5ea6\u3002"),(0,r.kt)("p",null,"React \u4ece2\u20e3\ufe0f\u89d2\u5ea6\u5165\u624b\uff0c\u901a\u8fc7 fiber \u67b6\u6784\uff0c\u628a\u4efb\u52a1\u5207\u5206\uff0c\u63d0\u5347\u6d4f\u89c8\u5668\u54cd\u5e94\u901f\u5ea6\u3002"),(0,r.kt)("p",null,"\u5177\u4f53\u4e3a\uff1a"),(0,r.kt)("p",null,"React \u6709\u4e09\u5927\u6a21\u5757\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Scheduler \u8c03\u5ea6\u5668\uff1a\u8c03\u5ea6\u66f4\u65b0.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Reconcoler \u534f\u8c03\u5668\uff1a\u51b3\u5b9a\u9700\u8981\u66f4\u65b0\u4ec0\u4e48\u7ec4\u4ef6.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Renderer \u6e32\u67d3\u5668\uff1a\u5c06\u7ec4\u4ef6\u66f4\u65b0\u5230\u89c6\u56fe\u4e2d."))),(0,r.kt)("p",null,"\u5176\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Reconcilation")," \u534f\u8c03\u9636\u6bb5\u662f CPU \u5bc6\u96c6\u578b\u64cd\u4f5c\uff0cfiber \u628a\u8be5\u73af\u8282\u5207\u5206\uff0c\u4f7f ",(0,r.kt)("inlineCode",{parentName:"p"},"Reconcilation")," \u8fc7\u7a0b\u53d8\u6210\u53ef\u4e2d\u65ad\uff0c\u9002\u65f6\u7684\u8ba9\u51fa CPU \u6267\u884c\u6743\uff0816.6ms\uff09\uff0c\u597d\u5904\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u518d\u4e00\u6b21\u6027\u64cd\u4f5c\u5927\u91cf DOM \u8282\u70b9\uff0c\u800c\u662f\u5206\u6279\u5ef6\u65f6\u5bf9 DOM \u8fdb\u884c\u64cd\u4f5c\u3002\u63d0\u5347\u4e86\u6d4f\u89c8\u5668\u7684\u54cd\u5e94\u901f\u5ea6\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7ed9\u6d4f\u89c8\u5668\u4e00\u70b9\u5598\u606f\u7684\u673a\u4f1a\uff0c\u4ed6\u4f1a\u5bf9\u4ee3\u7801\u8fdb\u884c\u7f16\u8bd1\u4f18\u5316\uff08JIT\uff09\u53ca\u8fdb\u884c\u70ed\u4ee3\u7801\u4f18\u5316\uff0c\u6216\u8005\u5bf9reflow\u8fdb\u884c\u4fee\u6b63")),(0,r.kt)("h3",{id:"\u95ee\u98982-\u4ec0\u4e48\u662f-fiber"},"\u95ee\u98982 \u4ec0\u4e48\u662f Fiber"),(0,r.kt)("p",null,"\u662f\u4e00\u79cd\u6d41\u7a0b\u63a7\u5236\u673a\u5236\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u52a8\u6001\u6267\u884c\u5355\u5143"),(0,r.kt)("li",{parentName:"ul"},"\u4e00\u79cd\u9759\u6001\u6570\u636e\u7ed3\u6784")),(0,r.kt)("h4",{id:"1-\u6d41\u7a0b\u63a7\u5236\u673a\u5236"},"1 \u6d41\u7a0b\u63a7\u5236\u673a\u5236"),(0,r.kt)("p",null,"Fiber \u4e5f\u79f0\u534f\u7a0b\u3001\u6216\u8005\u7ea4\u7a0b\u3002 \u662f\u4e00\u79cd\u63a7\u5236\u6d41\u7a0b\u7684\u8ba9\u51fa\u673a\u5236\u3002\u534f\u7a0b\u548c\u7ebf\u7a0b\u5e76\u4e0d\u4e00\u6837\uff0c\u534f\u7a0b\u672c\u8eab\u662f\u6ca1\u6709\u5e76\u53d1\u6216\u8005\u5e76\u884c\u80fd\u529b\u7684\uff08\u9700\u8981\u914d\u5408\u7ebf\u7a0b\uff09\u3002"),(0,r.kt)("p",null,"Fiber \u5b9e\u73b0\u4e86\u4ee3\u6570\u6548\u5e94\uff08\u770b\u4ee3\u6570\u6548\u5e94\u7684\u4f8b\u5b50\uff09\uff0c\u53ef\u4ee5\u8fd1\u4f3c\u7684\u7406\u89e3\u4e3a\u662f async/await + try/catch \u7684\u7ed3\u5408\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u666e\u901a\u51fd\u6570\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\u65e0\u6cd5\u88ab\u4e2d\u65ad\u548c\u6062\u590d\uff1aasync/await \u5b9e\u73b0\u4e86\u4e2d\u65ad\u548c\u6062\u590d\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4f46\u56e0\u6b64\u5bfc\u81f4\u4e86\u526f\u4f5c\u7528\uff1aasync\u5177\u6709\u4f20\u67d3\u6027\uff0c\u9700\u8981\u5168\u90e8\u7684\u51fd\u6570\u90fd\u4e3a async\u3002\u5982\u679c\u53ef\u4ee5\u7c7b\u4f3c try/catch \u7684\u6548\u679c\uff0c\u8ba9\u526f\u4f5c\u7528\u548c\u4e3b\u903b\u8f91\u5206\u79bb\uff0c\u5219\u4ee3\u7801\u903b\u8f91\u66f4\u6e05\u6670\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"React \u6e32\u67d3\u7684\u8fc7\u7a0b\u53ef\u4ee5\u88ab\u4e2d\u65ad\uff0c\u53ef\u4ee5\u5c06\u63a7\u5236\u6743\u4ea4\u56de\u6d4f\u89c8\u5668\uff0c\u8ba9\u4f4d\u7ed9\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\uff0c\u6d4f\u89c8\u5668\u7a7a\u95f2\u540e\u518d\u6062\u590d\u6e32\u67d3")),(0,r.kt)("p",null,"\u5408\u4f5c\u5f0f\u8c03\u5ea6 Cooperative Scheduling\uff1a\u6d4f\u89c8\u5668\u4e2d\u6ca1\u6709\u62a2\u5360\u673a\u5236\uff0c\u65e0\u6cd5\u4e2d\u65ad\u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1\uff0c\u6240\u4ee5 React \u9700\u8981\u5177\u5907\u8ba9\u51fa\u673a\u5236\uff0c\u4e3b\u52a8\u8ba9\u51fa\u63a7\u5236\u6743\u3002"),(0,r.kt)("p",null,"\u8fd9\u662f\u4e00\u79cd\u7ed9\u4e88\u4fe1\u4efb\u7684\u5951\u7ea6\u5408\u4f5c\u673a\u5236\uff1aReact \u4f1a\u6839\u636e\u81ea\u5df1\u7684\u4efb\u52a1\u91cf\uff0c\u5411\u6d4f\u89c8\u5668\u7533\u8bf7\u9002\u91cf\u7684\u65f6\u95f4\u7247\u3002\u800c\u6d4f\u89c8\u5668\u4f1a\u5148\u6267\u884c\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\uff0c\u518d\u628a\u5269\u4f59\u65f6\u95f4\u5206\u7ed9 React\uff0cReact \u4e5f\u4f1a\u5728\u89c4\u5b9a\u7684\u65f6\u95f4\u5185\u5b8c\u6210\u4efb\u52a1\u6267\u884c\uff0c\u5f52\u8fd8\u63a7\u5236\u6743\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(8554).Z,width:"1268",height:"700"})),(0,r.kt)("p",null,"\u90a3\u4e48\uff0c\u5982\u4f55\u786e\u5b9a\u5269\u4f59\u65f6\u95f4\u5462\uff1f\u6216\u8005\u54ea\u4e9b\u4efb\u52a1\u662f\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u5462\uff1f"),(0,r.kt)("p",null,"\u5728\u4e00\u5e27\uff0816.6 ms\uff09\u4e2d\uff0c\u6d4f\u89c8\u5668\u4f1a\u6267\u884c\u4ee5\u4e0b\u4efb\u52a1\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5904\u7406\u7528\u6237\u8f93\u5165\u4e8b\u4ef6"),(0,r.kt)("li",{parentName:"ul"},"Javascript\u6267\u884c"),(0,r.kt)("li",{parentName:"ul"},"requestAnimation \u8c03\u7528"),(0,r.kt)("li",{parentName:"ul"},"\u5e03\u5c40 Layout"),(0,r.kt)("li",{parentName:"ul"},"\u7ed8\u5236 Paint")),(0,r.kt)("p",null,"\u5982\u679c\u5728\u6267\u884c\u5b8c\u8fd9\u4e9b\u5fc5\u987b\u4efb\u52a1\u540e\uff0c\u8fd8\u6709\u5269\u4f59\u7684\u65f6\u95f4\uff0c\u5c31\u53ef\u7ed9 React \u53bb\u4f7f\u7528\uff1a"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," \u7684\u56de\u8c03\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(2743).Z,width:"737",height:"139"})),(0,r.kt)("p",null,"\u4e3a\u4e86\u907f\u514d\u5269\u4f59\u65f6\u95f4\u4e0d\u8db3\uff0c\u4efb\u52a1\u88ab\u997f\u6b7b\uff0cReact \u5b9a\u4e49\u4e86\u4e00\u4e2a\u8d85\u65f6\u65f6\u95f4\u3002\u5982\u679c\u4efb\u52a1\u7b49\u5f85\u65f6\u95f4\u5230\u8fbe\u8d85\u65f6\u65f6\u95f4\u540e\uff0c\u5c31\u4f1a\u63d0\u5347\u4f18\u5148\u7ea7\uff0c\u7acb\u5373\u6267\u884c\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Immediate"),"(-1) - \u8fd9\u4e2a\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u4f1a\u540c\u6b65\u6267\u884c, \u6216\u8005\u8bf4\u8981\u9a6c\u4e0a\u6267\u884c\u4e14\u4e0d\u80fd\u4e2d\u65ad"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"UserBlocking"),"(250ms) \u8fd9\u4e9b\u4efb\u52a1\u4e00\u822c\u662f\u7528\u6237\u4ea4\u4e92\u7684\u7ed3\u679c, \u9700\u8981\u5373\u65f6\u5f97\u5230\u53cd\u9988"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Normal")," (5s) \u5e94\u5bf9\u54ea\u4e9b\u4e0d\u9700\u8981\u7acb\u5373\u611f\u53d7\u5230\u7684\u4efb\u52a1\uff0c\u4f8b\u5982\u7f51\u7edc\u8bf7\u6c42"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Low")," (10s) \u8fd9\u4e9b\u4efb\u52a1\u53ef\u4ee5\u653e\u540e\uff0c\u4f46\u662f\u6700\u7ec8\u5e94\u8be5\u5f97\u5230\u6267\u884c. \u4f8b\u5982\u5206\u6790\u901a\u77e5"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Idle")," (\u6ca1\u6709\u8d85\u65f6\u65f6\u95f4) \u4e00\u4e9b\u6ca1\u6709\u5fc5\u8981\u505a\u7684\u4efb\u52a1 (e.g. \u6bd4\u5982\u9690\u85cf\u7684\u5185\u5bb9), \u53ef\u80fd\u4f1a\u88ab\u997f\u6b7b")),(0,r.kt)("h4",{id:"2-\u6267\u884c\u5355\u5143"},"2 \u6267\u884c\u5355\u5143"),(0,r.kt)("p",null,"FIber \u53e6\u4e00\u4e2a\u6982\u5ff5\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u6216\u8005\u8bf4\u6267\u884c\u5355\u5143\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5c06\u5b83\u89c6\u4f5c\u4e00\u4e2a\u6267\u884c\u5355\u5143\uff0c\u6bcf\u6b21\u6267\u884c\u5b8c\u4e00\u4e2a '\u6267\u884c\u5355\u5143'\uff0cReact \u5c31\u4f1a\u68c0\u67e5\u73b0\u5728\u8fd8\u5269\u591a\u5c11\u65f6\u95f4\uff0c\u5982\u679c\u6ca1\u6709\u65f6\u95f4\u5c31\u5c06\u63a7\u5236\u6743\u8ba9\u51fa\u53bb\u3002")),(0,r.kt)("p",null,"\u6d41\u7a0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5047\u8bbe\u7528\u6237\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"setState")," \u66f4\u65b0\u7ec4\u4ef6, \u8fd9\u4e2a\u5f85\u66f4\u65b0\u7684\u4efb\u52a1\u4f1a\u5148\u653e\u5165\u961f\u5217\u4e2d\uff0c\u7136\u540e\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"requestIdleCallback")," \u8bf7\u6c42\u6d4f\u89c8\u5668\u8c03\u5ea6\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6d4f\u89c8\u5668\u6709\u7a7a\u95f2\u65f6\u95f4\uff0c\u6216\u8005\u4efb\u52a1\u8d85\u65f6\uff0c\u5c31\u4f1a\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"performWork")," \u6765\u5faa\u73af\u904d\u5386\uff0c\u5e76\u6267\u884c\u961f\u5217\u4e2d\u7684\u4efb\u52a1\u3002"))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"workLoop")," \uff1a\u5b83\u4f1a\u4ece\u66f4\u65b0\u961f\u5217 (updateQueue) \u4e2d\u5f39\u51fa\u66f4\u65b0\u4efb\u52a1\u6765\u6267\u884c\uff0c\u6bcf\u6267\u884c\u5b8c\u4e00\u4e2a \u2018",(0,r.kt)("inlineCode",{parentName:"p"},"\u6267\u884c\u5355\u5143"),"\u2018 \uff0c\u5c31\u68c0\u67e5\u4e00\u4e0b\u5269\u4f59\u65f6\u95f4\u662f\u5426\u5145\u8db3\uff0c\u5982\u679c\u5145\u8db3\u5c31\u8fdb\u884c\u6267\u884c\u4e0b\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"\u6267\u884c\u5355\u5143"),"\uff0c\u53cd\u4e4b\u5219\u505c\u6b62\u6267\u884c\uff0c\u4fdd\u5b58\u73b0\u573a\uff0c\u7b49\u4e0b\u4e00\u6b21\u6709\u6267\u884c\u6743\u65f6\u6062\u590d\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(9923).Z,width:"1056",height:"1089"})),(0,r.kt)("h4",{id:"3-\u4e00\u79cd\u6570\u636e\u7ed3\u6784"},"3 \u4e00\u79cd\u6570\u636e\u7ed3\u6784"),(0,r.kt)("p",null,"\u67e5\u770b\u95ee\u98983."),(0,r.kt)("h3",{id:"\u95ee\u98983-fiber-\u7684\u7ed3\u6784"},"\u95ee\u98983 Fiber \u7684\u7ed3\u6784"),(0,r.kt)("p",null,"\u5728 React 16\u4ee5\u524d\uff0cReconcilation \u662f\u540c\u6b65\u7684\u3001\u9012\u5f52\u6267\u884c\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cDom \u7684\u6784\u5efa\u57fa\u4e8e ",(0,r.kt)("strong",{parentName:"p"},"\u51fd\u6570\u8c03\u7528\u6808")," \u7684Reconcilation\u7b97\u6cd5\uff0c\u56e0\u6b64\u901a\u5e38\u4e5f\u79f0\u5b83\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"Stack Reconcilation"),"\u3002"),(0,r.kt)("p",null,"\u4f46\u57fa\u4e8e\u8c03\u7528\u6808\u7684\u65b9\u5f0f\u4e0d\u80fd\u968f\u610f\u4e2d\u65ad / \u6062\u590d\u73b0\u573a\uff0c\u4e5f\u4e0d\u5229\u4e8e\u5f02\u6b65\u5904\u7406\u7684\u4ee3\u6570\u6548\u5e94\u5b9e\u73b0\u3002 \u5982\u679c\u8981\u6062\u590d\u9012\u5f52\u73b0\u573a\uff0c\u53ef\u80fd\u9700\u8981\u4ece\u5934\u5f00\u59cb\uff0c\u6062\u590d\u5230\u4e4b\u524d\u7684\u8c03\u7528\u6808\u3002"),(0,r.kt)("p",null,"\u6240\u4ee5\uff0cReact 16 \u901a\u8fc7\u6a21\u62df\u51fd\u6570\u8c03\u7528\u6808\uff0c\u5c06\u9012\u5f52\u8f6c\u5316\u6210\u8fed\u4ee3\uff0c\u4f7f\u7528 ",(0,r.kt)("strong",{parentName:"p"},"\u94fe\u8868")," \u6784\u5efa\u3002"),(0,r.kt)("p",null," \u6bcf\u4e2a VirtualDOM \u8282\u70b9\uff0c\u90fd\u4f7f\u7528\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Fiber")," \u8868\u793a\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"interface Fiber {\n  /**\n   * \u269b\ufe0f \u8282\u70b9\u7684\u7c7b\u578b\u4fe1\u606f\n   */\n  // \u6807\u8bb0 Fiber \u7c7b\u578b, \u4f8b\u5982\u51fd\u6570\u7ec4\u4ef6\u3001\u7c7b\u7ec4\u4ef6\u3001\u5bbf\u4e3b\u7ec4\u4ef6\n  tag: WorkTag,\n  // \u8282\u70b9\u5143\u7d20\u7c7b\u578b, \u662f\u5177\u4f53\u7684\u7c7b\u7ec4\u4ef6\u3001\u51fd\u6570\u7ec4\u4ef6\u3001\u5bbf\u4e3b\u7ec4\u4ef6(\u5b57\u7b26\u4e32)\n  type: any,\n\n  /**\n   * \u269b\ufe0f \u7ed3\u6784\u4fe1\u606f\n   */ \n  // \u6307\u5411\u7236\u8282\u70b9\uff0c\u6216\u8005render\u8be5\u8282\u70b9\u7684\u7ec4\u4ef6\n  return: Fiber | null,\n  // \u6307\u5411\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9\n  child: Fiber | null,\n  // \u6307\u5411\u4e0b\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9\n  sibling: Fiber | null,\n    \n  /**\n   * \u269b\ufe0f \u8282\u70b9\u72b6\u6001 state\n   */\n  // \u8282\u70b9\u5b9e\u4f8b(\u72b6\u6001)\uff1a\n  //        \u5bf9\u4e8e\u5bbf\u4e3b\u7ec4\u4ef6\uff0c\u8fd9\u91cc\u4fdd\u5b58\u5bbf\u4e3b\u7ec4\u4ef6\u7684\u5b9e\u4f8b, \u4f8b\u5982DOM\u8282\u70b9\u3002\n  //        \u5bf9\u4e8e\u7c7b\u7ec4\u4ef6\u6765\u8bf4\uff0c\u8fd9\u91cc\u4fdd\u5b58\u7c7b\u7ec4\u4ef6\u7684\u5b9e\u4f8b\n  //        \u5bf9\u4e8e\u51fd\u6570\u7ec4\u4ef6\u8bf4\uff0c\u8fd9\u91cc\u4e3a\u7a7a\uff0c\u56e0\u4e3a\u51fd\u6570\u7ec4\u4ef6\u6ca1\u6709\u5b9e\u4f8b\n  stateNode: any,\n  // \u65b0\u7684\u3001\u5f85\u5904\u7406\u7684props\n  pendingProps: any,\n  // \u4e0a\u4e00\u6b21\u6e32\u67d3\u7684props\n  memoizedProps: any, // The props used to create the output.\n  // \u4e0a\u4e00\u6b21\u6e32\u67d3\u7684\u7ec4\u4ef6\u72b6\u6001\n  memoizedState: any,\n\n  /**\n   * \u269b\ufe0f \u526f\u4f5c\u7528\n   */\n  // \u5f53\u524d\u8282\u70b9\u7684\u526f\u4f5c\u7528\u7c7b\u578b\uff0c\u4f8b\u5982\u8282\u70b9\u66f4\u65b0\u3001\u5220\u9664\u3001\u79fb\u52a8\n  effectTag: SideEffectTag,\n  // \u548c\u8282\u70b9\u5173\u7cfb\u4e00\u6837\uff0cReact \u540c\u6837\u4f7f\u7528\u94fe\u8868\u6765\u5c06\u6240\u6709\u6709\u526f\u4f5c\u7528\u7684Fiber\u8fde\u63a5\u8d77\u6765\n  nextEffect: Fiber | null,\n\n  /**\n   * \u269b\ufe0f \u66ff\u8eab\n   * \u6307\u5411\u65e7\u6811\u4e2d\u7684\u8282\u70b9\uff0c\u5982\u679c\u8282\u70b9\u4e0d\u53d1\u751f\u4efb\u4f55\u6539\u53d8\uff0c\u5c31\u4f1a\u76f4\u63a5\u4f7f\u7528\u65e7\u8282\u70b9\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u521b\u5efa\n   */\n  alternate: Fiber | null,\n}\n")),(0,r.kt)("p",null,"Fiber \u5305\u542b\u7684\u5c5e\u6027\u53ef\u4ee5\u5212\u5206\u4e3a 5 \u4e2a\u90e8\u5206:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\ud83c\udd95 \u7ed3\u6784\u4fe1\u606f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Fiber \u4f7f\u7528\u94fe\u8868\u7684\u5f62\u5f0f\u6765\u8868\u793a\u8282\u70b9\u5728\u6811\u4e2d\u7684\u5b9a\u4f4d\uff0c\u5c06 virtualDom \u6784\u5efa\u8d77\u6765\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u8282\u70b9\u7c7b\u578b\u4fe1\u606f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"tag \u8868\u793a\u8282\u70b9\u7684\u5206\u7c7b\u3001type \u4fdd\u5b58\u5177\u4f53\u7684\u7c7b\u578b\u503c\uff0c\u5982div\u3001Component\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u8282\u70b9\u7684\u72b6\u6001"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u8282\u70b9\u7684\u7ec4\u4ef6\u5b9e\u4f8b\u3001props\u3001state \u7b49\uff0c\u5b83\u4eec\u5c06\u5f71\u54cd\u7ec4\u4ef6\u7684\u8f93\u51fa\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\ud83c\udd95 \u526f\u4f5c\u7528"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728 Reconciliation \u8fc7\u7a0b\u4e2d\u53d1\u73b0\u7684 '\u526f\u4f5c\u7528'(",(0,r.kt)("strong",{parentName:"li"},"\u53d8\u66f4\u9700\u6c42"),") \u5c31\u4fdd\u5b58\u5728\u8282\u70b9\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"effectTag")," \u4e2d(\u60f3\u8c61\u4e3a\u6253\u4e0a\u4e00\u4e2a\u6807\u8bb0)\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u94fe\u8868\u7ed3\u6784\uff0c\u5c06\u672c\u6b21\u6e32\u67d3\u7684\u6240\u6709\u8282\u70b9\u526f\u4f5c\u7528\u90fd\u6536\u96c6\u8d77\u6765\u3002\u5728\u904d\u5386\u8fc7\u7a0b\u4e2d React \u4f1a\u5c06\u6240\u6709\u6709 \u2018\u526f\u4f5c\u7528\u2019 \u7684\u8282\u70b9\u90fd\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"nextEffect")," \u8fde\u63a5\u8d77\u6765\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\ud83c\udd95 \u66ff\u8eab")," ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"React \u5728 Reconciliation \u8fc7\u7a0b\u4e2d\u4f1a\u6784\u5efa\u4e00\u9897\u65b0\u7684 virtualDOm (\u5b98\u65b9\u79f0\u4e3a",(0,r.kt)("strong",{parentName:"li"},"workInProgress tree"),"\uff0c",(0,r.kt)("strong",{parentName:"li"},"WIP\u6811"),")\u3002\u662f\u4e00\u9897\u8868\u793a\u5f53\u524d\u5de5\u4f5c\u8fdb\u5ea6\u7684\u6811\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8fd8\u6709\u4e00\u9897\u8868\u793a\u5df2\u6e32\u67d3\u754c\u9762\u7684",(0,r.kt)("strong",{parentName:"li"},"\u65e7\u6811\uff08current tree\uff09"),"\uff0c\u8fd9\u68f5\u6811\u4ee3\u8868\u4e86\u5df2\u7ecf\u6e32\u67d3\u7684\u5e76\u6b63\u5728\u663e\u793a\u7684\u9875\u9762\u3002"),(0,r.kt)("li",{parentName:"ul"},"React\u5c31\u662f\u4e00\u8fb9\u548c\u65e7\u6811\u6bd4\u5bf9\uff0c\u4e00\u8fb9\u6784\u5efaWIP\u6811\u7684\u3002 alternate \u6307\u5411\u65e7\u6811\u7684\u540c\u7b49\u8282\u70b9\u3002")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:n(6407).Z,width:"915",height:"690"})),(0,r.kt)("p",null,"\u4e0a\u56fe\u662f Reconciliation \u5b8c\u6210\u540e\u7684\u72b6\u6001\uff0c\u5de6\u8fb9\u662f\u65e7\u6811\uff0c\u53f3\u8fb9\u662fWIP\u6811\u3002\u5bf9\u4e8e\u9700\u8981\u53d8\u66f4\u7684\u8282\u70b9\uff0c\u90fd\u6253\u4e0a\u4e86'\u6807\u7b7e'\u3002 \u5728\u63d0\u4ea4\u9636\u6bb5\uff0cReact \u5c31\u4f1a\u5c06\u8fd9\u4e9b\u6253\u4e0a\u6807\u7b7e\u7684\u8282\u70b9\u5e94\u7528\u53d8\u66f4\u3002"),(0,r.kt)("h2",{id:"\u5176\u4ed6"},"\u5176\u4ed6"),(0,r.kt)("h3",{id:"\u95ee\u9898jsx-element-fiber-dom-\u7684\u5173\u7cfb"},"\u95ee\u9898\uff1aJSX, element, fiber, dom \u7684\u5173\u7cfb"),(0,r.kt)("p",null,"\u9996\u5148\u5fc5\u987b\u9700\u8981\u5f04\u660e\u767d React.element \uff0cfiber \u548c\u771f\u5b9e DOM \u4e09\u8005\u662f\u4ec0\u4e48\u5173\u7cfb\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"jsx \u8bed\u6cd5\uff0c\u662f\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"li"},"React.creatElement()")," \u7684\u8bed\u6cd5\u7cd6\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"jsx \u8bed\u6cd5\u6700\u7ec8\u4f1a\u88ab babel \u8f6c\u8bd1\u4e3a\u5404\u79cd ",(0,r.kt)("inlineCode",{parentName:"li"},"React.creatElement()"),"\u3002\u6700\u7ec8\uff0c\u8fd9\u4e9b\u4ee3\u7801\u4f1a\u88ab\u6267\u884c\uff0c\u4ece\u800c\u521b\u5efa React element \u5bf9\u8c61\uff0c"))),(0,r.kt)("li",{parentName:"ul"},"React element \u662f js \u5bf9\u8c61\uff0c\u4e0a\u9762\u4fdd\u5b58\u4e86 props\uff0cchildren \u7b49\u4fe1\u606f\u3002"),(0,r.kt)("li",{parentName:"ul"},"DOM \u662f\u5143\u7d20\u5728\u6d4f\u89c8\u5668\u4e0a\u7ed9\u7528\u6237\u76f4\u89c2\u7684\u8868\u8c61\u3002"),(0,r.kt)("li",{parentName:"ul"},"fiber \u53ef\u4ee5\u8bf4\u662f\u662f element \u548c\u771f\u5b9e DOM \u4e4b\u95f4\u7684\u4ea4\u6d41\u67a2\u7ebd\u7ad9\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6bcf\u4e00\u4e2a\u7c7b\u578b element \u90fd\u4f1a\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5bf9\u5e94\u7684 fiber \u7c7b\u578b\uff0celement \u53d8\u5316\u5f15\u8d77\u66f4\u65b0\u6d41\u7a0b\u90fd\u662f\u901a\u8fc7 fiber \u5c42\u9762\u505a\u4e00\u6b21\u8c03\u548c\u6539\u53d8\uff0cfiber \u901a\u8fc7\u94fe\u8868\u5f62\u5f0f\uff0c\u6784\u5efa\u51fa\u4e00\u9897 virtualDOM \u6811\u3002\u6700\u7ec8\u4f1a\u5728\u6e32\u67d3\u9636\u6bb5\uff0c\u8f6c\u5316\u4e3a\u771f\u5b9e DOM \u5e76\u6e32\u67d3\u5728\u9875\u9762\u4e0a\u3002")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"2.jpg",src:n(1515).Z,width:"1590",height:"360"})),(0,r.kt)("p",null,"JSX \u6700\u7ec8\u4f1a\u8f6c\u53d8\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"React.createElement()")," \u5e76\u6267\u884c\uff0c\u4ece\u800c\u521b\u5efa React element\uff0c\u6700\u7ec8\u5408\u5e76\u5230 fiber \u8282\u70b9\u4e0a\u3002\u800c fiber \u8282\u70b9\u4e4b\u95f4\u901a\u8fc7\u94fe\u8868\u8fde\u63a5\uff0c\u6700\u7ec8\u6784\u9020\u4e3a\u4e00\u9897 virtualDOM \u6811\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898fiber-\u66f4\u65b0\u673a\u5236"},"\u95ee\u9898\uff1aFiber \u66f4\u65b0\u673a\u5236"),(0,r.kt)("p",null,"\u521d\u59cb\u5316\u66f4\u65b0\uff1a"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa fiberRoot \u548c rootFiber")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fiberRoot"),"\uff1a\u9996\u6b21\u6784\u5efa\u5e94\u7528\uff0c \u521b\u5efa\u552f\u4e00\u7684 fiberRoot \u8282\u70b9\uff0c\u662f\u6574\u4e2a React \u5e94\u7528\u7684\u6839\u57fa\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"rootFiber"),"\uff1a \u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"ReactDOM.render()")," \u6e32\u67d3\u51fa\u6765\u7684\u3002\u4e00\u4e2a React \u5e94\u7528\u53ef\u4ee5\u6709\u591a ReactDOM.render \u521b\u5efa\u7684 rootFiber \uff0c\u4f46\u662f\u53ea\u80fd\u6709\u4e00\u4e2a fiberRoot\uff08\u5e94\u7528\u6839\u8282\u70b9\uff09\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// rootFiber\nReactDOM.render(<Index/>, document.getElementById('app'));\n")),(0,r.kt)("p",null,"\u7b2c\u4e00\u6b21\u6302\u8f7d\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5c06 fiberRoot \u548c rootFiber \u5efa\u7acb\u8d77\u5173\u8054\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fiberRoot.current = rootFiber;"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"3.jpg",src:n(7180).Z,width:"722",height:"460"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6b65\uff1aworkInProgress \u548c current")),(0,r.kt)("h3",{id:"\u95ee\u9898useeffect-\u548c-uselayouteffect-\u7684\u533a\u522b"},"\u95ee\u9898\uff1auseEffect \u548c useLayoutEffect \u7684\u533a\u522b"),(0,r.kt)("p",null,"useEffect \u662f\u5f02\u6b65\u8c03\u7528\u7684\uff0cuseLayoutEffect \u662f\u540c\u6b65\u8c03\u7528\u7684\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"useEffect \u5728 before mutation \u9636\u6bb5\u7ed9\u5b83\u5b9a\u4e49 mormal \u4f18\u5148\u7ea7\uff0c\u7136\u540e\u7ed1\u5b9a\u8c03\u7528\u65f6\u673a\uff0c\u5728 commit \u9636\u6bb5\u5b8c\u6210\u540e\u5f02\u6b65\u8c03\u7528\u3002\u5728 layout \u9636\u6bb5\uff0c\u4f1a\u7ed1\u5b9a useEffect \u7684 \u9500\u6bc1\u51fd\u6570\u3001\u56de\u8c03\u51fd\u6570\u3002\u5728 commit \u9636\u6bb5\u5b8c\u6210\u540e\uff0c\u6309\u7167\u4f18\u5148\u7ea7\uff0c\u6700\u7ec8\u4f1a\u5f02\u6b65\u6267\u884c \u9500\u6bc1\u51fd\u6570\u3001\u56de\u8c03\u51fd\u6570\u3002"),(0,r.kt)("li",{parentName:"ul"},"useLayoutEffect \u5728 muation \u9636\u6bb5\u4f1a\u6267\u884c\u9500\u6bc1\u51fd\u6570\uff0c\u5728layout \u9636\u6bb5\u4f1a\u6267\u884c\u56de\u8c03\u51fd\u6570\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"\u622a\u5c4f2022-08-07 00.18.02",src:n(8769).Z,width:"2202",height:"1218"})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u6765\u6e90\uff1a"),(0,r.kt)("p",{parentName:"blockquote"},"React\u8bfe\u7a0b\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://ke.segmentfault.com/course/1650000023864436/section/1500000023864578"},"https://ke.segmentfault.com/course/1650000023864436/section/1500000023864578")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/lizuncong/mini-react/blob/master/docs/render/%E6%B7%B1%E5%85%A5%E6%A6%82%E8%BF%B0%20React%E5%88%9D%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%8F%8A%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%E4%B8%BB%E6%B5%81%E7%A8%8B.md"},"https://github.com/lizuncong/mini-react/blob/master/docs/render/%E6%B7%B1%E5%85%A5%E6%A6%82%E8%BF%B0%20React%E5%88%9D%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%8F%8A%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%E4%B8%BB%E6%B5%81%E7%A8%8B.md")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://segmentfault.com/a/1190000039227345"},"https://segmentfault.com/a/1190000039227345")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6844903975112671239"},"https://juejin.cn/post/6844903975112671239")),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7118259566868955167"},"https://juejin.cn/post/7118259566868955167"))))}c.isMDXComponent=!0},1515:function(e,t,n){t.Z=n.p+"assets/images/0a90368f24f0477aaf0d446a8f6736db~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0-075ad7c9c4b513ce7afa653459291b2b.awebp"},8554:function(e,t,n){t.Z=n.p+"assets/images/16deecc37fdd60d7~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0-5175c162183af87a410334df21557a68.awebp"},2743:function(e,t,n){t.Z=n.p+"assets/images/16deecc43c710e16~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0-af1ecf1eda7814df686431778089fc93.awebp"},6407:function(e,t,n){t.Z=n.p+"assets/images/16deecce3162b355~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0-c4218249f9dea90c20684edbe11ebc2c.awebp"},9923:function(e,t,n){t.Z=n.p+"assets/images/16deed1711f281b3~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0-d0240fc89f86c4d1a73102992edf1a0f.awebp"},8571:function(e,t,n){t.Z=n.p+"assets/images/58db2ee32bde44b3afd5e2e6af3e3647~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0-ce22e7fc31e9aefa33fb0a3d08b5ef3d.awebp"},5277:function(e,t,n){t.Z=n.p+"assets/images/c859397a03024903939f934907052cc2~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0-bf7010e65b450f32e10625812a9b8bb0.awebp"},7180:function(e,t){t.Z="data:;base64,UklGRk4kAABXRUJQVlA4WAoAAAAgAAAA0QIAywEASUNDUOAPAAAAAA/gYXBwbAIQAABtbnRyUkdCIFhZWiAH5QACAA8AAQAYADBhY3NwQVBQTAAAAABBUFBMAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWFwcGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABJkZXNjAAABXAAAAGJkc2NtAAABwAAABIJjcHJ0AAAGRAAAACN3dHB0AAAGaAAAABRyWFlaAAAGfAAAABRnWFlaAAAGkAAAABRiWFlaAAAGpAAAABRyVFJDAAAGuAAACAxhYXJnAAAOxAAAACB2Y2d0AAAO5AAAADBuZGluAAAPFAAAAD5jaGFkAAAPVAAAACxtbW9kAAAPgAAAACh2Y2dwAAAPqAAAADhiVFJDAAAGuAAACAxnVFJDAAAGuAAACAxhYWJnAAAOxAAAACBhYWdnAAAOxAAAACBkZXNjAAAAAAAAAAhEaXNwbGF5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbWx1YwAAAAAAAAAmAAAADGhySFIAAAAUAAAB2GtvS1IAAAAMAAAB7G5iTk8AAAASAAAB+GlkAAAAAAASAAACCmh1SFUAAAAUAAACHGNzQ1oAAAAWAAACMGRhREsAAAAcAAACRm5sTkwAAAAWAAACYmZpRkkAAAAQAAACeGl0SVQAAAAUAAACiGVzRVMAAAASAAACnHJvUk8AAAASAAACnGZyQ0EAAAAWAAACrmFyAAAAAAAUAAACxHVrVUEAAAAcAAAC2GhlSUwAAAAWAAAC9HpoVFcAAAAKAAADCnZpVk4AAAAOAAADFHNrU0sAAAAWAAADInpoQ04AAAAKAAADCnJ1UlUAAAAkAAADOGVuR0IAAAAUAAADXGZyRlIAAAAWAAADcG1zAAAAAAASAAADhmhpSU4AAAASAAADmHRoVEgAAAAMAAADqmNhRVMAAAAYAAADtmVuQVUAAAAUAAADXGVzWEwAAAASAAACnGRlREUAAAAQAAADzmVuVVMAAAASAAAD3nB0QlIAAAAYAAAD8HBsUEwAAAASAAAECGVsR1IAAAAiAAAEGnN2U0UAAAAQAAAEPHRyVFIAAAAUAAAETHB0UFQAAAAWAAAEYGphSlAAAAAMAAAEdgBMAEMARAAgAHUAIABiAG8AagBpzuy37AAgAEwAQwBEAEYAYQByAGcAZQAtAEwAQwBEAEwAQwBEACAAVwBhAHIAbgBhAFMAegDtAG4AZQBzACAATABDAEQAQgBhAHIAZQB2AG4A/QAgAEwAQwBEAEwAQwBEAC0AZgBhAHIAdgBlAHMAawDmAHIAbQBLAGwAZQB1AHIAZQBuAC0ATABDAEQAVgDkAHIAaQAtAEwAQwBEAEwAQwBEACAAYwBvAGwAbwByAGkATABDAEQAIABjAG8AbABvAHIAQQBDAEwAIABjAG8AdQBsAGUAdQByIA8ATABDAEQAIAZFBkQGSAZGBikEGgQ+BDsETAQ+BEAEPgQyBDgEOQAgAEwAQwBEIA8ATABDAEQAIAXmBdEF4gXVBeAF2V9pgnIATABDAEQATABDAEQAIABNAOAAdQBGAGEAcgBlAGIAbgD9ACAATABDAEQEJgQyBDUEQgQ9BD4EOQAgBBYEGgAtBDQEOARBBD8EOwQ1BDkAQwBvAGwAbwB1AHIAIABMAEMARABMAEMARAAgAGMAbwB1AGwAZQB1AHIAVwBhAHIAbgBhACAATABDAEQJMAkCCRcJQAkoACAATABDAEQATABDAEQAIA4qDjUATABDAEQAIABlAG4AIABjAG8AbABvAHIARgBhAHIAYgAtAEwAQwBEAEMAbwBsAG8AcgAgAEwAQwBEAEwAQwBEACAAQwBvAGwAbwByAGkAZABvAEsAbwBsAG8AcgAgAEwAQwBEA4gDswPHA8EDyQO8A7cAIAO/A7gDzAO9A7cAIABMAEMARABGAOQAcgBnAC0ATABDAEQAUgBlAG4AawBsAGkAIABMAEMARABMAEMARAAgAGEAIABDAG8AcgBlAHMwqzDpMPwATABDAEQAAHRleHQAAAAAQ29weXJpZ2h0IEFwcGxlIEluYy4sIDIwMjEAAFhZWiAAAAAAAADzFgABAAAAARbKWFlaIAAAAAAAAIMKAAA9bv///7xYWVogAAAAAAAAS/oAALQhAAAK4FhZWiAAAAAAAAAn0gAADnAAAMiRY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA2ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKMAqACtALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t//9wYXJhAAAAAAADAAAAAmZmAADypwAADVkAABPQAAAKW3ZjZ3QAAAAAAAAAAQABAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAAAAAAEAAG5kaW4AAAAAAAAANgAArgAAAFIAAABDwAAAsMAAACaAAAANgAAAUAAAAFRAAAIzMwACMzMAAjMzAAAAAAAAAABzZjMyAAAAAAABDHIAAAX4///zHQAAB7oAAP1y///7nf///aQAAAPZAADAcW1tb2QAAAAAAAAGEAAAoEQAAAAA2ZNdgAAAAAAAAAAAAAAAAAAAAAB2Y2dwAAAAAAADAAAAAmZmAAMAAAACZmYAAwAAAAJmZgAAAAIzMzQAAAAAAjMzNAAAAAACMzM0AFZQOCBIFAAAEJ4AnQEq0gLMAT6RRp5MpaOjIiDyOSCwEglpbv//vfd25K2ElDfZzKoPrH+L75P8D/j/EnxceZPaPkidXeZv8w+2H578xfjx/I/6HwZ+UGoX7C/zP228TrsvmC+o/1T/f/3fxlP9L0L+uvsA/z/+tf9X2E78P8D/zvYG/of+N/Zb2M//L/W+jP6v/9nuHfsF/0Ox6Gw0z4ZfIKnOhpnwy+QVOdDTPhl8gqc6GmfDL5BU50NM+GXyCpzoaZ8MvkFTnQ0z4ZfIKnOhpnwy+QVOdDTPhl8gqc6GmfDL5BU50NM+GXyCpzoaZ8MvkFTnQ0z4YzWhl/z17x+iEYR150l8IKez9RmEVuV/jq65GYRW5oFr0ZlH50NM+GXyCpzoaB/RAhsgPUvkFTnQ0z2qG6rN98S+QVOdDTPhl8bsEE2mBfIKnOhpnwy+N0s0UvkFTnQ0z4ZfG5IJK2a7dywQN34/CTeT+2pjv9aObDWKNN/7RMiiUwozZqyz4L3F7Koh/B12ssVPFjB86Gfcgog0z4ZfIKnOhpnE5H8LJfG2IJl3xqwQki63s7vhh4v0s8gWYP92MqNPR33lsMTcMt/fFdL5BU50NM+GXyBDmUvL5o5uGXyCpzoaXx7xxl8gqc6GmfDL43YRWC7TnQ0z4ZfIKnCtTl3JzSBm4ZfIKnOhpnwxqkLy2lZ5U7Yg8oCVOLurrPeylYRlOPcfAQnzUDVlldgdN8uu2CE7DSu9t8PUvkFTnQ0z4ZfIKnNljLnr8MvkFTnQ0z4ZfIKnOhpnwy+QVOEqeCBMLwTmr86GmfDL5BU50NM+GXyCpwiQ0LPEK+G70HKTi7dw1rtgGBUcG+1RgDSjmpOTTa/FyU0M/cpOdDTPhl8gqc6GmfDL5AdNXhuQArexEpGQPmA8Ac8Iq24C03sRgFF1rZ4U3YiVkUxfKLbDTPhl8gqc6GmfDL5BU50NM+GW/Iwd4pi3yncB6l8gqc6GmfDL5BU50NM+GXumU/oL/jH1iiZY6GmfDL5BU50NM+GXyCpxUKsX+1lZMZ0zVbn37MFQZD1KaObhl8gqc6GmfDL5Akb8ZBznb9SEDMJiYihBXZluSDrjQpImQjMKHLgvdQKiDVqIBTwFAl6Qm35ri1XDTPhl8gqcK6Tzqqz+GXyCpzoaZ8MaaFP3FquGmfDL5BU5s/xU4B5HhKWWTwlE01JR3vqZ8Mvjckg3yCpzoaZ8MvkFEFkDcYDmXXR1Y7QojwDk+HW2OCbRl6DUN0mbZ22Tjcjx+2YQFmgw60FEUTBBib773Huins8LzaajnKB7nFJYOPi1XClZmUz4ZfIKnOhpnwiLU/Z64tVxjCvqXyCiuWmfDL5BU50NM+ERahsQfwD1L5BU50NM4Q66TpruA9S+QVOdDTOLx3YopvuNJFWgdTaXfHZplLzA7WIOqeXEOEyYrZGR5KwfC9BMDtYg61RVRXnHdjQWfDL5BU50NM+GXxwwcj2lEyEZhQgrsy3JA7eXrGFRbdg5HuPQ0z4Ze3NIVr5DytMwjLfkangoeBcVF7dyoc8Vb4cEwbyMniGXf8MvkFTnQ0z4ZfIKnOhpntAxq7Cn2a46ry6TgzQQdQF5YF+Eg4modHiCtcHercdj7nmC70B0gIBIXE8tO9ALQAtH1BUxEc8yYv9IEOcWL2wRCQ1bXcB6l8gqc6GmfDL5BU50NM+GXyCpIAD+/0vAAAAAAAA1MkzTL61EbhHwAQwfHHHiD8JBDHKrr8kF8UjA0wS+8oLfoEHgFl4knbJ1cEE48RlzXGh1L4EfWgUJwx5BFh6JLyKySp2okj0U63q1j097jwFFXs5Y4U28fdX4MHfSRYUFks4TdFio/xiBVjh81QmWnHikBpHiI4hABZQscJcAZ6j6uBgGMZEHM8JHhGU6XescGP3W3pAHrfgk8hc3lz9uWmYU6NjYw7TXic52qhHTwx/deF9nS5tyEppd/huTK4gYVhiIwo6MExdMKshRdrC/yEyNglrGDiTy9lLLwrq/pjO6C7PB+IdNEYaCKdX7yOXL8377qY3iOfs1eLPKScgkwTMFprcTH2XcidCYGzY7QPX7POAC8RKNKe+34eEMLy+sPgJLN3WJj5MhjgX0NKGOm+/wgbPKR/VAGU346xxUt4Y5acHOZCEDu4PndYrzFrzwrcClenj1NDLuO9cCNXNbZLHeZrTG72L0vugJ35C43NxWhn9uiUIP5gdFwZtgPZI2t2jNpZ47lm0h5NkiIWqx5w3KAw3rIt7vLwNVPJt/V+fTqljCGRNfkHADD33L/EFTjWxypEP4aupUdo11Ex4rotmUlz/fEOmrc69qGEVFZEPPIDltdBj0Adu0ahwPj88/suWXcK1hQII7H3ah3dyz/O6+tPnZyw87N6IxI6cPSn+Kd8Ljgz64zRnbbDBKumwDfL96jin3P9uF/NEIYlV4bVQnpe0qppiFr2cbOGSSy5oPsTYFn3mwtfQulFmaO14o+uMDG/GUVwGbvtUa4XNnf/EiQgf6r9rjirKj0RSlL/9c7KVR+x1v6B/tj/Ou/HbS94e/XuzQDnvZsdhEsnQtVra5EBWITc2KBjviiGDJadPYBEWTbmMxRnWbMqB2C+CMuJArZW8EX9h4RsrPFUskE0JDckLkMPz17SG65TSwg12qJ/Co9E3ebV2a/AtXU5HTUM9vXUiXINZR/LzdLKOzv1dxlcPrV9vefOqPgUUP/mon6bn8EYtY2sxpG+dnWWFO16sfn7e196ZYFSVnJigvIxLWck6oZaomKvXgsn+t04cSf4LaUb0JGTCOjC0aB51+X/nHagAIJV6k46ILcnkGInlDYUS00RFdZtYNGMoFM+8ES/Xhy9GThDamn0Dj8b6XcdbovcS0K3Ct8gtkmvhsnLHfbIrJ5viEPExyj/pWi7hLWqjE98A6cZwVapl0hLZjZ9sYeRhLBBpAlJbipC7+dvIFDROiLGvNpjQ6zg+Mkfct9mAPnpHtH6SnhPg4sSmxzSgs6XHwZ9W+LohS7dHcjmoSrm5CjHlUS8Y7QC5mYIGtuVhoJ9eq/QyWxAflNbbYTssXxAxJ+tGLzQnsLZQ//VYCkN7hJyrZHx1EB4U2iwH+WDKgC19y9icl6UuyFIfgiQ8EH6m/OOG3qzHH4Y8f4XwcrrGhkeeOq1ggDj9jnqdCwiPPo7bszPxu2BeavTyWhBf9+qrKz7/KPuVZTWtXOD5LSQ/y2S4+ifZJoOCQnbA9vuWzHJu72l0DKumxoODMRPdEDswIL7OpYE1PV4E1GnDzro9039uuF95o8X2r/lXavMNYFufmjkisJN1TPU9aJcxHD5FdzgYwa+VpHZ8Q/8P6YIuLza+6+7HoQrFYSfyKD1S22BFJNcN2NXCebEFy5/0e+Eql0dzMwWg8C4F8QcnzLfOkcNwGhOGJi+btTa4Jz7kxuVDswNRfZItG/IO7ZgHDhiQbl5zDrM+CeUKiwjDug5mJSYINe5CG9cDyzQRQpAXzZ9I/W8Aok+SbK1qGXC6U8YUaVE+FWq0f89xut58slOt+KPWlC1LHzkgLPJn+/unhznPG7aCI7l6zcYOjD8I4nX7UFQq/OQuT5thFvdc5o2NsWX2HWDyY4qMLtH+A4eHS7eKGr5yE0mh5dcSfUNnZYDcMvVvD62MOsldlrDH/h8XIXcGpufCvKgoSEMnYtaa5eeGOUAFff8DT3M39wch+Ax7m2pP23s4oEVKVlGldGz82cGdI1/qFhMpfW72MLHtnBL3mR48bTUpXLv8ObVKLwYK/9CUlUYWfXyNkaTmDbT99uZN/AG8HiwCobUi5aK4g11f3kq3XLUIAATp8lfmw99lfHsdAnzfzXxSuO+l+KHNkht+7KUC3a7ANjs+BK9XJHnPUcLtPnAO0UpijIzEDDJiIJp86JTGUnDHZZ/HD5vgcz0uH647aKRGNUVgMfinlXTNYZrUfyXhZfci42c/sYbNAll49jEef9w1bZfVbS2BbJljkOIp9zkPkmFQOtPyHhXV2VxJctL4igf1RhV3cIsQ3gAeXwnRkn/flLGC9ZpkNHey4E30agGgZrQg7xW5psJ5w4kPiw+g3/+F7tDnABPWAQCZP+bU13/wJgIVjAPoWe9BA66eBtnmOCQhQciL/Qci27nGre5RIj9IWN92asrggApXtGHZZqbHOcS5f6JqxLdS26gg58oORWSACXg+Bw0CVmTdgQkedECADkdp5HQO1wCS/ivU3ue3rfoXJ8yUIjpsvqpoVlV37RYOvIABHeH6HPWVcN227Py7oBNGhipiDF3Rr21zosGYmthxgeVaVIi8WDeTR4komfVY4WDhoJ2cTFqkyKYpCf9BWgCReKmwp5MmXDgbWz1FrC4AAgECpeC2CJ2QYGz5/YCCjwLaEhenSPbtlhzMS2EVgOK3gJ4XyamjN+ygWmzU0aIX3OUqDyBwwlDS+BuKWBkEG0tfU7TcVMB4TxnufXM/LLLvZgWPeXL4dY9Jl6sFHVwuddgnjrAsUVpR+EHqSw7kTe9XjO/aGmRDOijX0eEq3k92YTdcVB/9dWMw29o/7v+4w/6CVJf1JWj+1alMqJy3ydRlMnloCObEnrYSoyvYHrMqgk3xMTRdnhh9ymE+hq4SX9fF2uslyTHyn2Ywhu249tMjBCortc3T5as6+YdfznF2fY51ZxTf+LStvEYg9KAhGDCS3nm+Ueeb/sH9Hh/di/6n5EcI4m4HgmtWnv7lzh5/8HfhF2W0GEI679tcZsMJPaqgoKjRg60INMQ+Vq4rl3fQpaOPjnd2nlr3wOSdUR7cjjzM7riYDZAEGJiHIm08lay8051pgVD/RfWs6j8ECimQBQNBPUagcJmLNok+fQoFca3A9lnwntaTQUs51TKeyzDkE62oMAkBXWtmr/o0hS0iypTSeXKqSUel3q+L5ahdYxJ99JOIyPKrJMfIQMpfjRsssQICsVG+fd83Eu1MqGbSpOxi7TFpSRr7w+O++iXqMBU7Jrf1vbC586lEvuQW+t9/ilkUKvYCqjPbugYUbQxETlF7ld8a9RZeNCZa3oq6odNpR0J8JOTTnZcw2lCfvPoslJauJVzlcDDPsAOUwjR81BWc15BgVIQbj27B9GGkJMQR6LNh5cYvJQsCo22d3OnikY7oGH04tre52LpmLGjPyly8qxh/uHpZQVbEvq8BrJ+oKgVxEjFUDd8lDWDNLnzgHQI8Srq6DewrrnDfrzpCk2Jajln1p+yx4B8dMblBTdNM+7bx7dhf06CAn+1EyZKVj5Hy1jblJ3mgrM4wbphXm+Qo/Ya6o13BJY8FPOcq9PCE1cL2RYINrEnqEom0Vv7OJreNZ7Df2F9QM23QeQ0kD3KTOYasic/Ad+BbFgyPF3n8STzwO+NuNDdHSl5hiVnqfwVGMUuZuRtc1xYastsHL20/ydT7xJtgHIGFESEvTAquODyvhbbJlXyOy4swnlVzgU1Z4LeMHmzm90xuYXtyKWXhrvL5a85nAApc0V1WIglmOq5OaAZVNwMEqvq67qsfU8fx1EZD0OOCk4iPU0e0a2sE+BeVQwsE4WnaKbiBfaRwOdi//Y2QnoCqhXHLKxZ3pCP0S7neLzGbCRlt9ONtgUr/c2AKvLWaGS0Dnmc2zygVYijgl7fFSdzgkJ+t5M/V01xVziEkADAwhfuFTGSqGwy5cIRwd1qsAm/KbX0ReIBXdC4IgODP0Fjz3RAqsO8oOmOdPp9ZpXhYE40TLHp9EMwYMhF2YNzI5lbP9T3wywQO5rEfgad413D63Kb5vLouKYyhqDphZI40oETaQgq3Z1Sxk0gQ6Lsu0c9xiQQ1pu2AAuTNwn7gvs8bRHU1ikHCoKNiWfOAhmIOkwohh8TSbGOWABiotb7W/CoDBij+lm2T3h0EwHC7MOZ7UN/BBcLlod7QCMmKXekKGv4k5pTrTQgN00Lnn83jXq/I62WX8THDQIPxE/rNzjHCR6vPXXMCuKYpIMDhcGmW+wJMnLpAUCxg89I3bcbKGH0QHHK7qf/HSSRR38JtWtnrge8vorLzhhx9CU8GuP3+JZAz2FcXbKXENN1xcr1Xf1/7aRdWmj4pI1Ir2LnlmexCEVGJW7zQ/ETeK6a4TTDcaVBSkMrrsdZPhjSyg/8WC4CFkC7iIcoDFq0IbLDzIXwLUlye8r9fo2d34Gjh4ZFAKoMn2m9m+oYUS9csfgmi1xMaizUBMgZM+igjdbI85rIGnRwoARc+f8qkMyDPoHbGtu+rM0Z/LTYlqj4O4gyqN4Imqpwx6b2gDoZSKsp50EEk3NClS50eBSef7E5p4mUSozvpXAVu3zZf5zrMXq2qrS4Xt/kHSGIIdVCowcafvUL6o4KuGfHxjrQMZMGFALPqs8H0n8MU9gM2WqQO5TaSfT+1jS+Kp9QwNks9CvRLnvNgvHpa4PjVRSOFApCFWsbbsq3qXKABN4XQhoyFaOSAtWc1zzf4dqMpUmpaGFMDMiHQPj4WmehkuWQiLHJOFh9Uy7X0jrQWnSLkNnjQWDLFt8AcYiFfOmtUqOwd2Zs+5KEOF1G+BQdBafwhuVES2aAaXMV6Z7INMpHLZ0+cVHjfqXmUr+cJcbUzOAckL4gfXuC+5siKaJf66StxSwCLf2DA2Rs6CrS1wPQsEf0BRlS29MAdUhfzEc00UE/YqBP+81KdztQwtB3LEV4/AasYam8OWNNkXxchrseS4BR4GQGhtYDuGC3yNfrD5JFBnvj6E+5KNbnNYNYw3ltJCUSuImWMr0U883c0gwWBFpbJHgfb3JyEA+D3wq6rgI5Qwfr8CcSc+lssmJOu+R9OvSm05LBT5VhX94MUyAyhRn21KZyiivpGSR8UITDqrMI+Lv4XnYGxKGqB0syw2yji3/ACA6gfTQG2o1bBYPVnQ16JZjorTzep4UXX43oGgieYaWyIr8ZiAXWVTAAA="},626:function(e,t,n){t.Z=n.p+"assets/images/image-20220806230807382-ce972a80313ee829768b13c49c111bbd.png"},4343:function(e,t,n){t.Z=n.p+"assets/images/image-20220806231908259-29f8253c8f951b76032810417729e781.png"},5477:function(e,t,n){t.Z=n.p+"assets/images/image-20220806232428977-7a5bc8cbc0acce02ca01ee1931d01d5b.png"},8769:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-07 00.18.02-62b446f9b882330ff0d1a9fb7e7a6396.png"},7991:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-07 22.42.10-c47e67c927e51a566be8b8deb428a236.png"},762:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-07 22.49.01-a6ffd18d89304be80d7459a9d8483400.png"},8872:function(e,t,n){t.Z=n.p+"assets/images/\u622a\u5c4f2022-08-08 00.27.04-d65a2edb1c300496eae515e26cb61e62.png"}}]);
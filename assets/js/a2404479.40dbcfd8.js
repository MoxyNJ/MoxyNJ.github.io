"use strict";(self.webpackChunkninjee=self.webpackChunkninjee||[]).push([[3401],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return c}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=p(t),c=r,k=m["".concat(s,".").concat(c)]||m[c]||d[c]||l;return t?a.createElement(k,o(o({ref:n},u),{},{components:t})):a.createElement(k,o({ref:n},u))}));function c(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var p=2;p<l;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7239:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return s},default:function(){return c},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return d}});var a=t(87462),r=t(63366),l=(t(67294),t(3905)),o=["components"],i={title:"Ajax\u3001Axios",sidebar_position:1,date:new Date("2022-07-01T00:00:00.000Z"),tags:[]},s=void 0,p={unversionedId:"frontEnd/other/Ajax&Axios",id:"frontEnd/other/Ajax&Axios",title:"Ajax\u3001Axios",description:"1. \u7efc\u8ff0",source:"@site/docs/frontEnd/other/Ajax&Axios.md",sourceDirName:"frontEnd/other",slug:"/frontEnd/other/Ajax&Axios",permalink:"/docs/frontEnd/other/Ajax&Axios",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Ajax\u3001Axios",sidebar_position:1,date:"2022-07-01T00:00:00.000Z",tags:[]},sidebar:"\u524d\u7aef",previous:{title:"\u6982\u8ff0",permalink:"/docs/frontEnd/other"},next:{title:"webpack",permalink:"/docs/frontEnd/other/webpack"}},u={},d=[{value:"1. \u7efc\u8ff0",id:"1-\u7efc\u8ff0",level:2},{value:"1.1 Ajax \u7b80\u4ecb",id:"11-ajax-\u7b80\u4ecb",level:3},{value:"1.2 XML \u7b80\u4ecb",id:"12-xml-\u7b80\u4ecb",level:3},{value:"1.3 AJAX \u7684\u7279\u70b9",id:"13-ajax-\u7684\u7279\u70b9",level:3},{value:"2. HTTP \u8bf7\u6c42",id:"2-http-\u8bf7\u6c42",level:2},{value:"2.1 \u4e0d\u540c\u7c7b\u578b\u7684\u8bf7\u6c42\u53ca\u5176\u4f5c\u7528",id:"21-\u4e0d\u540c\u7c7b\u578b\u7684\u8bf7\u6c42\u53ca\u5176\u4f5c\u7528",level:3},{value:"2.2 \u533a\u522b \u4e00\u822chttp\u8bf7\u6c42 \u4e0e ajax\u8bf7\u6c42",id:"22-\u533a\u522b-\u4e00\u822chttp\u8bf7\u6c42-\u4e0e-ajax\u8bf7\u6c42",level:3},{value:"3. express",id:"3-express",level:2},{value:"3.1 express \u57fa\u672c",id:"31-express-\u57fa\u672c",level:3},{value:"3.2 nodemon \u57fa\u672c",id:"32-nodemon-\u57fa\u672c",level:3},{value:"4. Ajax \u4f7f\u7528",id:"4-ajax-\u4f7f\u7528",level:2},{value:"4.1 \u6b65\u9aa4",id:"41-\u6b65\u9aa4",level:3},{value:"4.2 API \u603b\u7ed3",id:"42-api-\u603b\u7ed3",level:3},{value:"4.3 \u6848\u4f8b",id:"43-\u6848\u4f8b",level:3},{value:"4.3.1 \u8bf7\u6c42\u4e00\u4e2a json \u6570\u636e\u54cd\u5e94",id:"431-\u8bf7\u6c42\u4e00\u4e2a-json-\u6570\u636e\u54cd\u5e94",level:4},{value:"4.3.2 \u8bf7\u6c42\u8d85\u65f6\u4e0e\u7f51\u7edc\u5f02\u5e38",id:"432-\u8bf7\u6c42\u8d85\u65f6\u4e0e\u7f51\u7edc\u5f02\u5e38",level:4},{value:"5 \u8de8\u57df",id:"5-\u8de8\u57df",level:2},{value:"5.1 \u540c\u6e90\u7b56\u7565",id:"51-\u540c\u6e90\u7b56\u7565",level:3},{value:"5.2 \u5982\u4f55\u89e3\u51b3\u8de8\u57df",id:"52-\u5982\u4f55\u89e3\u51b3\u8de8\u57df",level:3},{value:"5.2.1 JSONP",id:"521-jsonp",level:4},{value:"5.2.2 CORS",id:"522-cors",level:4},{value:"6 fetch - AJAX",id:"6-fetch---ajax",level:2},{value:"1 \u7279\u6027",id:"1-\u7279\u6027",level:2},{value:"1.1 API",id:"11-api",level:3},{value:"1.2 \u57fa\u672c\u65b9\u6cd5",id:"12-\u57fa\u672c\u65b9\u6cd5",level:3},{value:"<code>axios(config)</code>",id:"axiosconfig",level:5},{value:"<code>axios(url[, config])</code> \u9ed8\u8ba4\u53d1\u9001 GET \u8bf7\u6c42",id:"axiosurl-config-\u9ed8\u8ba4\u53d1\u9001-get-\u8bf7\u6c42",level:5},{value:"<code>axios.get()</code> \u548c <code>axios.post()</code>",id:"axiosget-\u548c-axiospost",level:5},{value:"<code>axios.all()</code> \u548c <code>axios.spread()</code>",id:"axiosall-\u548c-axiosspread",level:5},{value:"1.3 config \u914d\u7f6e",id:"13-config-\u914d\u7f6e",level:3},{value:"1.4 response \u54cd\u5e94\u7ed3\u679c",id:"14-response-\u54cd\u5e94\u7ed3\u679c",level:3},{value:"1.5 \u9ed8\u8ba4\u914d\u7f6e",id:"15-\u9ed8\u8ba4\u914d\u7f6e",level:3},{value:"1.6 \u521b\u5efa\u5b9e\u4f8b",id:"16-\u521b\u5efa\u5b9e\u4f8b",level:3},{value:"<code>axios.create([config])</code>",id:"axioscreateconfig",level:5},{value:"1.7 \u62e6\u622a\u5668",id:"17-\u62e6\u622a\u5668",level:3},{value:"1.8 \u53d6\u6d88\u8bf7\u6c42",id:"18-\u53d6\u6d88\u8bf7\u6c42",level:3},{value:"2 Axios \u5c01\u88c5",id:"2-axios-\u5c01\u88c5",level:2}],m={toc:d};function c(e){var n=e.components,i=(0,r.Z)(e,o);return(0,l.kt)("wrapper",(0,a.Z)({},m,i,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"1-\u7efc\u8ff0"},"1. \u7efc\u8ff0"),(0,l.kt)("h3",{id:"11-ajax-\u7b80\u4ecb"},"1.1 Ajax \u7b80\u4ecb"),(0,l.kt)("p",null,"AJAX \u5168\u79f0\u4e3a Asynchronous JavaScript And XML\uff0c\u5c31\u662f\u5f02\u6b65\u7684 JS \u548c XML\u3002"),(0,l.kt)("p",null,"\u901a\u8fc7 AJAX \u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u5411\u670d\u52a1\u5668\u53d1\u9001\u5f02\u6b65\u8bf7\u6c42\uff0c\u6700\u5927\u7684\u4f18\u52bf\uff1a",(0,l.kt)("strong",{parentName:"p"},"\u65e0\u5237\u65b0\u83b7\u53d6\u6570\u636e"),"\u3002AJAX \u4e0d\u662f\u65b0\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u800c\u662f\u4e00\u79cd\u5c06\u73b0\u6709\u7684\u6807\u51c6\u7ec4\u5408\u5728\u4e00\u8d77\u4f7f\u7528\u7684\u65b0\u65b9\u5f0f\u3002"),(0,l.kt)("h3",{id:"12-xml-\u7b80\u4ecb"},"1.2 XML \u7b80\u4ecb"),(0,l.kt)("p",null,"XML \u53ef\u6269\u5c55\u6807\u8bb0\u8bed\u8a00\u3002\nXML \u88ab\u8bbe\u8ba1\u7528\u6765\u4f20\u8f93\u548c\u5b58\u50a8\u6570\u636e\u3002\nXML \u548cHTML \u7c7b\u4f3c\uff0c\u4e0d\u540c\u7684\u662fHTML \u4e2d\u90fd\u662f\u9884\u5b9a\u4e49\u6807\u7b7e\uff0c\u800cXML \u4e2d\u6ca1\u6709\u9884\u5b9a\u4e49\u6807\u7b7e\uff0c\u5168\u90fd\u662f\u81ea\u5b9a\u4e49\u6807\u7b7e\uff0c\u7528\u6765\u8868\u793a\u4e00\u4e9b\u6570\u636e\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<student>\n    <name>\u5b59\u609f\u7a7a</name>\n    <age>18</age>\n    <gender>\u7537</gender>\n</student>\n")),(0,l.kt)("p",null,"\u73b0\u5728\u5df2\u7ecf\u88abJSON \u53d6\u4ee3\u4e86\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{"name":"\u5b59\u609f\u7a7a","age":18,"gender":"\u7537"}\n')),(0,l.kt)("h3",{id:"13-ajax-\u7684\u7279\u70b9"},"1.3 AJAX \u7684\u7279\u70b9"),(0,l.kt)("p",null,"\u4f18\u70b9"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u65e0\u9700\u5237\u65b0\u9875\u9762\u800c\u4e0e\u670d\u52a1\u5668\u7aef\u8fdb\u884c\u901a\u4fe1"),(0,l.kt)("li",{parentName:"ol"},"\u5141\u8bb8\u4f60\u6839\u636e\u7528\u6237\u4e8b\u4ef6\u6765\u66f4\u65b0\u90e8\u5206\u9875\u9762\u5185\u5bb9")),(0,l.kt)("p",null,"\u7f3a\u70b9"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u6ca1\u6709\u6d4f\u89c8\u5386\u53f2\uff0c\u4e0d\u80fd\u56de\u9000"),(0,l.kt)("li",{parentName:"ol"},"\u5b58\u5728\u8de8\u57df\u95ee\u9898(\u540c\u6e90)"),(0,l.kt)("li",{parentName:"ol"},"SEO \u4e0d\u53cb\u597d")),(0,l.kt)("h2",{id:"2-http-\u8bf7\u6c42"},"2. HTTP \u8bf7\u6c42"),(0,l.kt)("h3",{id:"21-\u4e0d\u540c\u7c7b\u578b\u7684\u8bf7\u6c42\u53ca\u5176\u4f5c\u7528"},"2.1 \u4e0d\u540c\u7c7b\u578b\u7684\u8bf7\u6c42\u53ca\u5176\u4f5c\u7528"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"GET"),": \u4ece\u670d\u52a1\u5668\u7aef ",(0,l.kt)("strong",{parentName:"li"},"\u8bfb\u53d6")," \u6570\u636e\uff08\u67e5\uff09"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"POST"),": \u5411\u670d\u52a1\u5668\u7aef ",(0,l.kt)("strong",{parentName:"li"},"\u6dfb\u52a0")," \u65b0\u6570\u636e \uff08\u589e\uff09"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"PUT"),": ",(0,l.kt)("strong",{parentName:"li"},"\u66f4\u65b0")," \u670d\u52a1\u5668\u7aef\u5df2\u7ecf\u6570\u636e \uff08\u6539\uff09"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"DELETE"),": ",(0,l.kt)("strong",{parentName:"li"},"\u5220\u9664")," \u670d\u52a1\u5668\u7aef\u6570\u636e \uff08\u5220\uff09")),(0,l.kt)("h3",{id:"22-\u533a\u522b-\u4e00\u822chttp\u8bf7\u6c42-\u4e0e-ajax\u8bf7\u6c42"},"2.2 \u533a\u522b \u4e00\u822chttp\u8bf7\u6c42 \u4e0e ajax\u8bf7\u6c42"),(0,l.kt)("p",null,"ajax\u8bf7\u6c42 \u662f\u4e00\u79cd\u7279\u522b\u7684 http\u8bf7\u6c42\n\u5bf9\u670d\u52a1\u5668\u7aef\u6765\u8bf4, \u6ca1\u6709\u4efb\u4f55\u533a\u522b, \u533a\u522b\u5728\u6d4f\u89c8\u5668\u7aef\n\u6d4f\u89c8\u5668\u7aef\u53d1\u8bf7\u6c42: \u53ea\u6709XHR \u6216fetch \u53d1\u51fa\u7684\u624d\u662fajax \u8bf7\u6c42, \u5176\u5b83\u6240\u6709\u7684\u90fd\u662f\u975eajax \u8bf7\u6c42\n\u6d4f\u89c8\u5668\u7aef\u63a5\u6536\u5230\u54cd\u5e94\n(1) \u4e00\u822c\u8bf7\u6c42: \u6d4f\u89c8\u5668\u4e00\u822c\u4f1a\u76f4\u63a5\u663e\u793a\u54cd\u5e94\u4f53\u6570\u636e, \u4e5f\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u5237\u65b0/\u8df3\u8f6c\u9875\u9762\n(2) ajax\u8bf7\u6c42: \u6d4f\u89c8\u5668\u4e0d\u4f1a\u5bf9\u754c\u9762\u8fdb\u884c\u4efb\u4f55\u66f4\u65b0\u64cd\u4f5c, \u53ea\u662f\u8c03\u7528\u76d1\u89c6\u7684\u56de\u8c03\u51fd\u6570\u5e76\u4f20\u5165\u54cd\u5e94\u76f8\u5173\u6570\u636e"),(0,l.kt)("h2",{id:"3-express"},"3. express"),(0,l.kt)("h3",{id:"31-express-\u57fa\u672c"},"3.1 express \u57fa\u672c"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20220630212747956",src:t(17550).Z,width:"1111",height:"664"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.expressjs.com.cn/"},"https://www.expressjs.com.cn/"))),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u521d\u59cb\u5316\u73af\u5883\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"npm init --yes")," "),(0,l.kt)("li",{parentName:"ol"},"\u5b89\u88c5 express\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"npm install express --save")),(0,l.kt)("li",{parentName:"ol"},"\u4ee3\u7801\u8fb9\u5199\u597d\u540e\uff0c\u542f\u52a8\u670d\u52a1\u5668\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"node xxx.js"))),(0,l.kt)("p",null,"\u670d\u52a1\u5668\u57fa\u672c\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// 1. \u5f15\u5165express\nconst express = require('express');\n\n// 2. \u521b\u5efa\u5e94\u7528\u5bf9\u8c61\nconst app = express();\n\n// 3. \u521b\u5efa\u8def\u7531\u89c4\u5219\n// request \u662f\u5bf9\u8bf7\u6c42\u62a5\u6587\u7684\u5c01\u88c5\n// response \u662f\u5bf9\u54cd\u5e94\u62a5\u6587\u7684\u5c01\u88c5\napp.get('/', (request, response) => {\n  // \u8bbe\u7f6e\u54cd\u5e94\u5934 \u8bbe\u7f6e\u5141\u8bb8\u8de8\u57df\n  response.setHeader('Access-Control-Allow-Origin', '*');\n  // \u8bbe\u7f6e\u54cd\u5e94\u4f53\n  response.send(\"Hello Ajax\");\n});\n\n// 4. \u76d1\u542c\u7aef\u53e3\uff0c\u542f\u52a8\u670d\u52a1\napp.listen(8000, () => {\n  console.log(\"\u670d\u52a1\u5df2\u7ecf\u542f\u52a8, 8000 \u7aef\u53e3\u76d1\u542c\u4e2d...\");\n })\n")),(0,l.kt)("h3",{id:"32-nodemon-\u57fa\u672c"},"3.2 nodemon \u57fa\u672c"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/nodemon"},"https://www.npmjs.com/package/nodemon"))),(0,l.kt)("p",null,"\u4e00\u65e6\u670d\u52a1\u5668\u7684\u6587\u4ef6\u5185\u5bb9\u6709\u4fee\u6539\uff0c\u81ea\u52a8\u91cd\u65b0\u542f\u52a8\u670d\u52a1\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20220630212803459",src:t(46342).Z,width:"1214",height:"752"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"npm install -g nodemon")),(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5\u540e\uff0c\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"ndoemon server.js")," \u53bb\u542f\u52a8\u7a0b\u5e8f\u3002\u4e00\u65e6\u4ee3\u7801\u53d1\u751f\u53d8\u5316\uff0c\u5c31\u4f1a\u81ea\u52a8\u91cd\u65b0\u542f\u52a8\u3002")),(0,l.kt)("h2",{id:"4-ajax-\u4f7f\u7528"},"4. Ajax \u4f7f\u7528"),(0,l.kt)("h3",{id:"41-\u6b65\u9aa4"},"4.1 \u6b65\u9aa4"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// 1.\u521b\u5efaXMLHttpRequest\u5bf9\u8c61\nlet xhr = new XMLHttpRequest();\n\n// 2.\u8bbe\u7f6e\u8bf7\u6c42\u4fe1\u606f\uff08\u8bf7\u6c42\u884c + \u8bf7\u6c42\u5934\uff09\n// \u8bf7\u6c42\u884c\uff08\u8bf7\u6c42\u65b9\u5f0f + URL\uff09\nxhr.open('GET', 'http://127.0.0.1:8000/server?a=100&b=200&c=300');\n// \u8bf7\u6c42\u5934\uff08\u53ef\u7701\u7565\uff09\nxhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\n// 3.\u53d1\u9001\u8bf7\u6c42\uff08\u8bf7\u6c42\u4f53\uff09\nxhr.send(body)\n// post\u4f7f\u7528\uff0cget\u8bf7\u6c42\u6ca1\u6709\u8bf7\u6c42\u4f53\n\n\n// 4.\u63a5\u6536\u54cd\u5e94\uff08\u4e8b\u4ef6\u7ed1\u5b9a\uff09\nxhr.onreadystatechange = () => {\n    // readyState \u662f xhr\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027, \u8868\u793a\u72b6\u6001 0 1 2 3 4\n    if(xhr.readyState == 4 && xhr.status == 200){\n        \n        // xhr.responseXML \u63a5\u6536 xml\u683c\u5f0f \u7684\u54cd\u5e94\u6570\u636e\n        // xhr.responseText \u63a5\u6536 \u6587\u672c\u683c\u5f0f \u7684\u54cd\u5e94\u6570\u636e\n        const text = xhr.responseText;\n        console.log('\u72b6\u6001\u7801', xhr.status); \n        console.log('\u72b6\u6001\u5b57\u7b26\u4e32', xhr.statusText); \n        console.log('\u6240\u6709\u54cd\u5e94\u5934', xhr.getAllResponseHeaders()); \n        console.log('\u54cd\u5e94\u4f53', xhr.response); \n    }\n}\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"readyState")," \u4ee3\u8868\u7684\u72b6\u6001\uff1a"),(0,l.kt)("ol",{start:0},(0,l.kt)("li",{parentName:"ol"},"\uff0d\uff08\u672a\u521d\u59cb\u5316\uff09\u8fd8\u6ca1\u6709\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"send()")," \u65b9\u6cd5\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\uff0d\uff08\u8f7d\u5165\uff09\u5df2\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"send()")," \u65b9\u6cd5\uff0c\u6b63\u5728\u53d1\u9001\u8bf7\u6c42\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\uff0d\uff08\u8f7d\u5165\u5b8c\u6210\uff09",(0,l.kt)("inlineCode",{parentName:"li"},"send()")," \u65b9\u6cd5\u6267\u884c\u5b8c\u6210\uff0c\u5df2\u7ecf\u53d1\u9001\u8bf7\u6c42\uff0c\u5e76\u63a5\u6536\u5230\u54cd\u5e94\u884c\u548c\u5934 line + header \u7684\u4fe1\u606f\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\uff0d\uff08\u89e3\u6790\uff09\u5f00\u59cb\u4e0b\u8f7d\u5e76\u89e3\u6790\u54cd\u5e94\u4f53 body\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\uff0d\uff08\u5b8c\u6210\uff09\u54cd\u5e94\u5185\u5bb9\u4e0b\u8f7d\u5e76\u89e3\u6790\u5b8c\u6210 / \u6216\u64cd\u4f5c\u5931\u8d25\u3002")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0",src:t(47877).Z,width:"968",height:"428"})),(0,l.kt)("h3",{id:"42-api-\u603b\u7ed3"},"4.2 API \u603b\u7ed3"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"let xhr = new XMLHttpRequest();"),"\uff1a\u521b\u5efa XHR \u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.status"),"\uff1a\u54cd\u5e94\u72b6\u6001\u7801\u503c\uff0c\u5982 200\u3001404"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.statusText"),"\uff1a\u54cd\u5e94\u72b6\u6001\u6587\u672c\uff0c\u5982 \u2019ok\u2018\u3001\u2018not found\u2019"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.readyState"),"\uff1a\u6807\u8bc6\u8bf7\u6c42\u72b6\u6001\u7684\u53ea\u8bfb\u5c5e\u6027 0-1-2-3-4"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.onreadystatechange"),"\uff1a\u7ed1\u5b9a readyState \u6539\u53d8\u7684\u76d1\u542c"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.responseType"),"\uff1a\u6307\u5b9a\u54cd\u5e94\u6570\u636e\u7c7b\u578b\uff0c\u5982\u679c\u662f \u2018json\u2019\uff0c\u5f97\u5230\u54cd\u5e94\u540e\u81ea\u52a8\u89e3\u6790\u54cd\u5e94"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.response"),"\uff1a\u54cd\u5e94\u4f53\u6570\u636e\uff0c\u7c7b\u578b\u53d6\u51b3\u4e8e responseType \u7684\u6307\u5b9a"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.timeout"),"\uff1a\u6307\u5b9a\u8bf7\u6c42\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a 0 \u4ee3\u8868\u6ca1\u6709\u9650\u5236"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.ontimeout"),"\uff1a\u7ed1\u5b9a\u8d85\u65f6\u7684\u76d1\u542c"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.onerror"),"\uff1a\u7ed1\u5b9a\u8bf7\u6c42\u7f51\u7edc\u9519\u8bef\u7684\u76d1\u542c"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.open()"),"\uff1a\u521d\u59cb\u5316\u4e00\u4e2a\u8bf7\u6c42\uff0c\u53c2\u6570\u4e3a\uff1a(method, url","[, async]",")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.send(data)"),"\uff1a\u53d1\u9001\u8bf7\u6c42"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.abort()"),"\uff1a\u4e2d\u65ad\u8bf7\u6c42 \uff08\u53d1\u51fa\u5230\u8fd4\u56de\u4e4b\u95f4\uff09"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.getResponseHeader(name)"),"\uff1a\u83b7\u53d6\u6307\u5b9a\u540d\u79f0\u7684\u54cd\u5e94\u5934\u503c"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.getAllResponseHeaders()"),"\uff1a\u83b7\u53d6\u6240\u6709\u54cd\u5e94\u5934\u7ec4\u6210\u7684\u5b57\u7b26\u4e32"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"xhr.setRequestHeader(name, value)"),"\uff1a\u8bbe\u7f6e\u8bf7\u6c42\u5934")),(0,l.kt)("h3",{id:"43-\u6848\u4f8b"},"4.3 \u6848\u4f8b"),(0,l.kt)("h4",{id:"431-\u8bf7\u6c42\u4e00\u4e2a-json-\u6570\u636e\u54cd\u5e94"},"4.3.1 \u8bf7\u6c42\u4e00\u4e2a json \u6570\u636e\u54cd\u5e94"),(0,l.kt)("p",null,"\u670d\u52a1\u5668\u4e2d\u6dfb\u52a0\u4e00\u6761\u89c4\u5219\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// all  \u8868\u660e\u8be5\u89c4\u5219\u53ef\u4ee5\u9002\u914d post get \u7b49\u5168\u90e8\u8bf7\u6c42\u65b9\u5f0f\napp.all('/json-server', (request, response) => {\n  // \u8bbe\u7f6e\u54cd\u5e94\u5934, \u8bbe\u7f6e\u5141\u8bb8\u8de8\u57df\n  response.setHeader('Access-Control-Allow-Origin', '*');\n  // \u8bbe\u7f6e\u54cd\u5e94\u5934, \u8bbe\u7f6e\u5141\u8bb8\u81ea\u5b9a\u4e49\u5934\u4fe1\u606f\n  response.setHeader('Access-Control-Allow-Headers', '*');\n  // \u54cd\u5e94\u4e00\u4e2a\u6570\u636e\n  const data = {\n    name: 'atguigu'\n  };\n  // \u5bf9\u8c61\u5e8f\u5217\u5316\u4e3a\u5b57\u7b26\u4e32\n  let str = JSON.stringify(data)\n  // \u8bbe\u7f6e\u54cd\u5e94\u4f53 \n  response.send(str);\n});\n")),(0,l.kt)("p",null,"\u5ba2\u6237\u7aef\u4e2d\u53d1\u9001 Ajax\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// 1.\u53d1\u9001\u8bf7\u6c42\nconst xhr = new XMLHttpRequest();\n\n// 2.\u521d\u59cb\u5316\nxhr.open('GET', 'http://127.0.0.1:8000/json-server');\n// \u81ea\u52a8\u8f6c\u6362: \u8bbe\u7f6e\u54cd\u5e94\u4f53\u6570\u636e\u7684\u7c7b\u578b\nxhr.responseType = 'json';\n\n// 3.\u53d1\u9001\nxhr.send();\n\n// 4.\u4e8b\u4ef6\u7ed1\u5b9a\nxhr.onreadystatechange = function(){\n    if(xhr.readyState === 4){\n        if(xhr.status >= 200 && xhr.status < 300){\n            // \u8f6c\u5316\u4e3a json \u6709\u4e24\u79cd\u65b9\u5f0f\n            // [1]\u624b\u52a8\u7528 JSON.parse(xhr.response)\n            // [2]\u81ea\u52a8\u8f6c\u6362\uff0c\u5728\u521d\u59cb\u5316\u662f\u8bbe\u7f6e\u89e3\u6790\u7c7b\u578b\u4e3a\uff1aresponseType\n            console.log(xhr.response); // \u5df2\u7ecf\u81ea\u52a8\u53d8\u6210 json\n        }\n    }\n}\n")),(0,l.kt)("h4",{id:"432-\u8bf7\u6c42\u8d85\u65f6\u4e0e\u7f51\u7edc\u5f02\u5e38"},"4.3.2 \u8bf7\u6c42\u8d85\u65f6\u4e0e\u7f51\u7edc\u5f02\u5e38"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u8d85\u65f6\u8bbe\u7f6e \uff082\u79d2\uff09\nxhr.timeout = 2000;\n// \u8d85\u65f6\u56de\u8c03\nxhr.ontimeout = function(){\n    alert('\u7f51\u7edc\u8d85\u65f6\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5')\n}\n// \u7f51\u7edc\u5f02\u5e38\u56de\u8c03\nxhr.onerror = function(){\n    alert('\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5')\n}\n\n// \u624b\u52a8\u53d6\u6d88\u8bf7\u6c42\nxhr.abort()\n")),(0,l.kt)("h2",{id:"5-\u8de8\u57df"},"5 \u8de8\u57df"),(0,l.kt)("h3",{id:"51-\u540c\u6e90\u7b56\u7565"},"5.1 \u540c\u6e90\u7b56\u7565"),(0,l.kt)("p",null,"\u540c\u6e90\u7b56\u7565(Same-Origin Policy) \u6700\u65e9\u7531 Netscape \u516c\u53f8\u63d0\u51fa\uff0c\u662f\u6d4f\u89c8\u5668\u7684\u4e00\u79cd\u5b89\u5168\u7b56\u7565\uff1b"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u540c\u6e90\uff1a \u534f\u8bae\u3001\u57df\u540d\u3001\u7aef\u53e3\u53f7\u5fc5\u987b\u5b8c\u5168\u76f8\u540c")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u8de8\u57df\uff1a \u8fdd\u80cc\u540c\u6e90\u7b56\u7565\u5c31\u662f\u8de8\u57df"))),(0,l.kt)("h3",{id:"52-\u5982\u4f55\u89e3\u51b3\u8de8\u57df"},"5.2 \u5982\u4f55\u89e3\u51b3\u8de8\u57df"),(0,l.kt)("h4",{id:"521-jsonp"},"5.2.1 JSONP"),(0,l.kt)("p",null,"JSONP \u662f\u4ec0\u4e48"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"JSONP (JSON with Padding)\uff0c\u662f\u4e00\u4e2a\u975e\u5b98\u65b9\u7684\u8de8\u57df\u89e3\u51b3\u65b9\u6848\uff0c\u53ea\u652f\u6301 get \u8bf7\u6c42\u3002")),(0,l.kt)("p",null,"JSONP \u600e\u4e48\u5de5\u4f5c\u7684\uff1f"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5728\u7f51\u9875\u6709\u4e00\u4e9b\u6807\u7b7e\u5929\u751f\u5177\u6709\u8de8\u57df\u80fd\u529b\uff0c\u6bd4\u5982\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"img"),"\u3001 ",(0,l.kt)("inlineCode",{parentName:"li"},"link"),"\u3001 ",(0,l.kt)("inlineCode",{parentName:"li"},"iframe"),"\u3001 ",(0,l.kt)("inlineCode",{parentName:"li"},"script"),"\u3002JSONP \u5c31\u662f\u5229\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"script")," \u6807\u7b7e\u7684\u8de8\u57df\u80fd\u529b\u6765\u53d1\u9001\u8bf7\u6c42\u7684\u3002")),(0,l.kt)("p",null,"JSONP \u4f7f\u7528"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'// \u3010\u5ba2\u6237\u7aef\u3011\n// 1.\u52a8\u6001\u7684\u521b\u5efa\u4e00\u4e2ascript\u6807\u7b7e\nlet script = document.createElement("script");\n\n// 2.\u8bbe\u7f6escript\u7684src\uff0c\u8bbe\u7f6e\u63a5\u6536\u6570\u636e\u7684\u56de\u8c03\u51fd\u6570\u3002\n//   \u628a\u56de\u8c03\u51fd\u6570\u540d\u901a\u8fc7URL\u4f20\u9012\u7ed9\u670d\u52a1\u5668\uff0c\u8ba9\u670d\u52a1\u5668\u8c03\u7528\u3002\nscript.src = "http://localhost:3000/testAJAX?callback=handle";\nfunction handle(data) {\n    console.log(data.name);\n};\n\n// 3.\u5c06script\u6dfb\u52a0\u5230body\u4e2d\ndocument.body.appendChild(script);\n\n\n\n// \u3010\u670d\u52a1\u5668\u3011\n//  \u670d\u52a1\u5668\u8fd4\u56de\u5fc5\u987b\u662f\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\uff0c\u8fd9\u4e2a\u51fd\u6570\u5ba2\u6237\u7aef\u5fc5\u987b\u63d0\u524d\u58f0\u660e\uff0c\u4e0d\u7136\u65e0\u6cd5\u8c03\u7528\nall.get("/testAJAX" , function (req , res) {\n    console.log("\u6536\u5230\u8bf7\u6c42");\n    const callback = req.query.callback; \n    const obj = {\n        name: "Moxy",\n        age: 18\n    }\n    const data = JSON.stringify(obj);\n    res.send(`${callback}(${data})`)      // handle(data)\n});\n')),(0,l.kt)("h4",{id:"522-cors"},"5.2.2 CORS"),(0,l.kt)("p",null,"CORS\uff08Cross-Origin Resource Sharing\uff09\uff0c\u8de8\u57df\u8d44\u6e90\u5171\u4eab\u3002CORS \u662f\u5b98\u65b9\u7684\u8de8\u57df\u89e3\u51b3\u65b9\u6848\uff0c\u5b83\u7684\u7279\u70b9\u662f\u4e0d\u9700\u8981\u5728\u5ba2\u6237\u7aef\u505a\u4efb\u4f55\u7279\u6b8a\u7684\u64cd\u4f5c\uff0c\u5b8c\u5168\u5728\u670d\u52a1\u5668\u4e2d\u8fdb\u884c\u5904\u7406\uff0c\u652f\u6301 get \u548c post \u8bf7\u6c42\u3002\u8de8\u57df\u8d44\u6e90\u5171\u4eab\u6807\u51c6\u65b0\u589e\u4e86\u4e00\u7ec4 HTTP \u9996\u90e8\u5b57\u6bb5\uff0c\u5141\u8bb8\u670d\u52a1\u5668\u58f0\u660e\u54ea\u4e9b\u6e90\u7ad9\u901a\u8fc7\u6d4f\u89c8\u5668\u6709\u6743\u9650\u8bbf\u95ee\u54ea\u4e9b\u8d44\u6e90\u3002"),(0,l.kt)("p",null,"CORS \u4f7f\u7528"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u8bbe\u7f6e\u4e00\u4e2a\u54cd\u5e94\u5934\u6765\u544a\u8bc9\u6d4f\u89c8\u5668\uff0c\u8be5\u8bf7\u6c42\u5141\u8bb8\u8de8\u57df\uff0c\u6d4f\u89c8\u5668\u6536\u5230\u8be5\u54cd\u5e94\u4ee5\u540e\u5c31\u4f1a\u5bf9\u54cd\u5e94\u653e\u884c\u3002")),(0,l.kt)("p",null,"\u670d\u52a1\u7aef\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'all.get("/testAJAX" , function (req , res) {\n    //\u901a\u8fc7res\u8bbe\u7f6e\u54cd\u5e94\u5934\uff0c\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\n    //res.set("Access-Control-Allow-Origin","http://127.0.0.1:3000");\n    res.set("Access-Control-Allow-Origin","*");\n    res.send("testAJAX \u8fd4\u56de\u7684\u54cd\u5e94");\n});\n')),(0,l.kt)("h2",{id:"6-fetch---ajax"},"6 fetch - AJAX"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"fetch")," \u7684\u57fa\u672c\u4f7f\u7528\uff1a"),(0,l.kt)("p",null,"\u8bf7\u6c42\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"fetch('URL', {init})")),(0,l.kt)("p",null,"\u54cd\u5e94\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},".then(response => { .. })"),"\u5904\u7406\u54cd\u5e94\u4fe1\u606f"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"fetch('http://127.0.0.1:8000/fetch-server?vip=10', {\n    //\u8bf7\u6c42\u65b9\u6cd5\n    method: 'POST',\n    //\u8bf7\u6c42\u5934\n    headers: {\n        name: 'Nliver'\n    },\n    //\u8bf7\u6c42\u4f53\n    body: 'username=admin&password=admin'\n}).then(response => {\n    // \u4e0d\u80fd\u76f4\u63a5\u83b7\u53d6\uff0c\u800c\u662f\u8981\u6839\u636e\u6570\u636e\u7c7b\u578b\uff0c\u5904\u7406\u540e return\uff0c\u5728\u4e0b\u4e00\u4e2a then \u62ff\u5230\u6570\u636e\u3002\n    // return response.text();\n    return response.json();\n}).then(response => {\n    console.log(response);\n})\n")),(0,l.kt)("h1",{id:"part-\u2171-axios"},"Part \u2161 Axios"),(0,l.kt)("p",null,"Promise based HTTP client for  the browser and node.js."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"npm install axios"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"yarn add axios")))),(0,l.kt)("h2",{id:"1-\u7279\u6027"},"1 \u7279\u6027"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4ece\u6d4f\u89c8\u5668\u4e2d\u521b\u5efa ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest"},"XMLHttpRequests")),(0,l.kt)("li",{parentName:"ul"},"\u4ece node.js \u521b\u5efa ",(0,l.kt)("a",{parentName:"li",href:"http://nodejs.org/api/http.html"},"http")," \u8bf7\u6c42"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301 ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"},"Promise")," API"),(0,l.kt)("li",{parentName:"ul"},"\u62e6\u622a\u8bf7\u6c42\u548c\u54cd\u5e94"),(0,l.kt)("li",{parentName:"ul"},"\u8f6c\u6362\u8bf7\u6c42\u6570\u636e\u548c\u54cd\u5e94\u6570\u636e"),(0,l.kt)("li",{parentName:"ul"},"\u53d6\u6d88\u8bf7\u6c42"),(0,l.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u8f6c\u6362 JSON \u6570\u636e"),(0,l.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u7aef\u652f\u6301\u9632\u5fa1 ",(0,l.kt)("a",{parentName:"li",href:"http://en.wikipedia.org/wiki/Cross-site_request_forgery"},"XSRF"))),(0,l.kt)("h3",{id:"11-api"},"1.1 API"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Axios\u7cfb\u7edf\u5b66\u4e60\u7b14\u8bb0\u539f\u7406\u56fe",src:t(69370).Z,width:"668",height:"562"})),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"\u57fa\u672c\u65b9\u6cd5"),(0,l.kt)("th",{parentName:"tr",align:null},"\u4f5c\u7528"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios(config)")),(0,l.kt)("td",{parentName:"tr",align:null},"\u901a\u7528/\u6700\u672c\u8d28\u7684\u53d1\u4efb\u610f\u7c7b\u578b\u8bf7\u6c42\u7684\u65b9\u5f0f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios(url[, config])")),(0,l.kt)("td",{parentName:"tr",align:null},"\u53ef\u4ee5\u53ea\u6307\u5b9a url \u53d1 get \u8bf7\u6c42")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"\u57fa\u672c\u65b9\u6cd5\u7684\u522b\u540d")),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.request(config)")),(0,l.kt)("td",{parentName:"tr",align:null},"\u7b49\u540c\u4e8e ",(0,l.kt)("inlineCode",{parentName:"td"},"axios(config)"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.get(url[, config])")),(0,l.kt)("td",{parentName:"tr",align:null},"\u53d1 get \u8bf7\u6c42")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.delete(url[, config])")),(0,l.kt)("td",{parentName:"tr",align:null},"\u53d1 delete \u8bf7\u6c42")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.post(url[, data, config])")),(0,l.kt)("td",{parentName:"tr",align:null},"\u53d1 post \u8bf7\u6c42\uff08",(0,l.kt)("inlineCode",{parentName:"td"},"data")," \u8bf7\u6c42\u4f53\uff09")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.put(url[, data, config])")),(0,l.kt)("td",{parentName:"tr",align:null},"\u53d1 put \u8bf7\u6c42\uff08",(0,l.kt)("inlineCode",{parentName:"td"},"data")," \u8bf7\u6c42\u4f53\uff09")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"axios.head(url","[, config]",")"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"axios.options(url","[, config]",")"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"axios.patch(url[, data","[, config]","])"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"\u989d\u5916\u914d\u7f6e")),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.defaults.xxx")),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bf7\u6c42\u7684\u9ed8\u8ba4\u5168\u5c40\u914d\u7f6e")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.interceptors.request.use()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u6dfb\u52a0\u8bf7\u6c42\u62e6\u622a\u5668")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.interceptors.response.use()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u6dfb\u52a0\u54cd\u5e94\u62e6\u622a\u5668")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"\u521b\u5efa axios \u5b9e\u4f8b")),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.create([config])")),(0,l.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 axios (\u5b83\u6ca1\u6709\u4e0b\u9762\u7684\u529f\u80fd)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"\u53d6\u6d88\u8bf7\u6c42")),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.CancelToken()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u7528\u4e8e\u521b\u5efa\u53d6\u6d88\u8bf7\u6c42\u7684\u9519\u8bef\u5bf9\u8c61")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.Cancel()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u7528\u4e8e\u521b\u5efa\u53d6\u6d88\u8bf7\u6c42\u7684 token \u5bf9\u8c61")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.isCancel()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u662f\u4e00\u4e2a\u53d6\u6d88\u8bf7\u6c42\u7684\u9519\u8bef")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"\u5e76\u53d1\u8c03\u7528 axios")),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.all(promises)")),(0,l.kt)("td",{parentName:"tr",align:null},"\u7528\u4e8e\u6279\u91cf\u6267\u884c\u591a\u4e2a\u5f02\u6b65\u8bf7\u6c42")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"axios.spread(callback)")),(0,l.kt)("td",{parentName:"tr",align:null},"\u7528\u6765\u6307\u5b9a\u63a5\u6536\u6240\u6709\u6210\u529f\u6570\u636e\u7684\u56de\u8c03\u51fd\u6570\u7684\u65b9\u6cd5")))),(0,l.kt)("h3",{id:"12-\u57fa\u672c\u65b9\u6cd5"},"1.2 \u57fa\u672c\u65b9\u6cd5"),(0,l.kt)("h5",{id:"axiosconfig"},(0,l.kt)("inlineCode",{parentName:"h5"},"axios(config)")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6839\u636e ",(0,l.kt)("inlineCode",{parentName:"li"},"method")," \u5c5e\u6027\u503c\u7684\u4e0d\u540c\uff0c\u53ef\u4ee5\u53d1\u9001 get\u3001post\u3001delete\u3001put \u5404\u79cd\u8bf7\u6c42\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u6548\u679c\u548c ",(0,l.kt)("inlineCode",{parentName:"li"},"axios.get()"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"axios.post()"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"axios.delete()"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"axios.put()")," \u76f8\u540c\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u53d1\u9001 POST \u8bf7\u6c42\naxios({\n  method: 'post',\n  url: '/user/12345',\n  data: {\n    firstName: 'Fred',\n    lastName: 'Flintstone'\n  }\n});\n\n// \u53d1\u9001 GET \u8bf7\u6c42\naxios({\n  method:'get',\n  url:'http://bit.ly/2mTM3nY',\n})\n")),(0,l.kt)("h5",{id:"axiosurl-config-\u9ed8\u8ba4\u53d1\u9001-get-\u8bf7\u6c42"},(0,l.kt)("inlineCode",{parentName:"h5"},"axios(url[, config])")," \u9ed8\u8ba4\u53d1\u9001 GET \u8bf7\u6c42"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"axios('/user/12345');\n")),(0,l.kt)("h5",{id:"axiosget-\u548c-axiospost"},(0,l.kt)("inlineCode",{parentName:"h5"},"axios.get()")," \u548c ",(0,l.kt)("inlineCode",{parentName:"h5"},"axios.post()")),(0,l.kt)("p",null,"GET \u8bf7\u6c42\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u4e3a\u7ed9\u5b9a ID \u7684 user \u521b\u5efa\u8bf7\u6c42\naxios.get('/user?ID=12345')\n    .then(response  => {\n    console.log(response);\n})\n\n// \u4e0a\u9762\u7684\u8bf7\u6c42\u4e5f\u53ef\u4ee5\u8fd9\u6837\u505a\naxios.get('/user', {\n    params: {\n        ID: 12345\n    }\n}).then(response => {\n    console.log(response);\n})\n")),(0,l.kt)("p",null,"POST \u8bf7\u6c42\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"axios.post('/user', {\n    firstName: 'Fred',\n    lastName: 'Flintstone'\n})\n    .then(response => {\n    console.log(response);\n})\n")),(0,l.kt)("h5",{id:"axiosall-\u548c-axiosspread"},(0,l.kt)("inlineCode",{parentName:"h5"},"axios.all()")," \u548c ",(0,l.kt)("inlineCode",{parentName:"h5"},"axios.spread()")),(0,l.kt)("p",null,"\u5e76\u53d1\u6267\u884c\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const getUserAccount = () => {\n  return axios.get('/user/12345');\n}\n\nconst getUserPermissions = () => {\n  return axios.get('/user/12345/permissions');\n}\n\naxios.all([getUserAccount(), getUserPermissions()])\n  .then(axios.spread((acct, perms) => {\n    // \u4e24\u4e2a\u8bf7\u6c42\u73b0\u5728\u90fd\u6267\u884c\u5b8c\u6210\n  }));\n")),(0,l.kt)("h3",{id:"13-config-\u914d\u7f6e"},"1.3 config \u914d\u7f6e"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"http://www.axios-js.com/zh-cn/docs/index.html#axios-head-url-config"},"axios \u4e2d\u6587\u6587\u6863"))),(0,l.kt)("p",null,"\u53ea\u6709 ",(0,l.kt)("inlineCode",{parentName:"p"},"url")," \u662f\u5fc5\u9700\u7684\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a ",(0,l.kt)("inlineCode",{parentName:"p"},"method"),"\uff0c\u8bf7\u6c42\u5c06\u9ed8\u8ba4\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"get")," \u65b9\u6cd5\u3002"),(0,l.kt)("p",null,"\u4ee5\u4e0b\u662f\u5e38\u7528\u7684\u914d\u7f6e\u8bf7\u6c42\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"{\n   // \u7528\u4e8e\u8bf7\u6c42\u7684\u670d\u52a1\u5668 URL\n  url: '/user',\n\n  // \u521b\u5efa\u8bf7\u6c42\u65f6\u4f7f\u7528\u7684\u65b9\u6cd5\n  method: 'get', // default\n      \n  // \u8bf7\u6c42\u5934\n  headers: {'X-Requested-With': 'XMLHttpRequest'},\n\n  // `baseURL` \u5c06\u81ea\u52a8\u52a0\u5728 `url` \u524d\u9762\uff0c\u9664\u975e `url` \u662f\u4e00\u4e2a\u7edd\u5bf9 URL\u3002\n  // URL == baseURL + url\n  baseURL: 'https://some-domain.com/api/',\n  \n  // \u8ddf\u5728 URL \u540e\u9762\u7684\u53c2\u6570\n  params: {\n    ID: 12345\n  },\n  \n  // \u8bf7\u6c42\u4f53\u6570\u636e\uff0c\u53ea\u9002\u7528\u4e8e 'PUT', 'POST', \u548c 'PATCH'\n  data: {\n    firstName: 'Fred'\n  },\n      \n  // \u6307\u5b9a\u8bf7\u6c42\u8d85\u65f6\u7684\u6beb\u79d2\u6570(0 \u8868\u793a\u65e0\u8d85\u65f6\u65f6\u95f4)\uff0cICU\u4f1a\u81ea\u52a8\u4e2d\u65ad\u8bf7\u6c42\n  timeout: 1000,\n\n  // \u670d\u52a1\u5668\u54cd\u5e94\u7684\u6570\u636e\u7c7b\u578b\uff1aarraybuffer, blob, document, json, text, stream\n  responseType: 'json', // default\n}\n")),(0,l.kt)("p",null,"\u4ee5\u4e0b\u662f\u4e00\u822c\u5e38\u89c1\u7684\u914d\u7f6e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"{\n//\u3010\u8bf7\u6c42\u62e6\u622a\u5668\u3011\u3001\u3010\u54cd\u5e94\u62e6\u622a\u5668\u3011\n  // \u5141\u8bb8\u5728\u5411\u670d\u52a1\u5668\u53d1\u9001\u524d\uff0c\u4fee\u6539\u8bf7\u6c42\u6570\u636e\uff0c\u7528 PUT, POST \u548c PATCH \u65b9\u6cd5\u4e2d\n  // \u540e\u9762\u6570\u7ec4\u4e2d\u7684\u51fd\u6570\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u6216 ArrayBuffer\uff0c\u6216 Stream\n  transformRequest: [function (data, headers) {\n    // \u5bf9 data \u8fdb\u884c\u4efb\u610f\u8f6c\u6362\u5904\u7406\n    return data;\n  }],\n\n  // \u6570\u636e\u5728\u4f20\u9012\u7ed9 then/catch \u524d\uff0c\u4fee\u6539\u54cd\u5e94\u6570\u636e\n  transformResponse: [function (data) {\n    // \u5bf9 data \u8fdb\u884c\u4efb\u610f\u8f6c\u6362\u5904\u7406\n    return data;\n  }],\n      \n      \n  // \u8de8\u57df\u8bf7\u6c42\u65f6\u662f\u5426\u9700\u8981\u4f7f\u7528\u51ed\u8bc1\n  withCredentials: false, // default\n\n   // `xsrfCookieName` \u662f\u7528\u4f5c xsrf token \u7684\u503c\u7684cookie\u7684\u540d\u79f0\n  xsrfCookieName: 'XSRF-TOKEN', // default\n\n  // `xsrfHeaderName` is the name of the http header that carries the xsrf token value\n  xsrfHeaderName: 'X-XSRF-TOKEN', // default\n\n  // 'proxy' \u5b9a\u4e49\u4ee3\u7406\u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d\u79f0\u548c\u7aef\u53e3\n  // `auth` \u8868\u793a HTTP \u57fa\u7840\u9a8c\u8bc1\u5e94\u5f53\u7528\u4e8e\u8fde\u63a5\u4ee3\u7406\uff0c\u5e76\u63d0\u4f9b\u51ed\u636e\n  // \u8fd9\u5c06\u4f1a\u8bbe\u7f6e\u4e00\u4e2a `Proxy-Authorization` \u5934\uff0c\u8986\u5199\u6389\u5df2\u6709\u7684\u901a\u8fc7\u4f7f\u7528 `header` \u8bbe\u7f6e\u7684\u81ea\u5b9a\u4e49 `Proxy-Authorization` \u5934\u3002\n  proxy: {\n    host: '127.0.0.1',\n    port: 9000,\n    auth: {\n      username: 'mikeymike',\n      password: 'rapunz3l'\n    }\n  },\n\n  // `cancelToken` \u6307\u5b9a\u7528\u4e8e\u53d6\u6d88\u8bf7\u6c42\u7684 cancel token\n  cancelToken: new CancelToken(function (cancel) {\n  })\n}\n")),(0,l.kt)("h3",{id:"14-response-\u54cd\u5e94\u7ed3\u679c"},"1.4 response \u54cd\u5e94\u7ed3\u679c"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20211129215622526",src:t(99686).Z,width:"1516",height:"208"})),(0,l.kt)("p",null,"axios \u8bf7\u6c42\u54cd\u5e94\u7684\u7ed3\u679c\uff0c\u5305\u542b\u4e00\u4e0b\u4fe1\u606f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"{\n  status: 200,          // \u54cd\u5e94\u72b6\u6001\u7801\n  statusText: 'OK',     // \u54cd\u5e94\u5b57\u7b26\u4e32\n  headers: {},          // \u54cd\u5e94\u5934\n  data: {},             // \u54cd\u5e94\u4f53\uff1a\u9ed8\u8ba4\u4f1a\u81ea\u52a8\u8fdb\u884c JSON \u89e3\u6790\n\n  config: {},           // \u53d1\u9001\u8bf7\u6c42\u65f6\u7684\u914d\u7f6e\u4fe1\u606f\uff08\u8bf7\u6c42\u7c7b\u578b\u3001\u8bf7\u6c42URL\u3001\u8bf7\u6c42\u4f53\u7b49\u7b49\uff09\n  request: {}           // XMLHttpRequest \u5b9e\u4f8b\u5bf9\u8c61\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"axios.get('/user/12345')\n  .then(function(response) {\n    console.log(response.data);\n    console.log(response.status);\n    console.log(response.statusText);\n    console.log(response.headers);\n    console.log(response.config);\n  });\n")),(0,l.kt)("h3",{id:"15-\u9ed8\u8ba4\u914d\u7f6e"},"1.5 \u9ed8\u8ba4\u914d\u7f6e"),(0,l.kt)("p",null,"\u5982\u679c\u540c\u4e00\u4e2a axios \u5b9e\u4f8b\uff0c\u5b9a\u4e49\u4e86\u591a\u4e2a axios \u8bf7\u6c42\uff0c\u4e14\u8fd9\u4e9b\u8bf7\u6c42\u6709\u76f8\u540c\u7684\u5730\u65b9\uff0c\u6bd4\u5982\u4ed6\u4eec\u7684 baseURL \u90fd\u662f\u53d1\u9001\u7ed9\u540c\u4e00\u4e2a\u57df\u540d\u7aef\u53e3\uff0c\u6bd4\u5982\u4ed6\u4eec\u7684\u8d85\u65f6\u65f6\u95f4\u90fd\u5b9a\u4e49\u4e3a\u7edf\u4e00\u7684 3000\u3002\u8fd9\u65f6\u4fbf\u53ef\u4ee5\u5bf9\u8fd9\u4e00\u7cfb\u5217 axios \u8bf7\u6c42\u8fdb\u884c\u9ed8\u8ba4\u914d\u7f6e\u5b9a\u4e49\uff0c\u907f\u514d\u4e86\u6bcf\u4e00\u4e2a axios \u8bf7\u6c42\u90fd\u9700\u8981\u518d\u91cd\u65b0\u5b9a\u4e49\u4e00\u6b21\uff0c\u589e\u52a0\u4e86\u91cd\u590d\u4ee3\u7801\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9ed8\u8ba4\u914d\u7f6e\u7684\u4f18\u5148\u7ea7\u987a\u5e8f")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"config")," \u7684\u4f18\u5148\u7ea7\u662f\u6700\u9ad8\u7684\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"config")," \u53c2\u6570\u914d\u7f6e > ",(0,l.kt)("inlineCode",{parentName:"li"},"defaults")," \u9ed8\u8ba4\u5c5e\u6027  >  ",(0,l.kt)("inlineCode",{parentName:"li"},"lib/defaults.js")," \u5e93\u7684\u9ed8\u8ba4\u503c\u3002")),(0,l.kt)("p",null,"\u5168\u5c40\u7684 axios \u9ed8\u8ba4\u503c\uff0c\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"dafaults")," \u5c5e\u6027\u503c\u914d\u7f6e\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"axios.defaults.method = 'GET'\naxios.defaults.baseURL = 'http://localhost:3000';\naxios.defaults.params= {id:100};  // URL\u4e2d\u4f20\u9012\u7684\u53c2\u6570\naxios.defaults.timeout = 3000;\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\n")),(0,l.kt)("p",null,"\u81ea\u5b9a\u4e49\u5b9e\u4f8b\u9ed8\u8ba4\u503c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u521b\u5efa\u5b9e\u4f8b\u65f6\uff0c\u8fdb\u884c\u9ed8\u8ba4\u914d\u7f6e\nconst instance = axios.create({\n  baseURL: 'https://api.example.com'\n});\n\n// \u521b\u5efa\u5b9e\u4f8b\u540e\uff0c\u8fdb\u884c\u9ed8\u8ba4\u914d\u7f6e\ninstance.defaults.headers.common['Authorization'] = AUTH_TOKEN;\n")),(0,l.kt)("h3",{id:"16-\u521b\u5efa\u5b9e\u4f8b"},"1.6 \u521b\u5efa\u5b9e\u4f8b"),(0,l.kt)("h5",{id:"axioscreateconfig"},(0,l.kt)("inlineCode",{parentName:"h5"},"axios.create([config])")),(0,l.kt)("p",null,"\u53ef\u4ee5\u81ea\u7531\u521b\u5efa\u4e0d\u540c\u7684 axios \u5b9e\u4f8b\uff0c\u4ece\u800c\u8bbe\u7f6e ",(0,l.kt)("inlineCode",{parentName:"p"},"defaults")," \u9ed8\u8ba4\u914d\u7f6e\u53c2\u6570\u7b49\u7b49\u4e0d\u4f1a\u76f8\u4e92\u5e72\u6d89\u3002"),(0,l.kt)("p",null,"\u5f53\u9879\u76ee\u8f83\u5927\uff0c\u540e\u7aef\u63d0\u4f9b\u7684\u7aef\u53e3\u6709\u4e0d\u540c\u7684\u670d\u52a1\u5668\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u670d\u52a1\u5668\u7684\u4e0d\u540c\u5206\u522b\u521b\u5efa\u5bf9\u5e94\u7684 axios \u5b9e\u4f8b\uff0c\u63d0\u9ad8\u6548\u7387\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const instance = axios.create({\n  baseURL: 'https://some-domain.com/api/',\n  timeout: 1000,\n  headers: {'X-Custom-Header': 'foobar'}\n});\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"instance")," \u5b9e\u4f8b\u5316\u5bf9\u8c61\u529f\u80fd\u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"axios")," \u51e0\u4e4e\u662f\u5dee\u4e0d\u591a\u7684\uff08\u540e\u9762\u4f1a\u533a\u5206\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u7684 API\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53d1\u9001\u8bf7\u6c42\u7684\u5404\u79cd\u65b9\u6cd5\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u914d\u7f6e ",(0,l.kt)("inlineCode",{parentName:"li"},"defaults")," \u5c5e\u6027\uff0c\u62e6\u622a\u5668 ",(0,l.kt)("inlineCode",{parentName:"li"},"interceptors")," \u5c5e\u6027\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"axios.prototype.request(config)\n\naxios.prototype.get(url[, config])\naxios.prototype.put(url[, data[, config]])\naxios.prototype.delete(url[, config])\naxios.prototype.post(url[, data[, config]])\naxios.prototype.patch(url[, data[, config]])\n\naxios.prototype.head(url[, config])\naxios.prototype.options(url[, config])\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f46\u662f\u6ca1\u6709 ",(0,l.kt)("inlineCode",{parentName:"li"},"cancel()")," \u3001",(0,l.kt)("inlineCode",{parentName:"li"},"all()"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"CancelToken()")," \u7684\u8fd9\u4e9b\u65b9\u6cd5\u3002")),(0,l.kt)("h3",{id:"17-\u62e6\u622a\u5668"},"1.7 \u62e6\u622a\u5668"),(0,l.kt)("p",null,"\u62e6\u622a\u5668\u5c31\u662f\u4e00\u4e9b\u51fd\u6570\uff0c\u5206\u4e3a\u8bf7\u6c42\u62e6\u622a\u5668\u548c\u54cd\u5e94\u62e6\u622a\u5668\u3002"),(0,l.kt)("p",null,"\u5728\u53d1\u9001\u8bf7\u6c42\u65f6\uff0c\u4f1a\u8c03\u7528\u8bf7\u6c42\u62e6\u622a\u5668\uff0c\u5bf9\u6240\u6709\u53d1\u9001\u7684\u8bf7\u6c42\u8fdb\u884c\u6700\u540e\u7684\u5904\u7406\uff1b"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5e38\u5e38\u5728\u8fd9\u91cc\u8fdb\u884c\u5408\u7406\u6027\u5224\u65ad\uff0c\u53d6\u6d88\u8bf7\u6c42\uff0c\u4fee\u6539 config \u53c2\u6570\u7b49\u7b49\uff1b")),(0,l.kt)("p",null,"\u5728\u63a5\u6536\u54cd\u5e94\u65f6\uff0c\u4f1a\u8c03\u7528\u54cd\u5e94\u62e6\u622a\u5668\uff0c\u5bf9\u6240\u6709\u63a5\u6536\u7684\u54cd\u5e94\u8fdb\u884c\u521d\u6b21\u7684\u5904\u7406\uff1b"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u901a\u5e38\u5728\u8fd9\u91cc\u5bf9\u6570\u636e\u8fdb\u884c\u9884\u5904\u7406\uff0c\u6bd4\u5982\u7edf\u4e00\u5bf9\u5931\u8d25\u7684\u8bf7\u6c42\u8fdb\u884c\u7ed3\u679c\u7edf\u8ba1\uff1b\u5bf9\u54cd\u5e94\u6570\u636e\u8fdb\u884c\u683c\u5f0f\u5316\u5904\u7406\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'// \u6dfb\u52a0\u8bf7\u6c42\u62e6\u622a\u5668 (config, error )\naxios.interceptors.request.use(config => {\n    console.log("\u8bf7\u6c42\u62e6\u622a\u5668 \u6210\u529f")     // \u5728\u53d1\u9001\u8bf7\u6c42\u4e4b\u524d\u505a\u4e9b\u4ec0\u4e48\n    return config;\n  }, error => {\n    console.log("\u8bf7\u6c42\u62e6\u622a\u5668 \u5931\u8d25")     // \u5bf9\u8bf7\u6c42\u9519\u8bef\u505a\u4e9b\u4ec0\u4e48\n    return Promise.reject(error);\n  });\n\n// \u6dfb\u52a0\u54cd\u5e94\u62e6\u622a\u5668 (response, error)\naxios.interceptors.response.use(response => {\n    console.log("\u54cd\u5e94\u62e6\u622a\u5668 \u6210\u529f")     // \u5bf9\u54cd\u5e94\u6570\u636e\u505a\u70b9\u4ec0\u4e48\n    return response;\n  }, error => {\n    console.log("\u54cd\u5e94\u62e6\u622a\u5668 \u5931\u8d25")     // \u5bf9\u54cd\u5e94\u9519\u8bef\u505a\u70b9\u4ec0\u4e48\n    return Promise.reject(error);\n  });\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5185\u90e8\u4f7f\u7528 promise \u5b9e\u73b0\u7684\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"axios.interceptors.request.use")," \u548c ",(0,l.kt)("inlineCode",{parentName:"li"},"axios. interceptors.response.use")," \u65b9\u6cd5\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u8bf7\u6c42\u62e6\u622a\u5668\u7684\u53c2\u6570\u662f\uff08config\uff0cerror\uff09\uff0cconfig \u8868\u793a\u8bf7\u6c42\u7684\u914d\u7f6e\u53c2\u6570\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u54cd\u5e94\u62e6\u622a\u5668\u7684\u53c2\u6570\u662f\uff08response\uff0cerror\uff09\uff0cresponse \u8868\u793a\u54cd\u5e94\u7684\u5168\u90e8\u7ed3\u679c\uff1b")),(0,l.kt)("p",null,"\u62e6\u622a\u5668\u7684 Pomise \u987a\u5e8f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'// \u6dfb\u52a0\u8bf7\u6c42\u62e6\u622a\u5668 (config, error )\naxios.interceptors.request.use(config => {\n    console.log("\u8bf7\u6c42\u62e6\u622a\u5668 \u6210\u529f")\n    throw \'\u53c2\u6570\u51fa\u4e86\u95ee\u9898\'   // \u8fd9\u91cc\u8ba9\u62e6\u622a\u5668\u628a\u8bf7\u6c42\u72b6\u6001\u8c03\u6574\u4e3a\u5931\u8d25\n  }, error => {\n    console.log("\u8bf7\u6c42\u62e6\u622a\u5668 \u5931\u8d25")\n    return Promise.reject(error);\n  });\n\n// \u6dfb\u52a0\u54cd\u5e94\u62e6\u622a\u5668 (response, error)\naxios.interceptors.response.use(response => {\n    console.log("\u54cd\u5e94\u62e6\u622a\u5668 \u6210\u529f")  \n    return response;\n  }, error => {\n    console.log("\u54cd\u5e94\u62e6\u622a\u5668 \u5931\u8d25")   \n    return Promise.reject(error);\n  });\n\n// \u53d1\u9001\u8bf7\u6c42\naxios({\n    method: \'GET\',\n    url: \'http://localhost:3000/posts\'\n}).then(response => {\n    console.log(response)\n}).catch(error =>{\n    console.log(error)\n})\n')),(0,l.kt)("p",null,"\u6b64\u65f6\u7684\u6267\u884c\u987a\u5e8f\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"axios \u53d1\u9001\u8bf7\u6c42\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},".then()")," \u7b49\u5f85 ",(0,l.kt)("inlineCode",{parentName:"li"},"promise"),"  \u51b3\u8bae\uff1b"),(0,l.kt)("li",{parentName:"ol"},"Request interceptors \u8bf7\u6c42\u62e6\u622a\u5668\u6267\u884c\uff0c",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8f93\u51fa\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"\u8bf7\u6c42\u62e6\u622a\u5668 \u6210\u529f"),"  \uff1b"),(0,l.kt)("li",{parentName:"ul"},"throw \u53c2\u6570\u51fa\u4e86\u95ee\u9898\uff0c\u4fdd\u5b58\u5728 error \u4e2d\uff0c\u7136\u540e promise reject \u7ee7\u7eed\u5931\u8d25\u51b3\u8bae\uff1b"))),(0,l.kt)("li",{parentName:"ol"},"Response interceptors \u54cd\u5e94\u62e6\u622a\u5668\u6267\u884c\uff0c",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8f93\u51fa\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"\u54cd\u5e94\u62e6\u622a\u5668 \u5931\u8d25"),"\uff0c\u7136\u540e promise reject \u7ee7\u7eed\u5931\u8d25\u51b3\u8bae\uff1b"))),(0,l.kt)("li",{parentName:"ol"},"axios \u8bf7\u6c42\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},".then()")," \u63a5\u6536\u5230\u5931\u8d25\u7684 promise\u3002",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8f93\u51fa\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"\u53c2\u6570\u51fa\u4e86\u95ee\u9898"))))),(0,l.kt)("p",null,"\u62e6\u622a\u5668\u7684 Promise \u987a\u5e8f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// Promise\n// \u8bbe\u7f6e\u8bf7\u6c42\u62e6\u622a\u5668  config \u914d\u7f6e\u5bf9\u8c61\naxios.interceptors.request.use(function (config) {\n    console.log('\u8bf7\u6c42\u62e6\u622a\u5668 \u6210\u529f - 1\u53f7');\n    //\u4fee\u6539 config \u4e2d\u7684\u53c2\u6570\n    config.params = {\n        a: 100\n    };\n\n    return config;\n}, function (error) {\n    console.log('\u8bf7\u6c42\u62e6\u622a\u5668 \u5931\u8d25 - 1\u53f7');\n    return Promise.reject(error);\n});\n\naxios.interceptors.request.use(function (config) {\n    console.log('\u8bf7\u6c42\u62e6\u622a\u5668 \u6210\u529f - 2\u53f7');\n    //\u4fee\u6539 config \u4e2d\u7684\u53c2\u6570\n    config.timeout = 2000;\n    return config;\n}, function (error) {\n    console.log('\u8bf7\u6c42\u62e6\u622a\u5668 \u5931\u8d25 - 2\u53f7');\n    return Promise.reject(error);\n});\n\n// \u8bbe\u7f6e\u54cd\u5e94\u62e6\u622a\u5668\naxios.interceptors.response.use(function (response) {\n    console.log('\u54cd\u5e94\u62e6\u622a\u5668 \u6210\u529f 1\u53f7');\n    return response.data;\n    // return response;\n}, function (error) {\n    console.log('\u54cd\u5e94\u62e6\u622a\u5668 \u5931\u8d25 1\u53f7')\n    return Promise.reject(error);\n});\n\naxios.interceptors.response.use(function (response) {\n    console.log('\u54cd\u5e94\u62e6\u622a\u5668 \u6210\u529f 2\u53f7')\n    return response;\n}, function (error) {\n    console.log('\u54cd\u5e94\u62e6\u622a\u5668 \u5931\u8d25 2\u53f7')\n    return Promise.reject(error);\n});\n\n//\u53d1\u9001\u8bf7\u6c42\naxios({\n    method: 'GET',\n    url: 'http://localhost:3000/posts'\n}).then(response => {\n    console.log('\u81ea\u5b9a\u4e49\u56de\u8c03\u5904\u7406\u6210\u529f\u7684\u7ed3\u679c');\n    console.log(response);\n});\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6d41\u7a0b: \u8bf7\u6c42\u62e6\u622a\u56682 => \u8bf7\u6c42\u62e6\u622a\u56681 => \u53d1ajax\u8bf7\u6c42 => \u54cd\u5e94\u62e6\u622a\u56681 => \u54cd\u5e94\u62e6\u622a\u5668 2 => \u8bf7\u6c42\u7684\u56de\u8c03")),(0,l.kt)("h3",{id:"18-\u53d6\u6d88\u8bf7\u6c42"},"1.8 \u53d6\u6d88\u8bf7\u6c42"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"axios({\n    method: 'GET',\n    url: 'http://localhost:3000/posts',\n    // 1. \u6dfb\u52a0\u914d\u7f6e\u5bf9\u8c61\u5c5e\u6027\n    cancelToken: new axios.CancelToken((c) => {  \n    })\n})\n\nlet cancel // \u7528\u4e8e\u4fdd\u5b58\u53d6\u6d88\u8bf7\u6c42\u7684\u51fd\u6570\nconst getProducts = () => {\n  axios({\n    url: 'http://localhost:4000/products1',\n    cancelToken: new axios.CancelToken( c => { \n      // c \u662f\u7528\u4e8e\u53d6\u6d88\u5f53\u524d\u8bf7\u6c42\u7684\u51fd\u6570,\u4fdd\u5b58\u53d6\u6d88\u51fd\u6570,\u7528\u4e8e\u4e4b\u540e\u53ef\u80fd\u9700\u8981\u53d6\u6d88\u5f53\u524d\u8bf7\u6c42\n      cancel = c;\n    })\n  }).then(\n    response => {\n      cancel = null\n      console.log('\u8bf7\u6c421\u6210\u529f\u4e86', response.data)\n    },\n    error => {\n      cancel = null\n      console.log('\u8bf7\u6c421\u5931\u8d25\u4e86', error.message, error) \n      // \u8bf7\u6c421\u5931\u8d25\u4e86 \u5f3a\u5236\u53d6\u6d88\u8bf7\u6c42 Cancel {message: \"\u5f3a\u5236\u53d6\u6d88\u8bf7\u6c42\"}\n    }\n  )\n}\n\n// \u6267\u884c\u53d6\u6d88\u8bf7\u6c42\u7684\u51fd\u6570\nconst cancelReq = () => {\n  // alert('\u53d6\u6d88\u8bf7\u6c42')\n  if (typeof cancel === 'function'){\n    cancel('\u5f3a\u5236\u53d6\u6d88\u8bf7\u6c42')\n  } else {\n    console.log('\u6ca1\u6709\u53ef\u53d6\u6d88\u7684\u8bf7\u6c42')\n  }\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5728 ",(0,l.kt)("inlineCode",{parentName:"li"},"axios")," \u4e2d\u8bbe\u7f6e\u4e86 ",(0,l.kt)("inlineCode",{parentName:"li"},"cancelToken")," \u5c5e\u6027\uff0c\u7136\u540e\u628a\u5176\u4e2d\u7684\u56de\u8c03\u51fd\u6570 ",(0,l.kt)("inlineCode",{parentName:"li"},"cancel")," \u653e\u5230\u5916\u90e8\u73af\u5883\u4e2d\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5f53\u5e0c\u671b\u8be5\u8bf7\u6c42\u53d6\u6d88\u65f6\uff0c\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"cancel")," \u65b9\u6cd5\u5373\u53ef\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5728\u8bf7\u6c42\u5b8c\u6210\u3001\u6216\u5931\u8d25\u540e\uff0c\u8981\u53ca\u65f6\u6e05\u7a7a ",(0,l.kt)("inlineCode",{parentName:"li"},"cancel")," \u7684\u5f15\u7528\u3002")),(0,l.kt)("p",null,"\u53ef\u4ee5\u914d\u5408\u8282\u6d41\u548c\u9632\u6296\u8fdb\u884c\u590d\u4e60\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u8282\u6d41\uff1a\u6280\u80fd")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u9632\u6296\uff1a\u56de\u57ce"))),(0,l.kt)("h2",{id:"2-axios-\u5c01\u88c5"},"2 Axios \u5c01\u88c5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6968630178163458084#heading-13"},"https://juejin.cn/post/6968630178163458084#heading-13"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6999932338566070308"},"https://juejin.cn/post/6999932338566070308"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6847009771606769677"},"https://juejin.cn/post/6847009771606769677")))),(0,l.kt)("p",null,"\u770b\u4e00\u4e0b react \u662f\u5982\u4f55\u5c01\u88c5\u7684"),(0,l.kt)("p",null,"\u5927\u81f4\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff1a"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"1\u3001\u8bf7\u6c42\u4e4b\u524d")),(0,l.kt)("p",null,"\u4e00\u822c\u7684\u63a5\u53e3\u90fd\u4f1a\u6709\u9274\u6743\u8ba4\u8bc1\uff08token\uff09\uff0c\u56e0\u6b64\u5728\u63a5\u53e3\u7684\u8bf7\u6c42\u5934\u91cc\u9762\uff0c\u6211\u4eec\u9700\u8981\u5e26\u4e0atoken\u503c\u4ee5\u901a\u8fc7\u670d\u52a1\u5668\u7684\u9274\u6743\u8ba4\u8bc1\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f46\u662f\u5982\u679c\u6bcf\u6b21\u8bf7\u6c42\u7684\u65f6\u5019\u518d\u53bb\u6dfb\u52a0\uff0c\u4f1a\u5927\u5927\u7684\u52a0\u5927\u5de5\u4f5c\u91cf\uff0c\u800c\u4e14\u5f88\u5bb9\u6613\u51fa\u9519\u3002\u4f7f\u7528 axios \u63d0\u4f9b\u4e86\u62e6\u622a\u5668\u673a\u5236\uff0c\u5728\u8bf7\u6c42\u7684\u62e6\u622a\u5668\u4e2d\u53ef\u4ee5\u6dfb\u52a0token\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u8bf7\u6c42\u62e6\u622a\naxios.interceptors.request.use((config) => {\n  //....\u7701\u7565\u4ee3\u7801\n  config.headers.x_access_token = token\n  return config\n}, function (error) {\n  return Promise.reject(error)\n})\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"2\u3001\u54cd\u5e94\u4e4b\u540e")),(0,l.kt)("p",null,"\u8bf7\u6c42\u63a5\u53e3\uff0c\u5e76\u4e0d\u662f\u6bcf\u4e00\u6b21\u8bf7\u6c42\u90fd\u4f1a\u6210\u529f\u3002\u90a3\u4e48\u5f53\u63a5\u53e3\u8bf7\u6c42\u5931\u8d25\u7684\u65f6\u5019\u7684\u7edf\u4e00\u5904\u7406\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u83b7\u53d6\u5230\u670d\u52a1\u5668\u8fd4\u56de\u7684\u72b6\u6001\u7801\uff0c\u7136\u540e\u6839\u636e\u72b6\u6001\u7801\u8fdb\u884c\u76f8\u5bf9\u5e94\u7684\u64cd\u4f5c\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u54cd\u5e94\u62e6\u622a\naxios.interceptors.response.use(function (response) {\n  if (response.data.code === 401 ) { //\n    //\u7528\u6237 token \u5931\u6548\uff0c\u6e05\u7a7a\u7528\u6237\u4fe1\u606f\n    sessionStorage.user = ''\n    sessionStorage.token = ''\n    window.location.href = '/';//\u8fd4\u56de\u767b\u5f55\u9875\n    //\u63a5\u53e3 Promise \u8fd4\u56de\u9519\u8bef\u72b6\u6001\uff0c\u9519\u8bef\u4fe1\u606f msg\n    return Promise.reject(msg)\n  }\n  if(response.status!==200||response.data.code!==200){\n    // \u63a5\u53e3\u8bf7\u6c42\u5931\u8d25\uff0c\u5177\u4f53\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5224\u65ad\n    message.error(msg);//\u63d0\u793a\u9519\u8bef\u4fe1\u606f\n    return Promise.reject(msg)//\u63a5\u53e3Promise\u8fd4\u56de\u9519\u8bef\u72b6\u6001\n  }\n  return response\n}, function (error) {\n  if (axios.isCancel(error)) {\n    requestList.length = 0\n    throw new axios.Cancel('cancel request')\n  } else {\n    message.error('\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25,\u8bf7\u91cd\u8bd5')\n  }\n  return Promise.reject(error)\n})\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"3\u3001\u4f7f\u7528axios")),(0,l.kt)("p",null,"\u6211\u5728\u7f51\u6613\u4e91\u97f3\u4e50\u9879\u76ee\u4e2d\u7684\u5c01\u88c5\uff1a"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"config.js")," \u4fdd\u5b58\u4e00\u4e9b\u5e38\u91cf\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const devBaseURL = "http://123.207.32.32:9001";\nconst proBaseURL = "http://123.207.32.32:9001";\n\nexport const BASE_URL = process.env.NODE_ENV === "development" ? devBaseURL : proBaseURL;\nexport const TIMEOUT = 5000;\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"request.js")," \u8bf7\u6c42\u4e4b\u524d + \u54cd\u5e94\u4e4b\u540e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'import axios from "axios";\nimport { BASE_URL, TIMEOUT } from "./config";\n\nconst instance = axios.create({\n  baseURL: BASE_URL,\n  timeout: TIMEOUT,\n});\n\ninstance.interceptors.request.use(\n  (config) => {\n    // 1.\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\u65f6, \u5728\u754c\u9762\u7684\u4e2d\u95f4\u4f4d\u7f6e\u663e\u793aLoading\u7684\u7ec4\u4ef6\n    // 2.\u67d0\u4e00\u4e9b\u8bf7\u6c42\u8981\u6c42\u7528\u6237\u5fc5\u987b\u643a\u5e26token, \u5982\u679c\u6ca1\u6709\u643a\u5e26, \u90a3\u4e48\u53d6\u6d88\u8bf7\u6c42\uff0c\u5e76\u76f4\u63a5\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762s [shi]\n    // 3.params/data\u5e8f\u5217\u5316\u7684\u64cd\u4f5c\n    return config;\n  },\n  (err) => {\n    return 0;\n  }\n);\n\ninstance.interceptors.response.use(\n  (res) => {\n    return res.data;\n  },\n  (err) => {\n    // \u5224\u65adHTTP\u72b6\u6001\u7801\uff0c\u7136\u540e\u8fdb\u884c\u5bf9\u5e94\u7684\u64cd\u4f5c\n    if (err && err.response) {\n      switch (err.response.status) {\n        case 400:\n          console.log("\u8bf7\u6c42\u9519\u8bef");\n          break;\n        case 401:\n          console.log("\u672a\u6388\u6743\u8bbf\u95ee");\n          break;\n        default:\n          console.log("\u5176\u4ed6\u9519\u8bef\u4fe1\u606f");\n      }\n    }\n    return err;\n  }\n);\n\nexport default instance;\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"player.js")," \u7684                                                                                                                                                                                                                 "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'import request from "./request";\nexport function getSongDetail(ids) {\n  return request({\n    url: "/song/detail",\n    params: {\n      ids,\n    },\n  });\n}\n\nexport function getLyric(id) {\n  return request({\n    url: "/lyric",\n    params: {\n      id,\n    },\n  });\n}\n')),(0,l.kt)("p",null,"\u8c03\u7528\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"getSongDetail(idx).then( res => {\n    console.log(res)\n})\n\ngetLyric(idx).then( res => {\n    console.log(res)\n})\n")))}c.isMDXComponent=!0},69370:function(e,n,t){n.Z=t.p+"assets/images/Axios\u7cfb\u7edf\u5b66\u4e60\u7b14\u8bb0\u539f\u7406\u56fe-0490905-44b4ccd4ecc9eb5b1a0e611efaafc476.png"},99686:function(e,n,t){n.Z=t.p+"assets/images/image-20211129215622526-0490905-990d330bafe4ff367d9582d507c4f930.png"},17550:function(e,n,t){n.Z=t.p+"assets/images/image-20220630212747956-3ae3bded0aff4af9a8cbe44040c34d40.png"},46342:function(e,n,t){n.Z=t.p+"assets/images/image-20220630212803459-b7c2b57360d005c2bf65c645ee577c8f.png"},47877:function(e,n,t){n.Z=t.p+"assets/images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDk3MjAwOA==,size_16,color_FFFFFF,t_70-16381565628804-0490882-34ddfc447fc5613252994304e5aeb6e3.png"}}]);
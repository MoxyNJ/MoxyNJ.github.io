---
title: 1. ç‰©è”ç½‘åŸºç¡€çŸ¥è¯†
sidebar_position: 1
date: 2022-05-24
tags: [iot]
---

ðŸ“ ç‰©è”ç½‘éœ€è¦äº†è§£çš„åŸºç¡€çŸ¥è¯†ã€‚



## 1. ç‰©è”ç½‘è§£å†³çš„é—®é¢˜

æ™ºæ…§å›­åŒºçš„åŸºç¡€ï¼Œæ˜¯æ™ºæ…§ç¡¬ä»¶ï¼Œå°†å›­åŒºå†…çš„å„ä¸ªæ™ºèƒ½è®¾å¤‡æŽ¥å…¥ç½‘ç»œï¼Œå¯æžå¤§å‡å°‘å¯¹åº•å±‚æ“æŽ§çš„äººåŠ›ç‰©åŠ›æˆæœ¬ã€‚

- å¦‚ä¸­å°å†å¼•å…¥å¯è§†åŒ–ç®¡ç†ï¼Œé™ä½Žæ“ä½œäººå‘˜çš„å­¦ä¹ æˆæœ¬ï¼Œå¯å¯¹å›­åŒºæ•´ä½“ç¡¬ä»¶è®¾å¤‡é›†ä¸­å¯è§†ç®¡ç†ã€‚
- å¦‚å®‰è£…é˜²ç›—ç³»ç»Ÿï¼Œå¯é…åˆæ‘„åƒå¤´ã€å–‡å­ã€é—¨ç£ç­‰å¤šç¡¬ä»¶è®¾å¤‡å½¢æˆä¸€ç³»åˆ—è‡ªåŠ¨åŒ–è­¦å‘Šã€æ‘„å½•ã€æŠ¥è­¦ã€é€šçŸ¥ç›¸å…³äººå‘˜ç­‰ï¼›
- å¦‚ç›‘æŽ§ä¼‘æ¯å®¤æµé‡ã€ç›‘æŽ§å«ç”Ÿé—´æµé‡ã€ç›‘æŽ§ç¾Žé¤æŸœç­‰ç­‰ï¼Œæå‡ç®¡ç†è¦†ç›–é¢ç§¯ï¼Œæå‡åŠžå…¬æ•ˆçŽ‡ã€‚



### 1.1 ä»€ä¹ˆæ˜¯ç‰©è”ç½‘

IOTï¼ˆè‹±æ–‡ï¼‰

ç‰©è”ç½‘ç›¸æ¯”äºŽäº’è”ç½‘ï¼Œå‚ä¸Žç½‘ç»œçš„ä¸»ä½“å‘ç”Ÿäº†å˜åŒ–ï¼Œ internet çš„æ¶ˆè´¹ä¸»ä½“æ˜¯äººã€‚è€Œ iot çš„ä¸»ä½“æ˜¯æ˜¯äººä¸Žè®¾å¤‡çš„å…±åŒå‚ä¸Žï¼š

![img](images/ç‰©è”ç½‘1.assets/webp-20220524181206327)



### 1.2 ç‰©è”ç½‘çš„ç»“æž„

ç‰©è”ç½‘çš„ä¸‰ä¸ªå±‚æ¬¡ï¼š

![img](images/ç‰©è”ç½‘1.assets/webp)

1. è®¾å¤‡å±‚ï¼Œä¹Ÿå°±æ˜¯å„ç§ç¡¬ä»¶è®¾å¤‡ã€‚

   - ä¼ æ„Ÿå™¨ï¼ˆæ¸©åº¦ã€é—¨ç£ç­‰ï¼‰ï¼›

   - æ‰§è¡Œå™¨ï¼ˆç»§ç”µå™¨ã€ç”µæœºç­‰ï¼‰ï¼›
   - å…¶ä»–æ™ºèƒ½è®¾å¤‡ï¼šå«æœ‰åµŒå…¥å¼ç³»ç»ŸèŠ¯ç‰‡çš„è®¾å¤‡ï¼Œéƒ½å¯ä»¥å…¥ç½‘ï¼ˆSTM32ã€FPGAï¼‰ç­‰ï¼›
   - é€šä¿¡è®¾å¤‡ï¼šWifiã€è“ç‰™ã€èœ‚çªç½‘ç»œç­‰åŸºç¡€é€šä¿¡è®¾å¤‡ï¼›

2. ç½‘ç»œå±‚ï¼Œç”¨äºŽè®¾å¤‡ä¸Žç‰©è”ç½‘å¹³å°ä¹‹é—´çš„é€šä¿¡ã€‚

   - æœºé‡è®¡ç®—æœºç½‘ç»œæä¾›çš„å¹³å°ï¼Œä½¿ç‰©è”ç½‘è®¾å¤‡æŽ¥å…¥ç½‘ç»œï¼Œå¯ä»¥æœ‰ ç½‘ç»œ/ä¼ è¾“å±‚ TCP/IP åè®®ã€åº”ç”¨å±‚ HTTPS åè®®ã€
   - MQTT / AMQPåè®®æ›´å¸¸ç”¨ã€‚

3. åº”ç”¨å±‚ï¼Œå®žçŽ°å…·ä½“ä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹

   - æŽ¥å…¥ç‰©è”ç½‘å¹³å°çš„ç»ˆç«¯æ˜¯å¾ˆå¤šçš„ï¼Œé‡‡é›†çš„æ•°æ®æ›´æ˜¯æµ·é‡çš„ã€‚å› æ­¤ï¼Œå¯¹åº”ç‰©è”ç½‘å¹³å°çš„åŽå°ç›¸å¯¹äºŽæ™®é€šçš„æœåŠ¡åŽå°ï¼Œéœ€è¦è§£å†³æµ·é‡æ•°æ®çš„å­˜å‚¨ã€å¤„ç†ã€åˆ†æžç­‰é—®é¢˜ã€‚



## 2. æ•°æ®æµ

ç½‘è”ç½‘çš„æ•°æ®æµå¤§æ¦‚æ˜¯æŒ‰ç…§ä¸‹é¢è¿™ä¸ªé€»è¾‘ï¼š

- æ•°æ®é‡‡é›†ã€æ•°æ®ä¼ è¾“ã€æ•°æ®å­˜å‚¨ã€æ•°æ®å¤„ç†ã€æ•°æ®åº”ç”¨ã€‚
- ç‰©è”ç½‘ä¸­å°ä¸­ï¼Œä¸»è¦å®žçŽ°äº†æ•°æ®å­˜å‚¨ï¼ŒæœåŠ¡äºŽæ•°æ®åº”ç”¨ã€‚ç¡¬ä»¶è®¾å¤‡äº§ç”Ÿçš„æ•°æ®ï¼Œæ•°æ®åº”ç”¨äº§ç”Ÿçš„æŒ‡ä»¤ï¼Œéƒ½å­˜å‚¨åœ¨ç‰©è”ç½‘ä¸­å°ä¸­ã€‚

### 2.1 æ•°æ®é‡‡é›†

æ¯ä¸€ä¸ªåŽŸå§‹æ•°æ®ï¼Œéƒ½æœ‰å…¶â€œç”Ÿäº§è€…â€ï¼Œé€šå¸¸æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œæ•°æ®æºâ€ã€‚

æ•°æ®æºé‡‡é›†å’Œå‘é€æ•°æ®ï¼Œé€šè¿‡ç‰©è”ç½‘ï¼Œä¼ é€’åˆ°åº”ç”¨å±‚ã€‚ç”±äºŽç‰©è”ç½‘çš„é€šä¿¡ç‰¹ç‚¹ï¼Œå¯èƒ½è¿˜éœ€è¦å¯¹æ•°æ®åšä¸€äº›ä¸´æ—¶çš„ä¿å­˜å·¥ä½œã€‚

æ•°æ®é‡‡é›†å…·å¤‡å¤æ‚æ€§ã€‚ä»Žå®è§‚çš„è§’åº¦æ¥çœ‹ï¼Œæ•°æ®æºé‡‡é›†çš„æ•°æ®ç±»åž‹å¤šç§å¤šæ ·ï¼Œå¯¹åº”çš„æ•°æ®é‡‡é›†è®¾å¤‡ä¹Ÿå¤šç§å¤šæ ·ã€‚ä¾‹å¦‚é‡‡é›†æ¸©åº¦ã€æ¹¿åº¦ç­‰çš„ä¼ æ„Ÿå™¨ã€é‡‡é›†è§†é¢‘çš„æ‘„åƒå¤´ã€é‡‡é›†å£°éŸ³çš„å½•éŸ³è®¾å¤‡ç­‰ç­‰ã€‚

- è¿™äº›ç»ˆç«¯è®¾å¤‡ä¸­ï¼Œéœ€è¦æœ‰ **åµŒå…¥å¼ç³»ç»Ÿ** è¿›è¡Œæ”¯æ’‘ï¼Œè¿™éƒ¨åˆ†å·¥ä½œï¼Œåœ¨ iot ç‰©è”ç½‘ä¸­å°ä¸­ï¼Œé€šå¸¸é¡¹ç›®å¤–åŒ…ï¼Œäº¤ç»™å¤–åŒ…äººå‘˜è¿›è¡Œå®žçŽ°ã€‚
  - **ç½‘å…³ + æ•°æ®ç»Ÿä¸€ã€‚**
- éš¾ç‚¹ï¼šè®¾å¤‡ä¼—å¤šã€é€šä¿¡åè®®å¤æ‚ã€éœ€è¦å¯¹æŽ¥å¤§é‡çš„ç¡¬ä»¶å…¬å¸å’ŒæŠ€æœ¯äººå‘˜ï¼Œå‚é˜…å¤§é‡å¯¹åº”ç¡¬ä»¶çš„æŠ€æœ¯æ‰‹å†Œã€‚æ—¶é—´æˆæœ¬è¾ƒé«˜ã€‚

å¯¹äºŽä¸Šå±‚æ¥è¯´ï¼Œæ•°æ®é‡‡é›†å·¥ä½œå±è”½äº†åº•å±‚ç¡¬ä»¶è®¾å¤‡ä¸åŒçš„é€šä¿¡åè®®ã€ä¸åŒçš„æ•°æ®å­˜å‚¨å­˜æ–¹å¼ï¼Œä½¿å¾—ä¸Šå±‚ä»…éœ€å…³æ³¨ç¡¬ä»¶äº§ç”Ÿçš„ä¿¡æ¯æœ¬èº«ã€‚

### 2.2 æ•°æ®ä¼ è¾“

é‡‡é›†åˆ°çš„æ•°æ®ï¼Œéœ€è¦ä¸Šä¼ åˆ°ç‰©è”ç½‘ä¸­å°ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯æ•°æ®ä¼ è¾“ã€‚æ•°æ®ä¼ è¾“çš„è¦æ±‚æ˜¯å¿«é€Ÿã€å¯é ã€‚

ä»Žå®è§‚çš„è§’åº¦æ¥çœ‹ï¼Œæ•°æ®ä¼ è¾“çš„éš¾ç‚¹æ˜¯ **é«˜å¹¶å‘**ã€‚ç½‘è”ç½‘çŽ¯å¢ƒä¸­è®¾å¤‡æ•°é‡ä¼—å¤šï¼Œå¹¶ä¸”è¿™äº›è®¾å¤‡éƒ½æ˜¯æºæºä¸æ–­çš„äº§ç”Ÿå’Œä¸Šä¼ æ•°æ®ï¼Œå› æ­¤è¦æ±‚ä¸­å°å…·å¤‡å¤„ç†é«˜å¹¶å‘çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿæœ‰æ•ˆã€å¯é çš„æŽ¥æ”¶æ•°æ®ã€‚

- é«˜å¹¶å‘çš„å®žçŽ°ï¼Œéœ€è¦ **åˆ†å¸ƒå¼ç³»ç»Ÿ** çš„æ”¯æŒï¼ŒåŒæ—¶è¦å¼•å…¥**è´Ÿè½½å‡è¡¡ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ç¼“å­˜** ç­‰ç›¸å…³çš„æŠ€æœ¯ã€‚

### 2.3 æ•°æ®å­˜å‚¨

æ•°æ®ä¼ è¾“åˆ°ç‰©è”ç½‘ä¸­å°ä¹‹åŽï¼Œéœ€è¦è¿›è¡Œå­˜å‚¨ã€‚è¿™é‡Œè¦è§£å†³çš„é—®é¢˜æ˜¯ **æµ·é‡å¼‚æž„æ•°æ®çš„å­˜å‚¨**ã€‚

æ¯”å¦‚ä¸€ä¸ªå›­åŒºéå¸ƒçš„æ‘„åƒå¤´ï¼Œæ¯ä¸ªå­£åº¦å°±å¯ä»¥äº§ç”Ÿæ•°PBçº§çš„æ•°æ®ã€‚

åœ¨æ•°æ®é‡å¤§çš„åŒæ—¶ï¼Œæ•°æ®çš„ç±»åž‹å’Œæ ¼å¼è¿˜å¤šç§å¤šæ ·ï¼ŒæŒ‰ç…§ç‰¹æ€§å¯ä»¥åˆ†ä¸º3ç±»ï¼š

- ç»“æž„åŒ–æ•°æ®ï¼šä¾‹å¦‚ç”¨æˆ·ä¿¡æ¯ã€è®¾å¤‡å‚æ•°ç­‰ç­‰ã€‚
- åŠç»“æž„åŒ–æ•°æ®ï¼šä¾‹å¦‚æ—¥å¿—è®°å½•ã€JSON ç»“æž„çš„æ•°æ®ç­‰ã€‚
- éžç»“æž„åŒ–æ•°æ®ï¼šä¾‹å¦‚å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ç­‰æ•°æ®ã€‚

å­˜å‚¨ç»“æž„ï¼š

- å¯¹äºŽæµ·é‡çš„ç»“æž„åŒ–æ•°æ®ï¼Œå¯ä»¥é‡‡ç”¨ **åˆ†å¸ƒå¼å…³ç³»æ•°æ®åº“** å­˜å‚¨ï¼›
- å¯¹äºŽæ—¶é—´æ•æ„Ÿçš„æ•°æ®ï¼Œå¯ä»¥é‡‡ç”¨ **æ—¶åºæ•°æ®åº“**ã€‚
- å¯¹äºŽåŠç»“æž„åŒ–æ•°æ®ï¼Œå¯ä»¥é‡‡ç”¨ **NoSQL æ•°æ®åº“**ï¼Œæ¯”å¦‚MongoDBï¼ŒNeo4j ç­‰æ¥å­˜å‚¨ã€‚
- å¯¹äºŽéžç»“æž„åŒ–æ•°æ®ï¼Œå¯ä»¥é‡‡ç”¨ HDFS è¿™æ ·çš„ **åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ** æ¥å¤„ç†ã€‚



æ•°æ®åº“é€‰åž‹çš„åŸºæœ¬åŽŸåˆ™ï¼Œå°±æ˜¯æ ¹æ®æ•°æ®çš„ç±»åž‹å’Œä¸šåŠ¡ä½¿ç”¨çš„æ–¹å¼æ¥é€‰æ‹©ï¼Œæ•°æ®å¤§ä½“ä¸Šå¯ä»¥åˆ†ä¸º3ç±»ï¼š

1. ç»“æž„åŒ–æ•°æ® ï¼ˆStructured Dataï¼‰
2. åŠç»“æž„åŒ–æ•°æ®  (Semi-Structured Data)
3. éžç»“æž„åŒ–æ•°æ® (Unstructured Data)

é’ˆå¯¹è¿™äº›æ•°æ®çš„ç‰¹æ€§ï¼Œä»¥åŠä½¿ç”¨çš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸åŒç±»åž‹çš„æ•°æ®åº“ã€‚



### 2.4 æ•°æ®åº”ç”¨

å‰é¢çš„æ•°æ®é‡‡é›†ã€ä¼ è¾“ã€å­˜å‚¨ã€å¤„ç†ï¼Œéƒ½æ˜¯ä¸ºäº†æœ€ç»ˆçš„æ•°æ®åº”ç”¨ï¼Œåˆ©ç”¨æ•°æ®åˆ›é€ ä»·å€¼ã€‚

æ•°æ®äº§ç”Ÿä»·å€¼çš„æ–¹å¼ï¼Œå¤§è‡´æœ‰ä»¥ä¸‹å‡ ç§ï¼š

1. æŒ–æŽ˜ï¼šåˆ†æžæ•°æ®çš„è§„å¾‹å’Œç®¡ç†å…³ç³»ï¼Œä¸€ä¸ªç»å…¸çš„åº”ç”¨å°±æ˜¯ç”¨æˆ·ç”»åƒå’Œè´­ä¹°ä¹ æƒ¯çš„åˆ†æžã€‚åœ¨å›­åŒºä¸­ï¼Œå¯ä»¥åˆ†æžå‘˜å·¥ä¸‹ç­çš„å¤§è‡´æ—¶é—´ã€‚
2. é¢„æµ‹ï¼šæž„å»ºé¢„æµ‹æ¨¡åž‹ï¼Œæ¯”å¦‚æˆ‘ä»¬ç»å¸¸å¯ä»¥çœ‹åˆ°å…±äº«å•è½¦å…¬å¸å°†å•è½¦å„ä¸ªåœ°æ–¹æ”¶é›†æ•´ç†åŽæŠ•æ”¾åˆ°æŒ‡å®šçš„ä½ç½®ï¼Œè¿™äº›ä½ç½®çš„é€‰æ‹©å°±æ˜¯é€šè¿‡é¢„æµ‹å¾—å‡ºçš„ã€‚
3. æŽ§åˆ¶å†³ç­–ï¼šä¾‹å¦‚æ ¹æ®å…‰çº¿å˜åŒ–æ‰“å¼€å…³é—­ç”µç¯ï¼Œæ ¹æ®æ¸©åº¦å˜åŒ–æ‰“å¼€ç©ºè°ƒç­‰ç­‰ã€‚
4. å¯è§†åŒ–ï¼š
   - å•æ•°æ®çš„å¯è§†åŒ–ï¼Œä¾‹å¦‚æˆ‘ä»¬ä½¿ç”¨æ»´æ»´æ‰“è½¦çš„æ—¶å€™æ˜¾ç¤ºå¸æœºçš„ä½ç½®ã€‚å›­åŒºçš„é—¨ç£ç‚¹ä½ä¿¡æ¯å°±æ˜¯å•æ•°æ®å¯è§†åŒ–çš„ä¸€ç§è¡¨çŽ°ã€‚
   - ç»Ÿè®¡æ•°æ®çš„å¯è§†åŒ–ï¼Œä¾‹å¦‚ç›´æ–¹å›¾ã€æ›²çº¿å›¾ç­‰ã€‚

æ‰€æœ‰çš„è¿™äº›åº”ç”¨ï¼Œéƒ½æ˜¯éœ€è¦é€šè¿‡ç®—æ³•æ¥å®žçŽ°çš„ã€‚ç”±äºŽæ•°æ®é‡å·¨å¤§ï¼Œä½¿ç”¨äººå·¥åˆ†æžæ˜¯ä¸å¯èƒ½çš„ï¼Œå› æ­¤é€šå¸¸ä½¿ç”¨æœºå™¨å­¦ä¹ ã€äººå·¥æ™ºèƒ½æ¥å¯¹æ•°æ®è¿›è¡Œç»Ÿè®¡åˆ†æžã€‚

è¿™äº›ç®—æ³•åˆ†ä¸ºç›‘ç£å­¦ä¹ å’Œéžç›‘ç£å­¦ä¹ ä¸¤å¤§ç±»ã€‚

- ç›‘ç£å­¦ä¹ ï¼šæˆ‘ä»¬éœ€è¦å‘Šè¯‰ç®—æ³•å“ªäº›æ˜¯å¯¹çš„ï¼Œå“ªäº›æ˜¯é”™çš„ã€‚
- éžç›‘ç£å­¦ä¹ ï¼šç®—æ³•è¦è‡ªå·±å°†æ•°æ®ä¸­çš„â€å¼‚å¸¸å€¼â€œåŒºåˆ†å‡ºæ¥ã€‚





## 3. ç½‘ç»œå±‚

ä¸»è¦è®²ç‰©è”ç½‘çš„é€šä¿¡åè®®ï¼Œæ˜Žç™½å¤§æ¦‚å°±å¥½ï¼Œé‡ç‚¹ç†è§£ä¸‹ kafka æ¶‰åŠçš„ç›¸å…³çŸ¥è¯†ã€‚

### 3.1 ç½‘è”ç½‘é€šä¿¡çš„ç‰¹ç‚¹

ç‰©è”ç½‘é€šä¿¡çš„ç‰¹ç‚¹å’Œç‰©è”ç½‘è®¾å¤‡æ‰€å¤„çš„çŽ¯å¢ƒæœ‰å¾ˆå¤§çš„å…³ç³»ï¼š

1. è®¾å¤‡å¤„åœ¨ **ä¸å¯é ã€é«˜å»¶è¿Ÿçš„ç½‘ç»œçŽ¯å¢ƒ**ã€‚

æ¯”å¦‚å…±äº«å•è½¦ï¼Œå¦‚æžœä½¿ç”¨çš„NB-IoTè¿™æ ·çš„é€šä¿¡æŠ€æœ¯ï¼Œæœ¬èº«çš„é€šä¿¡é€ŸçŽ‡å°±ä½Žï¼Œå¦‚æžœè¢«åœåœ¨ä¿¡å·ä¸ç¨³å®šçš„åœ°æ–¹ï¼Œé€šä¿¡è´¨é‡å°±æ›´å·®ã€‚ è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œå¦‚æžœä½¿ç”¨HTTPè¿™æ ·çš„åè®®ï¼Œéœ€è¦å…ˆå»ºç«‹è¿žæŽ¥ï¼Œå‘å‡ºè¯·æ±‚ï¼Œç­‰å¾…å“åº”ï¼Œå¾ˆå¯èƒ½è¿žæŽ¥ç»å¸¸ä¸­æ–­ï¼Œéœ€è¦å¤šæ¬¡äº¤äº’æ‰èƒ½å¤Ÿå®Œæˆä¸€æ¬¡è¯·æ±‚ï¼Œç”¨æˆ·å¼€ä¸ªé”å°±éœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´ã€‚

2. **è®¾å¤‡æ•°é‡ä¼—å¤šï¼Œäº¤äº’å…³ç³»å¤æ‚ã€‚**

æ¯”å¦‚æ™ºèƒ½å®¶å±…ï¼Œå®¶é‡Œçš„å¤šç§ç‰©è”ç½‘è®¾å¤‡ä¹‹é—´æ˜¯æœ‰ç›¸äº’å…³è”çš„ï¼Œå¦‚æžœè®©ç‰©è”ç½‘å¹³å°å¯¹æ¯ä¸ªè®¾å¤‡åšæƒé™æŽ§åˆ¶å’Œæ•°æ®é˜ˆå€¼çš„é™åˆ¶ï¼ŒåŸºæœ¬ä¸çŽ°å®žã€‚è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦å°†ä¸€ä¸ªå®¶ä½œä¸ºä¸€ä¸ªæ•´ä½“æ¥å¤„ç†ï¼Œç®€åŒ–äº¤äº’é€»è¾‘ã€‚

3. **è®¾å¤‡æµåŠ¨æ€§å¤§**

å¤§çš„æ¯”å¦‚å…±äº«å•è½¦ï¼Œä¸æ–­æœ‰æ–°è®¾å¤‡åŠ å…¥ï¼Œä¹Ÿä¸æ–­æœ‰è®¾å¤‡é€€å‡ºã€‚

å°çš„å¦‚æ™ºèƒ½å®¶å±…ï¼Œéšæ—¶å¯èƒ½æ–°åŠ å…¥è®¾å¤‡å…¥ç½‘ï¼Œä½†ä¸èƒ½æ²¡å½“æ–°åŠ å…¥è®¾å¤‡ï¼Œå°±éœ€è¦é…ç½®ä¸€éå‚æ•°ã€‚å› æ­¤ï¼Œç½‘ç»œé€šä¿¡åè®®éœ€è¦å…·å¤‡å¯ä¼¸ç¼©æ€§ã€‚

### 3.2 å‘å¸ƒ-è®¢é˜…æ¨¡å¼

è¿‡æ¶ˆæ¯é˜Ÿåˆ—å°±æ˜¯å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ˆå‚è€ƒæµè§ˆå™¨ç»“æž„ï¼‰ã€‚

è¿™ä¸ªæ¨¡å¼åŒ…å« 3 ä¸ªè§’è‰²ï¼šå‘å¸ƒè€…ï¼ˆPublisherï¼‰ã€ç»çºªäººï¼ˆBrokerï¼‰ã€è®¢é˜…è€…ï¼ˆSubscriberï¼‰ï¼š

![img](images/ç‰©è”ç½‘1.assets/webp-20220524184826300)

åœ¨ç‰©è”ç½‘åœºæ™¯ä¸­ï¼Œä¸€ä¸ªä¼ æ„Ÿå™¨æ•°æ®éœ€è¦å‡ºå‘å¤šä¸ªæœåŠ¡æˆ–è€…ç»ˆç«¯ï¼Œå¹¶ä¸”è¿™ç§å‡ºå‘éœ€è¦æ˜¯å¯æ‰©å±•çš„ã€‚

æ¯”å¦‚æˆ‘ä»¬åœ¨çª—æˆ·ä¸Šè®¾ç½®é˜²ç›—ç³»ç»Ÿï¼Œç›®å‰å¯èƒ½å‚ä¸Žçš„è®¾å¤‡æœ‰é—¨ç£ï¼Œå½“æ£€æµ‹åˆ°æœ‰äººéžæ³•é—¯å…¥ï¼ŒåŒæ—¶ä¼šè§¦å‘ä»¥ä¸‹äº‹ä»¶ï¼š

- åœ¨å¼€å¯æœŸé—´å‘çŽ°æœ‰äººå¼€å¯çª—æˆ·ï¼Œéœ€è¦é€šçŸ¥æ‘„åƒå¤´å½•åƒã€é€šçŸ¥å£°å…‰æŠ¥è­¦å™¨æŠ¥è­¦ã€æŽ¨é€æ¶ˆæ¯åˆ°ç›¸å…³å·¥ä½œäººå‘˜çš„æ‰‹æœºç­‰ç­‰ã€‚åŒæ—¶ï¼Œå°†æ¥å¯èƒ½è¿˜éœ€è¦æœ‰æ–°çš„é˜²ç›—è®¾å¤‡æŽ¥å…¥ã€‚é‚£ä¹ˆï¼Œæœ€å¥½è®©æ‘„åƒå¤´ã€æŠ¥è­¦å™¨ã€ä¿¡æ¯æŽ¨é€ç­‰éƒ½è®¢é˜… â€œçª—æˆ·å¼‚å¸¸å¼€å¯â€ è¿™ä¸ª **äº‹ä»¶ / æ¶ˆæ¯**ï¼Œå°†æ¥æœ‰æ–°çš„è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥ç›‘å¬è¿™ä¸ª **äº‹ä»¶ / æ¶ˆæ¯**ã€‚è¿™æ ·ï¼Œæ¶ˆæ¯çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´å°±è¿›è¡Œäº†è§£è€¦ã€‚

#### 3.2.1 MQTT

Message Queuing Telemetry Transportï¼Œæ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“ã€‚

MQTTåè®®æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ç½‘ç»œåè®®ï¼Œæœ‰3ä¸ªç‰¹ç‚¹ï¼š

1. é‡‡ç”¨äºŒè¿›åˆ¶çš„æ¶ˆæ¯å†…å®¹ç¼–ç æ ¼å¼ã€‚
2. åè®®å¤´ç´§å‡‘ï¼Œäº¤äº’ç®€å•ã€‚
3. æ”¯æŒ 3 ç§æ¶ˆæ¯ä¼ é€’è¯­ä¹‰ï¼ˆæœ€å°‘ä¸€æ¬¡ã€æœ€å¤šä¸€æ¬¡ã€æ°å¥½ä¸€æ¬¡ï¼‰ã€‚



ä¸‰ç§è¯­ä¹‰ï¼š

- QoS 0ï¼Œè¡¨ç¤ºçš„æ˜¯â€œæœ€å¤šä¸€æ¬¡â€œé€è¾¾ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯å¯èƒ½ä¼šä¸¢å¤±ï¼Œä½†æ˜¯ä¸ä¼šé‡å¤ã€‚
- QoS 1ï¼Œè¡¨ç¤ºçš„æ˜¯â€è‡³å°‘ä¸€æ¬¡â€œé€è¾¾ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯å¯èƒ½ä¼šé‡å¤ï¼Œä½†æ˜¯ä¸ä¼šä¸¢å¤±ã€‚
- QoS 2ï¼Œ è¡¨ç¤ºçš„æ˜¯â€æ°å¥½ä¸€æ¬¡â€œé€è¾¾ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯æœ‰ä¸”åªæœ‰ä¸€æ¬¡é€è¾¾ï¼Œä¸ä¼šä¸¢å¤±ï¼Œä¹Ÿä¸ä¼šé‡å¤ã€‚



MQTTæ ¼å¼ç®€æ´ã€å ç”¨å¸¦å®½å°çš„ç‰¹è‰²ï¼Œéžå¸¸é€‚åˆè®¡ç®—èƒ½åŠ›æœ‰é™ã€ç½‘ç»œå¸¦å®½ä½Žã€ä¿¡å·ä¸ç¨³å®šçš„è¿œç¨‹è®¾å¤‡ã€‚å¦å¤–ï¼Œç”±äºŽMQTTå‡ ä¹Žæ”¯æŒæ‰€æœ‰çš„å¹³å°ï¼Œå¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼ŒåŸºæœ¬ä¸Šæ˜¯çŽ°åœ¨ç‰©è”ç½‘ç³»ç»Ÿäº‹å®žä¸Šçš„ç½‘ç»œåè®®æ ‡å‡†ã€‚



**å¦ï¼škafka** 

- kafka ä¹Ÿæœ‰æœ€å°‘ä¸€æ¬¡ã€æœ€å¤šä¸€æ¬¡ã€æ°å¥½ä¸€æ¬¡ã€‚æ›´å¤šçŸ¥è¯†å¯ä»¥åœ¨ kafka ç›¸å…³æ–‡ç« ä¸­äº†è§£ã€‚

#### 3.2.2 AMQP

å…¨ç§°æ˜¯ Advanced Message Queuing Protocolï¼Œé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ã€‚

AMQPä¹Ÿæ˜¯é‡‡ç”¨çš„äºŒè¿›åˆ¶æ¶ˆæ¯æ ¼å¼ï¼Œä¹Ÿæ”¯æŒ3ç§æ¶ˆæ¯ä¼ é€’è¯­ä¹‰ã€‚

AMQPçš„ç‰¹ç‚¹æ˜¯å¯é ã€é€šç”¨ï¼Œä½†æ˜¯ AMQP å®šä¹‰äº†åºžå¤§çš„ç‰¹æ€§é›†ï¼Œæ˜¯ä¸€ä¸ªé‡é‡çº§çš„åè®®ï¼Œä¸é€‚åˆå¯¹åŠŸè€—è¦æ±‚ä¸¥æ ¼ã€è®¡ç®—èƒ½åŠ›æœ‰é™çš„è®¾å¤‡ã€‚ä½†æ˜¯å¾ˆå¤šåŽå°çš„æ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ”¯æŒ AMQP åè®®çš„ï¼Œæ¯”å¦‚RabbitMQã€‚



### 3.3 è¯·æ±‚-å“åº”æ¨¡å¼

ç‰©è”ç½‘è®¾å¤‡ä¹Ÿéœ€è¦ä½¿ç”¨è¯·æ±‚-å“åº”æ¨¡å¼ã€‚æœ€å…¸åž‹çš„å°±æ˜¯å…¬å¸çš„ç¾Žé¤æŸœã€‚

- ç”¨æˆ·åœ¨ç»ˆç«¯è®¾å¤‡ï¼ˆH5 / Webï¼‰è¾“å…¥å–ä»¶ç ä¹‹åŽï¼Œç»ˆç«¯è®¾å¤‡å‘æœåŠ¡å™¨å‘é€éªŒè¯è¯·æ±‚ï¼Œè¿”å›žéªŒè¯ç»“æžœï¼Œæœ€åŽå¼€é”ã€‚

#### 3.3.1 HTTP

å”¯ä¸€çš„ä¼˜ç‚¹ï¼šå¯ä»¥åˆ©ç”¨å·²æœ‰çš„ Web æœåŠ¡èµ„æºã€‚

HTTPåè®®çš„æŠ¥æ–‡æ ¼å¼å¾ˆé‡ï¼Œä¸å¤ªé€‚åˆèµ„æºæœ‰é™çš„åµŒå…¥å¼è®¾å¤‡ã€‚ä½†æ˜¯åœ¨èµ„æºå……è¶³çš„è®¾å¤‡ä¸Šï¼Œè¿˜æ˜¯å¯ä»¥è€ƒè™‘çš„ã€‚

#### 3.3.2 CoAP

å…¨ç§° Constrained Application Protocal ï¼ˆå—é™çš„åº”ç”¨åè®®ï¼‰ã€‚æ¯” HTTP è½»é‡çº§çš„é€šä¿¡åè®®ã€‚

å’ŒHTTPåè®®ä¸€æ ·ï¼ŒCoAPåè®®ä¹Ÿä½¿ç”¨URIæ¥æ ‡è¯†èµ„æºï¼Œä¹Ÿæœ‰GET,POST,PUT,DELETEç­‰æ–¹æ³•ï¼Œä¹Ÿæœ‰å“åº”çŠ¶æ€ç ã€‚

CoAPçš„æ¶ˆæ¯é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œæ”¯æŒå¯ç¡®è®¤æ¶ˆæ¯å’Œä¸å¯ç¡®è®¤æ¶ˆæ¯ä¸¤ç§ï¼ˆæœ€å¤šä¸€æ¬¡ã€æœ€å°‘ä¸€æ¬¡ï¼‰ã€‚åè®®åŒ…å¤´å°ï¼Œä»…ä¸º4ä¸ªå­—èŠ‚ã€‚é‡‡ç”¨ UDP ä¼ è¾“åè®®ï¼Œå¯¹åº”è®¾å¤‡çš„è®¡ç®—èµ„æºè¦æ±‚æ›´ä½Žã€‚

#### 3.3.2 LwM2M

å…¨ç§°æ˜¯ Lightweight Machine-to-Machineï¼Œè½»é‡çº§ç‰©è”ç½‘åè®®ã€‚

LwM2Måè®®æ˜¯åŸºäºŽCoAPåè®®çš„ï¼Œæä¾›äº†ä¸€ç»„è½»é‡çº§è®¾å¤‡å…³è”å’Œäº¤äº’æŽ¥å£åè®®ã€‚å’Œ CoAP ä¸€æ ·ï¼Œé€‚ç”¨äºŽèµ„æºæœ‰é™çš„ç»ˆç«¯è®¾å¤‡ç®¡ç†ã€‚

![img](images/ç‰©è”ç½‘1.assets/webp-20220524191017145)



### 3.4 ç½‘å…³

esp 8266 ç­‰èŠ¯ç‰‡ï¼Œæˆ– FPGA  ç­‰èŠ¯ç‰‡ï¼Œå¯é€šè¿‡ MATT åè®®å…¥ç½‘ï¼›

å¸¸ç”¨ä¼ æ„Ÿå™¨ï¼Œå¯ä»¥é€šè¿‡ BLEã€ZigBee åè®®å…¥ç½‘ï¼›

...

ç¡¬ä»¶çš„å¤šç§å¤šæ ·ï¼Œé€ å°±äº†å…¥ç½‘æ–¹å¼å¤šç§å¤šæ ·ï¼Œéœ€è¦æœ‰ä¸€ä¸ªå¹³å°ç»Ÿä¸€å°†æ‰€æœ‰ç¡¬ä»¶æŽ¥å…¥ç½‘ç»œï¼ŒåŒæ—¶å±è”½å„ä¸ªè®¾å¤‡ä¹‹é—´çš„æ•°æ®ç»“æž„å·®å¼‚ã€‚

æ‰€ä»¥ï¼Œç½‘å…³è§£å†³ï¼š

- å±è”½ç¡¬ä»¶æŽ¥å…¥ç½‘ç»œçš„ **åè®®å·®å¼‚**ï¼›

- å±è”½ç¡¬ä»¶æŽ¥å…¥ç½‘ç»œçš„ **æ•°æ®å·®å¼‚**ã€‚

ç›®å‰çš„ç‰©è”ç½‘ä¸­ï¼Œåœ¨é€æ­¥å°è¯•å°†åŽŸæœ¬åœ¨äº‘å¹³å°ä¸Šçš„è®¡ç®—ä»»åŠ¡ï¼Œæ”¾åˆ°é è¿‘æ•°æ®åŽŸäº§åœ°çš„è®¾å¤‡ä¸Šå®Œæˆã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå°†è®¡ç®—èƒ½åŠ›ä¸‹æ²‰åˆ°è¾¹ç¼˜è®¾å¤‡ï¼Œä¹Ÿç§°ä¸º **è¾¹ç¼˜è®¡ç®—**ã€‚

- æ¯”å¦‚æ•°æ®å·®å¼‚çš„å¤„ç†ã€æ•°æ®çš„ç²—ç­›ã€æ•æ„Ÿæ•°æ®çš„è„±æ•ï¼ˆè¯­éŸ³è¯­ä¹‰ã€å®¶åº­æ‘„åƒï¼‰ç­‰ï¼›

![img](images/ç‰©è”ç½‘1.assets/webp-20220524220505433)



åœ¨é¡¹ç›®ä¸­ï¼Œç‰©è”ç½‘ä¸­å°ä¹Ÿæ¶‰åŠåˆ°äº† å—å‘æŽ¥å£ã€åŒ—å‘æŽ¥å£ã€ç‰©æ¨¡åž‹å’Œè®¾å¤‡åˆ†ç»„ã€‚ç‰©è”ç½‘ä¸­å°æ˜¯æ¯”ç½‘å…³æ›´ä¸Šå±‚çš„ä¸œè¥¿ï¼Œå¯ä»¥è¯´ç½‘å…³çš„åŒ—å‘æŽ¥å£æ‰æ˜¯ç‰©è”ç½‘ä¸­å°çš„å—å‘æŽ¥å£ã€‚

ä¸‹é¢æ˜¯ç‰©è”ç½‘ä¸­å°çš„å®šä¹‰ï¼š

- å—å‘æŽ¥å£ï¼šåˆ¶å®šç»Ÿä¸€çš„å—å‘æŽ¥å£ï¼Œæ–°è®¾å¤‡æŽ¥å…¥ç‰©è”ç½‘ä¸­å°æ— éœ€é¢å¤–å¼€å‘ï¼Œå¯ç›´æŽ¥æŽ¥å…¥ã€‚
  - ç‰©æ¨¡åž‹ï¼šç”¨æ¥è§£æžå‚æ•°ï¼Œç›¸å½“äºŽç¡¬ä»¶åè®®ï¼Œé€šè¿‡ç‰©æ¨¡åž‹ä¸­çš„äº§å“æ¨¡åž‹è§£å†³çº§è”ï¼ˆçˆ¶å­ï¼‰è®¾å¤‡çš„ç®¡ç†é—®é¢˜ã€‚
- åŒ—å‘æŽ¥å£ï¼šé‡‡ç”¨ penAPI å½¢å¼ï¼Œæ”¯æŒè·¨åŸŸè°ƒç”¨ï¼Œå¯é¢å‘å¤šä¸ªçŽ¯å¢ƒï¼Œè§£å†³å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§çŽ¯å¢ƒçš„è®¾å¤‡åˆ†é…é—®é¢˜ï¼›
  - è®¾å¤‡åˆ†ç»„ï¼šåŒ—å‘æŽ¥å£æä¾›çš„ APIï¼Œå¯ä»¥å¯¹è®¾å¤‡è¿›è¡Œåˆ†é…ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼Ÿ



## 4 ç‰©æ¨¡åž‹

ä¸€å¥—æ ‡å‡†åŒ–çš„æ¨¡åž‹ã€‚é¢å¯¹æŸä¸ªç¡¬ä»¶ç»ˆç«¯ï¼Œæ“ä½œäººå‘˜æˆ–è€…å…¶ä»–ç¡¬ä»¶è®¾å¤‡ï¼Œé€šè¿‡ç‰©æ¨¡åž‹å¯ä»¥ç²¾ç¡®è¯†åˆ«åˆ°è¯¥ç»ˆç«¯ä»¥åŠå…¶äº§ç”Ÿçš„æ•°æ®ã€‚

åœ¨ç‰©è”ç½‘ä¸­ï¼Œæä¾›äº† Thing Specification Languageï¼Œç¼©å†™ä¸º TSLï¼Œç›´è¯‘è¿‡æ¥å°±æ˜¯â€œç‰©è§„èŒƒè¯­è¨€â€ã€‚TSL æ˜¯ç”¨æ¥æè¿°ç‰©è”ç½‘ä¸­çš„ **ç‰©** çš„ä¸€ç§è§„èŒƒè¯­è¨€ã€‚ä½¿ç”¨ TSL æè¿°çš„ç‰©è”ç½‘ä¸­çš„å®žä½“æ¨¡åž‹ï¼Œå°±ç§°ä¸º **ç‰©æ¨¡åž‹**ã€‚ç‰©æ¨¡åž‹å°±æ˜¯è¿™ä¸ªä¸­é—´çš„æ ‡å‡†åŒ–æŽ¥å£ã€‚



æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªç®€å•çš„ç”µç¯ç‰©è”ç½‘ç³»ç»Ÿä¸­ï¼Œéœ€è¦ä»¥ä¸‹ç»„ä»¶ï¼š

- **æ•°æ®é‡‡é›†ç»„ä»¶**ï¼šå…‰ç…§ä¼ æ„Ÿå™¨ã€‚é‡‡é›†å…‰çº¿å¼ºåº¦çš„æ•°æ®ã€‚

- **æ‰§è¡Œç»„ä»¶**ï¼šç»§ç”µå™¨ã€‚æŽ§åˆ¶ç”µè·¯çš„é€šæ–­ï¼Œå®žçŽ°ç”µç¯çš„å¼€å…³ï¼›å˜åŽ‹å™¨ã€‚è‹¥è¦æŽ§åˆ¶äº®åº¦ï¼Œé€šå¸¸éœ€è¦æŽ§åˆ¶ç”µåŽ‹ï¼ˆæ— çº§è°ƒèŠ‚ï¼‰æˆ–è€…å°†å‘å…‰å™¨ä»¶åˆ†ä¸ºå‡ ç»„ï¼Œåˆ†åˆ«æŽ§åˆ¶å¼€å¯å’Œå…³é—­ï¼ˆåˆ†çº§è°ƒèŠ‚ï¼‰ã€‚

- **æŽ§åˆ¶ç»„ä»¶**ï¼šæŽ§åˆ¶ç»„ä»¶ **äº§ç”Ÿ** æ‰§è¡Œå‘½ä»¤ï¼Œæ‰§è¡Œç»„ä»¶ **æ¶ˆè´¹** æ‰§è¡Œå‘½ä»¤ã€‚

  åœ¨ç‰©è”ç½‘ä¸­å°ä¸­ï¼Œç¼–è¾‘å‘½ä»¤çš„æ˜¯è§„åˆ™å¼•æ“Žï¼Œè¿™ä¸ªå‘½ä»¤æœ¬èº«ï¼Œå°±æ˜¯ **å„ç§åŠ¨ä½œ**ã€‚

  æŽ§åˆ¶ç»„ä»¶çš„å®žçŽ°å½¢å¼æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ä¸“ç”¨çš„å¼€å‘æ¿ã€é›†æˆåœ¨ç½‘å…³ä¸­ã€åµŒå…¥åˆ°è¾¹ç¼˜è®¡ç®—è®¾å¤‡ä¸­ç­‰ã€‚

- **ç½‘å…³**ï¼š å®¶åº­çŽ¯å¢ƒä¸­ï¼Œé‡‡ç”¨ BLE æŠ€æœ¯ï¼›æŽ¥å…¥äº’è”ç½‘ä¸­ï¼Œéœ€è¦æœ‰æ¡¥æŽ¥è®¾å¤‡ï¼Œæ‰èƒ½å®žçŽ°è¿œç¨‹æŽ§åˆ¶ã€‚é€šå¸¸æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªè®¾å¤‡æ¥æ¡¥æŽ¥å®¶åº­ä¸­æ‰€æœ‰çš„æ™ºèƒ½è®¾å¤‡ï¼Œè¿™ä¸ªæ¡¥æŽ¥è®¾å¤‡å°±è¢«ç§°ä¸ºç½‘å…³ã€‚ç½‘å…³ä¸ä¸€å®šæ˜¯ç”±è·¯ç”±å™¨æ¥æ‹…å½“ï¼Œä¹Ÿå¯ä»¥ç”±ç”µè§†ã€æ™ºèƒ½éŸ³ç®±ç­‰è®¾å¤‡æ‹…å½“ç½‘å…³ã€‚
- **ç”¨æˆ·ç•Œé¢**ï¼šæ“ä½œäººå‘˜çš„äº¤äº’ç•Œé¢ã€‚å¯ä»¥æ˜¯Appåº”ç”¨ï¼Œä¹Ÿå¯ä»¥æ˜¯æ‘„åƒå¤´ã€éŸ³ç®±è¿™æ ·çš„è®¾å¤‡ã€‚åœ¨é¡¹ç›®ä¸­ï¼Œæ˜¯ h5 / web é¡µé¢ï¼Œä¸»è¦çš„å‘ˆçŽ°æ–¹å¼æ˜¯å›¾å’Œè¡¨ã€‚



ç‰©æ¨¡åž‹å…¶å®žå°±æ˜¯å¯¹çŽ°å®žä¸–ç•Œä¸­ç‰©çš„æŠ½è±¡ï¼ŒæŠ½å–æˆ‘ä»¬æ‰€å…³æ³¨çš„æ–¹é¢ï¼Œç„¶åŽä½¿ç”¨TSLæè¿°ä¸ºè®¡ç®—æœºèƒ½å¤Ÿå¤„ç†çš„ä¿¡æ¯ã€‚

- æ¸…æ¥šè¿™ä¸ª**ç‰©æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥æä¾›ä»€ä¹ˆä¿¡æ¯ï¼Œèƒ½å¤Ÿå®Œæˆä»€ä¹ˆäº‹æƒ…ã€‚**

åœ¨æŠ½è±¡çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æå–äº§å“çš„å…±åŒç‰¹å¾ï¼Œå½¢æˆæ¨¡åž‹ã€‚ä¾‹å¦‚ä¸Šé¢çš„æ™ºèƒ½å°ç¯ï¼Œæ— è®ºé‡‡ç”¨å“ªç§ç±»åž‹ï¼Œéƒ½å¿…é¡»æœ‰å¼€å…³å±žæ€§ã€‚å°†è¿™äº›å…±åŒçš„ç‰¹å¾æ ‡å‡†åŒ–ä¹‹åŽï¼Œå°±å½¢æˆäº†æ™ºèƒ½å°ç¯çš„ç‰©æ¨¡åž‹ã€‚ä¸€æ—¦å½¢æˆæ ‡å‡†ä¹‹åŽï¼ŒåŽç»­çš„äº§å“åˆ™éœ€è¦éµå¾ªæ ‡å‡†ã€‚

å› ä¸ºç‰©æ¨¡åž‹æ˜¯åŸºäºŽä¸€ç±»äº§å“çš„å…±åŒç‰¹å¾æŠ½å–çš„ï¼Œå› æ­¤é‡‡ç”¨äº†ç‰©æ¨¡åž‹ä¹‹åŽï¼Œåº”ç”¨ç¨‹åºå°±ä¸å†è€¦åˆäºŽä¸€ä¸ªå…·ä½“çš„äº§å“ï¼Œè€Œæ˜¯å¯ä»¥åº”ç”¨äºŽéµå¾ªè¿™ä¸ªè§„èŒƒçš„æ‰€æœ‰çš„äº§å“ã€‚å°±åƒç¨‹åºå¼€å‘ä¸­çš„æŽ¥å£ç±»å’Œå®žçŽ°ç±»ä¸€æ ·ï¼Œè¿™å…¶å®žä¹Ÿæ˜¯é¢å‘æŽ¥å£ç¼–ç¨‹çš„ä¸€ç§æ€è·¯å’Œä½“çŽ°ã€‚

åœ¨é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªäº§å“çš„ç‰©æ¨¡åž‹ï¼Œæœ‰äº§å“å“ç±»ã€äº§å“åç§°ã€å±žæ€§ã€äº‹ä»¶ã€æœåŠ¡ç­‰ç­‰ã€‚



### 4.1 å®šä¹‰ç‰©æ¨¡åž‹

ä¸€ä¸ªæ¨¡åž‹çš„å®šä¹‰ï¼Œé€šå¸¸æˆ‘ä»¬ä»Ž **å±žæ€§**ã€**äº‹ä»¶**ã€**åŠ¨ä½œ** è¿™ä¸‰ç§åŠŸèƒ½å…ƒç´ æ¥å®šä¹‰ã€‚

æ¯”å¦‚ä¸€ä¸ªæ™ºèƒ½å°ç¯ï¼š

- **å±žæ€§ï¼ˆPropertyï¼‰**ã€‚æè¿°è®¾å¤‡çš„è¿è¡Œæ—¶çš„çŠ¶æ€çš„æ•°æ®é¡¹ã€‚è®¾å¤‡å¯è¯»å–å’Œè®¾ç½®çš„èƒ½åŠ›ã€‚ä¸€èˆ¬ç”¨äºŽæè¿°è®¾å¤‡è¿è¡Œæ—¶çš„çŠ¶æ€ï¼Œå¦‚çŽ¯å¢ƒç›‘æµ‹è®¾å¤‡æ‰€è¯»å–çš„å½“å‰çŽ¯å¢ƒæ¸©åº¦ç­‰ã€‚å±žæ€§æ”¯æŒ GET å’Œ SET è¯·æ±‚æ–¹å¼ã€‚
  - æ¯”å¦‚æ™ºèƒ½å°ç¯ï¼šå¼€ / å…³çŠ¶æ€ã€äº®åº¦çŠ¶æ€ï¼Œè‰²æ¸©çŠ¶æ€ã€‚
  - é€šè¿‡ **è¯»å–å±žæ€§** äº†è§£è®¾å¤‡çš„è¿è¡ŒçŠ¶æ€ï¼›
  - é€šè¿‡ **å†™å…¥å±žæ€§** æŽ§åˆ¶è®¾å¤‡çš„è¿è¡ŒçŠ¶æ€ã€‚
- **äº‹ä»¶ï¼ˆEventï¼‰**ã€‚ç”±è®¾å¤‡ **ä¸»åŠ¨** æŠ¥å‘Š / å‘é€çš„æ¶ˆæ¯ï¼Œå¯¹è®¾å¤‡æœ¬èº«æ¥è¯´æ˜¯äº‹ä»¶ã€‚ä¸€ä¸ªäº‹ä»¶ä¸­å¯ä»¥åŒ…å«å¤šä¸ªå‚æ•°ä¿¡æ¯ï¼Œå¯¹åº”äº‹ä»¶çš„ä¸åŒå‚æ•°ã€‚äº‹ä»¶å¯ä»¥è¢«è®¢é˜…å’ŒæŽ¨é€ã€‚
  - æ™ºèƒ½å°ç¯éœ€è¦ä¸»åŠ¨å‘ç‰©è”ç½‘ä¸­å°æŠ¥å‘Šçš„ï¼Œå¦‚ï¼Œç¡¬ä»¶æ•…éšœï¼Œå¿ƒè·³ç­‰ç­‰ã€‚
  - æŸé¡¹ä»»åŠ¡å®Œæˆçš„ä¿¡æ¯ï¼Œæˆ–è€…è®¾å¤‡å‘ç”Ÿæ•…éšœæˆ–å‘Šè­¦æ—¶çš„æ¸©åº¦ç­‰ã€‚
- **åŠ¨ä½œï¼ˆActionï¼‰**/ **æœåŠ¡ï¼ˆServiceï¼‰**ã€‚ç”±è®¾å¤‡å¯¹å¤–æä¾›çš„æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯å¤–éƒ¨å¯ä»¥è°ƒç”¨çš„åŠŸèƒ½ï¼ˆAPIï¼‰ï¼Œæœ‰è¾“å…¥ã€è¾“å‡ºå‚æ•°ã€‚ç›¸æ¯”äºŽå±žæ€§ï¼ŒæœåŠ¡å¯é€šè¿‡ä¸€æ¡æŒ‡ä»¤å®žçŽ°æ›´å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¦‚æ‰§è¡ŒæŸé¡¹ç‰¹å®šçš„ä»»åŠ¡ã€‚
  - é€ä¸€æŽ§åˆ¶å„ä¸ªå±žæ€§ï¼Œæ¯”è¾ƒç¹çï¼Œé€šå¸¸å¯ä»¥æŠŠå¸¸ç”¨çš„çŠ¶æ€ç»„åˆè®¾ç½®ä¸ºä¸€ä¸ªé¢„å…ˆå®šä¹‰å¥½çš„åœºæ™¯ï¼Œæˆ–è€…å«æ¨¡å¼ã€‚è¿™æ ·åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªæŒ‡ä»¤ä¿®æ”¹å¤šä¸ªå±žæ€§çš„å€¼ã€‚
  - åœ¨ç‰©è”ç½‘ä¸­å°é¡¹ç›®ä¸­ï¼Œç¡¬ä»¶çš„åŠ¨ä½œæˆ–æœåŠ¡ã€å¤šä¸ªåŠ¨ä½œçš„ç»„åˆæ˜¯é€šè¿‡ **è§„åˆ™å¼•æ“Ž** å®žçŽ°çš„ã€‚



### 4.2 ç‰©æ¨¡åž‹æè¿°çš„æ€»ä½“ç»“æž„

æŠ½å–äº†å±žæ€§ã€äº‹ä»¶ã€åŠ¨ä½œè¿™äº›ç‰¹å¾ä¹‹åŽï¼Œéœ€è¦èƒ½å¤Ÿæè¿°ä¸ºè®¡ç®—æœºèƒ½å¤Ÿè¯»æ‡‚çš„ä¿¡æ¯ã€‚åœ¨ TSL ä¸­ï¼ŒåŸºæœ¬çš„æ•°æ®ç±»åž‹æœ‰ 6 ç§ï¼š

- å¸ƒå°”åž‹ bool
- æ•´æ•°åž‹ int
- å­—ç¬¦ä¸² string
- æµ®ç‚¹åž‹ float
- æžšä¸¾åž‹ enum
- æ—¶é—´åž‹ timestamp

ç»“æž„å¦‚ä¸‹ï¼š

```json
{
  "category" : [											 //äº§å“å‚æ•°
    "version": "1.0",										
	  "ProductId": "abcd1234",
	  "CategoryId": "141" 
  ],
  "properties": [                      //å±žæ€§åˆ—è¡¨
    {......},
    ...
  ],
  "events": [                          //äº‹ä»¶åˆ—è¡¨
    {......},
    ...
  ],
  "actions": [                         //åŠ¨ä½œåˆ—è¡¨
    {......}, 
    ...
  ],
}
```

#### 4.2.1 æè¿°å±žæ€§

ä»¥æ‰€æœ‰çš„æ™ºèƒ½å°ç¯éƒ½éœ€è¦çš„å¼€å…³å±žæ€§ä¸ºä¾‹ï¼Œè¿™ä¸ªå±žæ€§åªèƒ½æœ‰ä¸¤ç§å€¼ï¼šå¼€ / å…³ã€‚åœ¨TSLä¸­å¯ä»¥å¦‚ä¸‹è¡¨ç¤ºï¼š

```json
{
  "identifier":"powerSwitch",   //å±žæ€§çš„å”¯ä¸€id
  "name":"ç”µæºå¼€å…³",  	  // å±žæ€§çš„åç§°
  "accessMode":"rw",     //å±žæ€§çš„è®¿é—®æ¨¡å¼ï¼Œrè¡¨ç¤ºå¯è¯»ï¼Œwè¡¨ç¤ºå¯å†™
  "required":true,    //æ˜¯å¦æ˜¯å¿…é¡»æä¾›çš„å±žæ€§ï¼Œä¾‹å¦‚è‰²æ¸©ï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªäº§å“éƒ½æä¾›çš„
  "dataType":{   		  //å±žæ€§å€¼çš„å®šä¹‰
    "type":"bool",    //å±žæ€§å€¼çš„ç±»åž‹
    "mapping":{
      "0":"å…³â€,
      "1":"å¼€"
    }
  }
}

```

#### 4.2.2 æè¿°äº‹ä»¶

æè¿°äº‹ä»¶çš„æ–¹æ³•å’Œæè¿°å±žæ€§çš„æ–¹æ³•å¤§åŒå°å¼‚ã€‚

```json
{
  "identifier":"voltageLow",
  "name":"ç”µåŽ‹è¿‡ä½Ž",
  "type":"alert",
  "required":false,
  "outputData":[
    {
      "identifier":"voltage",
      "name":"ç”µåŽ‹",
      "desc": "å½“å‰ç”µåŽ‹",
      "dataType":{
        "type":"int",
        "specs":{
          "min":"0",
          "max":"220"
        }
      }
    }
  ]
}
```

äº‹ä»¶éœ€è¦å‘ç‰©è”ç½‘å¹³å°ä¸ŠæŠ¥ä¿¡æ¯ï¼Œå› æ­¤éœ€è¦ outputDataã€‚



## 5. æ•°æ®å¤„ç†

è¿›ä¸€æ­¥è¯´è¯´å¯¹æ•°æ®çš„å¤„ç†

åœ¨æ•°æ®æµçš„ç¬¬ä¸‰æ­¥ï¼Œæ˜¯æ•°æ®å­˜å‚¨ã€‚è¿™ä¸€çŽ¯èŠ‚å°±åœ¨ç‰©è”ç½‘ä¸­å°ä¸­ï¼Œæ¶‰åŠåˆ°äº†å¯¹æ•°æ®çš„å­˜å‚¨å’Œå¤„ç†ï¼š

### 5.1 æ•°æ®å­˜å‚¨

#### 5.1.1 å…³ç³»åž‹æ•°æ®åº“

é‡‡ç”¨å…³ç³»åž‹æ•°æ®åº“æ¥ä¿å­˜ç»“æž„åŒ–æ•°æ®ã€‚

ä¼˜ç‚¹ï¼š

- å®¹æ˜“å®žçŽ°æ•°æ®çš„ CRUDï¼›
- å®¹æ˜“å®žçŽ°æ•°æ®çš„å…³è”æ’å™ï¼›
- æ”¯æŒäº‹åŠ¡ç®¡ç†ï¼Œä¿è¯æ•°æ®æ“ä½œçš„ ACID ç‰¹æ€§ã€‚

ç¼ºç‚¹ï¼š

- ä¼ ç»Ÿçš„å•æœºåž‹å…³ç³»åž‹æ•°æ®åº“éš¾æ”¯æ’‘ç‰©è”ç½‘æ‰€äº§ç”Ÿçš„æµ·é‡æ•°æ®ã€‚

è§£å†³ï¼š

- å¯¹æ•°æ®åº“è¿›è¡Œåˆ†åº“åˆ†è¡¨ï¼›
- ä½¿ç”¨ä¾‹å¦‚ **redis** çš„æ•°æ®åº“ä¸­é—´ä»¶å®žçŽ°æ•°æ®åº“æ“ä½œï¼›
- ä½¿ç”¨åˆ†å¸ƒå¼å…³ç³»åž‹æ•°æ®åº“ï¼Œä¹Ÿå°±æ˜¯ NewSQL æ•°æ®åº“ã€‚å¼€æºçš„ TiDBï¼ŒCockroachDBï¼Œå•†ä¸šåŒ–çš„ OceanBase ç­‰ã€‚

#### 5.1.2 æ—¶åºæ•°æ®åº“

ç‰©è”ç½‘ä¸­çš„ä¸€äº›æ•°æ®å…·æœ‰å¾ˆå¼ºçš„æ—¶é—´é¡ºåºï¼Œä¾‹å¦‚ä¼ æ„Ÿå™¨ä¸ŠæŠ¥çš„æ¸©åº¦ä¿¡æ¯ç­‰ã€‚è¿™äº›æ•°æ®åœ¨è¯»å†™ã€å­˜å‚¨å’Œåˆ†æžå¤„ç†æ–¹é¢æœ‰ä¸‹é¢çš„è¿™äº›ç‰¹ç‚¹ï¼š

1. æŒç»­ä¸æ–­çš„å†™å…¥ï¼Œå†™å…¥é¢‘çŽ‡åŸºæœ¬å›ºå®šï¼Œæ•°æ®åŸºæœ¬ä¸åšæ›´æ–°ï¼›
2. åœ¨ä¸šåŠ¡ä¸­è¯»å–çš„é¢‘çŽ‡å¾ˆä½Žï¼Œé€šå¸¸æ˜¯è¿›è¡Œæ•°æ®åˆ†æžæ—¶è¿›è¡Œè¯»å–ï¼›
3. æ—¶æ•ˆæ€§å¼ºï¼Œæ–°æ•°æ®ä»·å€¼é«˜ï¼Œå°±æ•°æ®ä¼šè¿…é€Ÿå¤±åŽ»ä»·å€¼ï¼›
4. æ—§æ•°æ®è¢«æŸ¥è¯¢çš„æ¦‚çŽ‡ä¸é«˜ï¼Œå¹¶ä¸”ä¸€èˆ¬æ˜¯æŒ‰ç…§æ—¶é—´èŒƒå›´çš„ç²—é¢—ç²’åº¦çš„è¯»å–åˆ†æžã€‚

æ—¶åºæ•°æ®åº“æœ€å¼€å§‹å‡ºçŽ°åœ¨å·¥ä¸šåº”ç”¨ä¸­ï¼Œåœ¨ç‰©è”ç½‘ä¸­çš„ä¹Ÿå¹¿æ³›ä½¿ç”¨ã€‚å¼€æºçš„ InfluxDBï¼ŒKairousDBï¼ŒOpenTSDB ç­‰ã€‚

#### 5.1.3 éžå…³ç³»åž‹æ•°æ®åº“

åŠç»“æž„åŒ–æ•°æ®ï¼Œé‡‡ç”¨éžå…³ç³»åž‹æ•°æ®åº“ï¼Œä¹Ÿå°±æ˜¯ NoSQL æ¥å­˜å‚¨ã€‚

é€šå¸¸éžå…³ç³»åž‹æ•°æ®åº“éƒ½æ˜¯é‡‡ç”¨é”®å€¼å¯¹æ¥å­˜å‚¨ï¼Œä»¥è®°å½•çš„ä¸»é”®ä½œä¸º keyï¼Œvalue åˆ™æ˜¯å„ç§å„æ ·çš„ã€‚

- ä¾‹å¦‚ MongoDB ä¸­çš„ value æ˜¯ç±»ä¼¼ JSON ç»“æž„çš„æ•°æ®ï¼ŒRedis ä¸­çš„ value å¯ä»¥æœ‰å„ç§ä¸åŒçš„ç±»åž‹ã€‚

é€šå¸¸ï¼Œéžå…³ç³»æ•°æ®åº“ä¸å¼ºè°ƒæ•°æ®çš„ä¸€è‡´æ€§ï¼Œä¸æ”¯æŒäº‹åŠ¡æ“ä½œï¼Œä¹Ÿä¸å…³æ³¨å…³è”è¡¨æŸ¥è¯¢ã€‚å¹¶ä¸”å¯¹æ•°æ®æ ¼å¼æ²¡æœ‰å›ºå®šçš„è¦æ±‚ï¼Œä¾¿äºŽæ‰©å±•ã€‚

æœ‰ CouchDBï¼ŒRedisï¼ŒCassandraï¼ŒMongoDB ç­‰ã€‚

#### 5.1.4 åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ

éžç»“æž„åŒ–æ•°æ®ï¼Œä½¿ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚

- å…¸åž‹çš„å°±æ˜¯ä¾‹å¦‚å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰æ•°æ®ã€‚

è¿™äº›æ•°æ®å®Œå…¨ä¸èƒ½æŒ‰ç…§ç»“æž„åŒ–çš„æ–¹æ³•æ¥æè¿°ï¼Œä¹Ÿæ— æ³•é¢„å®šä¹‰æ•°æ®æ¨¡åž‹ã€‚æœ€å‡ºåçš„æ˜¯ HDFSï¼Œå…¶ä»–çš„è¿˜æœ‰ FastDFS å’Œ Ceph ç­‰ã€‚



> ## é‡è¦å‚è€ƒï¼š
>
> - ç®€ä¹¦ï¼š[æŠ€æœ¯çš„ç¿…è†€](https://www.jianshu.com/p/ae647b9e535e)


































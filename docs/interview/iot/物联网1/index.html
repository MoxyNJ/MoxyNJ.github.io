<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-interview/iot/物联网1">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="ninjee RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="ninjee Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="ninjee JSON Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Ninjee的前端篮子" href="/opensearch.xml">
<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?0930342e569f854bebdeb485c0eac7f8",e.defer=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<meta name="baidu-site-verification" content="code-rqLUw5reVS">
<link rel="icon" href="/img/ninjee.jpeg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(51 139 255)"><title data-rh="true">1. 物联网基础知识 - Ninjee的前端篮子</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ninjee.netlify.app/img/ninjee.jpeg"><meta data-rh="true" name="twitter:image" content="https://ninjee.netlify.app/img/ninjee.jpeg"><meta data-rh="true" property="og:url" content="https://ninjee.netlify.app/docs/interview/iot/物联网1"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="keywords" content="Moxy, Ninjee, blog, javascript, typescript, python ,node, react, vue, web, 前端, 后端"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="1. 物联网基础知识 - Ninjee的前端篮子"><meta data-rh="true" name="description" content="📝 物联网需要了解的基础知识。"><meta data-rh="true" property="og:description" content="📝 物联网需要了解的基础知识。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ninjee.netlify.app/docs/interview/iot/物联网1"><link data-rh="true" rel="alternate" href="https://ninjee.netlify.app/docs/interview/iot/物联网1" hreflang="zh"><link data-rh="true" rel="alternate" href="https://ninjee.netlify.app/docs/interview/iot/物联网1" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://AJRH2JRXVY-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.cb2f47c4.css">
<link rel="preload" href="/assets/js/runtime~main.1a37efa8.js" as="script">
<link rel="preload" href="/assets/js/main.fe74e720.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ninjee-icon.png" alt="ninjee" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/ninjee-icon.png" alt="ninjee" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Ninjee</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">前端知识</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/frontEnd/JavaScript">JavaScript</a></li><li><a class="dropdown__link" href="/docs/frontEnd/HTML&amp;CSS">HTML &amp; CSS</a></li><li><a class="dropdown__link" href="/docs/frontEnd/React">React</a></li><li><a class="dropdown__link" href="/docs/frontEnd/浏览器原理">浏览器原理</a></li><li><a class="dropdown__link" href="/docs/frontEnd/other">other</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">敲代码</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/code/algorithm">算法</a></li><li><a class="dropdown__link" href="/docs/code/writtenJs">手写Js</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">面试</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/interview/summary">总结</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/interview/iot">物联网</a></li></ul></div><a class="navbar__item navbar__link" href="/project">我的项目</a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/javascript">JavaScript</a><button aria-label="打开/收起侧边栏菜单「JavaScript」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/html--css">HTML &amp; CSS</a><button aria-label="打开/收起侧边栏菜单「HTML &amp; CSS」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/react">React</a><button aria-label="打开/收起侧边栏菜单「React」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/浏览器原理">浏览器原理</a><button aria-label="打开/收起侧边栏菜单「浏览器原理」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/algorithm">algorithm</a><button aria-label="打开/收起侧边栏菜单「algorithm」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/手写-js">手写 Js</a><button aria-label="打开/收起侧边栏菜单「手写 Js」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/总结">总结</a><button aria-label="打开/收起侧边栏菜单「总结」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/summary">总结</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/summary/JavaScript">JavaScript相关</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/summary/浏览器">浏览器相关</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/summary/计算机网络">计算机网络</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/summary/操作系统">操作系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/summary/HTML&amp;CSS">HTML&amp;CSS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/summary/git">git</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/summary/React">React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/summary/Typescript">Typescript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/summary/webpack">Webpack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/summary/Ajax&amp;Axios">Ajax、Axios</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/iot">Iot</a><button aria-label="打开/收起侧边栏菜单「Iot」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/iot">IOC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/interview/iot/物联网1">1. 物联网基础知识</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/interview/iot/物联网2">2. 物联网中台</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/other">other</a><button aria-label="打开/收起侧边栏菜单「other」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_FykI"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_DTRl"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/总结"><span itemprop="name">总结</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/iot"><span itemprop="name">Iot</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">1. 物联网基础知识</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>1. 物联网基础知识</h1></header><p>📝 物联网需要了解的基础知识。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="1-物联网解决的问题">1. 物联网解决的问题<a class="hash-link" href="#1-物联网解决的问题" title="标题的直接链接">​</a></h2><p>智慧园区的基础，是智慧硬件，将园区内的各个智能设备接入网络，可极大减少对底层操控的人力物力成本。</p><ul><li>如中台再引入可视化管理，降低操作人员的学习成本，可对园区整体硬件设备集中可视管理。</li><li>如安装防盗系统，可配合摄像头、喇叭、门磁等多硬件设备形成一系列自动化警告、摄录、报警、通知相关人员等；</li><li>如监控休息室流量、监控卫生间流量、监控美餐柜等等，提升管理覆盖面积，提升办公效率。</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="11-什么是物联网">1.1 什么是物联网<a class="hash-link" href="#11-什么是物联网" title="标题的直接链接">​</a></h3><p>IOT（英文）</p><p>物联网相比于互联网，参与网络的主体发生了变化， internet 的消费主体是人。而 iot 的主体是是人与设备的共同参与：</p><p><img loading="lazy" alt="img" src="/assets/images/webp-20220524181206327-2880ce27a530eb6a96af9df1d7bdb78c.bin" width="1200" height="451" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="12-物联网的结构">1.2 物联网的结构<a class="hash-link" href="#12-物联网的结构" title="标题的直接链接">​</a></h3><p>物联网的三个层次：</p><p><img loading="lazy" alt="img" src="/assets/images/webp-6dc76c60d2893835286d46d2fa7b1915.bin" width="857" height="536" class="img_E7b_"></p><ol><li><p>设备层，也就是各种硬件设备。</p><ul><li><p>传感器（温度、门磁等）；</p></li><li><p>执行器（继电器、电机等）；</p></li><li><p>其他智能设备：含有嵌入式系统芯片的设备，都可以入网（STM32、FPGA）等；</p></li><li><p>通信设备：Wifi、蓝牙、蜂窝网络等基础通信设备；</p></li></ul></li><li><p>网络层，用于设备与物联网平台之间的通信。</p><ul><li>机遇计算机网络提供的平台，使物联网设备接入网络，可以有 网络/传输层 TCP/IP 协议、应用层 HTTPS 协议、</li><li>MQTT / AMQP协议更常用。</li></ul></li><li><p>应用层，实现具体业务逻辑的地方</p><ul><li>接入物联网平台的终端是很多的，采集的数据更是海量的。因此，对应物联网平台的后台相对于普通的服务后台，需要解决海量数据的存储、处理、分析等问题。</li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="2-数据流">2. 数据流<a class="hash-link" href="#2-数据流" title="标题的直接链接">​</a></h2><p>网联网的数据流大概是按照下面这个逻辑：</p><ul><li>数据采集、数据传输、数据存储、数据处理、数据应用。</li><li>物联网中台中，主要实现了数据存储，服务于数据应用。硬件设备产生的数据，数据应用产生的指令，都存储在物联网中台中。</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="21-数据采集">2.1 数据采集<a class="hash-link" href="#21-数据采集" title="标题的直接链接">​</a></h3><p>每一个原始数据，都有其“生产者”，通常我们称之为“数据源”。</p><p>数据源采集和发送数据，通过物联网，传递到应用层。由于物联网的通信特点，可能还需要对数据做一些临时的保存工作。</p><p>数据采集具备复杂性。从宏观的角度来看，数据源采集的数据类型多种多样，对应的数据采集设备也多种多样。例如采集温度、湿度等的传感器、采集视频的摄像头、采集声音的录音设备等等。</p><ul><li>这些终端设备中，需要有 <strong>嵌入式系统</strong> 进行支撑，这部分工作，在 iot 物联网中台中，通常项目外包，交给外包人员进行实现。<ul><li><strong>网关 + 数据统一。</strong></li></ul></li><li>难点：设备众多、通信协议复杂、需要对接大量的硬件公司和技术人员，参阅大量对应硬件的技术手册。时间成本较高。</li></ul><p>对于上层来说，数据采集工作屏蔽了底层硬件设备不同的通信协议、不同的数据存储存方式，使得上层仅需关注硬件产生的信息本身。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="22-数据传输">2.2 数据传输<a class="hash-link" href="#22-数据传输" title="标题的直接链接">​</a></h3><p>采集到的数据，需要上传到物联网中台，这个过程就是数据传输。数据传输的要求是快速、可靠。</p><p>从宏观的角度来看，数据传输的难点是 <strong>高并发</strong>。网联网环境中设备数量众多，并且这些设备都是源源不断的产生和上传数据，因此要求中台具备处理高并发的能力，能够有效、可靠的接收数据。</p><ul><li>高并发的实现，需要 <strong>分布式系统</strong> 的支持，同时要引入<strong>负载均衡、消息队列、缓存</strong> 等相关的技术。</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="23-数据存储">2.3 数据存储<a class="hash-link" href="#23-数据存储" title="标题的直接链接">​</a></h3><p>数据传输到物联网中台之后，需要进行存储。这里要解决的问题是 <strong>海量异构数据的存储</strong>。</p><p>比如一个园区遍布的摄像头，每个季度就可以产生数PB级的数据。</p><p>在数据量大的同时，数据的类型和格式还多种多样，按照特性可以分为3类：</p><ul><li>结构化数据：例如用户信息、设备参数等等。</li><li>半结构化数据：例如日志记录、JSON 结构的数据等。</li><li>非结构化数据：例如图像、视频、音频等数据。</li></ul><p>存储结构：</p><ul><li>对于海量的结构化数据，可以采用 <strong>分布式关系数据库</strong> 存储；</li><li>对于时间敏感的数据，可以采用 <strong>时序数据库</strong>。</li><li>对于半结构化数据，可以采用 <strong>NoSQL 数据库</strong>，比如MongoDB，Neo4j 等来存储。</li><li>对于非结构化数据，可以采用 HDFS 这样的 <strong>分布式文件系统</strong> 来处理。</li></ul><p>数据库选型的基本原则，就是根据数据的类型和业务使用的方式来选择，数据大体上可以分为3类：</p><ol><li>结构化数据 （Structured Data）</li><li>半结构化数据  (Semi-Structured Data)</li><li>非结构化数据 (Unstructured Data)</li></ol><p>针对这些数据的特性，以及使用的业务场景，我们可以选择不同类型的数据库。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="24-数据应用">2.4 数据应用<a class="hash-link" href="#24-数据应用" title="标题的直接链接">​</a></h3><p>前面的数据采集、传输、存储、处理，都是为了最终的数据应用，利用数据创造价值。</p><p>数据产生价值的方式，大致有以下几种：</p><ol><li>挖掘：分析数据的规律和管理关系，一个经典的应用就是用户画像和购买习惯的分析。在园区中，可以分析员工下班的大致时间。</li><li>预测：构建预测模型，比如我们经常可以看到共享单车公司将单车各个地方收集整理后投放到指定的位置，这些位置的选择就是通过预测得出的。</li><li>控制决策：例如根据光线变化打开关闭电灯，根据温度变化打开空调等等。</li><li>可视化：<ul><li>单数据的可视化，例如我们使用滴滴打车的时候显示司机的位置。园区的门磁点位信息就是单数据可视化的一种表现。</li><li>统计数据的可视化，例如直方图、曲线图等。</li></ul></li></ol><p>所有的这些应用，都是需要通过算法来实现的。由于数据量巨大，使用人工分析是不可能的，因此通常使用机器学习、人工智能来对数据进行统计分析。</p><p>这些算法分为监督学习和非监督学习两大类。</p><ul><li>监督学习：我们需要告诉算法哪些是对的，哪些是错的。</li><li>非监督学习：算法要自己将数据中的”异常值“区分出来。</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="3-网络层">3. 网络层<a class="hash-link" href="#3-网络层" title="标题的直接链接">​</a></h2><p>主要讲物联网的通信协议，明白大概就好，重点理解下 kafka 涉及的相关知识。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="31-网联网通信的特点">3.1 网联网通信的特点<a class="hash-link" href="#31-网联网通信的特点" title="标题的直接链接">​</a></h3><p>物联网通信的特点和物联网设备所处的环境有很大的关系：</p><ol><li>设备处在 <strong>不可靠、高延迟的网络环境</strong>。</li></ol><p>比如共享单车，如果使用的NB-IoT这样的通信技术，本身的通信速率就低，如果被停在信号不稳定的地方，通信质量就更差。 这样的情况下，如果使用HTTP这样的协议，需要先建立连接，发出请求，等待响应，很可能连接经常中断，需要多次交互才能够完成一次请求，用户开个锁就需要等待很长时间。</p><ol start="2"><li><strong>设备数量众多，交互关系复杂。</strong></li></ol><p>比如智能家居，家里的多种物联网设备之间是有相互关联的，如果让物联网平台对每个设备做权限控制和数据阈值的限制，基本不现实。这个时候，需要将一个家作为一个整体来处理，简化交互逻辑。</p><ol start="3"><li><strong>设备流动性大</strong></li></ol><p>大的比如共享单车，不断有新设备加入，也不断有设备退出。</p><p>小的如智能家居，随时可能新加入设备入网，但不能没当新加入设备，就需要配置一遍参数。因此，网络通信协议需要具备可伸缩性。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="32-发布-订阅模式">3.2 发布-订阅模式<a class="hash-link" href="#32-发布-订阅模式" title="标题的直接链接">​</a></h3><p>过消息队列就是发布-订阅模式（参考浏览器结构）。</p><p>这个模式包含 3 个角色：发布者（Publisher）、经纪人（Broker）、订阅者（Subscriber）：</p><p><img loading="lazy" alt="img" src="data:;base64,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" width="554" height="368" class="img_E7b_"></p><p>在物联网场景中，一个传感器数据需要出发多个服务或者终端，并且这种出发需要是可扩展的。</p><p>比如我们在窗户上设置防盗系统，目前可能参与的设备有门磁，当检测到有人非法闯入，同时会触发以下事件：</p><ul><li>在开启期间发现有人开启窗户，需要通知摄像头录像、通知声光报警器报警、推送消息到相关工作人员的手机等等。同时，将来可能还需要有新的防盗设备接入。那么，最好让摄像头、报警器、信息推送等都订阅 “窗户异常开启” 这个 <strong>事件 / 消息</strong>，将来有新的设备，也可以监听这个 <strong>事件 / 消息</strong>。这样，消息的生产者和消费者之间就进行了解耦。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="321-mqtt">3.2.1 MQTT<a class="hash-link" href="#321-mqtt" title="标题的直接链接">​</a></h4><p>Message Queuing Telemetry Transport，消息队列遥测传输。</p><p>MQTT协议是一个轻量级的网络协议，有3个特点：</p><ol><li>采用二进制的消息内容编码格式。</li><li>协议头紧凑，交互简单。</li><li>支持 3 种消息传递语义（最少一次、最多一次、恰好一次）。</li></ol><p>三种语义：</p><ul><li>QoS 0，表示的是“最多一次“送达，也就是消息可能会丢失，但是不会重复。</li><li>QoS 1，表示的是”至少一次“送达，也就是消息可能会重复，但是不会丢失。</li><li>QoS 2， 表示的是”恰好一次“送达，也就是消息有且只有一次送达，不会丢失，也不会重复。</li></ul><p>MQTT格式简洁、占用带宽小的特色，非常适合计算能力有限、网络带宽低、信号不稳定的远程设备。另外，由于MQTT几乎支持所有的平台，得到了广泛的应用，基本上是现在物联网系统事实上的网络协议标准。</p><p><strong>另：kafka</strong> </p><ul><li>kafka 也有最少一次、最多一次、恰好一次。更多知识可以在 kafka 相关文章中了解。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="322-amqp">3.2.2 AMQP<a class="hash-link" href="#322-amqp" title="标题的直接链接">​</a></h4><p>全称是 Advanced Message Queuing Protocol，高级消息队列协议，是应用层协议的一个开放标准。</p><p>AMQP也是采用的二进制消息格式，也支持3种消息传递语义。</p><p>AMQP的特点是可靠、通用，但是 AMQP 定义了庞大的特性集，是一个重量级的协议，不适合对功耗要求严格、计算能力有限的设备。但是很多后台的消息队列是支持 AMQP 协议的，比如RabbitMQ。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="33-请求-响应模式">3.3 请求-响应模式<a class="hash-link" href="#33-请求-响应模式" title="标题的直接链接">​</a></h3><p>物联网设备也需要使用请求-响应模式。最典型的就是公司的美餐柜。</p><ul><li>用户在终端设备（H5 / Web）输入取件码之后，终端设备向服务器发送验证请求，返回验证结果，最后开锁。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="331-http">3.3.1 HTTP<a class="hash-link" href="#331-http" title="标题的直接链接">​</a></h4><p>唯一的优点：可以利用已有的 Web 服务资源。</p><p>HTTP协议的报文格式很重，不太适合资源有限的嵌入式设备。但是在资源充足的设备上，还是可以考虑的。</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="332-coap">3.3.2 CoAP<a class="hash-link" href="#332-coap" title="标题的直接链接">​</a></h4><p>全称 Constrained Application Protocal （受限的应用协议）。比 HTTP 轻量级的通信协议。</p><p>和HTTP协议一样，CoAP协议也使用URI来标识资源，也有GET,POST,PUT,DELETE等方法，也有响应状态码。</p><p>CoAP的消息采用二进制格式，支持可确认消息和不可确认消息两种（最多一次、最少一次）。协议包头小，仅为4个字节。采用 UDP 传输协议，对应设备的计算资源要求更低。</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="332-lwm2m">3.3.2 LwM2M<a class="hash-link" href="#332-lwm2m" title="标题的直接链接">​</a></h4><p>全称是 Lightweight Machine-to-Machine，轻量级物联网协议。</p><p>LwM2M协议是基于CoAP协议的，提供了一组轻量级设备关联和交互接口协议。和 CoAP 一样，适用于资源有限的终端设备管理。</p><p><img loading="lazy" alt="img" src="/assets/images/webp-20220524191017145-dd999b6aef01a165dd31106843f5f7aa.bin" width="783" height="286" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="34-网关">3.4 网关<a class="hash-link" href="#34-网关" title="标题的直接链接">​</a></h3><p>esp 8266 等芯片，或 FPGA  等芯片，可通过 MATT 协议入网；</p><p>常用传感器，可以通过 BLE、ZigBee 协议入网；</p><p>...</p><p>硬件的多种多样，造就了入网方式多种多样，需要有一个平台统一将所有硬件接入网络，同时屏蔽各个设备之间的数据结构差异。</p><p>所以，网关解决：</p><ul><li><p>屏蔽硬件接入网络的 <strong>协议差异</strong>；</p></li><li><p>屏蔽硬件接入网络的 <strong>数据差异</strong>。</p></li></ul><p>目前的物联网中，在逐步尝试将原本在云平台上的计算任务，放到靠近数据原产地的设备上完成。这个过程称为将计算能力下沉到边缘设备，也称为 <strong>边缘计算</strong>。</p><ul><li>比如数据差异的处理、数据的粗筛、敏感数据的脱敏（语音语义、家庭摄像）等；</li></ul><p><img loading="lazy" alt="img" src="/assets/images/webp-20220524220505433-c17256a2abee5964b4432706a25f08a7.bin" width="1200" height="675" class="img_E7b_"></p><p>在项目中，物联网中台也涉及到了 南向接口、北向接口、物模型和设备分组。物联网中台是比网关更上层的东西，可以说网关的北向接口才是物联网中台的南向接口。</p><p>下面是物联网中台的定义：</p><ul><li>南向接口：制定统一的南向接口，新设备接入物联网中台无需额外开发，可直接接入。<ul><li>物模型：用来解析参数，相当于硬件协议，通过物模型中的产品模型解决级联（父子）设备的管理问题。</li></ul></li><li>北向接口：采用 penAPI 形式，支持跨域调用，可面向多个环境，解决开发、测试、生产环境的设备分配问题；<ul><li>设备分组：北向接口提供的 API，可以对设备进行分配：开发、测试、生产？</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="4-物模型">4 物模型<a class="hash-link" href="#4-物模型" title="标题的直接链接">​</a></h2><p>一套标准化的模型。面对某个硬件终端，操作人员或者其他硬件设备，通过物模型可以精确识别到该终端以及其产生的数据。</p><p>在物联网中，提供了 Thing Specification Language，缩写为 TSL，直译过来就是“物规范语言”。TSL 是用来描述物联网中的 <strong>物</strong> 的一种规范语言。使用 TSL 描述的物联网中的实体模型，就称为 <strong>物模型</strong>。物模型就是这个中间的标准化接口。</p><p>比如，在一个简单的电灯物联网系统中，需要以下组件：</p><ul><li><p><strong>数据采集组件</strong>：光照传感器。采集光线强度的数据。</p></li><li><p><strong>执行组件</strong>：继电器。控制电路的通断，实现电灯的开关；变压器。若要控制亮度，通常需要控制电压（无级调节）或者将发光器件分为几组，分别控制开启和关闭（分级调节）。</p></li><li><p><strong>控制组件</strong>：控制组件 <strong>产生</strong> 执行命令，执行组件 <strong>消费</strong> 执行命令。</p><p>在物联网中台中，编辑命令的是规则引擎，这个命令本身，就是 <strong>各种动作</strong>。</p><p>控制组件的实现形式有很多，比如专用的开发板、集成在网关中、嵌入到边缘计算设备中等。</p></li><li><p><strong>网关</strong>： 家庭环境中，采用 BLE 技术；接入互联网中，需要有桥接设备，才能实现远程控制。通常我们选择一个设备来桥接家庭中所有的智能设备，这个桥接设备就被称为网关。网关不一定是由路由器来担当，也可以由电视、智能音箱等设备担当网关。</p></li><li><p><strong>用户界面</strong>：操作人员的交互界面。可以是App应用，也可以是摄像头、音箱这样的设备。在项目中，是 h5 / web 页面，主要的呈现方式是图和表。</p></li></ul><p>物模型其实就是对现实世界中物的抽象，抽取我们所关注的方面，然后使用TSL描述为计算机能够处理的信息。</p><ul><li>清楚这个<strong>物是什么，可以提供什么信息，能够完成什么事情。</strong></li></ul><p>在抽象的过程中，需要提取产品的共同特征，形成模型。例如上面的智能台灯，无论采用哪种类型，都必须有开关属性。将这些共同的特征标准化之后，就形成了智能台灯的物模型。一旦形成标准之后，后续的产品则需要遵循标准。</p><p>因为物模型是基于一类产品的共同特征抽取的，因此采用了物模型之后，应用程序就不再耦合于一个具体的产品，而是可以应用于遵循这个规范的所有的产品。就像程序开发中的接口类和实现类一样，这其实也是面向接口编程的一种思路和体现。</p><p>在项目中，一个产品的物模型，有产品品类、产品名称、属性、事件、服务等等。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="41-定义物模型">4.1 定义物模型<a class="hash-link" href="#41-定义物模型" title="标题的直接链接">​</a></h3><p>一个模型的定义，通常我们从 <strong>属性</strong>、<strong>事件</strong>、<strong>动作</strong> 这三种功能元素来定义。</p><p>比如一个智能台灯：</p><ul><li><strong>属性（Property）</strong>。描述设备的运行时的状态的数据项。设备可读取和设置的能力。一般用于描述设备运行时的状态，如环境监测设备所读取的当前环境温度等。属性支持 GET 和 SET 请求方式。<ul><li>比如智能台灯：开 / 关状态、亮度状态，色温状态。</li><li>通过 <strong>读取属性</strong> 了解设备的运行状态；</li><li>通过 <strong>写入属性</strong> 控制设备的运行状态。</li></ul></li><li><strong>事件（Event）</strong>。由设备 <strong>主动</strong> 报告 / 发送的消息，对设备本身来说是事件。一个事件中可以包含多个参数信息，对应事件的不同参数。事件可以被订阅和推送。<ul><li>智能台灯需要主动向物联网中台报告的，如，硬件故障，心跳等等。</li><li>某项任务完成的信息，或者设备发生故障或告警时的温度等。</li></ul></li><li><strong>动作（Action）</strong>/ <strong>服务（Service）</strong>。由设备对外提供的服务，也就是外部可以调用的功能（API），有输入、输出参数。相比于属性，服务可通过一条指令实现更复杂的业务逻辑，如执行某项特定的任务。<ul><li>逐一控制各个属性，比较繁琐，通常可以把常用的状态组合设置为一个预先定义好的场景，或者叫模式。这样在使用的时候，可以通过一个指令修改多个属性的值。</li><li>在物联网中台项目中，硬件的动作或服务、多个动作的组合是通过 <strong>规则引擎</strong> 实现的。</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="42-物模型描述的总体结构">4.2 物模型描述的总体结构<a class="hash-link" href="#42-物模型描述的总体结构" title="标题的直接链接">​</a></h3><p>抽取了属性、事件、动作这些特征之后，需要能够描述为计算机能够读懂的信息。在 TSL 中，基本的数据类型有 6 种：</p><ul><li>布尔型 bool</li><li>整数型 int</li><li>字符串 string</li><li>浮点型 float</li><li>枚举型 enum</li><li>时间型 timestamp</li></ul><p>结构如下：</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;category&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">                                             </span><span class="token comment" style="color:#999988;font-style:italic">//产品参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1.0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                                       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;ProductId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;abcd1234&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;CategoryId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;141&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;properties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">//属性列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">......</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;events&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">                          </span><span class="token comment" style="color:#999988;font-style:italic">//事件列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">......</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;actions&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">                         </span><span class="token comment" style="color:#999988;font-style:italic">//动作列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">......</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" title="复制" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="421-描述属性">4.2.1 描述属性<a class="hash-link" href="#421-描述属性" title="标题的直接链接">​</a></h4><p>以所有的智能台灯都需要的开关属性为例，这个属性只能有两种值：开 / 关。在TSL中可以如下表示：</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;identifier&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;powerSwitch&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//属性的唯一id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;电源开关&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 属性的名称</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;accessMode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;rw&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">//属性的访问模式，r表示可读，w表示可写</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;required&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//是否是必须提供的属性，例如色温，并不是每个产品都提供的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;dataType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">//属性值的定义</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;bool&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//属性值的类型</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;mapping&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;0&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&quot;关”</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;开&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" title="复制" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="422-描述事件">4.2.2 描述事件<a class="hash-link" href="#422-描述事件" title="标题的直接链接">​</a></h4><p>描述事件的方法和描述属性的方法大同小异。</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;identifier&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;voltageLow&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;电压过低&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;alert&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;required&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;outputData&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;identifier&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;voltage&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;电压&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;desc&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;当前电压&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;dataType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;int&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;specs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;min&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;max&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;220&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" title="复制" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>事件需要向物联网平台上报信息，因此需要 outputData。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="5-数据处理">5. 数据处理<a class="hash-link" href="#5-数据处理" title="标题的直接链接">​</a></h2><p>进一步说说对数据的处理</p><p>在数据流的第三步，是数据存储。这一环节就在物联网中台中，涉及到了对数据的存储和处理：</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="51-数据存储">5.1 数据存储<a class="hash-link" href="#51-数据存储" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="511-关系型数据库">5.1.1 关系型数据库<a class="hash-link" href="#511-关系型数据库" title="标题的直接链接">​</a></h4><p>采用关系型数据库来保存结构化数据。</p><p>优点：</p><ul><li>容易实现数据的 CRUD；</li><li>容易实现数据的关联插叙；</li><li>支持事务管理，保证数据操作的 ACID 特性。</li></ul><p>缺点：</p><ul><li>传统的单机型关系型数据库难支撑物联网所产生的海量数据。</li></ul><p>解决：</p><ul><li>对数据库进行分库分表；</li><li>使用例如 <strong>redis</strong> 的数据库中间件实现数据库操作；</li><li>使用分布式关系型数据库，也就是 NewSQL 数据库。开源的 TiDB，CockroachDB，商业化的 OceanBase 等。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="512-时序数据库">5.1.2 时序数据库<a class="hash-link" href="#512-时序数据库" title="标题的直接链接">​</a></h4><p>物联网中的一些数据具有很强的时间顺序，例如传感器上报的温度信息等。这些数据在读写、存储和分析处理方面有下面的这些特点：</p><ol><li>持续不断的写入，写入频率基本固定，数据基本不做更新；</li><li>在业务中读取的频率很低，通常是进行数据分析时进行读取；</li><li>时效性强，新数据价值高，就数据会迅速失去价值；</li><li>旧数据被查询的概率不高，并且一般是按照时间范围的粗颗粒度的读取分析。</li></ol><p>时序数据库最开始出现在工业应用中，在物联网中的也广泛使用。开源的 InfluxDB，KairousDB，OpenTSDB 等。</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="513-非关系型数据库">5.1.3 非关系型数据库<a class="hash-link" href="#513-非关系型数据库" title="标题的直接链接">​</a></h4><p>半结构化数据，采用非关系型数据库，也就是 NoSQL 来存储。</p><p>通常非关系型数据库都是采用键值对来存储，以记录的主键作为 key，value 则是各种各样的。</p><ul><li>例如 MongoDB 中的 value 是类似 JSON 结构的数据，Redis 中的 value 可以有各种不同的类型。</li></ul><p>通常，非关系数据库不强调数据的一致性，不支持事务操作，也不关注关联表查询。并且对数据格式没有固定的要求，便于扩展。</p><p>有 CouchDB，Redis，Cassandra，MongoDB 等。</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="514-分布式文件系统">5.1.4 分布式文件系统<a class="hash-link" href="#514-分布式文件系统" title="标题的直接链接">​</a></h4><p>非结构化数据，使用分布式文件系统。</p><ul><li>典型的就是例如图片、音频、视频等数据。</li></ul><p>这些数据完全不能按照结构化的方法来描述，也无法预定义数据模型。最出名的是 HDFS，其他的还有 FastDFS 和 Ceph 等。</p><blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="重要参考">重要参考：<a class="hash-link" href="#重要参考" title="标题的直接链接">​</a></h2><ul><li>简书：<a href="https://www.jianshu.com/p/ae647b9e535e" target="_blank" rel="noopener noreferrer">技术的翅膀</a></li></ul></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>标签：</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/docs/tags/iot">iot</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/interview/iot"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">IOC</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/interview/iot/物联网2"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">2. 物联网中台</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-物联网解决的问题" class="table-of-contents__link toc-highlight">1. 物联网解决的问题</a><ul><li><a href="#11-什么是物联网" class="table-of-contents__link toc-highlight">1.1 什么是物联网</a></li><li><a href="#12-物联网的结构" class="table-of-contents__link toc-highlight">1.2 物联网的结构</a></li></ul></li><li><a href="#2-数据流" class="table-of-contents__link toc-highlight">2. 数据流</a><ul><li><a href="#21-数据采集" class="table-of-contents__link toc-highlight">2.1 数据采集</a></li><li><a href="#22-数据传输" class="table-of-contents__link toc-highlight">2.2 数据传输</a></li><li><a href="#23-数据存储" class="table-of-contents__link toc-highlight">2.3 数据存储</a></li><li><a href="#24-数据应用" class="table-of-contents__link toc-highlight">2.4 数据应用</a></li></ul></li><li><a href="#3-网络层" class="table-of-contents__link toc-highlight">3. 网络层</a><ul><li><a href="#31-网联网通信的特点" class="table-of-contents__link toc-highlight">3.1 网联网通信的特点</a></li><li><a href="#32-发布-订阅模式" class="table-of-contents__link toc-highlight">3.2 发布-订阅模式</a><ul><li><a href="#321-mqtt" class="table-of-contents__link toc-highlight">3.2.1 MQTT</a></li><li><a href="#322-amqp" class="table-of-contents__link toc-highlight">3.2.2 AMQP</a></li></ul></li><li><a href="#33-请求-响应模式" class="table-of-contents__link toc-highlight">3.3 请求-响应模式</a><ul><li><a href="#331-http" class="table-of-contents__link toc-highlight">3.3.1 HTTP</a></li><li><a href="#332-coap" class="table-of-contents__link toc-highlight">3.3.2 CoAP</a></li><li><a href="#332-lwm2m" class="table-of-contents__link toc-highlight">3.3.2 LwM2M</a></li></ul></li><li><a href="#34-网关" class="table-of-contents__link toc-highlight">3.4 网关</a></li></ul></li><li><a href="#4-物模型" class="table-of-contents__link toc-highlight">4 物模型</a><ul><li><a href="#41-定义物模型" class="table-of-contents__link toc-highlight">4.1 定义物模型</a></li><li><a href="#42-物模型描述的总体结构" class="table-of-contents__link toc-highlight">4.2 物模型描述的总体结构</a><ul><li><a href="#421-描述属性" class="table-of-contents__link toc-highlight">4.2.1 描述属性</a></li><li><a href="#422-描述事件" class="table-of-contents__link toc-highlight">4.2.2 描述事件</a></li></ul></li></ul></li><li><a href="#5-数据处理" class="table-of-contents__link toc-highlight">5. 数据处理</a><ul><li><a href="#51-数据存储" class="table-of-contents__link toc-highlight">5.1 数据存储</a><ul><li><a href="#511-关系型数据库" class="table-of-contents__link toc-highlight">5.1.1 关系型数据库</a></li><li><a href="#512-时序数据库" class="table-of-contents__link toc-highlight">5.1.2 时序数据库</a></li><li><a href="#513-非关系型数据库" class="table-of-contents__link toc-highlight">5.1.3 非关系型数据库</a></li><li><a href="#514-分布式文件系统" class="table-of-contents__link toc-highlight">5.1.4 分布式文件系统</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">分享</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/frontEnd/JavaScript">前端</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/code/algorithm">算法笔记</a></li><li class="footer__item"><a class="footer__link-item" href="/project">我的项目</a></li></ul></div><div class="col footer__col"><div class="footer__title">社交媒体</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/about">关于我</a></li><li class="footer__item"><a href="https://github.com/moxyNJ" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://juejin.cn/user/2005151873514024" target="_blank" rel="noopener noreferrer" class="footer__link-item">掘金<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items"><li class="footer__item"><a href="https://www.ninjee.co" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ninjee 的前端篮子</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p>Copyright © 2022 Ninjee Built with Docusaurus.</p><p><a href="http://beian.miit.gov.cn/">晋ICP备2021017941号-2</a></p></div></div></div></footer></div>
<script src="/assets/js/runtime~main.1a37efa8.js"></script>
<script src="/assets/js/main.fe74e720.js"></script>
</body>
</html>
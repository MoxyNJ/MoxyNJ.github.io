<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-skill/database/redis/index">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="æ„§æ€ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="æ„§æ€ Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="æ„§æ€ JSON Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Ninjeeçš„å‰ç«¯ç¯®å­" href="/opensearch.xml">
<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?c9a3849aa75f9c4a4e65f846cd1a5155",e.defer=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<meta name="baidu-site-verification" content="code-rqLUw5reVS">
<script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",t.defer=!0;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script>
<link rel="icon" href="/img/kuizuo.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(51 139 255)"><title data-rh="true">Redisç¬”è®° - Ninjeeçš„å‰ç«¯ç¯®å­</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://moxynj.github.io//img/kuizuo.jpg"><meta data-rh="true" name="twitter:image" content="https://moxynj.github.io//img/kuizuo.jpg"><meta data-rh="true" property="og:url" content="https://moxynj.github.io//docs/skill/database/redis/"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="keywords" content="æ„§æ€, kuizuo, blog, javascript, typescript, python ,node, react, vue, web, å‰ç«¯, åç«¯"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Redisç¬”è®° - Ninjeeçš„å‰ç«¯ç¯®å­"><meta data-rh="true" name="description" content="redis ä¸­æ–‡å®˜æ–¹ç½‘ç«™"><meta data-rh="true" property="og:description" content="redis ä¸­æ–‡å®˜æ–¹ç½‘ç«™"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://moxynj.github.io//docs/skill/database/redis/"><link data-rh="true" rel="alternate" href="https://moxynj.github.io//docs/skill/database/redis/" hreflang="zh"><link data-rh="true" rel="alternate" href="https://moxynj.github.io//docs/skill/database/redis/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://2NBW5YNFON-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.027cc5ec.css">
<link rel="preload" href="/assets/js/runtime~main.3afa910a.js" as="script">
<link rel="preload" href="/assets/js/main.cf246ba2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="æ„§æ€" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.webp" alt="æ„§æ€" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">æ„§æ€</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/tags">æ ‡ç­¾</a><a class="navbar__item navbar__link" href="/archive">å½’æ¡£</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">å­¦ä¹ </a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/skill/">æŠ€æœ¯ç¬”è®°</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">å°å·¥å…·</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/resources">èµ„æºå¯¼èˆª</a></li><li><a href="https://deobfuscator.kuizuo.cn" target="_blank" rel="noopener noreferrer" class="dropdown__link">JSä»£ç æ··æ·†ä¸è¿˜åŸ</a></li><li><a href="http://cipher.kuizuo.cn" target="_blank" rel="noopener noreferrer" class="dropdown__link">CyberChefåœ¨çº¿åŠ è§£å¯†</a></li><li><a href="http://tools.kuizuo.cn" target="_blank" rel="noopener noreferrer" class="dropdown__link">æ„§æ€åœ¨çº¿å·¥å…·</a></li></ul></div><a class="navbar__item navbar__link" href="/project">å®æˆ˜é¡¹ç›®</a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/skill">æŠ€æœ¯ç¬”è®°ç®€ä»‹</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/vue">Vue</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒVueã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/react">React</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒReactã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/web">Web</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒWebã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/javascript">JavaScript</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒJavaScriptã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/node">Node</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒNodeã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/css">Css</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒCssã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/category/ç®—æ³•">ç®—æ³•</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/é€†å‘">é€†å‘</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œé€†å‘ã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/åç«¯">åç«¯</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œåç«¯ã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/æ•°æ®åº“">æ•°æ®åº“</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œæ•°æ®åº“ã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/skill/database/mysql/">Mysql</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒMysqlã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/skill/database/mongo/">MongoDB</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒMongoDBã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/docs/skill/database/redis/">Redis</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒRedisã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/skill/database/redis/Redisè·å–å…­ä½ä¸é‡å¤æ•°å­—ï¼ˆé‚€è¯·ç ï¼‰">Redisè·å–å…­ä½ä¸é‡å¤æ•°å­—ï¼ˆé‚€è¯·ç ï¼‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/skill/database/redis/">Redisç¬”è®°</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/skill/database/elasticsearch/">Elasticsearch</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒElasticsearchã€" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav><button type="button" title="æ”¶èµ·ä¾§è¾¹æ " aria-label="æ”¶èµ·ä¾§è¾¹æ " class="button button--secondary button--outline collapseSidebarButton_FykI"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_DTRl"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">ğŸ </a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/æ•°æ®åº“"><span itemprop="name">æ•°æ®åº“</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Redis</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>Redisç¬”è®°</h1></header><p><a href="http://www.redis.cn/" target="_blank" rel="noopener noreferrer">redis ä¸­æ–‡å®˜æ–¹ç½‘ç«™</a></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="å®‰è£…">å®‰è£…<a class="hash-link" href="#å®‰è£…" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å®˜æ–¹æ¨èä½¿ç”¨ Linux å»å¼€å‘ä½¿ç”¨ï¼</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="window">window<a class="hash-link" href="#window" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/tporadowski/redis/releases" target="_blank" rel="noopener noreferrer">https://github.com/tporadowski/redis/releases</a></p><p>ä¸‹è½½ <strong>Redis-x64-xxx.zip</strong>å‹ç¼©åŒ… è§£å‹ä¸º redis</p><p>åœ¨ redis ç›®å½•ä¸‹ï¼Œæ‰“å¼€ CMD è¾“å…¥ æˆ–è€…åŒå‡»è¿è¡Œ redis-server.exe</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">redis-server.exe redis.windows.conf</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>åœ¨æ‰“å¼€ä¸€ä¸ªè¾“å…¥</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">redis-cli.exe -h </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1 -p </span><span class="token number" style="color:#36acaa">6379</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å³å¯è¿æ¥</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="linux">Linux<a class="hash-link" href="#linux" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="http://redis.io/download" target="_blank" rel="noopener noreferrer">redis ä¸‹è½½</a></p><p><code>redis-6.0.8.tar.gz</code></p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># wget http://download.redis.io/releases/redis-6.0.8.tar.gz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># tar xzf redis-6.0.8.tar.gz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># cd redis-6.0.8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># å®‰è£…gcc-c++ ç¼–è¯‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum instatll gcc-c++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># make</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‰§è¡Œå®Œ <strong>make</strong> å‘½ä»¤åï¼Œredis-6.0.8 çš„ <strong>src</strong> ç›®å½•ä¸‹ä¼šå‡ºç°ç¼–è¯‘åçš„ redis æœåŠ¡ç¨‹åº redis-serverï¼Œè¿˜æœ‰ç”¨äºæµ‹è¯•çš„å®¢æˆ·ç«¯ç¨‹åº redis-cli</p><p>ä¸‹é¢å¯åŠ¨ redis æœåŠ¡</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># cd src</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ./redis-server</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ³¨æ„è¿™ç§æ–¹å¼å¯åŠ¨ redis ä½¿ç”¨çš„æ˜¯é»˜è®¤é…ç½®ã€‚ä¹Ÿå¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°å‘Šè¯‰ redis ä½¿ç”¨æŒ‡å®šé…ç½®æ–‡ä»¶ä½¿ç”¨ä¸‹é¢å‘½ä»¤å¯åŠ¨ã€‚</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># cd src</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ./redis-server ../redis.conf</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>redis é»˜è®¤å®‰è£…è·¯å¾„ <code>/usr/local/bin</code></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="docker">Docker<a class="hash-link" href="#docker" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="æ‹‰å–é•œåƒ">æ‹‰å–é•œåƒ<a class="hash-link" href="#æ‹‰å–é•œåƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> pull redis</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="å¯åŠ¨-redis">å¯åŠ¨ Redis<a class="hash-link" href="#å¯åŠ¨-redis" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d  -v </span><span class="token environment constant" style="color:#36acaa">$PWD</span><span class="token plain">/data:/data --name redis -p </span><span class="token number" style="color:#36acaa">6379</span><span class="token plain">:6379 redis redis-server --requirepass </span><span class="token string" style="color:#e3116c">&quot;123456&quot;</span><span class="token plain"> --appendonly </span><span class="token function" style="color:#d73a49">yes</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¯åŠ¨å‘½ä»¤è¯´æ˜ï¼š</p><ul><li><code>$PWD/data:/data</code> : æ˜ å°„ redis çš„ data ç›®å½•åˆ°å½“å‰ç›®å½•ä¸‹çš„ data ç›®å½•</li><li><code>--requirepass</code> : æ˜¯è®¾ç½® redis çš„å¯†ç </li><li><code>--appendonly yes</code> : å¯ç”¨æŒä¹…åŒ–å­˜å‚¨</li></ul><p>ä¾‹å¦‚ï¼š</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d  -v /home/app/redis/data:/data --name redis -p </span><span class="token number" style="color:#36acaa">6379</span><span class="token plain">:6379 redis  redis-server --requirepass </span><span class="token string" style="color:#e3116c">&quot;123456&quot;</span><span class="token plain"> --appendonly </span><span class="token function" style="color:#d73a49">yes</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœéœ€è¦ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œåˆ™éœ€è¦åšä¸ªæ–‡ä»¶æ˜ å°„ï¼›æ³¨æ„æ‰€åœ¨ç›®å½•ä¸‹å¿…é¡»è¦æœ‰ redis.conf è¿™ä¸ªæ–‡ä»¶ï¼Œå¦åˆ™å°†å¯åŠ¨å¤±è´¥ã€‚</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d  -v /home/app/redis/data:/data  -v /home/app/redis/conf:/usr/local/etc/redis --name redis -p </span><span class="token number" style="color:#36acaa">6379</span><span class="token plain">:6379 redis redis-server /usr/local/etc/redis/redis.conf</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><blockquote><p>redis çš„è¿™ä¸ªé…ç½®æ–‡ä»¶å¯ä»¥åˆ°å®˜æ–¹çš„è¿™ä¸ªåœ°å€ä¸Šå»è·å– <a href="http://download.redis.io/redis-stable" target="_blank" rel="noopener noreferrer">http://download.redis.io/redis-stable</a></p></blockquote><p>æ›´å¤š: <a href="https://www.cnblogs.com/vchar/p/14347260.html" target="_blank" rel="noopener noreferrer">Docker ä¸Šå®‰è£… Redis</a></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="åŸºæœ¬å‘½ä»¤">åŸºæœ¬å‘½ä»¤<a class="hash-link" href="#åŸºæœ¬å‘½ä»¤" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="http://www.redis.cn/commands.html" target="_blank" rel="noopener noreferrer">Redis å‘½ä»¤ä¸­å¿ƒï¼ˆRedis commandsï¼‰</a></p><p>Redis ä¸åŒºåˆ†å¤§å°å†™ ä¸€èˆ¬æ¨èå¤§å†™(ä¸ Mysql ä¸€æ ·)</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">set</span><span class="token plain"> key value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keys * </span><span class="token comment" style="color:#999988;font-style:italic"># æŸ¥çœ‹æ‰€æœ‰key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXISTS key </span><span class="token comment" style="color:#999988;font-style:italic"># åˆ¤æ–­key æ˜¯å¦å­˜åœ¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">type</span><span class="token plain"> key </span><span class="token comment" style="color:#999988;font-style:italic"># æŸ¥çœ‹keyçš„valueç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPIRE key second </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®keyçš„è¿‡æœŸæ—¶é—´,å•ä½æ˜¯ç§’</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ttl key </span><span class="token comment" style="color:#999988;font-style:italic"># æŸ¥çœ‹å½“å‰key çš„å‰©ä½™æ—¶é—´</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="äº”å¤§æ•°æ®ç±»å‹">äº”å¤§æ•°æ®ç±»å‹<a class="hash-link" href="#äº”å¤§æ•°æ®ç±»å‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Redis æ”¯æŒäº”ç§æ•°æ®ç±»å‹ï¼šstringï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œhashï¼ˆå“ˆå¸Œï¼‰ï¼Œlistï¼ˆåˆ—è¡¨ï¼‰ï¼Œsetï¼ˆé›†åˆï¼‰åŠ zset(sorted setï¼šæœ‰åºé›†åˆ)ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="string">String<a class="hash-link" href="#string" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">APPEND key &#x27;123&#x27; # ç»™keyåé¢è¿½åŠ å­—ç¬¦ä¸²123 å¦‚æœkeyä¸å­˜åœ¨ åˆ™ä¸ºset è¿”å›å­—ç¬¦ä¸²é•¿åº¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">STRLEN key # è·å–å­—ç¬¦ä¸²é•¿åº¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">incr key # è‡ªå¢1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">decr key # è‡ªå‡1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INCRBY key 10 # é€’å¢10 æŒ‡å®šå¢é‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DECRBY key 10 # é€’å‡10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GETRANGE key 0 3 # æˆªå–å­—ç¬¦ä¸² 0-3 åŒ…æ‹¬3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GETRANGE key 0 -1 # æˆªå–æ‰€æœ‰å­—ç¬¦ä¸²</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SETRANGE key 1 xxx # æ›¿æ¢æŒ‡å®šä½ç½®çš„å­—ç¬¦ä¸²</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">###########################################################################</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setex (set with expire) # è®¾ç½®è¿‡æœŸæ—¶é—´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setnx (set if not exist) # ä¸å­˜åœ¨åœ¨è®¾ç½® (åˆ†å¸ƒå¼é”ä¸­ä¼šå¸¸å¸¸ä½¿ç”¨)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setex key3 30 &#x27;hello&#x27; # è®¾ç½®key3çš„ä¸ºhello,30ç§’åè¿‡æœŸ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">###########################################################################</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mset mget msetex # æ‰¹é‡è®¾ç½®ä¸æ‰¹é‡è·å–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mset k1 v1 k2 v2 k3 v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">msetex k1 v1 k4 v4 # åŸå­æ€§çš„æ“ä½œ è¦ä¹ˆä¸€èµ·æˆåŠŸ è¦ä¹ˆä¸€èµ·å¤±è´¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">getset key value # å…ˆå–åè®¾ç½® ä¸å­˜åœ¨åˆ™è¿”å›nil å¦‚æœå­˜åœ¨,åˆ™è·å–,å¹¶èµ‹ä¸ºæ–°å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">############################################################################</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set user:1 {name:kuizuo,age:20} # è®¾ç½®userä¸ºä¸€ä¸ªå¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set user:1:name kuizuo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># user:{id}:{filed} value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get user:1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get user:1:name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>String ç±»ä¼¼çš„ä½¿ç”¨åœºæ™¯: value é™¤äº†æ˜¯å­—ç¬¦ä¸²è¿˜å¯ä»¥æ˜¯æ•°å­— æˆ–è€…å¯¹è±¡</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="list">List<a class="hash-link" href="#list" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>redis é‡Œ List å¯ä»¥å……å½“æ ˆ,é˜Ÿåˆ—,é˜»å¡é˜Ÿåˆ—</p><p><strong>æ‰€æœ‰ list å‘½ä»¤ç”¨ l å¼€å¤´</strong></p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">LPUSH list value </span><span class="token comment" style="color:#999988;font-style:italic"># å°†value å°†ä¸€ä¸ªå€¼æˆ–å¤šä¸ªå€¼æ’å…¥åˆ—è¡¨å¤´éƒ¨(å·¦)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RPUSH list value </span><span class="token comment" style="color:#999988;font-style:italic"># å°†value å°†ä¸€ä¸ªå€¼æˆ–å¤šä¸ªå€¼æ’å…¥åˆ—è¡¨åº•éƒ¨(å³)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LRANGE list </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> -1 </span><span class="token comment" style="color:#999988;font-style:italic"># è·å–æ‰€æœ‰listå…ƒç´ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LPOP list </span><span class="token comment" style="color:#999988;font-style:italic"># ç§»é™¤listçš„ç¬¬ä¸€ä¸ªå…ƒç´ (å·¦)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RPOP list </span><span class="token comment" style="color:#999988;font-style:italic"># ç§»é™¤listçš„æœ€åä¸€ä¸ªå…ƒç´ (å³)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Lindex list </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># é€šè¿‡ä¸‹æ ‡è·å–listä¸­çš„æŸä¸€ä¸ªå€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Lset list </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> item </span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœä¸å­˜åœ¨åˆ—è¡¨ å»æ›´æ–°å°±ä¼šæŠ¥é”™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Llen list </span><span class="token comment" style="color:#999988;font-style:italic"># å–åˆ—è¡¨çš„é•¿åº¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Lrem list </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> one </span><span class="token comment" style="color:#999988;font-style:italic"># ç§»é™¤æŒ‡å®šçš„å€¼ ä¾‹:ç§»é™¤ä¸€ä¸ªä¸ºoneçš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ltrim list </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># æˆªå–1-2 åŒ…æ‹¬2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Linsert list before </span><span class="token string" style="color:#e3116c">&quot;world&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;new&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># åœ¨world å‰é¢æ’å…¥new åé¢åˆ™ç”¨after</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rpoplpush list1 list2 </span><span class="token comment" style="color:#999988;font-style:italic"># ç§»é™¤åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ ,å°†ä»–ç§»åŠ¨åˆ°æ–°çš„åˆ—è¡¨</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>åˆ—è¡¨å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªé“¾è¡¨</p><p>å¯ä»¥å®ç°æ¶ˆæ¯é˜Ÿåˆ— (Lpush Rpop),æ ˆ(Lpush Lpop)</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="set">Set<a class="hash-link" href="#set" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>set ä¸­çš„å€¼æ˜¯æ— æ³•é‡å¤çš„ï¼Œæ— åºä¸é‡å¤é›†åˆ</p><p><strong>set å‘½ä»¤ç”¨ s å¼€å¤´</strong></p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sadd myset </span><span class="token string" style="color:#e3116c">&quot;hello&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># seté›†åˆä¸­æ·»åŠ å…ƒç´ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scard myset </span><span class="token comment" style="color:#999988;font-style:italic"># è·å–seté›†åˆä¸­çš„å†…å®¹å…ƒç´ ä¸ªæ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">smembers myset </span><span class="token comment" style="color:#999988;font-style:italic"># æŸ¥çœ‹æŒ‡å®šsetçš„æ‰€æœ‰å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sismember myset hello </span><span class="token comment" style="color:#999988;font-style:italic"># åˆ¤æ–­æŸä¸€ä¸ªå€¼æ˜¯ä¸æ˜¯åœ¨seté›†åˆä¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SRANDMEMBER myset </span><span class="token comment" style="color:#999988;font-style:italic"># éšæœºæŠ½é€‰å‡ºä¸€ä¸ªå…ƒç´ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SRANDMEMBER myset </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># éšæœºæŠ½é€‰å‡ºæŒ‡å®šä¸ªæ•°å…ƒç´ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#####################################################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># è·å–setä¸­çš„å·®é›†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SDIFF set1 set2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># è·å–setä¸­çš„äº¤é›†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SINTER set1 set2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># è·å–setä¸­çš„å¹¶é›†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SUNION set1 set2</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ä¾‹å¦‚ï¼šå…±åŒå¥½å‹å°±å¯ä»¥ä½¿ç”¨ set äº¤é›†æ¥å®ç°</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="hash">Hash<a class="hash-link" href="#hash" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Map é›†åˆï¼Œkey-map(key-value)</p><p><strong>set å‘½ä»¤ç”¨ h å¼€å¤´</strong></p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">hset myhash field1 kuizuo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hget myhash field1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hgetall myhash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hdel myhash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hlen myhash </span><span class="token comment" style="color:#999988;font-style:italic"># è·å–hashè¡¨çš„å­—æ®µæ•°é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HEXISTS myhash field1 </span><span class="token comment" style="color:#999988;font-style:italic"># åˆ¤æ–­hashä¸­ æŒ‡å®šå­—æ®µæ˜¯å¦å­˜åœ¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hkeys myhash </span><span class="token comment" style="color:#999988;font-style:italic"># åªè·å¾—æ‰€æœ‰field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hvals myhash </span><span class="token comment" style="color:#999988;font-style:italic"># åªè·å¾—æ‰€æœ‰value</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>hash å¯å˜æ›´æ•°æ® æ¯”å¦‚ user ä¿¡æ¯,æ›´é€‚åˆå¯¹è±¡çš„å­˜å‚¨</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="zset">Zset<a class="hash-link" href="#zset" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æœ‰åºé›†åˆï¼Œåœ¨ set çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªå€¼ score</p><p><strong>zset å‘½ä»¤ç”¨ z å¼€å¤´</strong></p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zadd myset </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> one</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zadd myset </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> two </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> three</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ZRANGEBYSCORE key min max ä¸€å®šè¦ä»å°åˆ°å¤§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ZRANGEBYSCORE myset -inf +inf </span><span class="token comment" style="color:#999988;font-style:italic"># æ ¹æ®scoreæ’åº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ZREVERANGE myset </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> -1 </span><span class="token comment" style="color:#999988;font-style:italic"># ä»å¤§åˆ°å°è¿›è¡Œæ’åº!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Zrem myset item </span><span class="token comment" style="color:#999988;font-style:italic"># ç§»é™¤æœ‰åºé›†åˆä¸­çš„æŒ‡å®šå…ƒç´ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Zcard myset </span><span class="token comment" style="color:#999988;font-style:italic"># è·å–æœ‰åºé›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ¡ˆä¾‹:set æ’åº ç­çº§æˆç»©è¡¨ï¼Œå·¥èµ„è¡¨æ’åº</p><p>æ™®é€šæ¶ˆæ¯ 1 é‡è¦æ¶ˆæ¯ 2 å¸¦æƒé‡è¿›è¡Œåˆ¤æ–­</p><p>æ’è¡Œæ¦œåº”ç”¨å®ç°ï¼Œå– TOP N</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹">ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹<a class="hash-link" href="#ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="geospatial">geospatial<a class="hash-link" href="#geospatial" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ°å€ä½ç½®ï¼Œ<strong>geospatial å‘½ä»¤ç”¨ geo å¼€å¤´</strong></p><p><strong>GEO åº•å±‚çš„å®ç°åŸç†å°±æ˜¯ Zset,æ‰€ä»¥å¯ä»¥ä½¿ç”¨ Zset å‘½ä»¤æ¥æ“ä½œ Geo!</strong></p><p>åº”ç”¨: æ¨ç®—åœ°ç†ä½ç½®çš„ä¿¡æ¯ï¼Œä¸¤åœ°ä¹‹é—´çš„è·ç¦»ï¼Œæ–¹åœ†å‡ é‡Œçš„äºº</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># è§„åˆ™: ä¸¤ææ— æ³•ç›´æ¥æ·»åŠ ,ä¸€èˆ¬éƒ½æ˜¯ç›´æ¥ä¸‹è½½åŸå¸‚æ•°æ®,ç›´æ¥é€šè¿‡ç¨‹åºä¸€æ¬¡æ€§è¯»å…¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># å‚æ•°: key (ç»åº¦ï¼Œçº¬åº¦ã€åç§°) åˆ‡è®°ä¸å¯åï¼ ç»çº¬åº¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æœ‰æ•ˆç»åº¦-180åº¦åˆ°180åº¦ æœ‰æ•ˆçº¬åº¦-85.05112878åˆ°85.05112878</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GEOADD china:city </span><span class="token number" style="color:#36acaa">116.40</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">39.90</span><span class="token plain"> beijin </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®åŒ—äº¬çš„ç»çº¬åº¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GEOPOS china:city beijing </span><span class="token comment" style="color:#999988;font-style:italic"># è·å–åŒ—äº¬çš„ç»çº¬åº¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GEODIST china:city beijing shanghai unit </span><span class="token comment" style="color:#999988;font-style:italic"># è·å–ä¸¤åœ°ä¹‹é—´çš„è·ç¦» é»˜è®¤å•ä½m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GEORADIS china:city </span><span class="token number" style="color:#36acaa">110</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"> km </span><span class="token comment" style="color:#999988;font-style:italic"># ä»¥110,30 è¿™ä¸ªç‚¹èŒƒå›´1000kmçš„ åœ°ç†ä½ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GEORADIS china:city </span><span class="token number" style="color:#36acaa">110</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token plain"> km withdist withcoord count </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># ä»¥110,30 è¿™ä¸ªç‚¹èŒƒå›´500kmçš„ è·å–10ä¸ª å¸¦ç›´çº¿è·ç¦»å’Œç»çº¬åº¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GEORADIUSBYMEMBER chaina:city beijing 1000m </span><span class="token comment" style="color:#999988;font-style:italic"># ä»¥åŒ—äº¬å‘¨å›´1000kmçš„ åœ°ç†ä½ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GEOHASH china:city beijing </span><span class="token comment" style="color:#999988;font-style:italic"># å°†äºŒç»´çš„åœ°å€ä½ç½®è½¬ä¸ºä¸€ä½11ä½å­—ç¬¦ä¸²,å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²è¶Šæ¥è¿‘,åˆ™è·ç¦»è¶Šè¿‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ZRANGE chaina:city </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> -1 </span><span class="token comment" style="color:#999988;font-style:italic"># æŸ¥çœ‹åœ°å›¾ä¸­å…¨éƒ¨å…ƒç´ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ZREM chaina:city beijing </span><span class="token comment" style="color:#999988;font-style:italic"># ç§»é™¤æŒ‡å®šå…ƒç´ </span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="hyperloglog">Hyperloglog<a class="hash-link" href="#hyperloglog" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Redis Hyperloglog åŸºæ•°ç»Ÿè®¡çš„ç®—æ³•</p><p>åŸºæ•°(ä¸é‡å¤çš„å…ƒç´ )ï¼Œä¼šæœ‰è¯¯å·®ï¼0.81 çš„é”™è¯¯ç‡ï¼Œä½†ä½¿ç”¨åœºæ™¯æ˜¯å¯ä»¥æ¥å—çš„</p><p>ç»Ÿè®¡ç½‘é¡µçš„ UV ï¼ˆä¸€ä¸ªäººè®¿é—®ä¸€ä¸ªç½‘ç«™å¤šæ¬¡ï¼Œä½†æ˜¯è¿˜æ˜¯ç®—ä½œä¸€ä¸ªäººï¼‰ï¼Œä¼ ç»Ÿçš„æ–¹å¼ï¼Œç”¨ set ä¿å­˜ç”¨æˆ·çš„ idï¼Œç„¶åç»Ÿè®¡ set ä¸­çš„å…ƒç´ æ•°é‡æ¥ä½œä¸ºæ ‡å‡†åˆ¤æ–­ã€‚</p><p><strong>Hyperloglog å‘½ä»¤ ä½¿ç”¨ PF å¼€å¤´</strong></p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">PFadd mykey1 a b c d e f g h i j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PFadd mykey2 i j k l m n o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PFMERGE mykey3 mykey1 mykey2 </span><span class="token comment" style="color:#999988;font-style:italic"># è·å–å¹¶é›† å¹¶ç”Ÿæˆæ–°çš„ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PFCOUNT mykey </span><span class="token comment" style="color:#999988;font-style:italic"># è·å–å…ƒç´ çš„æ•°é‡</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å…è®¸å®¹é”™,ä¸€å®šå¯ä»¥ä½¿ç”¨ Hyperloglog</p><p>ä¸å…è®¸å®¹é”™,å°±ä½¿ç”¨ set ä¸è‡ªå·±çš„æ•°æ®ç±»å‹å³å¯</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="bitmaps">Bitmaps<a class="hash-link" href="#bitmaps" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä½å­˜å‚¨</p><p>ç»Ÿè®¡ç”¨æˆ·ä¿¡æ¯ï¼Œæ´»è·ƒï¼Œä¸æ´»è·ƒï¼›ç™»å½•ï¼Œä¸ç™»å½•ï¼Œæ‰“å¡ï¼›ä¸¤ä¸ªçŠ¶æ€çš„éƒ½å¯ä»¥ä½¿ç”¨ Bitmaps</p><p>Bitmaps ä½å›¾,æ•°æ®ç»“æ„ï¼Œéƒ½æ˜¯æ“ä½œäºŒè¿›åˆ¶ä¸ºæ¥è¿›è¡Œè®°å½•ï¼Œå°±åªæœ‰ 0 å’Œ 1 ä¸¤ä¸ªçŠ¶æ€ï¼</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain"># è®°å½•å‘¨ä¸€åˆ°å‘¨æ—¥çš„æ‰“å¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setbit sign 0 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setbit sign 1 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setbit sign 2 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setbit sign 3 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setbit sign 4 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setbit sign 5 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setbit sign 6 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æŸ¥çœ‹æŸä¸€å¤©æ˜¯å¦æœ‰æ‰“å¼€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">getbit sign 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç»Ÿè®¡æ‰“å¡çš„å¤©æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bitcount sign</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="äº‹åŠ¡">äº‹åŠ¡<a class="hash-link" href="#äº‹åŠ¡" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Redis å•æ¡å‘½ä»¤å¼ä¿å­˜åŸå­æ€§çš„ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§!</p><p>Redis äº‹åŠ¡æœ¬è´¨ï¼š ä¸€ç»„å‘½ä»¤çš„é›†åˆï¼ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«åºåˆ—åŒ–ï¼Œä¼šå®‰å“é¡ºåºæ‰§è¡Œ</p><p>ä¸€æ¬¡æ€§ã€é¡ºåºæ€§ã€æ’ä»–æ€§ï¼æ‰§è¡Œä¸€äº›åˆ—çš„å‘½ä»¤ï¼</p><p>Redis äº‹åŠ¡æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µï¼</p><p>æ‰€æœ‰å‘½ä»¤åœ¨äº‹åŠ¡ä¸­å¹¶æ²¡æœ‰ç›´æ¥å‘—æ‰§è¡Œï¼è€Œåªæœ‰å‘èµ·æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œï¼Exec</p><ul><li>å¼€å§‹äº‹åŠ¡ï¼ˆmultiï¼‰</li><li>å‘½ä»¤å…¥é˜Ÿï¼ˆ...ï¼‰</li><li>æ‰§è¡Œäº‹åŠ¡ï¼ˆexecï¼‰</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">multi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set k1 v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set k2 v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get k1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exec  # æ‰§è¡Œäº‹åŠ¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DISCARD # å–æ¶ˆäº‹åŠ¡ äº‹åŠ¡é˜Ÿåˆ—ä¸­çš„å‘½ä»¤éƒ½ä¸ä¼šè¢«æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ä»£ç æœ‰é—®é¢˜ï¼Œå‘½ä»¤æœ‰é”™ï¼Œäº‹åŠ¡ä¸­æ‰€æœ‰å‘½ä»¤éƒ½ä¸ä¼šè¢«æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è¿è¡Œä¸­å¼‚å¸¸ï¼Œæ‰§è¡Œå…¶ä»–å‘½ä»¤æ­£å¸¸ï¼Œé”™è¯¯å‘½ä»¤æŠ›å‡ºå¼‚å¸¸</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="ç›‘æ§-watch">ç›‘æ§ Watch<a class="hash-link" href="#ç›‘æ§-watch" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ‚²è§‚é”ï¼šå¾ˆæ‚²è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¼šå‡ºé—®é¢˜ï¼Œæ— è®ºåšä»€ä¹ˆéƒ½ä¼šåŠ é”</p><p>ä¹è§‚é”ï¼šå¾ˆä¹è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¸ä¼šå‡ºé—®é¢˜ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼æ›´æ–°æ•°æ®çš„æ—¶å€™åˆ¤æ–­ä¸€ä¸‹ï¼Œåœ¨æ­¤æœŸé—´æ˜¯å¦æœ‰äººä¿®æ”¹è¿‡è¯¥æ•°æ®</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">set money 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set out 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">watch money</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">multi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DECRBY money 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">InCRBY money 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å¦‚æœè¿™æ—¶ç”¨æˆ·å……é’±äº† é‚£ä¹ˆexecå°±æ— æ³•æ‰§è¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># è§£é™¤ç›‘æ§ï¼Œå¹¶é‡æ–°ç›‘æ§æœ€æ–°çš„å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unwatch money</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">watch money</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="redisconf">Redis.conf<a class="hash-link" href="#redisconf" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é…ç½®æ–‡ä»¶ unit å•ä½å¯¹å¤§å°å†™ä¸æ•æ„Ÿ</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="ç½‘ç»œ">ç½‘ç»œ<a class="hash-link" href="#ç½‘ç»œ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">bind 127.0.0.1 # ç»‘å®šçš„IP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protected-mode yes # ä¿æŠ¤æ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">port 6379 # ç«¯å£è®¾ç½®</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="general-é€šç”¨">GENERAL é€šç”¨<a class="hash-link" href="#general-é€šç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">daemonize yes # ä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼çš„è¿è¡Œ,é»˜è®¤æ˜¯no,éœ€è‡ªå·±å¼€å¯yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pidfile /var/run/redis_6379.pid # ä»¥åå°æ–¹å¼è¿è¡Œ,å°±éœ€è¦æŒ‡å®šä¸€ä¸ªpidæ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Specify the server verbosity level.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This can be one of:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># debug (a lot of information, useful for development/testing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># verbose (many rarely useful info, but not a mess like the debug level)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># notice (moderately verbose, what you want in production probably)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># warning (only very important / critical messages are logged)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loglevel notice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logfile # æ—¥å¿—æ–‡ä»¶ä½ç½®å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">database 16 # æ•°æ®åº“æ•°é‡ é»˜è®¤16ä¸ª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alaways-show-logo yes # æ˜¯å¦æ€»æ˜¯æ˜¾ç¤ºLOGO</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="å¿«ç…§">å¿«ç…§<a class="hash-link" href="#å¿«ç…§" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>æŒä¹…åŒ–,åœ¨è§„å®šçš„æ—¶é—´å†…,æ‰§è¡Œäº†å¤šå°‘æ¬¡æ“ä½œ,åˆ™ä¼šæŒä¹…åŒ–åˆ°æ–‡ä»¶ .rdb .aof</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">stop-writes-on-bgsave-error yessave 900 1 # åœ¨900så†…,å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªkeyä¿®æ”¹ åˆ™æŒä¹…åŒ–æ“ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">save 300 10 # åœ¨300så†…,å¦‚æœè‡³å°‘æœ‰10ä¸ªkeyè¿›è¡Œä¿®æ”¹ åˆ™æŒä¹…åŒ–æ“ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">save 60 10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stop-writes-on-bgsave-error yes # æŒä¹…åŒ–å¦‚æœå‡ºé”™ æ˜¯å¦ç»§ç»­å·¥ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rdbcompression yes # æ˜¯å¦å‹ç¼©rdbæ–‡ä»¶,ä¼šæ¶ˆè€—ä¸€äº›cpuèµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rdbchecksum yes # ä¿å­˜rdbæ–‡ä»¶çš„æ—¶å€™,æ˜¯å¦æ•ˆéªŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dir ./ # rdbä¿å­˜çš„ç›®å½•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dbfilename dump.rdb # ä¿å­˜çš„æ–‡ä»¶å</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="replication-ä¸»ä»å¤åˆ¶">REPLICATION ä¸»ä»å¤åˆ¶<a class="hash-link" href="#replication-ä¸»ä»å¤åˆ¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">slaveof &lt;masterip&gt; &lt;masterport&gt; # è®¾ç½®ä¸»æœºçš„ç«¯å£å’Œip</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="security-å¯†ç ">SECURITY å¯†ç <a class="hash-link" href="#security-å¯†ç " title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>requirepass å¯†ç </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">config get requirepass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config set requirepass &quot;123456&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth 123456</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="clients-å®¢æˆ·ç«¯">CLIENTS å®¢æˆ·ç«¯<a class="hash-link" href="#clients-å®¢æˆ·ç«¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">maxclients 10000  # é»˜è®¤å®¢æˆ·ç«¯è¿æ¥æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maxmemory &lt;bytes&gt; # redis é…ç½®æœ€å¤§çš„å†…å­˜å®¹é‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maxmemory-policy noeviction # å†…å­˜è¾¾åˆ°ä¸Šé™åçš„å¤„ç†ç­–ç•¥ # ç§»é™¤ä¸€äº›è¿‡æœŸçš„key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">noeviction: ä¸åˆ é™¤ç­–ç•¥, è¾¾åˆ°æœ€å¤§å†…å­˜é™åˆ¶æ—¶, å¦‚æœéœ€è¦æ›´å¤šå†…å­˜, ç›´æ¥è¿”å›é”™è¯¯ä¿¡æ¯ã€‚ï¼ˆé»˜è®¤å€¼ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allkeys-lru: æ‰€æœ‰keyé€šç”¨; ä¼˜å…ˆåˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨(less recently used ,LRU) çš„ keyã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">volatile-lru: åªé™äºè®¾ç½®äº† expire çš„éƒ¨åˆ†; ä¼˜å…ˆåˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨(less recently used ,LRU) çš„ keyã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allkeys-random: æ‰€æœ‰keyé€šç”¨; éšæœºåˆ é™¤ä¸€éƒ¨åˆ† keyã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">volatile-random: åªé™äºè®¾ç½®äº† expire çš„éƒ¨åˆ†; éšæœºåˆ é™¤ä¸€éƒ¨åˆ† keyã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">volatile-ttl: åªé™äºè®¾ç½®äº† expire çš„éƒ¨åˆ†; ä¼˜å…ˆåˆ é™¤å‰©ä½™æ—¶é—´(time to live,TTL) çŸ­çš„keyã€‚</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="append-only-mode-aof-é…ç½®">APPEND ONLY MODE aof é…ç½®<a class="hash-link" href="#append-only-mode-aof-é…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">appendonly no # é»˜è®¤ä¸å¼€å¯aofæ¨¡å¼,é»˜è®¤ä½¿ç”¨rdbæ–¹å¼æŒä¹…åŒ–,åœ¨å¤§éƒ¨åˆ†æƒ…å†µ,rdbå¤Ÿç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">appendfilename &quot;appendonly.aof&quot;  # æŒä¹…åŒ–æ–‡ä»¶å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># appendfsync always  # æ¯æ¬¡ä¿®æ”¹éƒ½ä¼š sync æ¶ˆè€—æ€§èƒ½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">appendfsync everysec   # ç¾å¦™æ‰§è¡Œä¸€æ¬¡ sync,å¯èƒ½ä¼šä¸¢å¤±è¿™1sçš„æ•°æ®!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># appendfsync no # ä¸æ‰§è¡Œsync,è¿™ä¸ªæ—¶å€™æ“ä½œç³»ç»Ÿè‡ªå·±åŒæ­¥æ•°æ®,é€Ÿåº¦æœ€å¿«</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="redis-æŒä¹…åŒ–">Redis æŒä¹…åŒ–<a class="hash-link" href="#redis-æŒä¹…åŒ–" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>redis æ˜¯å†…å­˜æ•°æ®åº“,å•å¦‚æœä¸å°†å†…å­˜ä¸­çš„æ•°æ®åº“çŠ¶æ€ä¿å­˜çš„ç£ç›˜,ä¸€æ—¦æœåŠ¡å™¨è¿›ç¨‹é€€å‡º,æœåŠ¡å™¨ä¸­çš„æ•°æ®åº“çŠ¶æ€ä¹Ÿä¼šä¸¢å¤±,æ‰€ä»¥ redis æä¾›äº†æŒä¹…åŒ–çš„åŠŸèƒ½</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="rdbredis-database">RDB(Redis Database)<a class="hash-link" href="#rdbredis-database" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜,ä¹Ÿå°±æ˜¯ Snapshot å¿«ç…§,æ¢å¤æ—¶ç›´æ¥å°†å¿«ç…§æ–‡ä»¶è¯»åˆ°å†…å­˜</p><p>Redis ä¼šå•ç‹¬åˆ›å»º ( fork )ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¼šå…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¾…æŒä¹…åŒ–è¿‡ç¨‹éƒ½ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹æ˜¯ä¸è¿›è¡Œä»»ä½• IO æ“ä½œçš„ã€‚è¿™å°±ç¡®ä¿äº†æé«˜çš„æ€§èƒ½ã€‚å¦‚æœéœ€è¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®çš„æ¢å¤ï¼Œä¸”å¯¹äºæ•°æ®æ¢å¤çš„å®Œæ•´æ€§ä¸æ˜¯éå¸¸æ•æ„Ÿï¼Œé‚£ RDB æ–¹å¼è¦æ¯” AOF æ–¹å¼æ›´åŠ çš„é«˜æ•ˆã€‚RDB çš„ç¼ºç‚¹æ˜¯æœ€åä¸€æ¬¡æŒä¹…åŒ–åçš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€‚æˆ‘ä»¬é»˜è®¤çš„å°±æ˜¯ RDBï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦ä¿®æ”¹è¿™ä¸ªé…ç½®!</p><p><strong>rdb ä¿å­˜çš„æ–‡ä»¶æ˜¯ dump.rdb</strong></p><p>dbfilename dump.rdb</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="è§¦å‘æœºåˆ¶">è§¦å‘æœºåˆ¶<a class="hash-link" href="#è§¦å‘æœºåˆ¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>1ã€save çš„è§„åˆ™æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨è§¦å‘ rdb è§„åˆ™</p><p>2ã€æ‰§è¡Œ flushall å‘½ä»¤ï¼Œä¹Ÿä¼šè§¦å‘æˆ‘ä»¬çš„ rdb è§„åˆ™!</p><p>3ã€é€€å‡º redisï¼Œä¹Ÿä¼šäº§ç”Ÿ rdb æ–‡ä»¶!</p><p>å°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª dump.rdbï¼Œæœ‰æ—¶å€™è¿˜æœ‰å¤‡ä»½ä¸€ä»½</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="æ¢å¤-rdb-æ–‡ä»¶">æ¢å¤ rdb æ–‡ä»¶<a class="hash-link" href="#æ¢å¤-rdb-æ–‡ä»¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>åªéœ€è¦å°† rdb æ–‡ä»¶æ”¾åœ¨ redis å¯åŠ¨ç›®å½•ä¸‹å°±å¯ä»¥äº†,redis å¯åŠ¨çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨æ£€æŸ¥ dump.rdb æ–‡ä»¶</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">config get dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;dir&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;/usr/local/bin&quot; # å¦‚æœåœ¨è¿™ä¸ªç›®å½•ä¸‹å­˜åœ¨dump.rdb å¯åŠ¨å°±ä¼šè‡ªåŠ¨æ¢å¤å…¶ä¸­çš„æ•°æ®</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ä¼˜ç‚¹:</p><p>1ã€é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤</p><p>2ã€å¯¹æ•°æ®çš„å®Œæ•´æ€§è¦æ±‚ä¸é«˜</p><p>ç¼ºç‚¹ï¼š</p><p>1ã€éœ€è¦ä¸€å®šçš„æ—¶é—´é—´éš”è¿›ç¨‹æ“ä½œï¼Œå¦‚æœ redis æ„å¤–å®•æœºäº†ï¼Œè¿™ä¸ªæœ€åä¸€æ¬¡ä¿®æ”¹æ•°æ®å°±æ²¡æœ‰äº†</p><p>2ã€fork è¿›ç¨‹çš„æ—¶å€™ï¼Œä¼šå ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="aofappend-only-file">AOFï¼ˆAppend Only Fileï¼‰<a class="hash-link" href="#aofappend-only-file" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å°†æˆ‘ä»¬çš„æ‰€æœ‰å‘½ä»¤éƒ½è®°å½•ä¸‹æ¥ï¼Œhistoryï¼Œæ¢å¤çš„æ—¶å€™å°±æŠŠè¿™ä¸ªæ–‡ä»¶å†…çš„å‘½ä»¤å…¨éƒ¨åœ¨æ‰§è¡Œä¸€é</p><p>é»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è¿›è¡Œé…ç½®!æˆ‘ä»¬åªéœ€è¦å°† appendonly æ”¹ä¸º yes å°±å¼€å¯äº† aof !é‡å¯</p><p>redis å°±å¯ä»¥ç”Ÿæ•ˆäº†</p><p>å¦‚æœè¿™ä¸ª aof æ–‡ä»¶æœ‰é”™è¯¯ï¼Œè¿™æ—¶å€™ redis æ˜¯å¯åŠ¨ä¸èµ·æ¥çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¿®å¤è¿™ä¸ª aof æ–‡ä»¶ï¼Œredis ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå·¥å…· redis-check-aof --fix</p><p>ä¼˜ç‚¹</p><p>å¯æŒ‡å®šä¿®æ”¹éƒ½åŒæ­¥è¿˜æ˜¯æ¯ç§’éƒ½åŒæ­¥ï¼Œæ–‡ä»¶å®Œæ•´æ€§ä¼šæ›´å¥½</p><p>ç¼ºç‚¹:</p><p>ç›¸å¯¹äºæ•°æ®æ–‡ä»¶ï¼Œaof è¿œè¿œå¤§äº rdbï¼Œä¿®å¤çš„é€Ÿåº¦ä¹Ÿä¸å¦‚ rdb</p><p>Aof çš„è¿è¡Œæ•ˆç‡ä¹Ÿè¦æ¯” rdb æ…¢ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="å°ç»“">å°ç»“<a class="hash-link" href="#å°ç»“" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åªåšç¼“å­˜ï¼Œå¦‚æœä½ åªå¸Œæœ›ä½ çš„æ•°æ®åœ¨æœåŠ¡å™¨è¿è¡Œçš„æ—¶å€™å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ä»»ä½•æŒä¹…åŒ–</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="redis-å‘å¸ƒè®¢é˜…">Redis å‘å¸ƒè®¢é˜…<a class="hash-link" href="#redis-å‘å¸ƒè®¢é˜…" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Redis å‘å¸ƒè®¢é˜…(publsub)æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼ âˆ¶ å‘é€è€…(pub)å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€…(sub)æ¥æ”¶æ¶ˆæ¯ã€‚Redis å®¢æˆ·ç«¯å¯ä»¥è®¢é˜…ä»»æ„æ•°é‡çš„é¢‘é“ã€‚
è®¢é˜…/å‘å¸ƒæ¶ˆæ¯å›¾ï¸°</p><p>ç¬¬ä¸€ä¸ªï¼šæ¶ˆæ¯å‘å¸ƒè€…ï¼Œç¬¬äºŒä¸ªé¢‘é“ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œç¬¬ä¸‰ä¸ªï¼šæ¶ˆæ¯è®¢é˜…è€…</p><p><img loading="lazy" src="http://cdn.kuizuo.cn/blogR50ea35ec36a3e4ea16cb132637477df0" alt="æŸ¥çœ‹æºå›¾åƒ" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="æµ‹è¯•">æµ‹è¯•<a class="hash-link" href="#æµ‹è¯•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è®¢é˜…ç«¯</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">SUBSCRIBE kuizuo # åˆ›å»ºé¢‘é“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å‘é€ç«¯</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">PUBLISH kuizuo â€˜helloâ€˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="åŸç†">åŸç†<a class="hash-link" href="#åŸç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Redis æ˜¯ä½¿ç”¨ C å®ç°çš„ï¼Œé€šè¿‡åˆ†æ Redis æºç é‡Œçš„ pubsub.c æ–‡ä»¶ï¼Œäº†è§£å‘å¸ƒå’Œè®¢é˜…æœºåˆ¶çš„åº•å±‚å®ç°ï¼Œ
ç±æ­¤åŠ æ·±å¯¹ Redis çš„ç†è§£ã€‚
Redis é€šè¿‡ PUBLISHã€SUBSCRIBE å’Œ PSUBSCRIBE ç­‰å‘½ä»¤å®ç°å‘å¸ƒå’Œè®¢é˜…åŠŸèƒ½ã€‚
å¾®ä¿¡ âˆ¶
é€šè¿‡ SUBSCRIBE å‘½ä»¤è®¢é˜…æŸé¢‘é“åï¼Œredis-server é‡Œç»´æŠ¤äº†ä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸çš„é”®å°±æ˜¯ä¸€ä¸ªä¸ªé¢‘é“!
ï¼Œè€Œå­—å…¸çš„å€¼åˆ™æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œ
é“¾è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰è®¢é˜…è¿™ä¸ª channel çš„å®¢æˆ·ç«¯ã€‚SUBSCRIBE å‘½ä»¤çš„å…³é”®ï¼Œå°±æ˜¯å°†å®¢æˆ·ç«¯æ·»åŠ åˆ°ç»™å®š
channel çš„è®¢é˜…é“¾è¡¨ä¸­ã€‚
é€šè¿‡ PUBLSH å‘½ä»¤å‘è®¢é˜…è€…å‘é€æ¶ˆæ¯ï¼Œredis-server ä¼šä½¿ç”¨ç»™å®šçš„é¢‘é“ä½œä¸ºé”®ï¼Œåœ¨å®ƒæ‰€ç»´æŠ¤çš„ channel å­—å…¸ä¸­æŸ¥æ‰¾è®°å½•äº†è®¢é˜…è¿™ä¸ªé¢‘é“çš„æ‰€æœ‰å®¢æˆ·ç«¯çš„é“¾è¡¨ï¼Œéå†è¿™ä¸ªé“¾è¡¨ï¼Œå°†æ¶ˆæ¯å‘å¸ƒç»™æ‰€æœ‰è®¢é˜…è€…ã€‚
Pub/Sub ä»å­—é¢ä¸Šç†è§£å°±æ˜¯å‘å¸ƒ( Publish)ä¸è®¢é˜…( Subscribe )ï¼Œåœ¨ Redis ä¸­ï¼Œä½ å¯ä»¥è®¾å®šå¯¹æŸä¸€ä¸ª key å€¼è¿›è¡Œæ¶ˆæ¯å‘å¸ƒåŠæ¶ˆæ¯è®¢é˜…ï¼Œå½“ä¸€ä¸ª key å€¼ä¸Šè¿›è¡Œäº†æ¶ˆæ¯å‘å¸ƒåï¼Œæ‰€æœ‰è®¢é˜…å®ƒçš„å®¢æˆ·ç«¯éƒ½ä¼šæ”¶åˆ°ç›¸åº”çš„æ¶ˆæ¯ã€‚è¿™ä¸€åŠŸèƒ½æœ€æ˜æ˜¾çš„ç”¨æ³•å°±æ˜¯ç”¨ä½œå®æ—¶æ¶ˆæ¯ç³»ç»Ÿï¼Œæ¯”å¦‚æ™®é€šçš„å³æ—¶èŠå¤©ï¼Œç¾¤èŠç­‰åŠŸèƒ½ã€‚</p><p>ä½¿ç”¨åœºæ™¯ï¼š</p><p>1ã€å®æ—¶æ¶ˆæ¯ç³»ç»Ÿï¼Œå…¬å‘Š</p><p>2ã€å®æ—¶èŠå¤©ï¼ˆå°†é¢‘é“å½“åšèŠå¤©å®¤ï¼Œå°†ä¿¡æ¯å›æ˜¾ç»™æ‰€æœ‰äººï¼‰</p><p>3ã€è®¢é˜…ï¼Œå…³æ³¨ç³»ç»Ÿéƒ½æ˜¯å¯ä»¥çš„</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="redis-ä¸»ä»å¤åˆ¶">Redis ä¸»ä»å¤åˆ¶<a class="hash-link" href="#redis-ä¸»ä»å¤åˆ¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="æ¦‚å¿µ">æ¦‚å¿µ<a class="hash-link" href="#æ¦‚å¿µ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸»ä»å¤åˆ¶ï¼Œæ˜¯æŒ‡å°†ä¸€å° Redis æœåŠ¡å™¨çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶ä»–çš„ Redis æœåŠ¡å™¨ã€‚å‰è€…ç§°ä¸ºä¸»èŠ‚ç‚¹(master/leader)ï¼Œåè€…ç§°ä¸ºä»èŠ‚ç‚¹(slave/follower);æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼Œåªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹ã€‚Master ä»¥å†™ä¸ºä¸»ï¼ŒSlave ä»¥è¯»ä¸ºä¸»ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å° Redis æœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹;ä¸”ä¸€ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªä»èŠ‚ç‚¹(æˆ–æ²¡æœ‰ä»èŠ‚ç‚¹)ï¼Œä½†ä¸€ä¸ªä»èŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦åŒ…æ‹¬">ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦åŒ…æ‹¬ï¸°<a class="hash-link" href="#ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦åŒ…æ‹¬" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>1ã€æ•°æ®å†—ä½™ âˆ¶ ä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚
2ã€æ•…éšœæ¢å¤ï¸°å½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤;å®é™…ä¸Šæ˜¯ä¸€ç§æœåŠ¡çš„å†—ä½™ã€‚
3ã€è´Ÿè½½å‡è¡¡ï¸°åœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥ç”±ä¸»èŠ‚ç‚¹æä¾›å†™æœåŠ¡ï¼Œç”±ä»èŠ‚ç‚¹æä¾›è¯»æœåŠ¡ï¼ˆå³å†™ Redis æ•°æ®æ—¶åº”ç”¨è¿æ¥ä¸»èŠ‚ç‚¹ï¼Œè¯» Redis æ•°æ®æ—¶åº”ç”¨è¿æ¥ä»èŠ‚ç‚¹ï¼‰ï¼Œåˆ†æ‹…æœåŠ¡å™¨è´Ÿè½½;å°¤å…¶æ˜¯åœ¨å†™å°‘è¯»å¤šçš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è¯»è´Ÿè½½ï¼Œå¯ä»¥å¤§å¤§æé«˜ Redis æœåŠ¡å™¨çš„å¹¶å‘é‡ã€‚
4ã€é«˜å¯ç”¨åŸºçŸ³ âˆ¶ é™¤äº†ä¸Šè¿°ä½œç”¨ä»¥å¤–ï¼Œä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ï¼Œå› æ­¤è¯´ä¸»ä»å¤åˆ¶æ˜¯ Redis é«˜å¯ç”¨çš„åŸºç¡€ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œè¦å°† Redis è¿ç”¨äºå·¥ç¨‹é¡¹ç›®ä¸­ï¼Œåªä½¿ç”¨ä¸€å° Redis æ˜¯ä¸‡ä¸‡ä¸èƒ½çš„</p><p>åŸå› å¦‚ä¸‹ï¸°
1ã€ä»ç»“æ„ä¸Šï¼Œå•ä¸ª Redis æœåŠ¡å™¨ä¼šå‘ç”Ÿå•ç‚¹æ•…éšœï¼Œå¹¶ä¸”ä¸€å°æœåŠ¡å™¨éœ€è¦å¤„ç†æ‰€æœ‰çš„è¯·æ±‚è´Ÿè½½ï¼Œå‹åŠ›è¾ƒå¤§;
2ã€ä»å®¹é‡ä¸Šï¼Œå•ä¸ª Redis æœåŠ¡å™¨å†…å­˜å®¹é‡æœ‰é™ï¼Œå°±ç®—ä¸€å° Redis æœåŠ¡å™¨å†…å­˜å®¹é‡ä¸º 256Gï¼Œä¹Ÿä¸èƒ½å°†æ‰€æœ‰å†…å­˜ç”¨ä½œ Redis å­˜å‚¨å†…å­˜ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œ<strong>å•å° Redis æœ€å¤§ä½¿ç”¨å†…å­˜ä¸åº”è¯¥è¶…è¿‡ 20Gã€‚</strong></p><p>ä¸»ä»å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»ï¼80%çš„æƒ…å†µä¸‹éƒ½æ˜¯åœ¨è¿›è¡Œè¯»æ“ä½œï¼Œå°±å¯ä»¥å‡ç¼“æœåŠ¡å™¨å‹åŠ›ï¼Œæ¶æ„ä¸­ç»å¸¸ä½¿ç”¨ï¼Œä¸€ä¸»äºŒä»</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ç¯å¢ƒé…ç½®">ç¯å¢ƒé…ç½®<a class="hash-link" href="#ç¯å¢ƒé…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">redis:0&gt;info replication  # æŸ¥çœ‹å½“å‰åº“ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;# Replication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">role:master  # è§’è‰²</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">connected_slaves:0 # æ²¡æœ‰ä»æœº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master_replid:d6950e2fdb86b591f42e8725279034303e8cb6ee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master_replid2:0000000000000000000000000000000000000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master_repl_offset:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">second_repl_offset:-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">repl_backlog_active:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">repl_backlog_size:1048576</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">repl_backlog_first_byte_offset:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">repl_backlog_histlen:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>éœ€è¦ä¿®æ”¹ é…ç½®æ–‡ä»¶</p><p>ç«¯å£ pid åå­— log æ–‡ä»¶å dump.rdb å</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ä¸€ä¸»äºŒä»">ä¸€ä¸»äºŒä»<a class="hash-link" href="#ä¸€ä¸»äºŒä»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å° Redis æœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹;æˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹åªç”¨é…ç½®ä»æœºå°±å¥½äº†!è®¤è€å¤§!ä¸€ä¸»ï¼ˆ 79)äºŒä»( 80ï¼Œ81 )</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">SLAVEOF 127.0.0.1 6379 # æ‰¾è°ä¸ºä¸»æœº</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>ä¸»æœºå¯ä»¥å†™ï¼Œä»æœºä¸èƒ½å†™åªèƒ½è¯»ï¼</strong>ä¸»æœºä¸­çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šè¢«ä»æœºä¿å­˜</p><p>ä¸»æœºæ–­å¼€è¿æ¥ï¼Œä»æœºä¾æ—§å¯ä»¥è¿æ¥åˆ°ä¸»æœºï¼Œå¹¶ä¸”ä¸»æœºå›æ¥ï¼Œä»æœºä¾æ—§å¯ä»¥ç›´æ¥è·å–æ•°æ®</p><p>ä»æœºé‡æ–°è¿æ¥ä¼šä¸»æœºï¼Œä¸»æœºçš„ä»»ä½•æ“ä½œç«‹é©¬åŒæ­¥åˆ°ä»æœºä¸Š</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="å¤åˆ¶åŸç†">å¤åˆ¶åŸç†<a class="hash-link" href="#å¤åˆ¶åŸç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>slave å¯åŠ¨æˆåŠŸè¿æ¥åˆ° master åä¼šå‘é€ä¸€ä¸ª sync å‘½ä»¤
Master æ¥åˆ°å‘½ä»¤ï¼Œå¯åŠ¨åå°çš„å­˜ç›˜è¿›ç¨‹ï¼ŒåŒæ—¶æ”¶é›†æ‰€æœ‰æ¥æ”¶åˆ°çš„ç”¨äºä¿®æ”¹æ•°æ®é›†å‘½ä»¤ï¼Œåœ¨åå°è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œ<strong>master å°†ä¼ é€æ•´ä¸ªæ•°æ®æ–‡ä»¶åˆ° slaveï¼Œå¹¶å®Œæˆä¸€æ¬¡å®Œå…¨åŒæ­¥ã€‚</strong></p><p>å…¨é‡å¤åˆ¶ï¼šslave æœåŠ¡åœ¨æ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</p><p>å¢é‡å¤åˆ¶ï¼šMaster ç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤ä¾æ¬¡ä¼ ç»™ slaveï¼Œå®ŒæˆåŒæ­¥ä½†æ˜¯åªè¦æ˜¯é‡æ–°è¿æ¥ masterï¼Œä¸€æ¬¡å®Œå…¨åŒæ­¥ï¼ˆå…¨é‡å¤åˆ¶)å°†è¢«è‡ªåŠ¨æ‰§è¡Œ</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="å±‚å±‚é“¾è·¯">å±‚å±‚é“¾è·¯<a class="hash-link" href="#å±‚å±‚é“¾è·¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸Šä¸€ä¸ª M é“¾æ¥ä¸‹ä¸€ä¸ª S</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="å“¨å…µæ¨¡å¼">å“¨å…µæ¨¡å¼<a class="hash-link" href="#å“¨å…µæ¨¡å¼" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.jianshu.com/p/06ab9daf921d" target="_blank" rel="noopener noreferrer">Redis å“¨å…µï¼ˆSentinelï¼‰æ¨¡å¼</a></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="æ¦‚è¿°">æ¦‚è¿°<a class="hash-link" href="#æ¦‚è¿°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¦‚æœä¸»æœºå®•æœºäº†ï¼Œä»æœºè¦å½“ä¸»æœºï¼Œé€šè¿‡å‘½ä»¤<code>SLAVEOF no one</code> ä»æœºå˜ä¸»æœºï¼Œä½†å¦‚æœè¿™æ—¶å€™ä¸»æœºæ¢å¤äº†ï¼Œé‚£ä¹ˆå°±éœ€è¦é‡æ–°é…ç½®äº†ï¼Œååˆ†éº»çƒ¦</p><p>ä¸»ä»åˆ‡æ¢æŠ€æœ¯çš„æ–¹æ³•æ˜¯ âˆ¶ å½“ä¸»æœåŠ¡å™¨å®•æœºåï¼Œéœ€è¦æ‰‹åŠ¨æŠŠä¸€å°ä»æœåŠ¡å™¨åˆ‡æ¢ä¸ºä¸»æœåŠ¡å™¨ï¼Œè¿™å°±éœ€è¦äººå·¥å¹²é¢„ï¼Œè´¹äº‹è´¹åŠ›ï¼Œè¿˜ä¼šé€ æˆä¸€æ®µæ—¶é—´å†…æœåŠ¡ä¸å¯ç”¨ã€‚è¿™ä¸æ˜¯ä¸€ç§æ¨èçš„æ–¹å¼ï¼Œæ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼˜å…ˆè€ƒè™‘å“¨å…µæ¨¡å¼ã€‚Redis ä» 2.8 å¼€å§‹æ­£å¼æä¾›äº† Sentinel (å“¨å…µï¼‰æ¶æ„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>åå°èƒ½å¤Ÿç›‘æ§ä¸»æœºæ˜¯å¦æ•…éšœï¼Œå¦‚æœæ•…éšœäº†æ ¹æ®æŠ•ç¥¨æ•°è‡ªåŠ¨å°†ä»æœºå˜ä¸ºä¸»æœº</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="å®ç°">å®ç°<a class="hash-link" href="#å®ç°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å“¨å…µæ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¨¡å¼ï¼Œé¦–å…ˆ Redis æä¾›äº†å“¨å…µçš„å‘½ä»¤ï¼Œå“¨å…µæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œä½œä¸ºè¿›ç¨‹ï¼Œå®ƒä¼šç‹¬ç«‹è¿è¡Œã€‚å…¶åŸç†æ˜¯<strong>å“¨å…µé€šè¿‡å‘é€å‘½ä»¤ï¼Œç­‰å¾… Redis æœåŠ¡å™¨å“åº”ï¼Œä»è€Œç›‘æ§è¿è¡Œçš„å¤šä¸ª Redis å®ä¾‹ã€‚</strong></p><p><img loading="lazy" src="http://cdn.kuizuo.cn/blog11320039-57a77ca2757d0924.png" alt="img" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="é…ç½®">é…ç½®<a class="hash-link" href="#é…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>1ã€å“¨å…µé…ç½®æ–‡ä»¶ sentinel.conf</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sentinel monitor myredis 127.0.0.1 6379 1</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>åé¢çš„è¿™ä¸ªæ•°å­— 1ï¼Œä»£è¡¨ä¸»æœºæŒ‚äº†ï¼Œslave æŠ•ç¥¨çœ‹è®©è°å½“ä¸»æœºï¼Œç¥¨æ•°å¤šçš„å°±ä¼šæˆä¸ºä¸»æœº</p><p>2ã€å¯åŠ¨å“¨å…µ</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">redis-sentinel config/sentinel.conf</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>3ã€ä¸»æœºæŒ‚äº†ï¼Œä»æœºå½“ä¸»æœºäº†ï¼Œä½†æ˜¯å¦‚æœåŸä¸»æœºæ¢å¤äº†ï¼Œä¹Ÿåªèƒ½ä¹–ä¹–å½“æ–°ä¸»æœºçš„ä»æœº</p><p>ä¼˜ç‚¹:
1ã€å“¨å…µé›†ç¾¤ï¼ŒåŸºäºä¸»ä»å¤åˆ¶æ¨¡å¼ï¼Œæ‰€æœ‰çš„ä¸»ä»é…ç½®ä¼˜ç‚¹ï¼Œå®ƒå…¨æœ‰</p><p>2ã€ä¸»ä»å¯ä»¥åˆ‡æ¢ï¼Œæ•…éšœå¯ä»¥è½¬ç§»ï¼Œç³»ç»Ÿçš„å¯ç”¨æ€§å°±ä¼šæ›´å¥½</p><p>3ã€å“¨å…µæ¨¡å¼å°±æ˜¯ä¸»ä»æ¨¡å¼çš„å‡çº§ï¼Œæ‰‹åŠ¨åˆ°è‡ªåŠ¨ï¼Œæ›´åŠ å¥å£®</p><p>ç¼ºç‚¹:</p><p>1ã€Redis ä¸å¥½å•Šåœ¨çº¿æ‰©å®¹çš„ï¼Œé›†ç¾¤å®¹é‡ä¸€æ—¦åˆ°è¾¾ä¸Šé™ï¼Œåœ¨çº¿æ‰©å®¹å°±ååˆ†éº»çƒ¦</p><p>2ã€å®ç°å“¨å…µæ¨¡å¼çš„é…ç½®å…¶å®æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œé‡Œé¢æœ‰å¾ˆå¤šé€‰æ‹©</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="redis-ç¼“å­˜ç©¿é€å’Œé›ªå´©">Redis ç¼“å­˜ç©¿é€å’Œé›ªå´©<a class="hash-link" href="#redis-ç¼“å­˜ç©¿é€å’Œé›ªå´©" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><strong>æœåŠ¡å™¨é«˜å¯ç”¨çš„é—®é¢˜</strong></p><p>Redis ç¼“å­˜çš„ä½¿ç”¨ï¼Œæå¤§çš„æå‡äº†åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œæ•ˆç‡ï¼Œç‰¹åˆ«æ˜¯æ•°æ®æŸ¥è¯¢æ–¹é¢ã€‚ä½†åŒæ—¶ï¼Œå®ƒä¹Ÿå¸¦æ¥äº†ä¸€äº›é—®é¢˜ã€‚å…¶ä¸­ï¼Œæœ€è¦å®³çš„é—®é¢˜ï¼Œå°±æ˜¯æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä»ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼Œè¿™ä¸ªé—®é¢˜æ— è§£ã€‚å¦‚æœå¯¹æ•°æ®çš„ä¸€è‡´æ€§è¦æ±‚å¾ˆé«˜ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä½¿ç”¨ç¼“å­˜ã€‚
å¦å¤–çš„ä¸€äº›å…¸å‹é—®é¢˜å°±æ˜¯ï¼Œç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©å’Œç¼“å­˜å‡»ç©¿ã€‚ç›®å‰ï¼Œä¸šç•Œä¹Ÿéƒ½æœ‰æ¯”è¾ƒæµè¡Œçš„è§£å†³æ–¹æ¡ˆã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ç¼“å­˜ç©¿é€">ç¼“å­˜ç©¿é€<a class="hash-link" href="#ç¼“å­˜ç©¿é€" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="æ¦‚å¿µ-1">æ¦‚å¿µ<a class="hash-link" href="#æ¦‚å¿µ-1" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ç¼“å­˜æŸ¥ä¸åˆ°ï¼Œå¯¼è‡´æ•°æ®éƒ½æŸ¥æ•°æ®åº“</p><p>ç¼“å­˜ç©¿é€çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œç”¨æˆ·æƒ³è¦æŸ¥è¯¢ä¸€ä¸ªæ•°æ®ï¼Œå‘ç° redis å†…å­˜æ•°æ®åº“æ²¡æœ‰ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œäºæ˜¯å‘æŒä¹…å±‚æ•°æ®åº“æŸ¥è¯¢ã€‚å‘ç°ä¹Ÿæ²¡æœ‰ï¼Œäºæ˜¯æœ¬æ¬¡æŸ¥è¯¢å¤±è´¥ã€‚å½“ç”¨æˆ·å¾ˆå¤šçš„æ—¶å€™ï¼Œç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­ï¼ˆç§’æ€!ï¼‰ï¼Œäºæ˜¯éƒ½å»è¯·æ±‚äº†æŒä¹…å±‚æ•°æ®åº“ã€‚è¿™ä¼šç»™æŒä¹…å±‚æ•°æ®åº“é€ æˆå¾ˆå¤§çš„å‹åŠ›ï¼Œè¿™æ—¶å€™å°±ç›¸å½“äºå‡ºç°äº†ç¼“å­˜ç©¿é€ã€‚|</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ<a class="hash-link" href="#è§£å†³æ–¹æ¡ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="å¸ƒéš†è¿‡æ»¤å™¨">å¸ƒéš†è¿‡æ»¤å™¨<a class="hash-link" href="#å¸ƒéš†è¿‡æ»¤å™¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯¹æ‰€æœ‰å¯èƒ½æŸ¥è¯¢çš„å‚æ•°ä»¥ hash å½¢å¼å­˜å‚¨ï¼Œåœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ ¡éªŒï¼Œä¸ç¬¦åˆåˆ™ä¸¢å¼ƒï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="ç¼“å­˜ç©ºå¯¹è±¡">ç¼“å­˜ç©ºå¯¹è±¡<a class="hash-link" href="#ç¼“å­˜ç©ºå¯¹è±¡" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å½“å­˜å‚¨å±‚ä¸å‘½ä¸­åï¼Œå³ä½¿è¿”å›çš„ç©ºå¯¹è±¡ä¹Ÿå°†å…¶ç¼“å­˜èµ·æ¥ï¼ŒåŒæ—¶ä¼šè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä¹‹åå†è®¿é—®è¿™ä¸ªæ•°æ®å°†ä¼šä»ç¼“å­˜ä¸­è·å–ï¼Œä¿æŠ¤äº†åç«¯æ•°æ®æº;</p><p>ä½†æ˜¯è¿™ç§æ–¹æ³•ä¼šå­˜åœ¨ä¸¤ä¸ªé—®é¢˜:
1ã€å¦‚æœç©ºå€¼èƒ½å¤Ÿè¢«ç¼“å­˜èµ·æ¥ï¼Œè¿™å°±æ„å‘³ç€ç¼“å­˜éœ€è¦æ›´å¤šçš„ç©ºé—´å­˜å‚¨æ›´å¤šçš„é”®ï¼Œå› ä¸ºè¿™å½“ä¸­å¯èƒ½ä¼šæœ‰å¾ˆå¤šçš„ç©ºå€¼çš„é”®;
2ã€å³ä½¿å¯¹ç©ºå€¼è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œè¿˜æ˜¯ä¼šå­˜åœ¨ç¼“å­˜å±‚å’Œå­˜å‚¨å±‚çš„æ•°æ®ä¼šæœ‰ä¸€æ®µæ—¶é—´çª—å£çš„ä¸ä¸€è‡´ï¼Œè¿™å¯¹äºéœ€è¦ä¿æŒä¸€è‡´æ€§çš„ä¸šåŠ¡ä¼šæœ‰å½±å“ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ç¼“å­˜å‡»ç©¿">ç¼“å­˜å‡»ç©¿<a class="hash-link" href="#ç¼“å­˜å‡»ç©¿" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="æ¦‚è¿°-1">æ¦‚è¿°<a class="hash-link" href="#æ¦‚è¿°-1" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>å…¨éƒ½æŸ¥ç¼“å­˜ï¼Œæ­¤æ—¶ç¼“å­˜æ°å¥½è¿‡æœŸï¼Œå¯¼è‡´é‡è¿‡å¤§</p><p>è¿™é‡Œéœ€è¦æ³¨æ„å’Œç¼“å­˜å‡»ç©¿çš„åŒºåˆ«ï¼Œç¼“å­˜å‡»ç©¿ï¼Œæ˜¯æŒ‡ä¸€ä¸ª key éå¸¸çƒ­ç‚¹ï¼Œåœ¨ä¸åœçš„æ‰›ç€å¤§å¹¶å‘ï¼Œå¤§å¹¶å‘é›†ä¸­å¯¹è¿™ä¸€ä¸ªç‚¹è¿›è¡Œè®¿é—®ï¼Œå½“è¿™ä¸ª key åœ¨å¤±æ•ˆçš„ç¬é—´ï¼ŒæŒç»­çš„å¤§å¹¶å‘å°±ç©¿ç ´ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œå°±åƒåœ¨ä¸€ä¸ªå±éšœä¸Šå‡¿å¼€äº†ä¸€ä¸ªæ´ã€‚
å½“æŸä¸ª key åœ¨è¿‡æœŸçš„ç¬é—´ï¼Œæœ‰å¤§é‡çš„è¯·æ±‚å¹¶å‘è®¿é—®ï¼Œè¿™ç±»æ•°æ®ä¸€èˆ¬æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œç”±äºç¼“å­˜è¿‡æœŸ
ï¼Œä¼šåŒæ—¶è®¿é—®æ•°æ®åº“æ¥æŸ¥è¯¢æœ€æ–°æ•°
æ®ï¼Œå¹¶ä¸”å›å†™ç¼“å­˜ï¼Œä¼šå¯¼ä½¿æ•°æ®åº“ç¬é—´å‹åŠ›è¿‡å¤§ã€‚</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="è§£å†³æ–¹æ¡ˆ-1">è§£å†³æ–¹æ¡ˆ<a class="hash-link" href="#è§£å†³æ–¹æ¡ˆ-1" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ">è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ<a class="hash-link" href="#è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>ä»ç¼“å­˜å±‚é¢æ¥çœ‹ï¼Œæ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°çƒ­ç‚¹ key è¿‡æœŸåäº§ç”Ÿçš„é—®é¢˜ã€‚</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="åŠ äº’æ–¥é”">åŠ äº’æ–¥é”<a class="hash-link" href="#åŠ äº’æ–¥é”" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>åˆ†å¸ƒå¼é” âˆ¶ ä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œä¿è¯å¯¹äºæ¯ä¸ª key åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æŸ¥è¯¢åç«¯æœåŠ¡ï¼Œå…¶ä»–çº¿ç¨‹æ²¡æœ‰è·å¾—åˆ†å¸ƒå¼é”çš„æƒé™ï¼Œå› æ­¤åªéœ€è¦ç­‰å¾…å³å¯ã€‚è¿™ç§æ–¹å¼å°†é«˜å¹¶å‘çš„å‹åŠ›è½¬ç§»åˆ°äº†åˆ†å¸ƒå¼é”ï¼Œå› æ­¤å¯¹åˆ†å¸ƒå¼é”çš„è€ƒéªŒå¾ˆå¤§ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ç¼“å­˜é›ªå´©">ç¼“å­˜é›ªå´©<a class="hash-link" href="#ç¼“å­˜é›ªå´©" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="æ¦‚è¿°-2">æ¦‚è¿°<a class="hash-link" href="#æ¦‚è¿°-2" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>æŒ‡åœ¨æŸä¸€ä¸ªæ—¶é—´æ®µï¼Œç¼“å­˜é›†ä¸­è¿‡æœŸå¤±æ•ˆã€‚Redis å®•æœº!</p><p>äº§ç”Ÿé›ªå´©çš„åŸå› ä¹‹ä¸€ï¼Œæ¯”å¦‚åœ¨å†™æœ¬æ–‡çš„æ—¶å€™ï¼Œé©¬ä¸Šå°±è¦åˆ°åŒåäºŒé›¶ç‚¹ï¼Œå¾ˆå¿«å°±ä¼šè¿æ¥ä¸€æ³¢æŠ¢è´­ï¼Œè¿™æ³¢å•†å“æ—¶é—´æ¯”è¾ƒé›†ä¸­çš„æ”¾å…¥äº†ç¼“å­˜ï¼Œå‡è®¾ç¼“å­˜ä¸€ä¸ªå°æ—¶ã€‚é‚£ä¹ˆåˆ°äº†å‡Œæ™¨ä¸€ç‚¹é’Ÿçš„æ—¶å€™ï¼Œè¿™æ‰¹å•†å“çš„ç¼“å­˜å°±éƒ½è¿‡æœŸäº†ã€‚è€Œå¯¹è¿™æ‰¹å•†å“çš„è®¿é—®æŸ¥è¯¢ï¼Œéƒ½è½åˆ°äº†æ•°æ®åº“ä¸Šï¼Œå¯¹äºæ•°æ®åº“è€Œè¨€ï¼Œå°±ä¼šäº§ç”Ÿå‘¨æœŸæ€§çš„å‹åŠ›æ³¢å³°ã€‚äºæ˜¯æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šè¾¾åˆ°å­˜å‚¨å±‚ï¼Œå­˜å‚¨å±‚çš„è°ƒç”¨é‡ä¼šæš´å¢ï¼Œé€ æˆå­˜å‚¨å±‚ä¹Ÿä¼šæŒ‚æ‰çš„æƒ…å†µã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="åŸºæœ¬è§£å†³æ–¹æ¡ˆ">åŸºæœ¬è§£å†³æ–¹æ¡ˆ<a class="hash-link" href="#åŸºæœ¬è§£å†³æ–¹æ¡ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>redis é«˜å¯ç”¨
è¿™ä¸ªæ€æƒ³çš„å«ä¹‰æ˜¯ï¼Œæ—¢ç„¶ redis æœ‰å¯èƒ½æŒ‚æ‰ï¼Œé‚£æˆ‘å¤šå¢è®¾å‡ å° redisï¼Œè¿™æ ·ä¸€å°æŒ‚æ‰ä¹‹åå…¶ä»–çš„è¿˜å¯ä»¥ç»§ç»­å·¥ä½œï¼Œå…¶å®å°±æ˜¯æ­å»ºçš„é›†ç¾¤ã€‚ï¼ˆå¼‚åœ°å¤šæ´»!)
é™æµé™çº§ï¼ˆåœ¨ SpringCloud è®²è§£è¿‡!)
è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„æ€æƒ³æ˜¯ï¼Œåœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ã€‚æ¯”å¦‚å¯¹æŸä¸ª key åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚
æ•°æ®é¢„çƒ­
æ•°æ®åŠ çƒ­çš„å«ä¹‰å°±æ˜¯åœ¨æ­£å¼éƒ¨ç½²ä¹‹å‰ï¼Œæˆ‘å…ˆæŠŠå¯èƒ½çš„æ•°æ®å…ˆé¢„å…ˆè®¿é—®ä¸€éï¼Œè¿™æ ·éƒ¨åˆ†å¯èƒ½å¤§é‡è®¿é—®çš„æ•°æ®å°±ä¼šåŠ è½½åˆ°ç¼“å­˜ä¸­ã€‚åœ¨å³å°†å‘ç”Ÿå¤§å¹¶å‘è®¿é—®å‰æ‰‹åŠ¨è§¦å‘åŠ è½½ç¼“å­˜ä¸åŒçš„ keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´ç‚¹å°½é‡å‡åŒ€ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/docs/tags/redis">redis</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/docs/tags/æ•°æ®åº“">æ•°æ®åº“</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/skill/database/mongo/"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">MongoDBç¬”è®°</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/skill/database/redis/Redisè·å–å…­ä½ä¸é‡å¤æ•°å­—ï¼ˆé‚€è¯·ç ï¼‰"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">Redisè·å–å…­ä½ä¸é‡å¤æ•°å­—ï¼ˆé‚€è¯·ç ï¼‰</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#å®‰è£…" class="table-of-contents__link toc-highlight">å®‰è£…</a><ul><li><a href="#window" class="table-of-contents__link toc-highlight">window</a></li><li><a href="#linux" class="table-of-contents__link toc-highlight">Linux</a></li><li><a href="#docker" class="table-of-contents__link toc-highlight">Docker</a><ul><li><a href="#æ‹‰å–é•œåƒ" class="table-of-contents__link toc-highlight">æ‹‰å–é•œåƒ</a></li><li><a href="#å¯åŠ¨-redis" class="table-of-contents__link toc-highlight">å¯åŠ¨ Redis</a></li></ul></li></ul></li><li><a href="#åŸºæœ¬å‘½ä»¤" class="table-of-contents__link toc-highlight">åŸºæœ¬å‘½ä»¤</a></li><li><a href="#äº”å¤§æ•°æ®ç±»å‹" class="table-of-contents__link toc-highlight">äº”å¤§æ•°æ®ç±»å‹</a><ul><li><a href="#string" class="table-of-contents__link toc-highlight">String</a></li><li><a href="#list" class="table-of-contents__link toc-highlight">List</a></li><li><a href="#set" class="table-of-contents__link toc-highlight">Set</a></li><li><a href="#hash" class="table-of-contents__link toc-highlight">Hash</a></li><li><a href="#zset" class="table-of-contents__link toc-highlight">Zset</a></li></ul></li><li><a href="#ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹" class="table-of-contents__link toc-highlight">ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹</a><ul><li><a href="#geospatial" class="table-of-contents__link toc-highlight">geospatial</a></li><li><a href="#hyperloglog" class="table-of-contents__link toc-highlight">Hyperloglog</a></li><li><a href="#bitmaps" class="table-of-contents__link toc-highlight">Bitmaps</a></li></ul></li><li><a href="#äº‹åŠ¡" class="table-of-contents__link toc-highlight">äº‹åŠ¡</a><ul><li><a href="#ç›‘æ§-watch" class="table-of-contents__link toc-highlight">ç›‘æ§ Watch</a></li></ul></li><li><a href="#redisconf" class="table-of-contents__link toc-highlight">Redis.conf</a></li><li><a href="#redis-æŒä¹…åŒ–" class="table-of-contents__link toc-highlight">Redis æŒä¹…åŒ–</a><ul><li><a href="#rdbredis-database" class="table-of-contents__link toc-highlight">RDB(Redis Database)</a><ul><li><a href="#è§¦å‘æœºåˆ¶" class="table-of-contents__link toc-highlight">è§¦å‘æœºåˆ¶</a></li><li><a href="#æ¢å¤-rdb-æ–‡ä»¶" class="table-of-contents__link toc-highlight">æ¢å¤ rdb æ–‡ä»¶</a></li></ul></li><li><a href="#aofappend-only-file" class="table-of-contents__link toc-highlight">AOFï¼ˆAppend Only Fileï¼‰</a></li><li><a href="#å°ç»“" class="table-of-contents__link toc-highlight">å°ç»“</a></li></ul></li><li><a href="#redis-å‘å¸ƒè®¢é˜…" class="table-of-contents__link toc-highlight">Redis å‘å¸ƒè®¢é˜…</a><ul><li><a href="#æµ‹è¯•" class="table-of-contents__link toc-highlight">æµ‹è¯•</a></li><li><a href="#åŸç†" class="table-of-contents__link toc-highlight">åŸç†</a></li></ul></li><li><a href="#redis-ä¸»ä»å¤åˆ¶" class="table-of-contents__link toc-highlight">Redis ä¸»ä»å¤åˆ¶</a><ul><li><a href="#æ¦‚å¿µ" class="table-of-contents__link toc-highlight">æ¦‚å¿µ</a></li><li><a href="#ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦åŒ…æ‹¬" class="table-of-contents__link toc-highlight">ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦åŒ…æ‹¬ï¸°</a></li><li><a href="#ç¯å¢ƒé…ç½®" class="table-of-contents__link toc-highlight">ç¯å¢ƒé…ç½®</a></li><li><a href="#ä¸€ä¸»äºŒä»" class="table-of-contents__link toc-highlight">ä¸€ä¸»äºŒä»</a></li><li><a href="#å¤åˆ¶åŸç†" class="table-of-contents__link toc-highlight">å¤åˆ¶åŸç†</a></li><li><a href="#å±‚å±‚é“¾è·¯" class="table-of-contents__link toc-highlight">å±‚å±‚é“¾è·¯</a></li></ul></li><li><a href="#å“¨å…µæ¨¡å¼" class="table-of-contents__link toc-highlight">å“¨å…µæ¨¡å¼</a><ul><li><a href="#æ¦‚è¿°" class="table-of-contents__link toc-highlight">æ¦‚è¿°</a></li><li><a href="#å®ç°" class="table-of-contents__link toc-highlight">å®ç°</a></li><li><a href="#é…ç½®" class="table-of-contents__link toc-highlight">é…ç½®</a></li></ul></li><li><a href="#redis-ç¼“å­˜ç©¿é€å’Œé›ªå´©" class="table-of-contents__link toc-highlight">Redis ç¼“å­˜ç©¿é€å’Œé›ªå´©</a><ul><li><a href="#ç¼“å­˜ç©¿é€" class="table-of-contents__link toc-highlight">ç¼“å­˜ç©¿é€</a><ul><li><a href="#æ¦‚å¿µ-1" class="table-of-contents__link toc-highlight">æ¦‚å¿µ</a></li><li><a href="#è§£å†³æ–¹æ¡ˆ" class="table-of-contents__link toc-highlight">è§£å†³æ–¹æ¡ˆ</a></li></ul></li><li><a href="#ç¼“å­˜å‡»ç©¿" class="table-of-contents__link toc-highlight">ç¼“å­˜å‡»ç©¿</a><ul><li><a href="#æ¦‚è¿°-1" class="table-of-contents__link toc-highlight">æ¦‚è¿°</a></li><li><a href="#è§£å†³æ–¹æ¡ˆ-1" class="table-of-contents__link toc-highlight">è§£å†³æ–¹æ¡ˆ</a></li></ul></li><li><a href="#ç¼“å­˜é›ªå´©" class="table-of-contents__link toc-highlight">ç¼“å­˜é›ªå´©</a><ul><li><a href="#æ¦‚è¿°-2" class="table-of-contents__link toc-highlight">æ¦‚è¿°</a></li></ul></li><li><a href="#åŸºæœ¬è§£å†³æ–¹æ¡ˆ" class="table-of-contents__link toc-highlight">åŸºæœ¬è§£å†³æ–¹æ¡ˆ</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">å­¦ä¹ </div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/#homepage_blogs">æŠ€æœ¯åšå®¢</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/skill">æŠ€æœ¯ç¬”è®°</a></li><li class="footer__item"><a class="footer__link-item" href="/project">å®æˆ˜é¡¹ç›®</a></li></ul></div><div class="col footer__col"><div class="footer__title">ç¤¾äº¤åª’ä½“</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">é¦–é¡µ</a></li><li class="footer__item"><a class="footer__link-item" href="/about">å…³äºæˆ‘</a></li><li class="footer__item"><a href="https://github.com/kuizuo" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://juejin.cn/user/1565318510545901" target="_blank" rel="noopener noreferrer" class="footer__link-item">æ˜é‡‘<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">å‹æƒ…é“¾æ¥</div><ul class="footer__items"><li class="footer__item"><a href="https://zxuqian.cn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">å³°åå‰ç«¯å·¥ç¨‹å¸ˆ</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p>Copyright Â© 2022 æ„§æ€ Built with Docusaurus.</p><p><a href="http://beian.miit.gov.cn/">é—½ICPå¤‡2020017848å·-2</a></p></div></div></div></footer></div>
<script src="/assets/js/runtime~main.3afa910a.js"></script>
<script src="/assets/js/main.cf246ba2.js"></script>
</body>
</html>
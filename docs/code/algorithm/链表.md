---
title: 2. é“¾è¡¨
sidebar_position: 2
date: 2022-03-09
tags: [algorithm]
---



## 203. ç§»é™¤é“¾è¡¨å…ƒç´ 

- [203. ç§»é™¤é“¾è¡¨å…ƒç´ ](https://leetcode-cn.com/problems/remove-linked-list-elements/)
- 0505ï¼Œeasyï¼Œanswer

è®¾ç½®ä¸€ä¸ªè™šæ‹Ÿå¤´æŒ‡é’ˆï¼Œç”¨æ¥è§£å†³å¦‚æœ head ç»“ç‚¹è¦åˆ é™¤æ—¶ï¼Œéœ€è¦ç§»åŠ¨ head çš„ç‰¹æ®Šæƒ…å†µã€‚

```js
var removeElements = function (head, val) {
  // è™šæ‹Ÿå¤´èŠ‚ç‚¹
  const res = new ListNode(0, head);
  let cur = res;
  while(cur.next) {
    if (cur.next.val === val) cur.next = cur.next.next;
    else cur = cur.next;
  }
  return res.next;  // è¿”å›è™šæ‹Ÿå¤´èŠ‚ç‚¹æŒ‡å‘çš„ä¸‹ä¸€ä¸ªæŒ‡é’ˆã€‚
};
```



## 707. è®¾è®¡é“¾è¡¨

- [707. è®¾è®¡é“¾è¡¨](https://leetcode-cn.com/problems/design-linked-list/)
- 0505ï¼Œmidï¼Œanswer
- é“¾è¡¨çš„å®šä¹‰ï¼Œé“¾è¡¨çš„å¤„ç†

é”™è¯¯ï¼šæ‰¾äº†å¾ˆä¹…çš„é”™è¯¯ï¼š

```js
// â—ï¸æ‹¼å†™é”™è¯¯è¦æ³¨æ„
this._tail  // å†™æˆäº† this.tail
this._head  // å†™æˆäº† this_head 

// è¦æ³¨æ„è¾¹ç•Œé—®é¢˜ï¼Œæ¯ä¸€ä¸ªå‡½æ•°åœ¨å¼€å§‹æ˜¯ï¼Œéƒ½è¦è€ƒè™‘åˆ°ç°å¤„ç†è¾¹ç•Œæƒ…å†µã€‚
```

éœ€è¦å…ˆè‡ªå®šä¹‰ä¸‰ä¸ªæ–¹æ³•ï¼ˆå¯¹è±¡ï¼‰ï¼š

- å®šä¹‰å…¬å…±æ–¹æ³•ï¼š

```js
// åˆ›å»ºä¸€ä¸ªå•é“¾è¡¨çš„ç»“ç‚¹
class LinkNode {
  constructor(val, next) {
    this.val = val;
    this.next = next || null;
  }
}

// é“¾è¡¨å­˜å‚¨ï¼šé•¿åº¦ã€å¤´æŒ‡é’ˆã€å°¾æŒ‡é’ˆ
var MyLinkedList = function () {
  this._size = 0;
  this._head = null;
  this._tail = null;
};

// æ ¹æ® index è·å–é“¾è¡¨ä¸­çš„æŸä¸ªèŠ‚ç‚¹
MyLinkedList.prototype.getNode = function (index) {
  if (index < 0 || index >= this._size) return null;
  // å¦‚æœè¦æœ€åä¸€ä¸ªï¼Œå¯ä»¥å¿«é€Ÿå®šä½ä¸€ä¸‹ï¼Œçœå» for å¾ªç¯
  if (index === this._size - 1) return this._tail;
  let cur = this._head;
  for (let i = 0; i < index; i++) {
    cur = cur.next;
  }
  return cur;
}
```

ç­”æ¡ˆ (éœ€è¦åŠ ä¸Šä¸Šé¢çš„ä¸‰ä¸ªæ–¹æ³•)ï¼š

```js
// æ ¹æ® index è·å–é“¾è¡¨ä¸­çš„æŸä¸ªèŠ‚ç‚¹
MyLinkedList.prototype.getNode = function (index) {
  if (index < 0 || index >= this._size) return null;
  // å¦‚æœè¦æœ€åä¸€ä¸ªï¼Œå¯ä»¥å¿«é€Ÿå®šä½ä¸€ä¸‹ï¼Œçœå» for å¾ªç¯
  if (index === this._size - 1) return this._tail;
  let cur = this._head;
  for (let i = 0; i < index; i++) {
    cur = cur.next;
  }
  return cur;
}

/** 
 * @param {number} index
 * @return {number}
 */
MyLinkedList.prototype.get = function (index) {
  if (index < 0 || index >= this._size) return -1;
  // è·å–èŠ‚ç‚¹å€¼
  return this.getNode(index).val;
};

/** 
 * @param {number} val
 * @return {void}
 */
MyLinkedList.prototype.addAtHead = function (val) {
  const node = new LinkNode(val, this._head);
  this._size += 1;
  this._head = node;
  // å¦‚æœé“¾è¡¨ä¸­è¿˜æ²¡ç»“ç‚¹
  if (this._size === 1)  this._tail = node;
};

/** 
 * @param {number} val
 * @return {void}
 */
MyLinkedList.prototype.addAtTail = function (val) {
  const node = new LinkNode(val, null);
  this._size += 1;
  // å¦‚æœé“¾è¡¨ä¸­è¿˜æ²¡ç»“ç‚¹
  if (this._size === 1) {
    this._head = node;
    this._tail = node;
    return
  }
  this._tail.next = node;
  this._tail = node;
};

/** 
 * @param {number} index 
 * @param {number} val
 * @return {void}
 */
MyLinkedList.prototype.addAtIndex = function (index, val) {
  if (index > this._size) return;
  // å¤´æ’å…¥
  if (index <= 0) this.addAtHead(val);
  // å°¾æ’å…¥
  else if (index === this._size) this.addAtTail(val);
  // æ­£å¸¸æ’å…¥
  else {
    const pre = this.getNode(index - 1);   // æ‰¾åˆ°è¦æ’å…¥çš„indexçš„å‰ä¸€ä¸ªç»“ç‚¹
    pre.next = new LinkNode(val, pre.next);
    this._size += 1;
  }
};

/** 
 * @param {number} index
 * @return {void}
 */
MyLinkedList.prototype.deleteAtIndex = function (index) {
  if (index < 0 || index >= this._size) return;
  // å¤„ç†å¤´èŠ‚ç‚¹
  if (index === 0) {
    this._head = this._head.next;
    this._size -= 1;
    // å¦‚æœé“¾è¡¨ä¸­æ²¡æœ‰ç»“ç‚¹äº†ï¼Œé¢å¤–å¤„ç†å°¾ç»“ç‚¹
    if (this._size === 0) this._tail = null;
    return;
  }
  // æŒ‰ç…§ index æŸ¥æ‰¾å‰ä¸€ä¸ªç»“ç‚¹
  const pre = this.getNode(index - 1);
  pre.next = pre.next.next;
  // å¤„ç†å°¾ç»“ç‚¹
  if (index === this._size - 1) this._tail = pre;
  this._size -= 1;
};
```



## 206. åè½¬é“¾è¡¨

- [206. åè½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-linked-list/)
- 0505ï¼Œeasyï¼Œquick

#### æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆ

- pre æŒ‡å‘å‰ä¸€ä¸ªç»“ç‚¹ï¼Œcur æŒ‡å‘å½“å‰è¦ä¿®æ”¹çš„ç»“ç‚¹ï¼Œtemp ä½œä¸ºä¸´æ—¶ç»“ç‚¹ï¼ŒæŒ‡å‘ cur.nextã€‚

![a](./images/é“¾è¡¨.assets/008eGmZEly1gnrf1oboupg30gy0c44qp.gif)

```js
var reverseList = function (head) {
  let [pre, cur] = [null, head];
  while (cur) {
    const temp = cur.next;
    cur.next = pre;
    // preã€cur å¾€å‰ç§»åŠ¨
    [pre, cur] = [cur, temp];
  }
  return pre;
};
```

#### æ–¹æ³•äºŒï¼šè¿­ä»£

é€»è¾‘å’ŒåŒæŒ‡é’ˆæ˜¯ä¸€æ ·çš„ã€‚

```js
var reverseList = function (head) {
  return reverse(null, head);

  function reverse(pre, cur) {
    // ç»“æŸé€’å½’
    if (!cur) return pre;
    const temp = cur.next;
    cur.next = pre;
    return reverse(cur, temp);
  }
};
```

#### æ–¹æ³•ä¸‰ï¼šæ ˆ

å¦‚æœè¦æ±‚ä¸åŸåœ°ä¿®æ”¹ï¼Œè€Œæ˜¯é‡æ–°æ„å»ºä¸€ä¸ª nodeList åˆ™ä½¿ç”¨æ ˆç»“æ„æ¥å¤åˆ¶ï¼š

```js
var reverseList = function (head) {
  const stack = [];
  const resList = new ListNode();
  // åŸé“¾è¡¨çš„ val å…¨éƒ¨å…¥æ ˆï¼š
  for (let cur = head; cur !== null; cur = cur.next) {
    stack.push(cur.val);
  }
  // å°†æ ˆä¸­çš„ val å†™å…¥æ–°é“¾è¡¨ä¸­:
  for (let cur = resList; stack.length; cur = cur.next) {
    cur.next = new ListNode(stack.pop());
  }
  return resList.next;
};
```



## 24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹

- [24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹](https://leetcode-cn.com/problems/swap-nodes-in-pairs/)
- 0505ï¼Œmidï¼Œquick

#### æ–¹æ³•ä¸€ï¼šä¸‰æŒ‡é’ˆ

äº¤æ¢é“¾è¡¨ï¼Œéœ€è¦æ”¹åŠ¨ 3 å¤„ç»“ç‚¹çš„ `.next` å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦ä¸‰ä¸ªæŒ‡é’ˆã€‚

- éœ€è¦å®šä¹‰ä¸€ä¸ªè™šæ‹Ÿå¤´æŒ‡é’ˆï¼Œä»¥è§£å†³ head ç»“ç‚¹ä¹Ÿéœ€è¦ç§»åŠ¨çš„é—®é¢˜ï¼›
- å¯ä»¥è‡ªå·±ç”»ä¸ªå›¾ï¼Œå°±æ˜ç™½é€»è¾‘äº†ã€‚

- æ—¶é—´å¤æ‚åº¦ï¼š*O(n)*ï¼Œç©ºé—´å¤æ‚åº¦ï¼š*O(1)*ã€‚

![b](./images/é“¾è¡¨.assets/24.temp.png)

ä¸€å…±æœ‰ä¸‰æ­¥ï¼Œä½†é¡ºåºå¯ä»¥åè¿‡æ¥ï¼š

```js
var swapPairs = function (head) {
  if (!head || !head.next) return head;
  // è™šæ‹Ÿå¤´èŠ‚ç‚¹
  const res = new ListNode('', head);
  
  // cur æŒ‡å‘ä¸¤ä¸ªè¢«äº¤æ¢èŠ‚ç‚¹å‰çš„ä¸€ä¸ªç»“ç‚¹
  // äº¤æ¢ä¸¤ä¸ªç»“ç‚¹ï¼šchange å’Œ change.next (ä¹Ÿå°±æ˜¯temp).
  let [cur, change] = [res, head];
  
  while (change && change.next) {
    const temp = change.next;
    change.next = temp.next;	// æ­¥éª¤ä¸‰
    temp.next = change;		// æ­¥éª¤äºŒ
    cur.next = temp;		// æ­¥éª¤ä¸€
    // æŒ‡é’ˆå¾€å‰ç§»åŠ¨
    cur = change;
    change = change.next;
  }
  return res.next;
};
```

#### æ–¹æ³•äºŒï¼šè¿­ä»£

```js
// è¿”å›ï¼Œhead å’Œ head.next å®Œæˆäº¤æ¢çš„é“¾è¡¨
var swapPairs = function (head) {
  if (!head || !head.next) return head;

  // newNode æ˜¯åé¢äº¤æ¢å¥½çš„é“¾è¡¨
  const newNode = swapPairs(head.next.next);

  // head å’Œ head.next(temp) äº¤æ¢ä½ç½®ï¼Œäº¤æ¢åé“¾è¡¨å¤´å°±æ˜¯tampäº†ï¼Œæ‰€ä»¥return tempã€‚
  const temp = head.next;
  temp.next = head;
  head.next = newNode;
  return temp;
};
```



## 19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹

- [19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹](https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/)
- 0505ï¼Œmidï¼Œquick

åŒæŒ‡é’ˆ / å¿«æ…¢æŒ‡é’ˆï¼š

- left å’Œ rightã€‚right åœ¨ left çš„å³è¾¹ï¼Œä¸ left ä¸€ç›´ä¿æŒ n çš„è·ç¦»ã€‚
- right ä» index = n å¼€å§‹å‘åéå†ï¼Œç›´åˆ°éå†åˆ°é“¾è¡¨çš„ç»“å°¾ä¸ºæ­¢ï¼Œ
  - æ­¤æ—¶ right åˆ™æŒ‡å‘äº†å¾…åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ `left.next` ç»“ç‚¹å³å°†è¢«åˆ é™¤ï¼›
- âš ï¸ æ ˆç»“æ„ä¹Ÿå¯ä»¥ï¼Œå…ˆæŠŠæ‰€æœ‰èŠ‚ç‚¹æ”¾å…¥æ ˆä¸­ï¼Œç„¶åå‘å¤–å– n ä¸ªèŠ‚ç‚¹ï¼Œåˆ™æ­£å¥½å–å‡ºå¸¦åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚

```js
var removeNthFromEnd = function (head, n) {
  res = new ListNode('', head);  // è™šæ‹Ÿå¤´
  let [left, right] = [res, res];

  // right æŒ‡é’ˆå…ˆèµ° n ä¸ªè·ç¦»
  for (let i = 0; i < n; i++)  right = right.next;
  
  // left å’Œ right ä¸€èµ·èµ°ï¼Œç›´åˆ° right æŒ‡å‘é“¾è¡¨å°¾
  while (right.next) {
    [left, right] = [left.next, right.next];
  }

  // æ­¤æ—¶ left æŒ‡å‘å¸¦åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹
  left.next = left.next.next;

  return res.next;
};
```



## é¢è¯•é¢˜ 02.07. é“¾è¡¨ç›¸äº¤

- [é¢è¯•é¢˜ 02.07. é“¾è¡¨ç›¸äº¤](https://leetcode-cn.com/problems/intersection-of-two-linked-lists-lcci/)
- 0505ï¼Œeasyï¼Œanswer
- åŒæŒ‡é’ˆ



é”™è¯¯åŸå› ï¼š

- è¿™é‡Œæ¶‰åŠåˆ°å½“å˜é‡æœ‰ç‚¹å¤šï¼šæœ‰ä¸¤ä¸ªé“¾è¡¨ã€ä¸¤ä¸ªæŒ‡é’ˆã€ä¸¤ä¸ªé•¿åº¦ã€‚æ‰€ä»¥éœ€è¦å¯¹æ¯ä¸€ä¸ªæ“ä½œæ­¥éª¤ä»”ç»†æ ¸å¯¹ã€‚æˆ‘å°±æ˜¯åœ¨å…¶ä¸­æœ‰å¾ˆå¤šå°é”™è¯¯ï¼š
  - å˜é‡æ²¡æœ‰å®šä¹‰ç›´æ¥ä½¿ç”¨ï¼›
  - while å¾ªç¯æ—¶ï¼Œåªç§»åŠ¨äº†å˜é‡ aï¼Œæ²¡æœ‰ç§»åŠ¨å˜é‡ bï¼›
  - å·²ç»å®šä¹‰äº†ä¸€ä¸ªå˜é‡ curLï¼Œå†åé¢æŠŠ curL æ”¹åæ—¶ï¼Œæ²¡æœ‰å¯¹æ‰€æœ‰çš„ curL å…¨éƒ¨æ›´æ¢åå­—ã€‚

#### æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆï½œæ±‚é•¿åº¦

æ±‚ä¸¤ä¸ªé“¾è¡¨äº¤ç‚¹èŠ‚ç‚¹çš„**æŒ‡é’ˆ**ã€‚ äº¤ç‚¹ä¸æ˜¯æ•°å€¼ç›¸ç­‰ï¼Œè€Œæ˜¯æŒ‡é’ˆç›¸ç­‰ã€‚æ‰€ä»¥åœ¨ä¸€ä¸ªé“¾è¡¨ä¸Šï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªç›¸åŒå€¼çš„èŠ‚ç‚¹ã€‚

- å…ˆæ±‚å‡ºä¸¤ä¸ªé“¾è¡¨å„è‡ªçš„ **é•¿åº¦**ï¼Œå¹¶æ±‚å‡ºä¸¤ä¸ªé“¾è¡¨é•¿åº¦çš„ **å·®å€¼** `gap`ã€‚
- ä»£ç ä¸­ï¼Œ curA æ°¸è¿œæŒ‡å‘æ›´é•¿çš„ä¸€ä¸ªé“¾è¡¨ï¼Œæ­¤æ—¶è®© curA ç§»åŠ¨åˆ°ï¼Œå’Œ curB æœ«å°¾å¯¹é½çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯å‘åç§»åŠ¨ `gap` ä¸ªè·ç¦»ã€‚
- ç„¶åå°±å¯ä»¥ç”¨ while å¾ªç¯ï¼ŒåŒæ—¶éå† curA å’Œ curB äº†ï¼Œå½“ä»–ä»¬ä¸¤ä¸ªç›¸ç­‰æ—¶ï¼Œåˆ™è¡¨æ˜æŒ‡å‘äº†åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›å³å¯ã€‚

![d](./images/é“¾è¡¨.assets/2.png)

æ—¶é—´å¤æ‚åº¦ï¼šä¸¤æ¬¡è·å¾—é“¾è¡¨çš„é•¿åº¦ï¼š*O(m+n)*ï¼Œç„¶åä»å¤´éå†ä¸€æ¬¡é“¾è¡¨ï¼š*O(m)* ==> *O(m + 2n)* å‡è®¾ n ä¸º æ›´çŸ­çš„ä¸€è¾¹

```js
var getIntersectionNode = function (headA, headB) {
  // æ‹¿åˆ°æ›´çŸ­çš„ä¸€ä¸ª, lenA is longer
  let [lenA, lenB] = [getLen(headA), getLen(headB)];
  if (lenA < lenB) {
    [lenA, lenB] = [lenB, lenA];
    [headA, headB] = [headB, headA];
  }
  let gap = lenA - lenB;

  // å¯¹é•¿é“¾è¡¨è¿›è¡Œç§»åŠ¨
  let [curA, curB] = [headA, headB];
  while (gap-- > 0) curA = curA.next;

  while (curA) {
    if (curA === curB) return curA;
    curA = curA.next;
    curB = curB.next;
  }
  return null;

  // è·å–é“¾è¡¨çš„é•¿åº¦ï¼šæ—¶é—´å¤æ‚åº¦ O(n)
  function getLen(list) {
    let len = 0, cur = list;
    while (cur) {
      cur = cur.next;
      len++;
    }
    return len;
  }
};
```

#### æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆï½œæ•°å­¦æ€ç»´

- æ€»ç»“æ•°å­¦è§„å¾‹ï¼š[ğŸ”—](https://leetcode-cn.com/problems/intersection-of-two-linked-lists-lcci/solution/mian-shi-ti-0207-lian-biao-xiang-jiao-sh-b8hn/).

![aa](./images/é“¾è¡¨.assets/%E6%88%AA%E5%B1%8F2022-05-05%20%E4%B8%8B%E5%8D%889.03.35.png)

- æ—¶é—´å¤æ‚åº¦ï¼š*O(a+b)* 
  ç©ºé—´å¤æ‚åº¦ï¼š*O(1)*ã€‚ èŠ‚ç‚¹æŒ‡é’ˆ A , B ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚

```js
var getIntersectionNode = function(headA, headB) {
    if (headA === null || headB === null) {
        return null;
    }
    let pA = headA, pB = headB;
    while (pA !== pB) {
        pA = pA === null ? headB : pA.next;
        pB = pB === null ? headA : pB.next;
        console.log(pA, pB);
    }
    return pA;
};
```

#### æ–¹æ³•ä¸‰ï¼šSetï½œå“ˆå¸Œé›†åˆ

- åˆ©ç”¨ `Set` åªèƒ½ä¿å­˜ **å”¯ä¸€** `value` ï¼Œä¸” **æœ‰åº** æ¥ç¡®å®šæ˜¯å¦æŒ‡å‘åŒä¸€èŠ‚ç‚¹ã€‚

- æµç¨‹ï¼š

  1. æŠŠ `headA` ä¸­æ‰€æœ‰èŠ‚ç‚¹æ”¾å…¥ set ä¸­ï¼ˆ*O(n)*ï¼‰ï¼›
  2. æŠŠä»å¤´éå† `headB`ï¼Œç›´åˆ°å‘ç° cur å’Œ set å·²ç»ä¿å­˜çš„æŸä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¯æ˜ä»è¿™ä¸ªèŠ‚ç‚¹å¼€å§‹åé¢éƒ½æ˜¯é‡å¤çš„ã€‚*O(m)*
  3. è¿”å›æ‰¾åˆ°çš„èŠ‚ç‚¹ã€‚

- æ—¶é—´å¤æ‚åº¦ï¼š*O(m+n)*ï¼Œå…¶ä¸­ m å’Œ n æ˜¯åˆ†åˆ«æ˜¯é“¾è¡¨ head å’Œ headB çš„é•¿åº¦ã€‚éœ€è¦éå†ä¸¤ä¸ªé“¾è¡¨å„ä¸€æ¬¡ã€‚

  ç©ºé—´å¤æ‚åº¦ï¼š*O(m)*ï¼Œå…¶ä¸­ m æ˜¯é“¾è¡¨ headA çš„é•¿åº¦ã€‚éœ€è¦ä½¿ç”¨å“ˆå¸Œé›†åˆå­˜å‚¨é“¾è¡¨ headA ä¸­çš„å…¨éƒ¨èŠ‚ç‚¹ã€‚


```js
var getIntersectionNode = function(headA, headB) {
    const set = new Set();
    let cur = headA;
    while (cur !== null) {
        cur.add(cur);
        cur = cur.next;
    }
    cur = headB;
    while (cur !== null) {
        if (cur.has(cur)) {
            return cur;
        }
        cur = cur.next;
    }
    return null;
};
```



## 142. ç¯å½¢é“¾è¡¨ II

- [142. ç¯å½¢é“¾è¡¨ II](https://leetcode-cn.com/problems/linked-list-cycle-ii/)
- 0506ï¼Œmidï¼Œquick

#### æ–¹æ³•ä¸€ï¼šSetï½œå“ˆå¸Œé›†åˆ

å’Œä¸Šé¢˜ï¼ˆé¢è¯•é¢˜ 02.07.ï¼‰çš„æ–¹æ³•ä¸‰ä¸€æ ·ï¼Œä½¿ç”¨ set å“ˆå¸Œé›†åˆæ¥è§£å†³æ‰¾å¤šæŒ‡é’ˆæŒ‡å‘åŒä¸€èŠ‚ç‚¹çš„é—®é¢˜ã€‚

- Set å…·æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼šæˆå‘˜ä»…æœ‰ value ä¸”å”¯ä¸€ï¼›æˆå‘˜æœ‰åºä¸”æŒ‰ç…§åŠ å…¥æ—¶é—´æ’åºã€‚

```js
var detectCycle = function (head) {
  const set = new Set();
  let cur = head;
  while (cur) {
    if (set.has(cur)) return cur;
    set.add(cur);
    cur = cur.next;
  }
  return null
};
```

#### æ–¹æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆ

å…·ä½“å¯ä»¥çœ‹[è¿™é‡Œ](https://programmercarl.com/0142.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8II.html#%E6%80%9D%E8%B7%AF)ã€‚

ç®€å•è¯´ï¼Œå°±æ˜¯ fast ä¸€æ¬¡ä¸¤æ­¥ï¼Œslow ä¸€æ¬¡ä¸€æ­¥ã€‚

- åˆ¤æ–­æ˜¯å¦æœ‰ç¯ï¼ˆå›¾ä¸€ï¼‰ï¼šå¦‚æœ fast å’Œ slow ç›¸é‡ï¼Œå°±æ˜¯æœ‰ç¯ï¼›
- åˆ¤æ–­ç¯çš„å…¥å£ï¼ˆå›¾äºŒï¼‰ï¼šä»å¤´ç»“ç‚¹å‡ºå‘ä¸€ä¸ªæŒ‡é’ˆï¼Œä»ç›¸é‡èŠ‚ç‚¹ ä¹Ÿå‡ºå‘ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸¤ä¸ªæŒ‡é’ˆæ¯æ¬¡åªèµ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ é‚£ä¹ˆå½“è¿™ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡çš„æ—¶å€™å°±æ˜¯ ç¯å½¢å…¥å£çš„èŠ‚ç‚¹ã€‚

![av](./images/é“¾è¡¨.assets/008eGmZEly1goo4xglk9yg30fs0b6u0x.gif)

![ae](./images/é“¾è¡¨.assets/008eGmZEly1goo58gauidg30fw0bi4qr.gif)

```js
var detectCycle = function (head) {
  if (!head || !head.next || !head.next.next) return null;

  // åˆ¤æ–­ç¯å½¢
  let [slow, fast] = [head.next, head.next.next];  // â—ï¸æ³¨æ„ï¼Œè¿™é‡Œå…ˆèµ°ä¸€æ­¥ï¼Œä¸èƒ½ [head, head.next] è¿™æ ·ä¸ç®—å®Œæ•´çš„ä¸€æ­¥
  while (slow !== fast) { 
    if (!fast.next || !fast.next.next) return null;  // éå†åˆ°é“¾å°¾ï¼Œå½“å‰ç¯å½¢ä¸å­˜åœ¨
    slow = slow.next;
    fast = fast.next.next;
  }

  // åˆ¤æ–­å…¥å£ slow ä»å¤´èµ°ï¼Œ fast ä»äº¤ç‚¹å¾€åèµ°
  slow = head;
  while (slow !== fast) {
    slow = slow.next;
    fast = fast.next;
  }
  return slow;
};
```

























======= experience =============================================

é“¾è¡¨ã€å¸¦æœ‰ index æ“ä½œçš„é¢˜ï¼š

- åœ¨ iPad ä¸Šç®€å•çš„ç»˜åˆ¶æµç¨‹å›¾ï¼Œå’Œ codeï¼Œå¯ä»¥ä½¿è°ƒç†æ›´æ¸…æ™°ã€‚





======= summary 1 =============================================



Map å’Œ Set çš„åŒºåˆ«ï¼š

- Set å’Œ Array ç±»ä¼¼ï¼Œæ²¡æœ‰ keyï¼Œåªæœ‰ valueã€‚ä¸ array ä¸åŒçš„æ˜¯ï¼ŒSet çš„ key æ˜¯å”¯ä¸€çš„ã€‚
- Map å’Œ Object ç±»ä¼¼ï¼Œæœ‰ key å’Œ valueã€‚ä¸ Object ä¸åŒçš„æ˜¯ï¼ŒMap çš„ key ä¸ä»…ä»…æ˜¯ stringã€symbolï¼Œè¿˜å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚

> å…³äº Setã€Map çš„æ“ä½œ API å’Œ è¿­ä»£æ–¹å¼ï¼š
>
> - [MDN: Set](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set)
> - [MDN: Map](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Map)

è®°å½•å‡ ä¸ªç‰¹æ®Šçš„ï¼š

- è¿­ä»£é€šå¸¸ç”¨ `for ... of`ï¼ŒMap å’Œ Set ä½¿ç”¨æ–¹æ³•ç›¸åŒã€‚
  - `for (const key of myMap.keys()`ã€
  - `for (const value of myMap.values()`ã€
  - `for (const [key, value] of myMap.entries())`ã€
- å¢åŠ ä¸€ä¸ªæˆå‘˜æœ‰ä¸åŒï¼š`Map.set()`ã€`Set.add()`;



é—®ï¼šjs é‡Œé¢ Map å’Œ Set å­˜ / å–çš„æ—¶é—´å¤æ‚åº¦ï¼Ÿ

 `Map` å’Œ `Set` ä»…ä»…ä½œä¸º JS ä¸­çš„ç±»å‹å‡ºç°ï¼Œå¹¶æ²¡æœ‰æ‰€è°“çš„è§„èŒƒæºç ï¼Œå…¶å®ç°å®Œå…¨å–å†³äºå„å®¶æµè§ˆå™¨çš„ JS å¼•æ“æ€ä¹ˆåšã€‚

- è™½ç„¶æµè§ˆå™¨çš„å®ç°æ²¡æœ‰çº¦æŸï¼Œä½†æ˜¯å“ˆå¸Œè¡¨å¯ä»¥å®ç°O(1)å­˜å–æ—¶é—´å¤æ‚åº¦ï¼Œæµè§ˆå™¨æ²¡ç†ç”±å®ç°å¾—æ›´å·®å§ã€‚

- ä»¥ Chrome çš„ V8 å¼•æ“ä¸ºä¾‹ï¼Œå…¶æœ‰å…³ `Map` çš„æºç åœ¨ [https://github.com/v8/v8/blob...](https://link.segmentfault.com/?enc=VOONZO9qcluZT1Ws4xxVAg%3D%3D.oFaUjZbdWQT0MtBl9RVkX8NJZBe1wytP%2F7l7Qxyl7b9cImun9GrHIo2cghVzOHavnLx0N6uYIrWOKsTYoG4%2Bnw%3D%3D) ä¸­ï¼Œæ„Ÿå…´è¶£å¯ä»¥è‡ªå·±å»é˜…è¯»ã€‚ä¸»è¦è¿ç”¨çš„æ˜¯ Hash Tableï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚
- ç»¼ä¸Šï¼Œå¯ä»¥è®¤ä¸º map å’Œ set çš„å­˜å–æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚

**æˆ‘ä»¬é‡åˆ°äº†è¦å¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å‡ºç°é›†åˆé‡Œçš„æ—¶å€™ï¼Œå°±è¦è€ƒè™‘å“ˆå¸Œæ³•**ã€‚

Set å°±æ˜¯ä¸€ä¸ª hash tableã€‚

- ä»£ç éšæƒ³å½•ï¼š[å“ˆå¸Œè¡¨](https://programmercarl.com/%E5%93%88%E5%B8%8C%E8%A1%A8%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80.html#%E5%93%88%E5%B8%8C%E8%A1%A8)ã€‚
---
title: 9. åŠ¨æ€è§„åˆ’ï¼ˆ2ï¼‰
sidebar_position: 9.2
date: 2022-06-11
tags: [algorithm]
---

åŠ¨æ€è§„åˆ’ï¼ˆ2ï¼‰ä¸»è¦è®²äº†åŠ¨æ€è§„åˆ’çš„æ‰“å®¶åŠ«èˆç³»åˆ—ã€ä¹°å–è‚¡ç¥¨ç³»åˆ—



## 198. æ‰“å®¶åŠ«èˆ

- [198. æ‰“å®¶åŠ«èˆ](https://leetcode.cn/problems/house-robber/)
- 0613ï¼Œmidï¼Œquick
- åŠ¨æ€è§„åˆ’

#### æ–¹æ³•ä¸€ï¼šäºŒç»´dp

1. ç¡®å®šdp

`dp[i][j]` è¡¨ç¤ºå·çªƒåˆ°ç¬¬ i å·æˆ¿å±‹æ—¶çš„æ”¶ç›Š

- `dp[i][0]` è¡¨ç¤ºä¸å·çªƒ i å·æˆ¿å±‹
- `dp[i][1]` è¡¨ç¤ºå·çªƒ i å·æˆ¿å±‹

2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

- æƒ…å†µä¸€ï¼šå½“å‰ğŸ  i ä¸å·ï¼Œåˆ™ä¸Šä¸€ä¸ªæˆ¿å±‹å·ä¹Ÿè¡Œï¼Œä¸å·ä¹Ÿè¡Œï¼Œé€‰æ‹©æœ€å¤§æ”¶ç›Šï¼š`Math.max(dp[i - 1][1], dp[i - 1][0])`ã€‚
- æƒ…å†µäºŒï¼šå½“å‰ğŸ  i å·ï¼šåˆ™åªèƒ½æ˜¯ä¸Šä¸€ä¸ªæˆ¿å±‹ä¸å· => `dp[i - 1][0] + nums[i]`ã€‚

3. åˆå§‹åŒ–
4. éå†

```js
var rob = function (nums) {
  // dp[i][j] è¡¨ç¤ºå·çªƒåˆ°ç¬¬iå·æˆ¿å±‹æ—¶çš„æ”¶ç›Š
  // dp[i][0] è¡¨ç¤ºä¸å·çªƒiå·æˆ¿å±‹
  // dp[i][1] è¡¨ç¤ºå·çªƒiå·æˆ¿å±‹ã€‚
  const dp = Array.from(new Array(nums.length), () => new Array(2).fill(0));
  dp[0][1] = nums[0];

  for (let i = 1; i < nums.length; i++) {
    // iä¸å·ï¼šå‰ä¸€å¤©å·/ä¸å·çš„æœ€å¤§æ”¶ç›Š
    dp[i][0] = Math.max(dp[i - 1][1], dp[i - 1][0]);
    // iå·ï¼š[i-1] æ²¡å·ï¼Œåˆ™ièƒ½å·
    dp[i][1] = dp[i - 1][0] + nums[i];
  }
  // console.log(dp);
  return Math.max(dp[nums.length - 1][0], dp[nums.length - 1][1]);
};
```

#### æ–¹æ³•äºŒï¼šä¸€ç»´dp

1. ç¡®å®šdp

`dp[i]`ï¼šiï¼ˆåŒ…æ‹¬iï¼‰ä»¥å†…çš„æˆ¿å±‹ï¼Œæœ€å¤šå¯ä»¥å·çªƒçš„é‡‘é¢ä¸º`dp[i]`

2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹

æœ‰ä¸¤ç§æƒ…å†µï¼Œç¬¬ i æˆ¿é—´å·è¿˜æ˜¯ä¸å·ï¼š

- å·ç¬¬ i æˆ¿é—´ï¼Œé‚£ä¹ˆ `dp[i] = dp[i - 2] + nums[i]` ï¼Œå³ï¼šç¬¬i-1æˆ¿ä¸€å®šä¸èƒ½å·ï¼Œæœ€å¤šå·çªƒçš„é‡‘é¢ä¸º `dp[i-2]` +  ç¬¬ i æˆ¿é—´å·çš„é’±ã€‚
- ä¸å·ç¬¬ i æˆ¿é—´ï¼Œé‚£ä¹ˆ`dp[i] = dp[i - 1]`ï¼Œå³ï¼šè€ƒè™‘ i-1 æˆ¿å¯ä»¥å·ï¼Œæ”¶ç›Šæ˜¯ i-1æˆ¿çš„æœ€å¤§æ”¶ç›Šï¼ˆä¸ä¸€å®šå·äº† i - 1ï¼‰ã€‚

æœ€åï¼Œå–æœ€å¤§å€¼ï¼Œå³ `dp[i] = max(dp[i - 2] + nums[i], dp[i - 1])`ï¼›

3. åˆå§‹åŒ–

- `dp[0]` ä¸€å®šæ˜¯å·ï¼Œæ‰æœ‰æœ€å¤§æ”¶ç›Š nums[0]ï¼Œä¸å·çš„æ”¶ç›Šæ˜¯ 0ï¼›

0 `	dp[1]` å¦‚æœä¸å·ï¼Œæ”¶ç›Šæ˜¯ nums[0]ï¼›å¦‚æœå·ï¼Œæ”¶ç›Šæ˜¯ num[1]ã€‚å–æœ€å¤§å€¼ã€‚

```js
var rob = function (nums) {
  const dp = [];
  dp[0] = nums[0];
  dp[1] = Math.max(nums[0], nums[1]);

  for (let i = 2; i < nums.length; i++) {
    // ä¸å· + å·
    dp[i] = Math.max(dp[i - 1], dp[i - 2] + nums[i]);
  }
  // console.log(dp);
  return dp[nums.length - 1];
};
```

#### æ–¹æ³•ä¸‰ï¼šä¸€ç»´dpï½œæ»šåŠ¨æ•°ç»„

å› ä¸º `dp[i]` åªè¢« `i-1` å’Œ`i-2` å½±å“ï¼Œæ‰€ä»¥è®¾ç½®ä¸€ä¸ªé•¿åº¦ä¸º 2 çš„ dp å³å¯ã€‚

æ³¨æ„ï¼šå› ä¸º return çš„ dp ä» dp[length - 1] ä¿®æ”¹ä¸º å›ºå®šçš„ dp[1]ï¼Œæ‰€ä»¥æ³¨æ„ nums é•¿åº¦ä¸º 1 çš„æƒ…å†µã€‚åœ¨å¼€å¤´åˆ¤æ–­ç‰¹ä¾‹ã€‚

```js
var rob = function (nums) {
  if (nums.length === 1) return nums[0];
  const dp = [nums[0], Math.max(nums[0], nums[1])];

  for (let i = 2; i < nums.length; i++) {
    const profit = Math.max(dp[1], dp[0] + nums[i]); // ä¸å· + å·
    [dp[0], dp[1]] = [dp[1], profit];
  }
  return dp[1];
};
```



## 213. æ‰“å®¶åŠ«èˆ II

- [213. æ‰“å®¶åŠ«èˆ II](https://leetcode.cn/problems/house-robber-ii/)
- 0613ï¼Œmidï¼Œanswer
- åŠ¨æ€è§„åˆ’

#### æ–¹æ³•ä¸€ï¼šä¸€ç»´dp

æ ¹æ®åˆ†æé¢˜æ„ï¼Œå¯ä»¥æ‹†åˆ†å‡ºä¸¤ç§æƒ…å†µï¼š

- å¦‚æœğŸ  1 å·çªƒäº†ï¼Œæœ€åä¸€ä¸ªæˆ¿å±‹å°±ä¸èƒ½å·çªƒï¼Œåˆ¤æ–­å·çªƒçš„æˆ¿å±‹èŒƒå›´æ˜¯ï¼š`[0, len - 1]`ï¼›
- å¦‚æœğŸ  1 ä¸å·çªƒï¼Œæœ€åä¸€ä¸ªæˆ¿å±‹å°±ä¸å—å½±å“ï¼Œæ­£å¸¸å¯å·ã€‚åˆ¤æ–­å·çªƒçš„æˆ¿å±‹èŒƒå›´æ˜¯ï¼š`[1, len]`ï¼›

åˆ™å®šåˆ¶ä¸ªæ–¹æ³• robbingï¼Œå…¥å‚ startï¼Œlenã€‚ç”¨æ¥è¡¨ç¤ºéå†çš„æˆ¿å±‹èŒƒå›´ã€‚

æœ€åç»“æœè¿”å›ä¸¤ä¸ª case çš„è¾ƒå¤§å€¼ã€‚

```js
var rob = function (nums) {
  // ç‰¹ä¾‹ï¼š
  if (nums.length === 1) return nums[0];
  // æƒ…å†µä¸€ï¼šå¦‚æœç¬¬ä¸€ä¸ªè¢«å·ï¼Œæœ€åä¸€ä¸ªä¸èƒ½å·ï¼Œå‰ä¸€ä¸ªå¯ä»¥å·ï¼Œæˆ¿å±‹èŒƒå›´ï¼š[0, len - 1]
  const case1 = robbing(0, nums.length - 1);
  // æƒ…å†µäºŒï¼šå¦‚æœç¬¬ä¸€ä¸ªæ²¡å·ï¼Œæœ€åä¸€ä¸ªå¯ä»¥å·ï¼Œæˆ¿å±‹èŒƒå›´ï¼š[1, len - 2]
  const case2 = robbing(1, nums.length);
  return Math.max(case1, case2);

  function robbing(start, len) {
    // åœ¨[start, len]è¿™ä¸ªèŒƒå›´å†…å·çªƒï¼Œè€Œä¸æ˜¯ä¹‹å‰çš„[0, len]
    const dp = [];
    // åˆå§‹åŒ–
    dp[start] = nums[start];
    dp[start + 1] = Math.max(nums[start], nums[start + 1]);

    for (let i = start + 2; i < len; i++) {
      dp[i] = Math.max(dp[i - 1], dp[i - 2] + nums[i]); // ä¸å· + å·
    }
    return dp[len - 1];
  }
};
```

#### æ–¹æ³•äºŒï¼šä¸€ç»´dpï½œæ»šåŠ¨æ•°ç»„

è¿™é“é¢˜å½“ç„¶ä¹Ÿå¯ä»¥ç”¨æ»šåŠ¨æ•°ç»„ï¼Œå¯¹ robbing ç¨åŠ æ”¹åŠ¨å³å¯ï¼š

- æ³¨æ„ç‰¹ä¾‹è¦å¯¹ nums.length === 2 æ—¶åˆ¤æ–­ã€‚

```js
var rob = function (nums) {
  // ç‰¹ä¾‹ï¼š
  if (nums.length === 1) return nums[0];
  if (nums.length === 2) return Math.max(nums[0], nums[1]);
  // æƒ…å†µä¸€ï¼šå¦‚æœç¬¬ä¸€ä¸ªè¢«å·ï¼Œæœ€åä¸€ä¸ªä¸èƒ½å·ï¼Œæˆ¿å±‹èŒƒå›´ï¼š[0, len - 1]
  const case1 = robbing(0, nums.length - 1);
  // æƒ…å†µäºŒï¼šå¦‚æœç¬¬ä¸€ä¸ªæ²¡å·ï¼Œæœ€åä¸€ä¸ªå¯ä»¥å·ï¼Œæˆ¿å±‹èŒƒå›´ï¼š[1, len - 2]
  const case2 = robbing(1, nums.length);
  return Math.max(case1, case2);

  function robbing(start, len) {
    const dp = [nums[start], Math.max(nums[start], nums[start + 1])];

    for (let i = start + 2; i < len; i++) {
      const profit = Math.max(dp[1], dp[0] + nums[i]); // ä¸å· + å·
      dp[0] = dp[1];
      dp[1] = profit;
    }
    return dp[1];
  }
};
```



## 337. æ‰“å®¶åŠ«èˆ III

- [337. æ‰“å®¶åŠ«èˆ III](https://leetcode.cn/problems/house-robber-iii/)
- 0613ï¼Œmidï¼Œ
- è®°å¿†åŒ–é€’å½’ï¼ŒåŠ¨æ€è§„åˆ’



æ ‘çš„é€’å½’ï¼Œæ˜¯è‡ªä¸‹è€Œä¸Šå»åšç»Ÿè®¡çš„ã€‚

æ¯”å¦‚åˆ¤æ–­æŸä¸ªèŠ‚ç‚¹ A çš„æœ€å¤§æ”¶ç›Šï¼Œæ˜¯åˆ¤æ–­ A å·²ç»è¿å¸¦å®ƒçš„å­©å­ã€å­™å­ ... çš„æœ€å¤§æ”¶ç›Šï¼Œæ‰€ä»¥ï¼š

- å¶å­ç»“ç‚¹çš„æœ€å¤§æ”¶ç›Šå°±æ˜¯è‡ªèº« `node.val`ï¼›
- ç©ºèŠ‚ç‚¹æ²¡æœ‰æ”¶ç›Šï¼Œæ”¶ç›Šå€¼ä¸º `0`ï¼›

è¿™å’Œä¼ ç»Ÿçš„ `dp` ä»å‰å¾€åå åŠ æ”¶ç›Šä¸åŒï¼Œæ˜¯ä»åº•å‘ä¸Šå åŠ æ”¶ç›Šã€‚



#### æ–¹æ³•ä¸€ï¼šè®°å¿†åŒ–é€’å½’

å¯¹äºŒå‰æ ‘è€ƒè™‘ dfs é€’å½’ã€‚

- ä½¿ç”¨ååºéå†ã€‚ é€šè¿‡é€’å½’å‡½æ•°çš„è¿”å›å€¼æ¥åšä¸‹ä¸€æ­¥è®¡ç®—ã€‚å³ï¼šå…ˆè·å¾—äº†å·¦å³å­©å­çš„å€¼ï¼Œè‡ªèº«çš„å€¼æ‰èƒ½ç¡®å®šã€‚

1. çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

å½“éå†åˆ°æŸä¸ªèŠ‚ç‚¹æ—¶ï¼Œæœ‰ä¸¤ä¸ª caseï¼š

- case1ï¼šå·å½“å‰èŠ‚ç‚¹çš„æˆ¿å­ï¼Œåˆ™æ”¶ç›Šä¸ºï¼šå½“å‰æˆ¿å±‹çš„æ”¶ç›Š + å·¦å³å­©å­å„è‡ªå­©å­çš„æ”¶ç›Šï¼ˆè·³è¿‡å·¦å³ä¸¤ä¸ªå­©å­ï¼Œçœ‹å››ä¸ªå­™å­ï¼‰ï¼›
- case2ï¼šä¸å·å½“å‰èŠ‚ç‚¹çš„æˆ¿å­ï¼Œåˆ™æ”¶ç›Šä¸ºï¼šå·¦å³å­©å­çš„æ”¶ç›Šï¼ˆè·³è¿‡è‡ªèº«æ”¶ç›Šï¼Œçœ‹ä¸¤ä¸ªå­©å­ï¼‰ï¼›

æœ€åå½“å‰èŠ‚ç‚¹çš„æœ€ä½³æ”¶ç›Šï¼š`Math.max(case1, case2)`ã€‚

2. è®°å¿†åŒ–é€’å½’ï¼šç”¨ map ç»“æ„æ¥å­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹è®¡ç®—çš„æ”¶ç›Šï¼Œé˜²æ­¢é‡å¤è®¡ç®—ã€‚

- ä¸ºä»€ä¹ˆä¼šé‡å¤è®¡ç®—ï¼Ÿ

- å› ä¸ºè¿™ä¸æ˜¯ä¼ ç»Ÿçš„å…ˆåºã€ä¸­åºã€ååºéå†ã€‚

  éå†é“å½“å‰èŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬ä¼šç›´æ¥éå†å…¶ 2 ä¸ªå­©å­èŠ‚ç‚¹ +  4 ä¸ªå­™å­èŠ‚ç‚¹ï¼›è€Œéå†åˆ°å·¦å­©å­èŠ‚ç‚¹æ—¶ï¼Œä¹Ÿä¼šéå†å®ƒçš„ä¸¤ä¸ªå­©å­ï¼Œä¹Ÿå°±æ˜¯å½“å‰èŠ‚ç‚¹çš„å­™å­èŠ‚ç‚¹ï¼Œè¿™å°±å‘ç”Ÿäº†é‡å¤ã€‚

```js
var rob = function (root) {
  const map = new Map();
  return dfs(root);

  //  è¡¨è¾¾å½“å‰nodeèŠ‚ç‚¹è¿”å›çš„æ”¶ç›Š
  function dfs(node) {
    if (node === null) return 0 // éå†åˆ°å¤´ï¼Œæ²¡æœ‰èŠ‚ç‚¹äº†ï¼Œè¿”å›æ”¶ç›Š0
    if (map.has(node)) return map.get(node); // å¦‚æœmapå·²ç»ä¿å­˜è¯¥å€¼ï¼Œåˆ™ç›´æ¥è¿”å›
    // å·è‡ªèº«ï¼Œè·³è¿‡å·¦å³å­èŠ‚ç‚¹ï¼Œç›´æ¥è·å¾—å·¦å³å­©å­çš„å­©å­è¿”å›çš„æ”¶ç›Š
    let profit1 = node.val;
    if (node.left) profit1 += dfs(node.left.left) + dfs(node.left.right);
    if (node.right) profit1 += dfs(node.right.left) + dfs(node.right.right);
    // å·å­èŠ‚ç‚¹ï¼Œè·³è¿‡è‡ªèº«ï¼Œè·å¾—å·¦å³å­©å­è¿”å›çš„æ”¶ç›Š
    let profit2 = dfs(node.left) + dfs(node.right);
    map.set(node, Math.max(profit1, profit2));
    return map.get(node);
  }
};
```

#### æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’

**ç›¸æ¯”è®°å¿†åŒ–é€’å½’çš„å¥½å¤„ï¼š**

é¿å…é‡å¤è®¡ç®—èŠ‚ç‚¹ã€‚å› ä¸ºåŠ¨æ€è§„åˆ’æ€æƒ³çš„é€’å½’ï¼Œå¹¶æ²¡æœ‰è·³è¿‡ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œæ˜¯å®Œå…¨æ­£å¸¸çš„æŒ‰åºååºéå†ã€‚

- ä¸ºä»€ä¹ˆå¯ä»¥ä¸ç”¨è·³è¿‡ï¼Ÿ
- å› ä¸ºæ¯æ¬¡é€’å½’çš„è¿”å›å€¼éƒ½æ˜¯ä¸¤ç§æƒ…å†µï¼šå·å’Œä¸å·ã€‚æ‰€ä»¥å½“å‰èŠ‚ç‚¹æ‹¿åˆ°å­©å­èŠ‚ç‚¹çš„è¿”å›å€¼ï¼Œæ ¹æ®è‡ªå·± case çš„è¦æ±‚ï¼Œè·å–ç›¸åº”çš„æ•°å€¼å°±å¯ä»¥ã€‚
  - æ¯”å¦‚åœ¨è®°å¿†åŒ–é€’å½’ä¸­ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹é€‰æ‹©ä¸å·ï¼Œé‚£ä¹ˆè¦è·³è¿‡å­©å­ï¼Œè·å–å››ä¸ªå­™å­çš„æœ€å¤§æ”¶ç›Šã€‚
  - è€Œåœ¨åŠ¨æ€è§„åˆ’ä¸­ï¼Œå¦‚æœå½“å‰å½“å‰èŠ‚ç‚¹é€‰æ‹©ä¸å·ï¼Œä¸éœ€è¦è·³è¿‡ï¼Œç›´æ¥é€‰æ‹©å­©å­èŠ‚ç‚¹ä¸­ä¸å·çš„ç»“æ„å³å¯ `dp[0]`ã€‚

**æ€è·¯ï¼š**

å¯¹æ ‘ç»“æ„çš„åŠ¨æ€è§„åˆ’ï¼Œè¦ç»“åˆäºŒå‰æ ‘ + åŠ¨æ€è§„åˆ’çš„è§£é¢˜æ–¹æ³•ï¼š

- é€’å½’ä¸‰éƒ¨æ›²ï¼šç¡®å®šé€’å½’å‡½æ•°ï¼ˆå…¥å‚ / å‡ºå‚ï¼‰ã€ç¡®å®šç»ˆæ­¢æ¡ä»¶ã€ç¡®å®šéå†é¡ºåº

- åŠ¨å½’äº”éƒ¨æ›²ï¼šç¡®å®š dp å«ä¹‰ã€ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€ç¡®å®š dp åˆå§‹åŒ–ã€ç¡®å®šéå†æ¡ä»¶ã€æ‰‹åŠ¨dpä¸€ä¸ªæ¡ˆä¾‹éªŒè¯

1. **ç¡®å®šï¼šé€’å½’å‡½æ•°ï¼ˆå…¥å‚ / å‡ºå‚ï¼‰+ dp å«ä¹‰**

å¯¹æ¯ä¸ªèŠ‚ç‚¹ï¼ˆæˆ¿å±‹ï¼‰æœ‰å· / ä¸å· ä¸¤ä¸ª caseï¼Œåˆ™é€’å½’è¿”å›å€¼åº”å½“æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 2 çš„æ•°ç»„ï¼š`[å·ï¼Œä¸å·]`ï¼Œåˆ†åˆ«æ˜¯å·å’Œä¸å·çš„æœ€å¤§æ”¶ç›Šã€‚

- `dp[0]`ï¼šå½“å‰èŠ‚ç‚¹ä¸å·çš„æœ€å¤§æ”¶ç›Šï¼›
- `dp[1]`ï¼šå½“å‰èŠ‚ç‚¹å·çš„æœ€å¤§æ”¶ç›Šã€‚

è¿™å…¶å®æ˜¯ä¸€ä¸ªäºŒç»´ dpï¼Œè°ƒç”¨æ ˆä¸­çš„æ¯ä¸ªå‡½æ•°éƒ½ä¼šç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º 2 çš„æ•°ç»„ã€‚è¿™ç›¸å½“äº `dp[i][0]` å’Œ `dp[i][1]`ã€‚

2. **ç¡®å®šç»ˆæ­¢æ¡ä»¶**

é‡åˆ°ç©ºèŠ‚ç‚¹åˆ™è¾¾åˆ°è¾¹ç•Œï¼Œè¿”å› 0ã€‚

```js
if (node == NULL) return [0, 0];
```

3. **ç¡®å®šéå†é¡ºåº**

ååºéå†ã€‚é€šè¿‡é€’å½’å‡½æ•°çš„è¿”å›å€¼æ¥åšä¸‹ä¸€æ­¥è®¡ç®—ã€‚

- å·¦ã€å³ã€æ ¹

4. **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**

```js
// ååºéå†ï¼šè·å–å·¦å³èŠ‚ç‚¹å·/ä¸å·çš„æ”¶ç›Š
const left = dfs(node.left);
const right = dfs(node.right);
const val = node.val;
// ä¸å·å½“å‰èŠ‚ç‚¹ï¼šå·¦å³å­©å­éƒ½èƒ½å·ï¼Œåˆ†åˆ«å–ä»–ä»¬çš„è¾ƒå¤§å€¼
const profit1 = Math.max(left[0], left[1]) + Math.max(right[0], right[1]);
// å·å½“å‰èŠ‚ç‚¹ï¼šval
const profit2 = val + left[0] + right[0];
return [profit1, profit2];
```

å¾—ä»£ç ï¼š

```js
var rob = function (root) {
  const [profit1, profit2] = dfs(root);
  return Math.max(profit1, profit2);

  // è¡¨è¾¾å½“å‰nodeèŠ‚ç‚¹è¿”å›çš„æ”¶ç›Š
  function dfs(node) {
    if (node === null) return [0, 0];
    // ååºéå†ï¼šè·å–å·¦å³èŠ‚ç‚¹å·/ä¸å·çš„æ”¶ç›Š
    const left = dfs(node.left);
    const right = dfs(node.right);
    const val = node.val;
    // ä¸å·å½“å‰èŠ‚ç‚¹ï¼šå·¦å³å­©å­éƒ½èƒ½å·ï¼Œåˆ†åˆ«å–ä»–ä»¬çš„è¾ƒå¤§å€¼
    const profit1 = Math.max(left[0], left[1]) + Math.max(right[0], right[1]);
    // å·å½“å‰èŠ‚ç‚¹ï¼šval
    const profit2 = val + left[0] + right[0];
    return [profit1, profit2];
  }
};
```



![è‚¡ç¥¨é—®é¢˜æ€»ç»“](images/åŠ¨æ€è§„åˆ’2.assets/123.jpg)

## 121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº

- [121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/)

- 0613ï¼Œeasyï¼Œnormal

#### æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ

ç»“æœä¸ºï¼šå³ä¾§æœ€å¤§å€¼ - å·¦ä¾§æœ€å°å€¼ã€‚æœ€å¤§å€¼çš„ä¸‹æ ‡åº”æ¯”æœ€å°å€¼çš„ä¸‹æ ‡é å³ã€‚

- `low` ä¸€ç›´è·å–æ›´é å·¦ä¾§çš„æœ€å°å€¼ï¼›
- `result` ä¸æ–­è®¡ç®—å½“å‰å€¼ - å½“å‰æœ€å°å€¼çš„æ”¶ç›Šã€‚

```js
var maxProfit = function (prices) {
  // è´ªå¿ƒï¼šè·å–æœ€å°å€¼å’Œæœ€å¤§å€¼
  let result = 0;
  let low = prices[0];
  for (let i = 0; i < prices.length; i++) {
    low = Math.min(prices[i], low);
    result = Math.max(result, prices[i] - low);
  }
  return result;
};
```

#### æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’ï½œæ»šåŠ¨æ•°ç»„

ç”¨äºŒç»´ `dp[i][j]` è®°å½•ï¼š

- `dp[i][0]`ï¼šå½“å‰ i ä»·æ ¼ä¸æŒæœ‰è‚¡ç¥¨ï¼›
- `dp[i][1]`ï¼šå½“å‰ i ä»·æ ¼æŒæœ‰è‚¡ç¥¨ï¼›

æ³¨æ„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

- ä¸æŒæœ‰ï¼šå¦‚æœå‰ä¸€å¤©ä¸æŒæœ‰ï¼Œå°±ä¿æŒä¸å˜ï¼›å¦‚æœå‰ä¸€å¤©æŒæœ‰ï¼Œå°±å½“å‰å–å‡ºï¼Œè·å¾—æ”¶ç›Šã€‚
  - `Math.max(dp[0], dp[1] + prices[i]);`
- æŒæœ‰ï¼šå¦‚æœä¸€ç›´ä¸æŒæœ‰ï¼Œåˆ™å½“å‰ **ç¬¬ä¸€æ¬¡** å½“å‰ä¹°å…¥ï¼›å¦‚æœå‰ä¸€å¤©æŒæœ‰ï¼Œåˆ™ä¿æŒä¸å˜
  - `Math.max(-prices[i], dp[1]);`
  - æ³¨æ„ï¼šè¿™é‡Œä¸€å®šæ˜¯ç¬¬ä¸€æ¬¡ä¹°å…¥ï¼Œå› ä¸ºé¢˜ç›®ä¸­è¦æ±‚åªèƒ½æœ‰ä¸€æ¬¡ä¹°å…¥ï¼Œæ‰€ä»¥å¦‚æœåœ¨å½“å‰ä»·æ ¼ä¹°å…¥ï¼Œé‚£æ”¶ç›Šä¸€å®šæ˜¯ `-prices[i]`ï¼Œä¹‹å‰ä¸€å®šæ²¡æœ‰è¿›è¡Œè¿‡ä»»ä½•äº¤æ˜“ã€‚

è¿™é‡Œç›´æ¥æŠŠäºŒç»´æ•°ç»„ä¼˜åŒ–ä¸ºé•¿åº¦ä¸º 2 çš„æ»šåŠ¨æ•°ç»„ï¼š

```js
var maxProfit = function (prices) {
  // å½“å‰iä»·æ ¼ï¼šdp[i][0]ä¸æŒæœ‰è‚¡ç¥¨, dp[i][1]æŒæœ‰è‚¡ç¥¨
  const dp = [0, -prices[0]];
  for (let i = 1; i < prices.length; i++) {
    // ä¸æŒæœ‰:å‰ä¸€å¤©ä¸æŒæœ‰,ä¿æŒä¸å˜ + å‰ä¸€å¤©æŒæœ‰,å½“å‰å–å‡º,è·å¾—æ”¶ç›Š
    const unhold = Math.max(dp[0], dp[1] + prices[i]);
    // æŒæœ‰:ä¸€ç›´ä¸æŒæœ‰,å½“å‰ä¹°å…¥ + å‰ä¸€å¤©æŒæœ‰,ä¿æŒä¸å˜
    const hold = Math.max(-prices[i], dp[1]);
    dp[0] = unhold;
    dp[1] = hold;
  }
  return dp[0];
};
```



## 122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II

- [122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/)
- 0613ï¼Œmidï¼Œquick
- åŠ¨æ€è§„åˆ’

#### æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ï½œæ»šåŠ¨æ•°ç»„

å¦‚æœæƒ³çœ‹ä¼ ç»Ÿçš„äºŒç»´dpè§£æï¼Œè§ï¼šè´ªå¿ƒç« èŠ‚ä¸­å¯¹è¯¥é¢˜çš„è§£ç­”ã€‚

ä¸ä¸Šä¸€é¢˜ç›¸æ¯”ï¼Œå¯ä»¥å¤šæ¬¡ä¹°å–ï¼Œæ¯æ¬¡æ˜¯å¦æŒæœ‰å‘ç”Ÿæ”¹å˜ï¼Œéƒ½éœ€è¦å‚è€ƒä¸Šä¸€æ¬¡ï¼ˆ`dp[i-1]`ï¼‰ çš„å€¼ã€‚

è¿™é‡Œç›´æ¥æŠŠäºŒç»´æ•°ç»„ä¼˜åŒ–ä¸ºé•¿åº¦ä¸º 2 çš„æ»šåŠ¨æ•°ç»„ï¼š

```js
var maxProfit = function (prices) {
  // dp[i][0] è¡¨ç¤ºç¬¬iå¤©ä¸æŒæœ‰
  // dp[i][1] è¡¨ç¤ºç¬¬iå¤©æŒæœ‰
  const dp = [0, -prices[0]];
  for (let i = 0; i < prices.length; i++) {
    // ä¸æŒæœ‰ï¼šä¹‹å‰ä¸æŒæœ‰ï¼›ä¹‹å‰æŒæœ‰ï¼Œå–å‡º
    const unhold = Math.max(dp[0], dp[1] + prices[i]);
    // æŒæœ‰ï¼šä¹‹å‰ä¸æŒæœ‰ï¼Œä¹°å…¥ï¼›ä¹‹å‰æŒæœ‰
    const hold = Math.max(dp[0] - prices[i], dp[1]);
    dp[0] = unhold;
    dp[1] = hold;
  }
  return dp[0];
};
```



## 123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III

- [123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/)
- 0613ï¼Œhardï¼Œanswer
- åŠ¨æ€è§„åˆ’

æœ¬é¢˜å¯æœ€å¤šäº¤æ˜“2æ¬¡ï¼Œè¿™æ„å‘³ç€å¯ä»¥æœ‰ 1ï½2 æ¬¡äº¤æ˜“ï¼Œå…ˆä»çŠ¶æ€æœºè§’åº¦åˆ†æè¿™äº”ç§çŠ¶æ€ï¼š

- æ²¡æœ‰ä»»ä½•ä¹°å…¥ / å–å‡ºè¡Œä¸ºï¼ŒçŠ¶æ€ä¸€ï¼šä¸æŒæœ‰è‚¡ç¥¨ï¼š`dp[i][0]`

- ç¬¬ä¸€æ¬¡ä¹°å…¥ ===> çŠ¶æ€äºŒï¼ŒæŒæœ‰ç¬¬ä¸€æ”¯è‚¡ç¥¨ï¼š`dp[i][1]`
- ç¬¬ä¸€æ¬¡å–å‡º ===> çŠ¶æ€ä¸‰ï¼Œä¸æŒæœ‰è‚¡ç¥¨ï¼š`dp[i][2]`
- ç¬¬äºŒæ¬¡ä¹°å…¥ ===> çŠ¶æ€å››ï¼ŒæŒæœ‰ç¬¬äºŒæ”¯è‚¡ç¥¨ï¼š`dp[i][3]`
- ç¬¬äºŒæ¬¡å–å‡º ===> çŠ¶æ€äº”ï¼Œä¸æŒæœ‰è‚¡ç¥¨ï¼š`dp[i][4]`

1. å®šä¹‰ dp

æ‰€ä»¥ï¼Œä»ä¸Šé¢é¡ºä¾¿ä¹Ÿå®šä¹‰äº† dp çš„å«ä¹‰ï¼š`dp[i][j]` è¡¨ç¤ºå½“è‚¡ç¥¨ä»·æ ¼ä¸º i æ—¶çš„çŠ¶æ€ã€‚

2. åˆå§‹åŒ–ï¼š

- `dp[0][0]` æ²¡æœ‰ä»»ä½•äº¤æ˜“ï¼Œä¸€å®šä¸º 0ï¼›
- `dp[0][1]` è´­å…¥ç¬¬ä¸€æ”¯è‚¡ç¥¨ï¼Œæ”¶ç›Šä¸º `-prices[i]`
- `dp[0][2]` å‡ºå”®ç¬¬ä¸€æ”¯è‚¡ç¥¨ï¼Œå¯ä»¥æƒ³è±¡ä¸ºå½“å¤©ä¹°å½“å¤©å–ï¼Œæ”¶ç›Š 0ï¼›
- `dp[0][3]` è´­å…¥ç¬¬äºŒæ”¯è‚¡ç¥¨ï¼Œæƒ³è±¡ä¸ºå½“å¤©ä¹°å–äº†ç¬¬ä¸€æ”¯ï¼Œæ”¶ç›Š 0 ï¼Œä¹°å…¥ç¬¬äºŒæ”¯æ”¶ç›Šä¸º `-prices[i]`
- `dp[0][4]` å‡ºå”®ç¬¬äºŒæ”¯è‚¡ç¥¨ï¼Œå½“å¤©ä¹°çš„å½“å¤©å–ï¼Œæ”¶ç›Š 0ã€‚

```js
var maxProfit = function (prices) {
  const dp = Array.from(new Array(prices.length), () => new Array(5).fill(0));
  dp[0][1] = -prices[0];
  dp[0][3] = -prices[0];

  for (let i = 1; i < prices.length; i++) {
    // æ²¡æœ‰ä¹°å–
    dp[i][0] = dp[i - 1][0];
    // æŒæœ‰ç¬¬ä¸€æ”¯è‚¡ç¥¨:ä»¥å‰æŒæœ‰ + åˆšæŒæœ‰
    dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i]);
    // å·²å‡ºå”®ç¬¬ä¸€æ”¯è‚¡ç¥¨:ä»¥å‰å‡ºå”® + åˆšå‡ºå”®
    dp[i][2] = Math.max(dp[i - 1][2], dp[i - 1][1] + prices[i]);
    // æŒæœ‰ç¬¬äºŒæ”¯
    dp[i][3] = Math.max(dp[i - 1][3], dp[i - 1][2] - prices[i]);
    // å·²å‡ºå”®ç¬¬äºŒæ”¯
    dp[i][4] = Math.max(dp[i - 1][4], dp[i - 1][3] + prices[i]);
  }
  return dp[prices.length-1][4];
};
```

#### æ–¹æ³•äºŒï¼šä¸€ç»´dpï½œæ»šåŠ¨æ•°ç»„

1. å½“å‰æ—¶é—´ i çš„æ”¶ç›Šåªå—ä¸Šä¸€ä¸ªæ—¶é—´ i - 1çš„å½±å“ï¼Œæ‰€ä»¥å¯ä»¥ä¼˜åŒ–ä¸ºæ»šåŠ¨æ•°ç»„ã€‚
2. åŒæ—¶å¯ä»¥çœç•¥æƒ…å†µä¸€ï¼Œå› ä¸ºæœ€å¼€å§‹æ²¡æœ‰ä¹°å–ï¼Œæ”¶ç›Šä¸€å®šæ˜¯ä¸€ç›´ä¸º 0 çš„ã€‚

```js
var maxProfit = function (prices) {
  let dp = new Array(4).fill(0);
  dp[0] = -prices[0];
  dp[2] = -prices[0];

  for (let i = 1; i < prices.length; i++) {
    // æŒæœ‰ç¬¬ä¸€æ”¯è‚¡ç¥¨:ä»¥å‰æŒæœ‰ + åˆšæŒæœ‰
    const r0 = Math.max(dp[0], -prices[i]);
    // å·²å‡ºå”®ç¬¬ä¸€æ”¯è‚¡ç¥¨:ä»¥å‰å‡ºå”® + åˆšå‡ºå”®
    const r1 = Math.max(dp[1], dp[0] + prices[i]);
    // æŒæœ‰ç¬¬äºŒæ”¯
    const r2 = Math.max(dp[2], dp[1] - prices[i]);
    // å·²å‡ºå”®ç¬¬äºŒæ”¯
    const r3 = Math.max(dp[3], dp[2] + prices[i]);
    dp = [r0, r1, r2, r3];
  }
  return dp[3];
};
```



## 188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV

- [188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/)
- 0614ï¼Œhardï¼Œquick
- åŠ¨æ€è§„åˆ’

#### æ–¹æ³•ä¸€ï¼šäºŒç»´dpæ•°ç»„

æ€è·¯å…¶å®å°±æ˜¯ï¼ˆ123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIIï¼‰çš„å»¶ä¼¸ï¼š

- å¦‚æœæ˜¯ä¸¤æ¬¡äº¤æ˜“ `dp[i][j]` ä¸­ï¼Œj çš„é•¿åº¦å°±æ˜¯ 5ï¼›
- å¦‚æœæ˜¯ k æ¬¡äº¤æ˜“ï¼Œé‚£ j çš„é•¿åº¦å°±æ˜¯ 2 * k + 1ï¼›

å€’åºï¼š

- å› ä¸º `dp[j]` å—åˆ° `dp[j-1]` çš„å½±å“ï¼Œæ‰€ä»¥å¦‚æœ j ä»å‰å¾€åéå†ï¼Œå°±ä¼šå½±å“åˆ°å‰ä¸€ä½çš„ `dp[j-1]` ï¼Œé‚£ä¹ˆ j ä»åå¾€å‰éå†å¹¶æ›´æ–°å€¼å³å¯ã€‚

```js
var maxProfit = function (k, prices) {
  if (prices.length <= 1) return 0;
  let dp = new Array(k * 2 + 1).fill(0);

  // ç¬¬0æ¬¡ä¸ä¹°ä¸å–ï¼Œå¥‡æ•°æŒæœ‰ï¼Œå¶æ•°ä¸æŒæœ‰
  for (let i = 1; i <= k * 2; i++)
    if (i % 2) dp[i] = -prices[0];

  for (let i = 1; i < prices.length; i++) {
    for (let j = k * 2; j >= 1 ; j--) { // å€’åº
      dp[j] = j % 2
      	? Math.max(dp[j], dp[j - 1] - prices[i])  // ç¬¬xæ¬¡æŒæœ‰ï¼šä»¥å‰æŒæœ‰ + åˆšä¹°å…¥
      	: Math.max(dp[j], dp[j - 1] + prices[i])  // ç¬¬xæ¬¡ä¸æŒæœ‰ï¼šä»¥å‰ä¸æŒæœ‰ + åˆšå–å‡º
    }
  }
  return dp[k * 2];
};
```

#### æ–¹æ³•äºŒï¼šä¸€ç»´dpæ•°ç»„

```js
var maxProfit = function (k, prices) {
  if (prices.length <= 1) return 0;

  let dp = new Array(k * 2 + 1).fill(0);

  // ç¬¬0æ¬¡ä¸ä¹°ä¸å–ï¼Œå¥‡æ•°æŒæœ‰ï¼Œå¶æ•°ä¸æŒæœ‰
  for (let i = 1; i <= k * 2; i++)
    if (i % 2) dp[i] = -prices[0];

  for (let i = 1; i < prices.length; i++) {
    const newdp = new Array(k * 2 + 1).fill(0);
    for (let j = 1; j <= k * 2; j++) {
      newdp[j] = j % 2
      	? Math.max(dp[j], dp[j - 1] - prices[i])  // ç¬¬xæ¬¡æŒæœ‰ï¼šä»¥å‰æŒæœ‰ + åˆšä¹°å…¥
      	: Math.max(dp[j], dp[j - 1] + prices[i])  // ç¬¬xæ¬¡ä¸æŒæœ‰ï¼šä»¥å‰ä¸æŒæœ‰ + åˆšå–å‡º
    }
    dp = [...newdp];
  }
  return dp[k * 2];
};
```



## 309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ

- [309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/)
- 0614ï¼Œmidï¼Œanswer
- åŠ¨æ€è§„åˆ’

æ€è·¯ï¼šé‡ç‚¹æ˜¯è¦æŠŠè¿™å‡ ä¸ªçŠ¶æ€åˆ†ææ¸…æ¥šï¼Œè¦æŠŠå†·å†»æœŸè€ƒè™‘åœ¨çŠ¶æ€è½¬ç§»çš„ç±»å‹å†…ã€‚

1. çŠ¶æ€è½¬ç§»æ–¹ç¨‹

- case1ï¼šæŒæœ‰è‚¡ç¥¨ï¼ˆä¸€ç›´æŒæœ‰ / åˆšä¹°å…¥(å‰ä¸€å¤©æ˜¯å†·å†»æœŸï¼Œå‰ä¸€å¤©å·²ç»è¿‡äº†å†·å†»æœŸ)ï¼‰ï¼›
- case2ï¼šä¸€ç›´ä¸æŒæœ‰è‚¡ç¥¨ï¼Œè¿‡äº†å†·å†»æœŸ(ä¿æŒä¸å˜ï¼Œå‰ä¸€å¤©æ˜¯å†·å†»æœŸ)
- case4ï¼šåˆšä¸æŒæœ‰è‚¡ç¥¨ï¼Œå–å‡º
- case3ï¼šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå‰ä¸€å¤©åˆšå–å‡ºï¼Œè¿˜åœ¨å†·å†»æœŸï¼›

2. åˆå§‹åŒ–ï¼š

- case1ï¼šæŒæœ‰è‚¡ç¥¨ï¼Œæœ€å¼€å§‹åˆšæŒæœ‰è‚¡ç¥¨ï¼Œæ”¶ç›Šè‚¯å®šæ˜¯ `-prices[0]`ï¼›

ä¸æŒæœ‰è‚¡ç¥¨ï¼Œæ”¶ç›Šæœ€ä½ä¹Ÿåªèƒ½ä¸º 0ï¼Œä¸å¯èƒ½ä¸ºè´Ÿæ•°ï¼š

- case2ï¼šä¸€ç›´ä¸æŒæœ‰è‚¡ç¥¨ï¼Œæ”¶ç›Šä¸º 0ï¼›
- case4ï¼šåˆšä¸æŒæœ‰è‚¡ç¥¨ï¼Œæ”¶ç›Šä¸º 0ï¼›
- case3ï¼šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå‰ä¸€å¤©åˆšå–å‡ºï¼Œè¿˜åœ¨å†·å†»æœŸï¼šæ”¶ç›Šä¸º 0.

è§£é¢˜ï¼š

```js
var maxProfit = function (prices) {
  if (prices.length <= 1) return 0

  const dp = Array.from(new Array(prices.length), () => new Array(4).fill(0));
  dp[0][0] = -prices[0];

  for (let i = 1; i < prices.length; i++) {
    // case1ï¼šæŒæœ‰è‚¡ç¥¨ï¼ˆä¸€ç›´æŒæœ‰ / åˆšä¹°å…¥(å‰ä¸€å¤©æ˜¯å†·å†»æœŸï¼Œå‰ä¸€å¤©å·²ç»è¿‡äº†å†·å†»æœŸ)ï¼‰ï¼›
    dp[i][0] = Math.max(dp[i - 1][0], Math.max(dp[i - 1][1], dp[i - 1][3]) - prices[i]);
    // case2ï¼šä¸€ç›´ä¸æŒæœ‰è‚¡ç¥¨ï¼Œè¿‡äº†å†·å†»æœŸ(ä¿æŒä¸å˜ï¼Œå‰ä¸€å¤©æ˜¯å†·å†»æœŸ)
    dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][3]);
    // case3ï¼šåˆšä¸æŒæœ‰è‚¡ç¥¨ï¼Œå–å‡º
    dp[i][2] = dp[i - 1][0] + prices[i];
    // case4ï¼šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå‰ä¸€å¤©åˆšå–å‡ºï¼Œè¿˜åœ¨å†·å†»æœŸï¼›
    dp[i][3] = dp[i - 1][2];
  }
  return Math.max(dp[prices.length - 1][1], dp[prices.length - 1][2], dp[prices.length - 1][3]);
};
```



## 714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹

- [714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/)
- 0614ï¼Œmidï¼Œ
- åŠ¨æ€è§„åˆ’

ä¸æ™®é€šçš„ä¹°å–è‚¡ç¥¨ç›¸æ¯”ï¼Œå°±æ˜¯åœ¨å‡ºå”®çš„æ—¶å€™å¤šå‰ªæ‰ä¸€ä¸ªæ‰‹ç»­è´¹å³å¯ï¼š

```js
var maxProfit = function (prices, fee) {
  const dp = [0, -prices[0]];  // ä¸æŒæœ‰ï¼ŒæŒæœ‰

  for (let i = 1; i < prices.length; i++) {
    // ä¸æŒæœ‰:(ä¿æŒä¸æŒæœ‰ï¼Œåˆšå–)
    sell = Math.max(dp[0], dp[1] + prices[i] - fee);
    // æŒæœ‰:(ä¿æŒæŒæœ‰ï¼Œåˆšä¹°)
    buy = Math.max(dp[1], dp[0] - prices[i]);
    dp[0] = sell;
    dp[1] = buy;
  }
  return dp[0];
};
```



## 300. æœ€é•¿é€’å¢å­åºåˆ—

- [300. æœ€é•¿é€’å¢å­åºåˆ—](https://leetcode.cn/problems/longest-increasing-subsequence/)
- 0614ï¼Œmidï¼Œanswer
- åŠ¨æ€è§„åˆ’

æ—¶é—´å¤æ‚åº¦ï¼š*O(nlgn)*

`dp[i]` è¡¨ç¤ºåœ¨ä¸‹æ ‡ [0, i] åŒºé—´å†…ï¼Œæœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ä¸ºå¤šå°‘ã€‚

çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

- `[0, i]` ä¹‹é—´æ˜¯å¦å­˜åœ¨ `j`ï¼Œå®ƒçš„å€¼ nums[j] æ˜¯å°äº nums[i] çš„ã€‚é€šè¿‡ for å¾ªç¯æ‰¾åˆ°æ‰€æœ‰æ¯” nums[i] å°çš„å€¼ã€‚ç„¶åè·å¾—ä»–ä»¬çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦ `dp[j]` ã€‚åˆ™ `dp[i]` çš„å€¼å°±æ˜¯å…¨éƒ¨è¿™äº› dp[j] ä¸­æœ€å¤§çš„ä¸€ä¸ªï¼Œå†åŠ 1ï¼›

`res` ç”¨æ¥ç»Ÿè®¡æœ€ç»ˆçš„ç»“æœï¼Œæ¯æ¬¡ for å¾ªç¯è¿‡åéƒ½æ›´æ–° res ä¸º dp ä¸­çš„æœ€å¤§å€¼ï¼Œçœå» return çš„æ—¶å€™åˆ¤æ–­æœ€å¤§å€¼ã€‚

åˆå§‹åŒ–ï¼š

- å­åºåˆ—æœ€çŸ­ä¹Ÿä¸€å®šä¸º 1ï¼Œæ‰€ä»¥ res å’Œ dp æˆå‘˜çš„é»˜è®¤å€¼ä¸ºæœ€å°çš„ 1ï¼Œä¸è¦è®¾ç½®ä¸º 0ã€‚

```js
var lengthOfLIS = function (nums) {
  //  dp[i] åˆ°æ•°å­—iæ—¶ï¼Œæœ€é•¿çš„å­åºåˆ—
  const dp = new Array(nums.length).fill(1);
  let res = 1;
  for (let i = 1; i < nums.length; i++) {
    for (let j = 0; j < i; j++) {
      if (nums[j] < nums[i]) dp[i] = Math.max(dp[i], dp[j] + 1);
      res = Math.max(res, dp[i]);
    }
  }
  // console.log(dp);
  return res;
};
```



## 674. æœ€é•¿è¿ç»­é€’å¢åºåˆ—

- [674. æœ€é•¿è¿ç»­é€’å¢åºåˆ—](https://leetcode.cn/problems/longest-continuous-increasing-subsequence/)
- 0614ï¼Œeasyï¼Œquick
- åŠ¨æ€è§„åˆ’

#### æ–¹æ³•ä¸€ï¼šä¸€ç»´dp

- çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šå¦‚æœå½“å‰å€¼ nums[i] å¤§äºä¸Šä¸€ä¸ª nums[i - 1]ï¼Œé‚£ä¹ˆæ€»æ•°å°±æ˜¯ dp[i - 1] + 1ï¼Œå¦åˆ™å°±é‡æ–°è®¡ç®—ï¼Œå€¼ä¸º 1ã€‚

```js
var findLengthOfLCIS = function (nums) {
  const dp = Array(nums.length).fill(1);
  let res = 1;

  for (let i = 1; i < nums.length; i++) {
    if (nums[i - 1] < nums[i]) dp[i] = dp[i - 1] + 1;
    res = Math.max(res, dp[i]);
  }
  return res;
};
```

#### æ–¹æ³•äºŒï¼šæ»šåŠ¨æ•°ç»„

å› ä¸º dp[i] åªä¾èµ–äºå‰ä¸€ä¸ªå€¼ dp[i-1]ï¼Œæ‰€ä»¥åªä¿å­˜å½“å‰å€¼ä¸º point å³å¯ï¼Œä¸æ–­æ›´æ–° point çš„å€¼ã€‚res ç”¨æ¥ç»Ÿè®¡ point æ›¾ç»çš„æœ€å¤§å€¼ã€‚

```js
var findLengthOfLCIS = function (nums) {
  let point = res = 1;

  for (let i = 1; i < nums.length; i++) {
    point = nums[i - 1] < nums[i] ? point + 1 : 1;
    res = Math.max(res, point);
  }
  return res;
};
```



## 718. æœ€é•¿é‡å¤å­æ•°ç»„

- [718. æœ€é•¿é‡å¤å­æ•°ç»„](https://leetcode.cn/problems/maximum-length-of-repeated-subarray/)
- 0614ï¼Œmidï¼Œanswer
- åŠ¨æ€è§„åˆ’

ä¸ºä»€ä¹ˆæ²¡åšå‡ºæ¥ï¼Ÿè¿™ä¸¤ä¸ªæ²¡è€ƒè™‘æ¸…æ¥šï¼š

- ä¸¤ä¸ªæ•°ç»„çš„æ¯ä¸ªå…ƒç´ å„è‡ªè¿›è¡Œå¯¹æ¯”ï¼Œå¯¹æ¯”åæœ‰ä¸€ä¸ªç»“æœï¼ˆæ˜¯å¦ç›¸ç­‰ï¼‰ã€‚è¿™ä¸ªç»“æœè¦è¿›è¡Œè®°å½•ï¼Œä¸€å®šæ˜¯ç”¨ äºŒç»´ dpã€‚
- æ•°ç»„ A å’Œæ•°ç»„ B çš„ä¸­æœ‰ä¸¤ä¸ªå…ƒç´  i ï¼Œjï¼Œä¸€æ—¦ç›¸ç­‰ï¼Œé‚£æ­¤æ—¶çš„æœ€é•¿é‡å¤å­—æ•°ç»„é•¿åº¦å°±åº”å½“æ˜¯ i-1ï¼Œi-1 é•¿åº¦ + 1ã€‚

#### æ–¹æ³•ä¸€ï¼šäºŒç»´dp

![9b80364c7936ad0fdca0e9405025b2a207a10322e16872a6cb68eb163dee25ee-image](images/åŠ¨æ€è§„åˆ’2.assets/9b80364c7936ad0fdca0e9405025b2a207a10322e16872a6cb68eb163dee25ee-image.png)

1. å®šä¹‰ dp

`dp[i][j]` ï¼šæ•°ç»„ A `[0, i-1]` åŒºé—´ï¼Œæ•°ç»„ B `[0, j-1]` åŒºé—´çš„æœ€é•¿é‡å¤å­æ•°ç»„é•¿åº¦

- ä¸ºä»€ä¹ˆæ˜¯ i-1? å› ä¸ºäºŒç»´æ•°ç»„çš„å·¦è¾¹ `dp[x][0]`å’Œä¸Šè¾¹ `dp[0][x]`ï¼Œå®šä¹‰ä¸ºæ²¡æœ‰å®é™…æ„ä¹‰çš„ç©ºä½ç½®ï¼Œèµ‹é»˜è®¤å€¼ä¸º 0ï¼ˆä¸Šå›¾ï¼‰ã€‚è¿™æ ·æ‰èƒ½ç¡®ä¿çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ­£ç¡®ã€‚

2. ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹

è¦æŠŠ `[1,i-1]` çš„ A æ•°ç»„ï¼Œå’Œ `[1,j-1]` çš„ B æ•°ç»„å†…æ¯ä¸ªæˆå‘˜éƒ½è¦æ¯”è¾ƒä¸€æ¬¡ã€‚

- å¦‚æœé‡åˆ°å€¼ç›¸ç­‰ï¼Œåˆ™ `dp[i][j] = dp[i - 1][j - 1] + 1`

3. åˆå§‹åŒ–

å› ä¸ºåŒºé—´æ˜¯ä» `[0, i-1]` å¼€å§‹åˆ¤æ–­ï¼Œåˆ™ä» 1 å¼€å§‹åˆ¤æ–­ï¼Œ`dp[0][0]`ã€`dp[0][x]`ã€`dp[x][0]` éƒ½æ²¡æœ‰æ„ä¹‰ï¼Œè®¾ç½®ä¸º 0ï¼›

```js
var findLength = function (nums1, nums2) {
  const dp = Array.from(new Array(nums1.length + 1), () => new Array(nums2.length + 1).fill(0));
  let res = 0;

  for (let i = 1; i <= nums1.length; i++) {
    for (let j = 1; j <= nums2.length; j++) {
      if (nums1[i - 1] === nums2[j - 1]) dp[i][j] = dp[i - 1][j - 1] + 1;
      res = Math.max(res, dp[i][j]);
    }
  }
	return res;
};
```

#### æ–¹æ³•äºŒï¼šä¸€ç»´dp

![1058100aea8006ae91abbad52076aae5f3782d7562d21dff55b8010744f8f511-image](images/åŠ¨æ€è§„åˆ’2.assets/1058100aea8006ae91abbad52076aae5f3782d7562d21dff55b8010744f8f511-image.png)

å€’åºï¼š

å› ä¸º `dp[j]` å—åˆ° `dp[j-1]` çš„å½±å“ï¼Œæ‰€ä»¥å¦‚æœ j ä»å‰å¾€åéå†ï¼Œå°±ä¼šå½±å“åˆ°å‰ä¸€ä½çš„ `dp[j-1]` ï¼Œé‚£ä¹ˆ j ä»åå¾€å‰éå†å¹¶æ›´æ–°å€¼å³å¯ã€‚

- æ³¨æ„ï¼Œå› ä¸º dp æ•°ç»„æ˜¯ä¸€ç»´çš„è¢«å¤ç”¨ï¼Œæ‰€ä»¥åˆå§‹å€¼ 0 æœ‰å¯èƒ½åœ¨ä¸Šä¸€è½®çš„æ—¶å€™å·²ç»è®¾ç½®ä¸ºæ–°çš„å€¼ï¼Œè¿™æ—¶åœ¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯é‡æ–°è®¾ç½®ä¸º 0

```js
var findLength = function (nums1, nums2) {
  let dp = new Array(nums2.length + 1).fill(0);
  let res = 0;

  for (let i = 1; i <= nums1.length; i++) {
    for (let j = nums2.length; j >= 1; j--) {
      dp[j] = nums1[i - 1] === nums2[j - 1]
        ? dp[j - 1] + 1
        : 0 // é»˜è®¤å€¼è¦é‡æ–°è®¾ç½®ä¸º 0
      res = Math.max(res, dp[j]);
    }
  }
  return res;
};
```



## 1143.æœ€é•¿å…¬å…±å­åºåˆ—

- [1143. æœ€é•¿å…¬å…±å­åºåˆ—](https://leetcode.cn/problems/longest-common-subsequence/)
- 0614ï¼Œmidï¼Œanswer
- åŠ¨æ€è§„åˆ’

1. å®šä¹‰ dp

`dp[i][j]`ï¼šé•¿åº¦ä¸º `[0, i - 1]` çš„å­—ç¬¦ä¸² text1 ä¸é•¿åº¦ä¸º `[0, j - 1]` çš„å­—ç¬¦ä¸² `text2` çš„æœ€é•¿å…¬å…±å­åºåˆ—ä¸º `dp[i][j]`ã€‚

2. å®šä¹‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹

æ³¨æ„ï¼šå› ä¸ºæ˜¯åˆ¤æ–­ `[0, i - 1]` å’Œ `[0, j - 1]` è¿™ä¸ªåŒºé—´ï¼Œæ‰€ä»¥å½“å‰åˆ¤æ–­ç‚¹ä½åº”å½“æ˜¯ i - 1 å’Œ j - 1ã€‚

case1ï¼š`text1[i - 1]` ä¸ `text2[j - 1]` ç›¸åŒ

- æ‰¾åˆ°äº†ä¸€ä¸ªå…¬å…±å…ƒç´ ï¼Œæ‰€ä»¥ text1 å’Œ text2 éƒ½å‰è¿›ä¸€ä½ï¼Œ`dp[i][j] = dp[i - 1][j - 1] + 1`;

case2ï¼š`text1[i - 1]` ä¸ `text2[j - 1]`ä¸ç›¸åŒ

- åˆ™è®© text1 æˆ– text2 å…¶ä¸­ä¸€ä¸ªå‰è¿›ä¸€ä½ï¼Œè°çš„æœ€é•¿å…¬å…±å­åºåˆ—æ›´é•¿ï¼Œå°±é€‰è°çš„ç»“æœï¼š`dp[i][jmax(dp[i - 1][j], dp[i][j - 1])`

æœ‰ä¸‰ä¸ªæ–¹å‘å¯ä»¥é€’æ¨å‡º `dp[i][j]`ï¼š

![20210204115139616](images/åŠ¨æ€è§„åˆ’2.assets/20210204115139616.jpg)

ä»£ç ï¼š

```js
var longestCommonSubsequence = function (text1, text2) {
  const dp = Array.from(new Array(text1.length + 1), () => new Array(text2.length + 1).fill(0));

  for (let i = 1; i <= text1.length; i++) {
    for (let j = 1; j <= text2.length; j++) {
      dp[i][j] = text1[i - 1] === text2[j - 1]
        ? dp[i - 1][j - 1] + 1
        : Math.max(dp[i - 1][j], dp[i][j - 1])
    }
  }
  return dp[text1.length][text2.length];
};
```



## 1035. ä¸ç›¸äº¤çš„çº¿

- [1035. ä¸ç›¸äº¤çš„çº¿](https://leetcode.cn/problems/uncrossed-lines/)
- 0614ï¼Œmidï¼Œanswer
- åŠ¨æ€è§„åˆ’

**æœ¬é¢˜è¯´æ˜¯æ±‚ç»˜åˆ¶çš„æœ€å¤§è¿çº¿æ•°ï¼Œå…¶å®å°±æ˜¯æ±‚ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦**

- è¦å‰–æé¢˜å¹²è¦æ±‚ï¼Œæ‰¾åˆ°è§„å¾‹ã€‚nums1 å’Œ nums2 ä¸¤ä¸ªæ•°ç»„ä¸­ï¼Œæœ€ç»ˆè¢«è¿çº¿çš„å­—æ¯æ‰€ç»„æˆçš„å­åºåˆ—ï¼Œä¸€å®šæ˜¯å®Œå…¨ç›¸ç­‰çš„ã€‚

![20210914145158](images/åŠ¨æ€è§„åˆ’2.assets/20210914145158.png)

ä»£ç ä¸ï¼ˆ1143.ï¼‰ä¸€æ¨¡ä¸€æ ·ã€‚

```js
var maxUncrossedLines = function (nums1, nums2) {
  const dp = Array.from(new Array(nums1.length + 1), () => new Array(nums2.length + 1).fill(0));

  for (let i = 1; i <= nums1.length; i++) {
    for (let j = 1; j <= nums2.length; j++) {
      dp[i][j] = nums1[i - 1] === nums2[j - 1]
        ? dp[i - 1][j - 1] + 1
        : Math.max(dp[i - 1][j], dp[i][j - 1])
    }
  }
  return dp[nums1.length][nums2.length];
};
```



## 53. æœ€å¤§å­æ•°ç»„å’Œ

- [53. æœ€å¤§å­æ•°ç»„å’Œ](https://leetcode.cn/problems/maximum-subarray/)
- 0614ï¼Œeasyï¼Œquick
- è´ªå¿ƒï¼ŒåŠ¨æ€è§„åˆ’

#### æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ

æ³¨æ„ç‚¹ä¸€ï¼šcur è®°å½•éå†æ—¶å®æ—¶ç»Ÿè®¡çš„æ€»å’Œï¼Œres è®°å½•æ‰€æœ‰ cur ä¸­çš„æœ€é«˜å€¼

æ³¨æ„ç‚¹äºŒï¼šå¦‚æœ cur å·²ç»å°äº 0 äº†ï¼Œé‚£å°±ç›´æ¥æ”¾å¼ƒä¹‹å‰ç»Ÿè®¡çš„æ•°å­—ï¼Œä» 0 å¼€å§‹ï¼›åä¹‹ï¼Œå°±æŠŠå½“å‰å€¼åŠ åˆ° cur ä¸Šã€‚

```js
var maxSubArray = function (nums) {
  // è´ªå¿ƒ
  let cur = -Infinity;
  let res = -Infinity;
  for (let i = 0; i < nums.length; i++) {
    if (cur < 0) cur = Math.max(cur + nums[i], nums[i]);
    else cur += nums[i];
    res = Math.max(cur, res);
  }
  return res;
};
```

#### æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’

å¯ä»¥çœ‹åˆ°ï¼Œè´ªå¿ƒå°±æ˜¯åŠ¨æ€è§„åˆ’çš„ä¸€ç»´ dp æ€è·¯ã€‚

1. `dp[i]` çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š
   - case1ï¼šç»§ç»­ç´¯åŠ å’Œ
   - case2ï¼šä¸å†ç´¯åŠ ï¼Œè€Œæ˜¯ä» 0 å¼€å§‹ã€‚

`dp[i]` è®°å½•ä¸¤è€…çš„è¾ƒå¤§å€¼ã€‚

2. åˆå§‹åŒ–

æ³¨æ„åˆå§‹åŒ–ï¼Œ`dp[0]` å’Œ `res` åº”å½“ä¸º `nums[0]`ã€‚

```js
var maxSubArray = function (nums) {
  const dp = new Array(nums.length).fill(-Infinity);
  dp[0] = nums[0];
  let res = nums[0];
  for (let i = 1; i < nums.length; i++) {
    dp[i] = Math.max(dp[i - 1] + nums[i], nums[i]);
    res = Math.max(res, dp[i]);
  }
  return res;
};
```



## 392. åˆ¤æ–­å­åºåˆ—

- [392. åˆ¤æ–­å­åºåˆ—](https://leetcode.cn/problems/is-subsequence/)
- 0614ï¼Œeasyï¼Œnormal
- åŠ¨æ€è§„åˆ’

#### æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’

é—®é¢˜è½¬åŒ–ä¸ºï¼šåˆ¤æ–­ s æ˜¯å¦æ˜¯ t çš„å­åºåˆ—ï¼Œå°±æ˜¯è¦åœ¨ t ä¸­èƒ½å¦æŒ‰éœ€æŸ¥æ‰¾åˆ°ä¸€ä¸ª sã€‚

1. å®šä¹‰ dp

`dp[i][j]` è¡¨ç¤ºï¼Œä»åŒºé—´ä¸º `[0, j-1]` çš„å­—ç¬¦ä¸² tï¼Œå¯»æ‰¾åŒºé—´ä¸º `[0, i-1]` çš„å­—ç¬¦ä¸² s ï¼Œèƒ½æ‰¾åˆ°çš„æœ€é•¿é•¿åº¦ã€‚

2. å®šä¹‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹

- case1ï¼š`s[i-1] === t[j-1]`  ï¼Œä¹Ÿå°±æ˜¯å½“å‰åˆ¤æ–­çš„ä¸¤ä¸ªæ•°å­—ç›¸ç­‰ï¼Œåˆ™ç»Ÿè®¡æ•°å­—å¯ä»¥ + 1ï¼š`dp[i][j] = dp[i-1][j-1] + 1`ã€‚
- case2ï¼š`s[i-1] !== t[j-1]` ï¼Œ
  - é¢˜ç›®çš„ç›®çš„æ˜¯æŠŠ s å…¨éƒ¨åŒ¹é…æ‰ï¼Œæ‰€ä»¥ s çš„æ¯ä¸€ä¸ªæˆå‘˜æ˜¯ä¸å¯è·³è¿‡çš„ã€‚
  - å½“ i -1 è¿™ä¸ªå…ƒç´ æ²¡æœ‰åŒ¹é…ä¸Šæ—¶ï¼Œå°±ç»§ç»­ç­‰å¾… i -1ï¼Œè·³è¿‡ j -1ã€‚è¿™ç›¸å½“äº t è¦åˆ é™¤å…ƒç´  `t[j - 1]`ï¼Œé‚£ä¹ˆ `dp[i][j]` çš„æ•°å€¼å°±æ˜¯çœ‹ `s[i - 1]`ä¸ `t[j - 2]` çš„æ¯”è¾ƒç»“æœäº†ï¼š`dp[i][j] = dp[i][j - 1]`ã€‚

![20210303173115966](images/åŠ¨æ€è§„åˆ’2.assets/20210303173115966.png)

```js
var isSubsequence = function (s, t) {
  const dp = Array.from(new Array(s.length + 1), () => new Array(t.length + 1).fill(0));

  for (let i = 1; i <= s.length; i++) {
    for (let j = 1; j <= t.length; j++) {
      dp[i][j] = s[i - 1] === t[j - 1]
        ? dp[i - 1][j - 1] + 1
        : dp[i][j - 1]
    }
  }
  return dp[s.length][t.length] === s.length
};
```

#### æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ

ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªæ•°ç»„ï¼Œå¦‚æœç›¸å½“åˆ™å­åºåˆ—æŒ‡é’ˆ +1ã€‚

```js
var isSubsequence = function (s, t) {
  let sp = 0; // å­åºåˆ—
  let tp = 0;

  while (sp < s.length && tp < t.length) {
    if (s[sp] === t[tp]) sp++
    tp++;
  }
  return sp === s.length;
};
```



## 115. ä¸åŒçš„å­åºåˆ—

- [115. ä¸åŒçš„å­åºåˆ—](https://leetcode.cn/problems/distinct-subsequences/)
- hardï¼Œè·³è¿‡ï¼Œanswer
- é€’å½’ã€åŠ¨æ€è§„åˆ’

**ç¿»è¯‘é¢˜æ„**

è¯»æ‡‚é¢˜ç›®åï¼Œç”¨è‡ªå·±çš„è¯â€œç¿»è¯‘â€ä¸€ä¸‹é¢˜ç›®ï¼Œæœ‰æ—¶å€™ä¼šæ›´å®¹æ˜“æœ‰æ€è·¯ã€‚

- é¢˜ç›®ï¼šæ±‚ s çš„å­åºåˆ—ä¸­ t å‡ºç°çš„ä¸ªæ•°ï¼Œblabla...
- ç¿»è¯‘ï¼šåœ¨ s ä¸²èº«ä¸Š â€œæŒ‘é€‰â€ å­—ç¬¦ï¼Œå»åŒ¹é… t ä¸²çš„å­—ç¬¦ï¼Œæ±‚æŒ‘é€‰çš„æ–¹å¼æ•°

ä»åå¾€å‰ï¼šä»æœ€ç»ˆå¾—åˆ°çš„ç»“æœå¼€å§‹ï¼Œä¸€æ­¥ä¸€æ­¥å¾€å‰æ¨ï¼Œç›´åˆ°ç®—å‡ºåˆå§‹çš„ç»“æœåï¼Œå°±å¯ä»¥å¾—å‡ºæœ€ç»ˆçš„ç»“æœï¼Œå³é€’å½’çš„æ–¹æ³•ã€‚

ä»å‰å¾€åï¼šä»æœ€å¼€å§‹æœ€ä¼˜çš„ä¸€æ­¥ï¼Œä¸€ç›´å¾€æœ€ç»ˆçš„ç»“æœæ¨ï¼Œç›´åˆ°æ¨å‡ºæœ€ç»ˆçš„ç»“æœï¼Œè¿™æ˜¯åŠ¨æ€è§„åˆ’çš„æ–¹æ³•ã€‚

#### æ–¹æ³•ä¸€ï¼šdfs é€’å½’

**æ€è·¯**ï¼š

- æŠ“ä½ â€œé€‰â€ï¼Œs è¦ç…§ç€ t æ¥æŒ‘é€‰ï¼Œé€ä¸ªå­—ç¬¦åˆ¤æ–­é€‰ / ä¸é€‰ï¼Œåˆ†åˆ«ä¸‹ä¸€ä¸ªçŠ¶æ€æ˜¯ä»€ä¹ˆï¼Ÿ

ä¸¾ä¾‹ï¼Œs  ä¸º babgbagï¼Œt ä¸º bagï¼Œæœ«å°¾å­—ç¬¦ç›¸åŒï¼Œäºæ˜¯ s æœ‰ä¸¤ç§é€‰æ‹©ï¼š

- ç”¨ s[s.length-1] å»åŒ¹é…æ‰ t[t.length-1] ï¼Œé—®é¢˜è§„æ¨¡ç¼©å°ï¼šç»§ç»­è€ƒå¯Ÿ babgba å’Œ baï¼›
- ä¸è¿™ä¹ˆåšï¼Œä½† t[t.length-1] ä»éœ€è¢«åŒ¹é…ï¼Œäºæ˜¯åœ¨ babgba ä¸­ç»§ç»­æŒ‘ï¼Œè€ƒå¯Ÿ babgba å’Œ bag

æ˜¯å¦ç”¨ s çš„å½“å‰å­—ç¬¦å»åŒ¹é…ï¼Œæ˜¯ä¸¤ç§ä¸åŒçš„æŒ‘é€‰æ–¹å¼ï¼Œå„è‡ªåˆ†æ”¯ä¸‹å»æ‰€ç»Ÿè®¡çš„æ–¹å¼æ•°ï¼Œç›¸åŠ ï¼Œæ˜¯å¤§é—®é¢˜çš„è§£ã€‚

![1615916797-rXJnAT-image](images/åŠ¨æ€è§„åˆ’2.assets/1615916797-rXJnAT-image.png)

ç°åœ¨æˆ‘ä»¬æ‹†è§£å‡ºè§„æ¨¡å°ä¸€ç‚¹çš„å­é—®é¢˜ã€‚å®Œå–„ä¸€ä¸‹ï¼Œå®šä¹‰å‡ºé€’å½’å‡½æ•°ï¼š

è¿”å›ï¼šä»å¼€å¤´åˆ° `s[i]` çš„å­ä¸²ä¸­ï¼Œå‡ºç°ã€ä»å¼€å¤´åˆ° `t[j]` çš„å­ä¸²ã€çš„æ¬¡æ•°ã€‚å³ï¼Œä» **å‰è€…** é€‰å­—ç¬¦ï¼Œå» **åŒ¹é…** åè€…çš„æ–¹æ¡ˆæ•°ã€‚

çœ‹äº† `s[i]===t[j]` çš„æƒ…å†µï¼Œé‚£ `s[i]!==t[j]` çš„æƒ…å†µå‘¢ï¼Ÿ`s[i]` ä¸åŒ¹é… `t[j]`ï¼Œå”¯æœ‰æ‹¿ `s[i]` ä¹‹å‰çš„å­ä¸²å»åŒ¹é…ã€‚

ç°åœ¨ä¸¤ç§æƒ…å†µä¸‹çš„é€’å½’å…¬å¼éƒ½å¥½å†™äº†ã€‚é€’å½’æ ‘åº•éƒ¨çš„ base case å‘¢ï¼Ÿ

éšç€é€’å½’å‹æ ˆï¼Œå­é—®é¢˜è§„æ¨¡ï¼ˆå­ä¸²é•¿åº¦ï¼‰åœ¨å˜å°ï¼š

- å°åˆ° t å˜æˆç©ºä¸²ï¼Œæ­¤æ—¶ s ä¸ºäº†åŒ¹é…å®ƒï¼Œæ–¹å¼åªæœ‰1ç§ï¼šä»€ä¹ˆå­—ç¬¦ä¹Ÿä¸ç”¨æŒ‘ï¼ˆæˆ– s ä¹Ÿæ˜¯ç©ºä¸²ï¼Œä»€ä¹ˆéƒ½ä¸åšå°±åŒ¹é…äº†ï¼Œæ–¹å¼æ•°ä¹Ÿæ˜¯1ï¼‰
- å°åˆ° s å˜æˆç©ºä¸²ï¼Œä½† t ä¸æ˜¯ï¼Œs æ€ä¹ˆä¹ŸåŒ¹é…ä¸äº† tï¼Œæ–¹å¼æ•°ä¸º 0

```js
var numDistinct = function (s, t) {
  return helper(s.length - 1, t.length - 1);

  // i é•¿ä¸²ã€j çŸ­ä¸²
  function helper(i, j) {
    if (j < 0) return 1;
    if (i < 0) return 0;

    return s[i] === t[j]
      ? helper(i - 1, j) + helper(i - 1, j - 1)
      : helper(i - 1, j)
  }
};
```

ä»å¤´å¼€å§‹é€’å½’ä¹Ÿæ›´å¥½ç†è§£ï¼š

```js
var numDistinct = function (s, t) {
  return dfs(0, 0);

  function dfs(longer, smaller) {
    if (smaller === t.length) return 1;
    if (longer === s.length) return 0;

    return t[smaller] === s[longer]
      ? dfs(longer + 1, smaller) + dfs(longer + 1, smaller + 1)
      : dfs(longer + 1, smaller);
  }
};
```

ç»“æœè¶…æ—¶ï¼Œéœ€è¦è®°å¿†åŒ–æœç´¢ã€‚

#### æ–¹æ³•äºŒï¼šé€’å½’ï½œè®°å¿†åŒ–æœç´¢

ä¸Šé¢çš„é¢˜è§£ä¸­æœ‰è®¸å¤šé‡å¤çš„è®¡ç®—ï¼Œæ¯”å¦‚ç»™ `helper(i - 1, j) + helper(i - 1, j - 1)` æ¨¡æ‹Ÿèµ‹å€¼ï¼ši = 3ï¼Œj = 3

- `helper(2, 3) + helper(2, 2)` ï¼Œè¿™æ ·é€’å½’ä¸‹å»
  - å·¦ä¾§çš„ helper å¯èƒ½ä¼šè®¡ç®—ï¼š`helper(1,3)` ã€`helper(1,2)`
  - å³ä¾§çš„ helper å¯èƒ½ä¼šè®¡ç®—ï¼š`helper(1,2)` ã€`helper(1,1)` 

å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œé¢å·²ç»é‡å¤è®¡ç®—äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ª memoï¼Œå»ç»Ÿè®¡å·²ç»è®¡ç®—çš„ç»“æœã€‚memo è®¾ç½®ä¸ºä¸€ä¸ªäºŒç»´æ•°ç»„ï¼š

```js
var numDistinct = function (s, t) {
  const memo = Array.from(new Array(s.length), () => new Array(t.length).fill(Infinity));
  return helper(s.length - 1, t.length - 1);

  // i é•¿ä¸²ã€j çŸ­ä¸²
  function helper(i, j) {
    if (j < 0) return 1;
    if (i < 0) return 0;

    if (memo[i][j] !== Infinity) return memo[i][j];

    memo[i][j] = s[i] === t[j]
      ? helper(i - 1, j) + helper(i - 1, j - 1)
      : helper(i - 1, j);
    return memo[i][j];
  }
};
```

ä»å¤´å¾€åï¼š

```js
var numDistinct = function (s, t) {
  const memo = Array.from(new Array(s.length), () => new Array(t.length).fill(Infinity));
  dfs(0, 0);
  console.log(memo);
  return memo[0][0];

  function dfs(longer, smaller) {
    if (smaller === t.length) return 1;
    if (longer === s.length) return 0;

    if (memo[longer][smaller] !== Infinity) return memo[longer][smaller];

    memo[longer][smaller] = t[smaller] === s[longer]
      ? dfs(longer + 1, smaller) + dfs(longer + 1, smaller + 1)
      : dfs(longer + 1, smaller);
    
    return memo[longer][smaller];
  }
};
```



#### æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’

1. å®šä¹‰ dp

`dp[i][j]`ï¼šä»å¼€å¤´åˆ° `s[i-1]` çš„å­ä¸²ä¸­ï¼Œå‡ºç°ã€ä»å¼€å¤´åˆ° `t[j-1]` çš„å­ä¸²ã€çš„æ¬¡æ•°ã€‚å³ï¼šå‰ i ä¸ªå­—ç¬¦çš„ s å­ä¸²ä¸­ï¼Œå‡ºç°å‰ j ä¸ªå­—ç¬¦çš„ t å­ä¸²çš„æ¬¡æ•°ã€‚

2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

- å½“ `s[i-1] != t[j-1]` æ—¶ï¼Œæœ‰ `dp[i][j] = dp[i-1][j]`;
- å½“ `s[i-1] == t[j-1]` æ—¶ï¼Œæœ‰ `dp[i][j] = dp[i-1][j-1] + dp[i-1][j]`

3. åˆå§‹åŒ–ï¼š

- `j==0` æ—¶ï¼Œ`dp[i][0] = 1`
- `i==0` æ—¶ï¼Œ`dp[0][j] = 0`

```js
var numDistinct = function (s, t) {
  const dp = Array.from(new Array(s.length + 1), () => new Array(t.length + 1).fill(0));

  for (let i = 0; i <= s.length; i++) {
    dp[i][0] = 1;
  }

  for (let i = 1; i <= s.length; i++) {
    for (let j = 1; j <= t.length; j++) {
      dp[i][j] = s[i - 1] === t[j - 1]
        ? dp[i - 1][j - 1] + dp[i - 1][j]
        : dp[i - 1][j]
    }
  }
  return dp[s.length][t.length];
};
```



## 583. ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ

- [583. ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ](https://leetcode.cn/problems/delete-operation-for-two-strings/)
- 0615ï¼Œmidï¼Œanswer
- åŠ¨æ€è§„åˆ’

> è§£æ1ï¼šhttps://leetcode.cn/problems/edit-distance/solution/bian-ji-ju-chi-mian-shi-ti-xiang-jie-by-labuladong/
>
> è§£æ2ï¼šhttps://programmercarl.com/0583.%E4%B8%A4%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C.html
>
> è§£æ3ï¼šhttps://leetcode.cn/problems/delete-operation-for-two-strings/solution/gong-shui-san-xie-cong-liang-chong-xu-li-wqv7/

é¢˜ç›®çš„è¦æ±‚æ˜¯ word1 å’Œ word2 å„è‡ªé€‰æ‹©ä¸€äº›å­—ç¬¦ï¼Œå¾—åˆ°çš„å­—ç¬¦ä¸²å°½å¯èƒ½é•¿ã€‚è¿™å°±æ˜¯æ±‚æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œè¿™é‡Œæ±‚çš„æ˜¯æœ€å°‘çš„æ”¹å˜æ¬¡æ•°ï¼Œä¹Ÿå°±æ˜¯å¾—å‡ºæœ€é•¿å…¬å…±å­åºåˆ—ï¼Œä¸¤ä¸ªå­—ç¬¦ä¸²ä¸€å…±è¦åˆ æ‰å¤šå°‘ä¸ªå­—ç¬¦ã€‚

- å…ˆæ±‚å‡ºæœ€é•¿å…¬å…±å­åºåˆ— maxï¼Œç„¶åå†è®© word1 å’Œ wrod2 å½“é•¿åº¦åˆ†åˆ«å‰ªå» maxï¼Œå°±æ˜¯æœ€å°‘åˆ é™¤æ¬¡æ•°ã€‚

1. å®šä¹‰ dp

- `dp[i][j]`ï¼šé•¿åº¦ä¸º `[0, i - 1]` çš„å­—ç¬¦ä¸² word1 ä¸é•¿åº¦ä¸º `[0, j - 1]` çš„å­—ç¬¦ä¸² word2 çš„æœ€é•¿å…¬å…±å­åºåˆ—ä¸º `dp[i][j]`ã€‚

2. å®šä¹‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹

- æ³¨æ„ï¼šå› ä¸ºæ˜¯åˆ¤æ–­ `[0, i - 1]` å’Œ `[0, j - 1]` è¿™ä¸ªåŒºé—´ï¼Œæ‰€ä»¥å½“å‰åˆ¤æ–­ç‚¹ä½åº”å½“æ˜¯ i - 1 å’Œ j - 1ã€‚

case1ï¼š`word1[i - 1]` ä¸ `word2[j - 1]` ç›¸åŒ

- æ‰¾åˆ°äº†ä¸€ä¸ªå…¬å…±å…ƒç´ ï¼Œæ‰€ä»¥ä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½å‰è¿›ä¸€ä½ï¼Œ `dp[i][j] = dp[i - 1][j - 1] + 1`

case2ï¼š`word1[i - 1]` ä¸ `word2[j - 1]` ä¸ç›¸åŒ

- åˆ™è®© word1 æˆ– word2 å…¶ä¸­ä¸€ä¸ªå‰è¿›ä¸€ä½ï¼Œè°çš„æœ€é•¿å…¬å…±å­åºåˆ—æ›´é•¿ï¼Œå°±é€‰è°ï¼š`Math.max(dp[i - 1][j], dp[i][j - 1])`

```js
var minDistance = function (word1, word2) {
  const dp = Array.from(new Array(word1.length + 1), () => new Array(word2.length + 1).fill(0));

  for (let i = 1; i <= word1.length; i++) {
    for (let j = 1; j <= word2.length; j++) {
      dp[i][j] = word1[i - 1] === word2[j - 1]
        ? dp[i - 1][j - 1] + 1
        : Math.max(dp[i - 1][j], dp[i][j - 1]);
    }
  }
  // æ±‚å‡ºæœ€é•¿å­åºåˆ—é•¿åº¦ï¼Œç„¶åè®©ä¸¤è€…å­—ç¬¦ä¸²åˆ†åˆ«å‰ªæ‰é•¿åº¦ï¼Œå°±å¾—å‡ºæœ€å°‘å˜åŒ–ï¼š
  const max = dp[word1.length][word2.length];
  return word1.length - max + word2.length - max;
};
```



## 72. ç¼–è¾‘è·ç¦»

- [72. ç¼–è¾‘è·ç¦»](https://leetcode.cn/problems/edit-distance/)
- 0615ï¼Œhardï¼Œanswer æ²¡ç†è§£é€
- åŠ¨æ€è§„åˆ’ã€é€’å½’

1. å®šä¹‰ dp

`dp[i][j]`ï¼Œè¡¨ç¤ºä»¥ä¸‹æ ‡ `i-1` ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word1ï¼Œè½¬åŒ–ä¸ºä»¥ä¸‹æ ‡ `j-1` ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word2 çš„æœ€å°‘æ“ä½œæ­¥éª¤

- æœ‰å››ç§æ“ä½œæ­¥éª¤ï¼šè·³è¿‡ã€æ’å…¥ã€åˆ å»ã€æ›¿æ¢ã€‚

2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

**ï¼ˆ1ï¼‰ç›¸ç­‰**

- å¦‚æœ word1[i- 1] å’Œ word2[j - 1] ä¸¤ä¸ªä½ç½®ç›¸ç­‰ï¼Œåˆ™åŒ¹é…æˆåŠŸï¼Œä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½è¿›è¡Œä¸‹ä¸€ä¸ªåŒ¹é…ï¼Œæ€»æ“ä½œæ¬¡æ•°ä¸å˜ï¼š

  `dp[i - 1][j - 1]` ï¼Œä¸‹ä¸€æ¬¡åˆ¤æ–­ï¼š`word1[i]`  å’Œ `word2[j]`

- å›é¡¾ dp å®šä¹‰ `dp[i-1][j-1]`ï¼Œè¡¨ç¤ºä»¥ä¸‹æ ‡ `i-2` ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word1ï¼Œè½¬åŒ–ä¸ºä»¥ä¸‹æ ‡ `j-2` ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word2 çš„æœ€å°‘æ“ä½œæ­¥éª¤ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå› ä¸º word[i-1] å’Œ wrod[i-2] å½¢æˆåŒ¹é…ã€‚é‚£ä¹ˆ `dp[i - 1][j - 1]` å°±æ˜¯ `dp[i-1][j-1]` +1ã€‚

**ï¼ˆ2ï¼‰ä¸ç›¸ç­‰**

**æ’å…¥ï¼š**word1 éœ€è¦æ’å…¥ä¸€ä¸ªå­—ç¬¦æ¥å’Œ word2[ j - 1] è¿›è¡ŒåŒ¹é…ã€‚

é‚£ä¹ˆç»“æœæ˜¯ï¼š

- `word1[i-1]` ä¸å‚ä¸æœ¬æ¬¡åˆ¤æ–­ï¼Œå‚ä¸ä¸‹ä¸€æ¬¡åˆ¤æ–­ï¼Œåˆ¤æ–­ä½ç½®ä¸å˜ï¼Œä¸‹ä¸€æ¬¡åˆ¤æ–­ `word[i-1]`ï¼›

- `word2[j-1]` è¢«æ–°æ’å…¥çš„å­—ç¬¦åŒ¹é…æˆåŠŸï¼Œä¸å†å‚ä¸ä¸‹ä¸€æ¬¡åˆ¤æ–­ï¼Œä¸‹ä¸€æ¬¡åˆ¤æ–­ `word[j]`ï¼›
- æ“ä½œæ€»æ¬¡æ•° + 1

æ„æˆé€»è¾‘ï¼š`dp[i][j-1] + 1`

- å›é¡¾ dp å®šä¹‰ `dp[i][j-1]`ï¼Œè¡¨ç¤ºä»¥ä¸‹æ ‡ `i-1` ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word1ï¼Œè½¬åŒ–ä¸ºä»¥ä¸‹æ ‡ `j-2` ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word2 çš„æœ€å°‘æ“ä½œæ­¥éª¤ã€‚
- å›é¡¾ dp å®šä¹‰ `dp[i][j]`ï¼Œè¡¨ç¤ºä»¥ä¸‹æ ‡ `i-1` ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word1ï¼Œè½¬åŒ–ä¸ºä»¥ä¸‹æ ‡ `j-1` ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word2 çš„æœ€å°‘æ“ä½œæ­¥éª¤ã€‚

é€šè¿‡ä¸Šé¢çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬çŸ¥é“ `dp[i][j-1]` ç›¸æ¯”  `dp[i][j]`ï¼Œå­—ç¬¦ä¸² word1 çš„åˆ¤æ–­åŒºé—´æ²¡æœ‰å˜åŒ–ï¼Œå­—ç¬¦ä¸² word2 çš„åˆ¤æ–­åŒºé—´å‡å°‘äº†ä¸€ä½ã€‚

**åˆ é™¤ï¼š**word1 æ—¢ç„¶ word1[i-1] å’Œ word2[j-1] ä¸åŒ¹é…ï¼Œé‚£ä¹ˆå°±åˆ é™¤ word[i-1]ï¼Œçœ‹çœ‹ word[i] æ˜¯å¦åŒ¹é…ï¼š

- `word1[i-1]` è¢«åˆ é™¤äº†ï¼Œå…¶å®å°±æ˜¯è¯¥ç‚¹è¢«åˆ¤æ–­è¿‡äº†ï¼Œä¸‹ä¸€æ¬¡éå†éœ€è¦åˆ¤æ–­ `word[i]` ã€‚è€Œ `word2[j-1]` æ²¡æœ‰è¢«åŒ¹é…æ‰ï¼Œä¸‹æ¬¡ä¾ç„¶éœ€è¦åŒ¹é…è¿™ä¸ªä½ç½®ï¼Œæ€»æ“ä½œæ¬¡æ•° + 1ã€‚

**æ›¿æ¢ï¼š**`word[i-1]` ç›´æ¥æ¢æˆ `word[j-1]` è¿™ä¸ªå€¼ï¼Œç„¶åè®©ä»–ä»¬è¿›è¡ŒåŒ¹é…ã€‚

- é‚£ä¹ˆè¿™ä¸¤ä¸ªä½ç½®éƒ½è¢«åˆ¤æ–­äº†ï¼Œä¸‹ä¸€æ¬¡éå†æ—¶åˆ¤æ–­ word1[i] å’Œ word[j]ï¼Œæ€»æ“ä½œæ¬¡æ•° + 1ã€‚

**ï¼ˆ3ï¼‰åˆå§‹åŒ–**

- å¦‚æœ word2 å·²ç»éå†å®Œï¼Œword1 è¿˜æœ‰å‰©ä½™ï¼Œé‚£ä¹ˆ word1 å‰©ä½™çš„æ“ä½œå°±æ˜¯å…¨éƒ¨åˆ é™¤ï¼ˆæ¬¡æ•° = word1 å‰©ä½™çš„ä¸ªæ•°ï¼‰ï¼›

- å¦‚æœ word1 å·²ç»éå†å®Œï¼Œword2 è¿˜æœ‰å‰©ä½™ï¼Œé‚£ä¹ˆ word1 å‰©ä½™çš„æ“ä½œå°±æ˜¯å…¨éƒ¨æ’å…¥ï¼ˆæ¬¡æ•° = word1 å‰©ä½™çš„ä¸ªæ•°ï¼‰ï¼›

`dp[x][0]` è¡¨ç¤ºå½“ word2 ä¸º 0 æ—¶ï¼Œword1 çš„åˆ é™¤æ“ä½œï¼Œword1 å‰©ä½™ x ä¸ªå°±æ“ä½œ x æ¬¡ï¼š`dp[x][0] === x`ï¼›

`dp[0][x]` è¡¨ç¤ºå½“ word1 ä¸º 0 æ—¶ï¼Œword1 çš„æ’å…¥æ“ä½œï¼Œword2 å‰©ä½™ x ä¸ªå°±æ“ä½œ x æ¬¡ï¼š`dp[0][x] === x`ï¼›

```js
var minDistance = function (word1, word2) {
  const dp = Array.from(new Array(word1.length + 1), () => new Array(word2.length + 1).fill(0));
  // åˆå§‹åŒ–
  for (let i = 0; i <= word1.length; i++) dp[i][0] = i;
  for (let j = 0; j <= word2.length; j++) dp[0][j] = j;

  for (let i = 1; i <= word1.length; i++) {
    for (let j = 1; j <= word2.length; j++) {
      // ç›¸ç­‰ï¼Œä¸æ“ä½œï¼Œæ€»æ•°ä¸å˜ï¼Œå„è‡ªå¢åŠ ä¸€ä½
      if (word1[i - 1] === word2[j - 1])
        dp[i][j] = dp[i - 1][j - 1];
      else // ä¸ç›¸ç­‰ï¼šæ’å…¥ã€åˆ é™¤ã€æ›¿æ¢
        dp[i][j] = Math.min(dp[i - 1][j], dp[i][j - 1], dp[i - 1][j - 1]) + 1;
    }
  }
  return dp[word1.length][word2.length];
};
```



## 3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²

- [3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²](https://leetcode.cn/problems/longest-substring-without-repeating-characters/)
- 0615ï¼Œmidï¼Œanswer
- æ»‘åŠ¨çª—å£

ç”¨ map è®°å½•ä¸åŒå€¼çš„ä½ç½®ï¼Œé‡åˆ°ä½ç½®å†²çªçš„ï¼Œç™»è®°æœ€é å³çš„ä½ç½®ã€‚

`[left, i]` åŒºé—´æ„æˆçš„å­ä¸²ï¼Œå°±æ˜¯ä¸€ä¸ªæ— é‡å¤å­—ç¬¦çš„æœ€åå­ä¸²ã€‚

- å½“é‡åˆ°é‡å¤å­—æ®µæ—¶ï¼š
  - å¦‚æœæ˜¯ 'aabcdab'ã€‚i ä¸º 4 æ—¶ï¼Œleft æŒ‡å‘ 1ï¼›å½“ i = 5 æ—¶ï¼Œå‡ºç°é‡å¤ï¼Œmap.get è¿”å› 2ï¼Œleft è‡ªç„¶æ˜¯ `map.get(s[5]) + 1`ï¼›
  - å¦‚æœæ—¶ 'abcbda'ã€‚i ä¸º 4 æ—¶ï¼Œleft æŒ‡å‘ 2  (å­ä¸²ï¼šcbd)ï¼›å½“ i = 5 æ—¶ï¼Œå‡ºç°é‡å¤ï¼Œ `map.get(s[5]) + 1` å€¼ä¸º 1ï¼Œæ¯” left å°ï¼›è¯´æ˜ left å·²ç»å› ä¸ºæ›¾ç»å‡ºç°é‡å¤ï¼ˆå­—æ¯bï¼‰æ›´æ–°è¿‡ä¸€æ¬¡ï¼Œè¿™é‡Œç»§ç»­ç”¨ leftï¼Œè€Œä¸æ˜¯ `map.get(s[5]) + 1` ã€‚

```js
var lengthOfLongestSubstring = function (s) {
  if (s.length === 0) return 0;
  // æ»‘åŠ¨çª—å£ [left, i] é—­å£
  let left = 0;
  let res = 0;
  const map = new Map();

  for (let i = 0; i < s.length; i++) {
    // é‡å¤,è°ƒæ•´leftï¼šMath.max(å½“å‰ä½ç½®ï¼Œé‡å¤ä½ç½®å³è¾¹1ä½)
    if (map.has(s[i]))
      left = Math.max(left, map.get(s[i])+ 1) ;

    map.set(s[i], i);
    res = Math.max(res, i - left + 1);
  }
  return res;
};

```



## 647. å›æ–‡å­ä¸²

#### æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’

- è®²çš„éå¸¸æ¸…æ¥šï¼š[ğŸ”](https://programmercarl.com/0647.%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2.html)ã€‚

1. å®šä¹‰ dp

å¸ƒå°”ç±»å‹çš„ `dp[i][j]`ï¼šè¡¨ç¤ºåŒºé—´èŒƒå›´ `[i,j]` ï¼ˆå·¦é—­å³é—­ï¼‰çš„å­ä¸²æ˜¯å¦æ˜¯å›æ–‡å­ä¸²ï¼Œå¦‚æœæ˜¯ `dp[i][j]` ä¸ºtrueã€‚

2. ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹

åœ¨ç¡®å®šé€’æ¨å…¬å¼æ—¶ï¼Œå°±è¦åˆ†æå¦‚ä¸‹å‡ ç§æƒ…å†µã€‚

æ•´ä½“ä¸Šæ˜¯ä¸¤ç§ï¼Œå°±æ˜¯ `s[i]` ä¸ `s[j]` ç›¸ç­‰ï¼Œ`s[i]` ä¸ `s[j]` ä¸ç›¸ç­‰è¿™ä¸¤ç§ã€‚

å½“ s[i] ä¸ s[j] ä¸ç›¸ç­‰ï¼Œ`dp[i][j]` ä¸º falseï¼Œè¿™ä¸æ˜¯ä¸ªå›æ–‡ä¸²ã€‚

å½“ s[i] ä¸ s[j] ç›¸ç­‰æ—¶ï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µï¼š

- æƒ…å†µä¸€ï¼šä¸‹æ ‡ i ä¸ j ç›¸åŒï¼ŒåŒä¸€ä¸ªå­—ç¬¦ä¾‹å¦‚ `a`ï¼Œæ˜¯å›æ–‡å­ä¸²
- æƒ…å†µäºŒï¼šä¸‹æ ‡ i ä¸ j ç›¸å·®ä¸º1ï¼Œä¾‹å¦‚ `aa`ï¼Œæ˜¯å›æ–‡å­ä¸²
- æƒ…å†µä¸‰ï¼šä¸‹æ ‡ï¼ši ä¸ j ç›¸å·®å¤§äº 1ï¼Œä¾‹å¦‚ `cabac`ï¼Œæ­¤æ—¶ s[i] ä¸ s[j] å·²ç»ç›¸åŒäº†ï¼Œi åˆ° j åŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å­ä¸²å°±çœ‹ `aba` æ˜¯ä¸æ˜¯å›æ–‡å°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆ `aba` çš„åŒºé—´å°±æ˜¯ `[i+1, j-1]`ï¼Œè¿™ä¸ªåŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å°±çœ‹ `dp[i + 1][j - 1]` æ˜¯å¦ä¸º trueã€‚

3. åˆå§‹åŒ–

`dp[i][j]` åˆå§‹åŒ–ä¸º falseã€‚

4. ç¡®å®šéå†é¡ºåº

ä»é€’æ¨å…¬å¼ä¸­å¯ä»¥çœ‹å‡ºï¼Œæƒ…å†µä¸‰æ˜¯æ ¹æ® `dp[i + 1][j - 1]` æ˜¯å¦ä¸º trueï¼Œåœ¨å¯¹ `dp[i][j]` è¿›è¡Œèµ‹å€¼ true çš„ã€‚

`dp[i + 1][j - 1]` åœ¨ `dp[i][j]` çš„å·¦ä¸‹è§’ï¼Œå¦‚å›¾ï¼š

![647.å›æ–‡å­ä¸²](images/åŠ¨æ€è§„åˆ’2.assets/20210121171032473.jpg)

æ‰€ä»¥ä¸€å®šè¦ä»ä¸‹åˆ°ä¸Šï¼Œä»å·¦åˆ°å³éå†ï¼Œè¿™æ ·ä¿è¯ `dp[i + 1][j - 1]` éƒ½æ˜¯ç»è¿‡è®¡ç®—çš„ã€‚

- æ³¨æ„ï¼Œj ä» i å¼€å§‹éå†ï¼Œå› ä¸º j ä½œä¸º `[i, j]` çš„å³åŒºé—´ï¼Œä¸€å®šæ¯” i å¤§ã€‚

```js
var countSubstrings = function (s) {
  const dp = Array.from(new Array(s.length), () => new Array(s.length).fill(false));
  let res = 0;

  // dp[i][j]ä¾èµ–äºdp[i+1][j-1]ï¼Œä»ä¸‹å¾€ä¸Šã€ä»å·¦å¾€å³éå†
  for (let i = s.length - 1; i >= 0; i--) {
    for (let j = i; j < s.length; j++) { // åŒºé—´[i,j]å‘Šè¯‰æˆ‘ä»¬ï¼Œjåªä¼šæ¯”iå¤§
      // ä¸ç›¸ç­‰é»˜è®¤ä¸º false      
      // ç›¸ç­‰ï¼Œ[i,j]å­ä¸²çš„é•¿åº¦ <= 3
      // ç›¸ç­‰ï¼Œå·¦å³å„å‡å°‘ä¸€ä¸ªçš„[i+1, j-1]å­ä¸²ä¹Ÿä¸ºtrue
      if (s[i] === s[j] && (j - i <= 2 || dp[i + 1][j - 1])) {
        res++;
        dp[i][j] = true;
      }
    }
  }
  return res;
};
```

#### æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ

ä»å¤´åˆ°å°¾å®Œæ•´éå†ä¸€é stringï¼Œä»¥æ¯ä¸€ä¸ªæˆå‘˜ i ä¸ºæ ¸å¿ƒï¼Œå·¦å³æ‰©å±•åˆ¤æ–­æœ‰å‡ ä¸ªå›æ–‡å­ä¸²ï¼š

åˆ†ä¸¤ç§æƒ…å†µï¼š

- ä»¥ i ä¸ºæ ¸å¿ƒå·¦å³æ‰©å±•
- ä»¥ i , i+1 ä¸¤ä¸ªæ•°å­—ä¸ºæ ¸å¿ƒå·¦å³æ‰©å±•

```js
var countSubstrings = function (s) {
  let res = 0;
  for (let i = 0; i < s.length; i++) {
    res += palindromic(i, i);
    if (s[i] === s[i + 1]) res += palindromic(i, i + 1);
  }
  return res;

  function palindromic(i, j) {
    let sum = 0;
    while (i >= 0 && j <= s.length && s[i] === s[j]) {
      i--, j++, sum++;
    }
    return sum;
  }
};
```



## 516.æœ€é•¿å›æ–‡å­åºåˆ—

- [516. æœ€é•¿å›æ–‡å­åºåˆ—](https://leetcode.cn/problems/longest-palindromic-subsequence/)
- 0615ï¼Œmidï¼Œanswer
- åŠ¨æ€è§„åˆ’

1. å®šä¹‰dp

`dp[i][j]`ï¼šå­—ç¬¦ä¸² s åœ¨ `[i, j]` èŒƒå›´å†…æœ€é•¿çš„å›æ–‡å­åºåˆ—çš„é•¿åº¦ä¸º `dp[i][j]`ã€‚

2. å®šä¹‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹

- å¦‚æœ `s[i]` ä¸ `s[j]` ç›¸åŒï¼Œé‚£ä¹ˆ `dp[i][j] = dp[i + 1][j - 1] + 2`;
- å¦‚æœä¸ç›¸åŒï¼Œé‚£ä¹ˆè·³è¿‡ iï¼Œæˆ–è€…è·³è¿‡ j ç»§ç»­åˆ¤æ–­ã€‚
  - `dp[i][j] = Math.max(dp[i + 1][j], dp[i][j - 1]);`

3. åˆå§‹åŒ–

é•¿åº¦ä¸º 1 ä¸€å®šæ˜¯å›æ–‡ä¸²ï¼Œå…¶ä½™éƒ½ä¸æ˜¯ï¼Œæ‰€ä»¥æŠŠ `dp[x][x]` èµ‹å€¼ä¸º 1ï¼›

4. éå†èŒƒå›´

å’Œä¸Šä¸€é¢˜ä¸€æ ·ï¼Œ`dp[i][j]` ä¾èµ–äº `dp[i+1][j-1]`ï¼Œéå†ä»ä¸‹è‡³ä¸Šï¼Œä»å·¦è‡³å³ã€‚

- é¢å¤–æ³¨æ„ï¼šj ä» i + 1 å¼€å§‹ï¼Œå› ä¸º i == j å·²ç»åˆå§‹åŒ–çš„æ—¶å€™èµ‹å€¼äº†ï¼Œæ˜¯ base caseã€‚`dp[i+1][j-1]` çš„åˆ¤æ–­æºå¤´ä¾èµ–äº `dp[i][i]`ã€‚

```js
var longestPalindromeSubseq = function (s) {
  // dp[i][j]ï¼šåŒºé—´[i, j] çš„ä¸€ä¸ªæœ€é•¿å›æ–‡åºåˆ—çš„å¤§å°
  const dp = Array.from(new Array(s.length), () => new Array(s.length).fill(0));
	// åˆå§‹åŒ–
  for (let i = 0; i < s.length; i++) dp[i][i] = 1;

  // dp[i][j]ä¾èµ–äºdp[i+1][j-1]ï¼Œéå†ä»ä¸‹è‡³ä¸Šï¼Œä»å·¦è‡³å³
  for (let i = s.length - 1; i >= 0; i--) {
    for (let j = i + 1; j < s.length; j++) {
      dp[i][j] = s[i] === s[j]
        ? dp[i + 1][j - 1] + 2  // ç›¸ç­‰ï¼Œåˆ™é•¿åº¦ + 2
        : Math.max(dp[i + 1][j], dp[i][j - 1]); // ä¸ç›¸ç­‰ï¼Œåˆ™iè·³è¿‡ï¼Œæˆ–è€…jè·³è¿‡
    }
  }
  return dp[0][s.length - 1];
};
```






















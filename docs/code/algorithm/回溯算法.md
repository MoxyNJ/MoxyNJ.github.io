---
title: 7. å›æº¯ç®—æ³•
sidebar_position: 7
date: 2022-05-01
tags: [algorithm]
---



## â° ç»„åˆé—®é¢˜

## 77. ç»„åˆ

- [77. ç»„åˆ](https://leetcode.cn/problems/combinations/)
- 0510ï¼Œmidï¼Œanswer
- å›æº¯ã€å‰ªæ

å›æº¯

- `n` ä»£è¡¨æ•°å­—ç»„åˆçš„èŒƒå›´ï¼š`[1, n]`ï¼›`k` ä»£è¡¨ç»„åˆçš„é•¿åº¦ï¼šç»“æœé›†åˆä¸­ï¼Œæ¯ä¸€æˆå‘˜çš„é•¿åº¦å‡ä¸º `k`ã€‚
- åœ¨ä»£ç ä¸­ï¼Œ`path` è¡¨ç¤ºäº†æ¯ä¸€ä¸ªæˆå‘˜ï¼Œè¡¨ç¤ºå…¶ä¸­ä¸€ä¸ªç»„åˆï¼›`res` æ˜¯ `path` çš„é›†åˆï¼Œä¹Ÿå°±æ˜¯ç»„åˆçš„é›†åˆã€‚

![a](./images/å›æº¯ç®—æ³•.assets/20201123195242899-2627025.png)

æ­£ç¡®çš„æŠŠé¢˜æ„æ‹†åˆ†ä¸ºä¸€ä¸ªæ•°ç»“æ„ï¼Œæ˜¯è§£é¢˜çš„å…³é”®ã€‚

- åœ¨æœ¬é¢˜ä¸­ï¼š
  - æ¨ªå‘ for å¾ªç¯çš„æ˜¯ `	[1, n]` è¿™ä¸ªå¯é€‰çš„å»å€¼åŒºé—´ï¼›çºµå‘é€’å½’çš„æ˜¯ `path` è¿™ä¸ªç»“æœç»„åˆã€‚
  - æ¨ªå‘çš„èŒƒå›´å°±æ˜¯ `[startIndex, n]`ï¼Œçºµå‘çš„èŒƒå›´æ˜¯ `[path.length, k]`ï¼›

#### æ–¹æ³•ä¸€ï¼šå›æº¯

```js
var combine = function (n, k) {
  const res = [];
  const path = [];
  backtracking(n ,k ,1);
  return res;
	
  // é€’å½’ï¼šæ¯æ¬¡ä¼ å…¥ startIndex ç¡®å®šä¸‹ä¸€æ¬¡ for å¾ªç¯çš„èŒƒå›´
  function backtracking(n, k, startIndex) {
    // è¾¹ç•Œï¼šå½“æ‰¾åˆ°ä¸€ä¸ªç»„åˆæ—¶ï¼Œç™»è®°ç»“æœï¼Œç»“æŸé€’å½’ã€‚
    if (path.length == k) {
      res.push([...path]);
      return;
    }

    for (let i = startIndex; i <= n; i++) {
      path.push(i);
      backtracking(n, k, i + 1);
      path.pop(i);
    }
  }
};
```

#### æ–¹æ³•äºŒï¼šå›æº¯ï½œå‰ªæä¼˜åŒ–

- å‡è®¾ï¼š`n = 4`ï¼Œ `k = 4`ï¼Œç›´è§‚çš„å‘Šè¯‰æˆ‘ä»¬åªæœ‰ä¸€ç§ç»„åˆç»“æœï¼Œå°±æ˜¯ `	[1,2,3,4]`ã€‚ä½†ä¹‹å‰çš„ç®—æ³•ä¸­ï¼Œç¬¬ä¸€å±‚é€’å½’çš„ for å¾ªç¯ä¼šä¾æ¬¡éå† 1ï¼Œ2ï¼Œ3ï¼Œ4ã€‚è€Œæˆ‘ä»¬çŸ¥é“åªéœ€è¦éå† 1 å°±å¤Ÿäº†ã€‚
  - ç¼©å° for å¾ªç¯çš„èŒƒå›´ï¼šè‹¥å½“å‰ path çš„å‰©ä½™ä½ç½®ï¼ˆ`k - path.length`ï¼‰ï¼Œå¤§äº n ä¸­å‰©ä½™çš„å¯ç”¨æ•°å­—ï¼ˆ`n - startIndex + 1 `ï¼‰ã€‚æ¢å¥è¯è¯´å¦‚æœ n ä¸­å‰©ä½™çš„å¯ç”¨æ•°å­—å³ä½¿å…¨éƒ¨æ”¾åœ¨ path ä¸­ï¼Œä¹Ÿæ— æ³•è¾¾åˆ° k çš„é•¿åº¦ã€‚é‚£ä¹ˆæ­¤æ—¶å°±ä¸éœ€è¦ for éå†äº†ï¼ˆå‰ªæï¼‰ã€‚

![f](./images/å›æº¯ç®—æ³•.assets/%E6%88%AA%E5%B1%8F2022-05-15%2022.05.09.png)

![d](./images/å›æº¯ç®—æ³•.assets/20210130194335207-2627053.png)

```js
var combine = function (n, k) {
  const res = [];
  const path = [];
  backtracking(n, k, 1);
  return res;

  function backtracking(n, k, startIndex) {
    if (path.length == k) {
      res.push([...path]);
      return;
    }
    
		// å‰ªæï¼Œä¸æ‰§è¡Œæ¥ä¸‹æ¥çš„ for å¾ªç¯
    if (k - path.length > n - startIndex + 1) return;

    for (let i = startIndex; i <= n; i++) {
      path.push(i);
      backtracking(n, k, i + 1);
      path.pop(i);  // å›æº¯
    }
  }
};
```

ç›´æ¥åˆå¹¶åˆ° for å¾ªç¯ä¸­ï¼š

- `for` å¾ªç¯ä» i å¼€å§‹ï¼Œ`i` å¿…é¡»å°äºè¿™ä¸ªå€¼ï¼Œ`startIndex <= n - k - path.length + 1`ï¼Œæ”¾åˆ° for å¾ªç¯ä¸­ï¼š

```js
var combine = function (n, k) {
  const res = [];
  const path = [];
  backtracking(n, k, 1);
  return res;

  function backtracking(n, k, startIndex) {
    if (path.length == k) {
      res.push([...path]);
      return;
    }
    
    for (let i = startIndex; i <= n - (k - path.length) + 1; i++) {
      path.push(i);
      backtracking(n, k, i + 1);
      path.pop(i);  // å›æº¯
    }
  }
};
```



## 216. ç»„åˆæ€»å’Œ III

- [216. ç»„åˆæ€»å’Œ III](https://leetcode.cn/problems/combination-sum-iii/)
- 0510ï¼Œmidï¼Œquick
- å›æº¯ã€å‰ªæ

å›æº¯çš„æ•´ä½“æ€è·¯å’Œä¸Šä¸€é¢˜ï¼ˆ77ï¼‰å¤§è‡´ç›¸åŒï¼Œè¦ç¡®å®šè¿™ä¸‰ä¸ªäº‹æƒ…ï¼š

1. `for` å¾ªç¯çš„èŒƒå›´ï¼š`[1,9]`ï¼Œè¿™9ä¸ªæ•°å­—ï¼›
   - éœ€è¦æ³¨æ„è¿™ 9 ä¸ªæ•°å­—éœ€è¦ç­›é€‰`(2)`ï¼šç”¨è¿‡çš„ä¸èƒ½å†ç”¨ï¼Œæ•°å­—ç›¸åŠ è¦ = `9`ï¼›
2. `dfs` é€’å½’çš„æ·±åº¦ï¼š`k`ï¼Œéå†çš„æ·±åº¦å°±æ˜¯ç»„åˆçš„é•¿åº¦ï¼Œä¸º kï¼›
3. æœ€åç¡®å®šå£°æ˜çš„å˜é‡ï¼Œdfs è¿”å›çš„è¾¹ç•Œï¼Œres.push çš„æ¡ä»¶ã€‚

#### æ–¹æ³•ä¸€ï¼šå›æº¯

```js
var combinationSum3 = function (k, n) {
  const res = [];
  const path = [];
  dfs(k, n, path, 1);
  return res;

  function dfs(k, n, path, startIndex) {
    // è¾¹ç•Œ
    if (path.length === k) {
      const count = path.reduce((prev, curv) => prev + curv);
      if (count === n) res.push([...path]);
      return;
    }

    // é€’å½’
    for (let i = startIndex; i <= 9; i++) {
      path.push(i);
      dfs(k, n, path, i + 1);
      path.pop();
    }
  }
};
```

#### æ–¹æ³•äºŒï¼šå›æº¯ï½œå‰ªæä¼˜åŒ–

- ä¼˜åŒ–çš„æ€è·¯ä¹Ÿå’Œä¸Šä¸€ä¸ªé¢˜ç›¸åŒï¼Œå¦‚æœå‰©ä½™çš„æ•°å­—ï¼ˆ`n`ï¼‰ä¸è¶³ä»¥å¡«å…… k çš„å‰©ä½™é•¿åº¦ï¼Œå°±æ²¡å¿…è¦å†æ‰§è¡Œ for å¾ªç¯äº†ã€‚
  - æ¢å¥è¯è¯´ï¼ŒstartIndex ä¸ä»…éœ€è¦æ»¡è¶³ 'å°äº 9 ' çš„è¦æ±‚ï¼Œè¿˜è¦æ»¡è¶³ä¸‹é¢çš„è¦æ±‚ï¼š

```js
9 - startIndex + 1 >= k - path.length
// è½¬åŒ–ä¸€ä¸‹
startIndex <= 10 - (k - path.length)
```

åŒæ—¶ï¼Œæ±‚å’Œ `count` ä¹Ÿå¯ä»¥åœ¨æ¯æ¬¡é€’å½’çš„æ—¶å€™è®¡ç®—ï¼Œä¸éœ€è¦åœ¨ `res.push()` æ‰§è¡Œ reduce è¿›è¡Œè®¡ç®—ã€‚

```js
var combinationSum3 = function (k, n) {
  // for:[1,9]ï¼Œè¿™9ä¸ªæ•°å­—ï¼›éœ€è¦æ³¨æ„è¿™ 9 ä¸ªæ•°å­—éœ€è¦ç­›é€‰ï¼šç”¨è¿‡çš„ä¸èƒ½å†ç”¨ï¼Œæ•°å­—ç›¸åŠ è¦=9
  // dfs:kï¼Œéå†çš„æ·±åº¦å°±æ˜¯ç»„åˆçš„é•¿åº¦ï¼Œä¸ºk
  const res = [];
  const path = [];
  dfs(k, n, path, 1, 0);
  return res;

  function dfs(k, n, path, startIndex, sum) { 
    // è¾¹ç•Œï¼šç»“æŸé€’å½’
    if (path.length === k) {
      // resï¼šç»“æŸé€’å½’ä¸ä¸€å®šæ»¡è¶³æ¡ä»¶ï¼Œæ»¡è¶³æ¡ä»¶æ‰èƒ½æ”¾å…¥ res ä¸­
      if (sum === n) res.push([...path]);
      return;
    }

    // é€’å½’
    for (let i = startIndex; i <= 10 - (k - path.length); i++) {
      path.push(i);
      sum += i;
      dfs(k, n, path, i + 1, sum);
      path.pop();
      sum -= i;
    }
  }
};
```



## 17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ

- [17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ](https://leetcode.cn/problems/letter-combinations-of-a-phone-number/)
- 0510ï¼Œmidï¼Œquick
- å›æº¯

ä¾ç„¶æ˜¯ç¡®å®šå›æº¯çš„ä¸‰ä¸ªæ¡ä»¶ï¼š

1. forï¼šæ¯å±‚forå¾ªç¯çš„èŒƒå›´éƒ½ä¸ä¸€æ ·ï¼Œè¿™å–å†³äºå½“å‰çš„å…·ä½“æ•°å­—ï¼Œæ•°å­—ä¸åŒåˆ™èŒƒå›´ä¸åŒã€‚åŒæ—¶ï¼Œå‰ªææ€è·¯å’Œï¼ˆ77.ç»„åˆï¼‰ç›¸åŒã€‚
2. dfsï¼š`digits.length`ï¼Œå³è¾“å…¥æ•°å­—çš„é•¿åº¦ã€‚å¦‚æœè¾“å…¥æ•°å­—çš„é•¿åº¦ä¸º3ï¼Œé‚£ç»“æœç»„åˆçš„é•¿åº¦å°±æ˜¯ 3ï¼›
3. è¿”å›ï¼šå½“ `path.length === digits.length` å³ï¼Œç»“æœç»„åˆçš„é•¿åº¦ï¼Œå’Œä¼ å…¥æ•°å­—çš„é•¿åº¦ç›¸åŒæ—¶ï¼Œè¿”å›ç»“æœå¹¶ç»“æŸé€’å½’ã€‚

è¿™é‡Œä¸ä»…å¯ä»¥ç”¨ mapï¼Œä¹Ÿå¯ä»¥ç”¨ æ•°ç»„ï¼Œå®é™…ä¸Šæ•°ç»„åœ¨è¿™é‡Œæ›´å¿«ï¼š

```js
const map = [
    "", // 0
    "", // 1
    "abc", // 2
    "def", // 3
    "ghi", // 4
    "jkl", // 5
    "mno", // 6
    "pqrs", // 7
    "tuv", // 8
    "wxyz", // 9
  ];
```

è§£ç­”ï¼š

```js
var letterCombinations = function (digits) {
  if (digits.length === 0) return [];
  const map = new Map([
    ['2', 'abc'],
    ['3', 'def'],
    ['4', 'ghi'],
    ['5', 'jkl'],
    ['6', 'mno'],
    ['7', 'pqrs'],
    ['8', 'tuv'],
    ['9', 'wxyz']
  ])
  const res = [];
  const path = [];
  dfs(digits, path);
  return res;

  // digits = â€˜23â€™
  function dfs(digits, path) {
    // ç»“æŸ
    if (path.length === digits.length) {
      res.push(path.join(""));
      return;
    }

    //soruce = 'abc'
    //path.length è¡¨æ˜ç›®å‰éå†åˆ°å“ªä¸€ä¸ªæ•°å­—äº†ï¼Œå¦‚æœå€¼æ—¶1ï¼Œè¡¨æ˜å·²ç»éå†è¿‡ digits[0]ï¼Œä¸‹ä¸€å±‚è¯¥éå† digits[1] äº†ã€‚
    const source = map.get(digits[path.length]);

    // é€’å½’
    for (let i = 0 ; i < source.length ; i++) {
      path.push(source[i]);
      dfs(digits, path);
      path.pop();
    }
  }
};
```



## 39. ç»„åˆæ€»å’Œ

- [39. ç»„åˆæ€»å’Œ](https://leetcode.cn/problems/combination-sum/)
- 0518ï¼Œmidï¼Œmormal
- å›æº¯

æ€è·¯ï¼š

åšå›æº¯æ—¶ï¼Œä¸€å®šè¦åœ¨è„‘æµ·ä¸­æ„æ€ä¸€ä¸ªæ ‘æ¥ã€‚ç„¶åè€ƒè™‘è¿™æ£µæ ‘çš„æ¨ªå‘éå†ï¼ˆforå¾ªç¯ï¼‰ï¼Œå’Œçºµå‘é€’å½’ï¼ˆdfs é€’å½’ï¼‰ï¼Œæœ€åè€ƒè™‘é€’å½’çš„ç»“æŸã€‚

- forï¼šæ¨ªå‘éå†ï¼Œé¢˜ç›®ä¸­æ•°å­—å¯ä»¥é‡å¤å–ï¼Œæ‰€ä»¥å¦‚å›¾ï¼Œå½“ `[2,5,3]` ä¸­æœ¬è½®å– 2ï¼Œé‚£ä¸‹ä¸€è½® 2ï¼Œ5ï¼Œ3 éƒ½å¯ä»¥å–ã€‚æœ¬è½®å– 5ï¼Œä¸‹ä¸€è½®åªèƒ½å–5ï¼Œ3ã€‚æ‰€ä»¥ï¼Œåªèƒ½å– >= å½“å‰æ•°å­—çš„èŒƒå›´ã€‚
- dfsï¼šçºµå‘é€’å½’ï¼Œé¢˜ç›®ä¸­æ•°å­—çš„å–ç”¨ä¸é™æ¬¡æ•°ï¼Œå°±éå†æ•°å­—è€Œè¨€ï¼Œæ„å‘³ç€ dfs çš„æ·±åº¦å¯ä»¥æ˜¯æ— é™ã€‚
- é€’å½’çš„ç»“æŸï¼šå½“å–ç”¨çš„æ•°å­—æ€»å’Œ >= target æ—¶ï¼Œé€’å½’ç»“æŸã€‚
  - æ­¤æ—¶å¦‚æœ === ï¼Œé‚£ç™»è®°è¯¥ç»„åˆï¼Œæ˜¯ä¸€ä¸ªç­”æ¡ˆï¼›
  - æ­¤æ—¶å¦‚æœ > targetï¼Œé‚£ç›´æ¥ç»“æŸé€’å½’ï¼Œä¸¢å¼ƒç»“æœã€‚

![20201223170730367](images/å›æº¯ç®—æ³•.assets/20201223170730367-20220518185211264.png)

#### æ–¹æ³•ä¸€ï¼šå›æº¯

```js
var combinationSum = function (candidates, target) {
  const res = [];
  const path = [];

  dfs(0, target);
  return res;

  function dfs(startindex, target) {
    // è¾¹ç•Œã€‚
    // å¤§äº0ï¼Œè¡¨ç¤º path è¿˜æ²¡æœ‰å¡«æ»¡ï¼Œéœ€è¦å†åŠ æ•°å­—ï¼›
    // ç­‰äº0ï¼Œè¡¨ç¤º path å·²ç»æ˜¯ç›®æ ‡ç»„åˆï¼›
    // å°äº0ï¼Œè¡¨ç¤º path çš„æ€»å’Œè¶…å‡ºtargetï¼Œä¸¢å¼ƒã€‚
    if (target < 0) return;
    else if (target === 0) {
      res.push([...path]);
      return;
    }

    // ä¸‹ä¸€å±‚åªèƒ½ç”¨å¤§äºç­‰äºå½“å‰å±‚çš„æ•°å­—
    	for (let i = startIndex; i < candidates.length; i++) {
      target -= candidates[i];
      path.push(candidates[i]);
      dfs(i, target);
      path.pop(candidates[i]);
      target += candidates[i];
    }
  }
};
```

#### æ–¹æ³•äºŒï¼šå›æº¯ï½œå‰ªæä¼˜åŒ–

ä¼˜åŒ–çš„ç›®çš„æ˜¯æå‰ç»“æŸé€’å½’ï¼Œçœå»å¯¹ path çš„ pop å’Œ push æ“ä½œã€‚

- å¦‚æœ candidates æ˜¯æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åºï¼ˆsortï¼‰ï¼Œé‚£åœ¨ for å¾ªç¯æ—¶ï¼Œå‡ºç°è¶…å‡º target çš„æƒ…å†µï¼Œåé¢çš„æ•°å­—ä¾¿ä¸éœ€è¦å†éå†ã€‚
  - æ¯”å¦‚ candidates = [2, 3, 5, 7]ï¼Œterget = 6ï¼Œç›®å‰çš„ path = [2, 2]ã€‚æ­¤æ—¶æˆ‘ä»¬å‘ç°ï¼Œ[3,5,7] éƒ½å¯ä»¥å‰ªæ‰äº†ã€‚

- æ“ä½œï¼š
  - å¯¹ candidates è¿›è¡Œæ’åºï¼›
  - åœ¨ for å¾ªç¯çš„æ¡ä»¶ä¸Šé¢å¤–åŠ ä¸€æ¡ï¼Œå¦‚æœå½“å‰ target å‡å»æ­£è¦é€’å½’çš„æ•°å­— candidates[i]ï¼Œå·²ç» <0ï¼Œé‚£ä¸å†éœ€è¦é€’å½’ï¼Œæå‰ç»“æŸã€‚

```js
var combinationSum = function (candidates, target) {
	candidates.sort((x, y) => x - y). // æ’åºã€‚
  const res = [];
  const path = [];

  // ä¸‹ä¸€å±‚åªèƒ½ç”¨å¤§äºç­‰äºå½“å‰å±‚çš„æ•°å­—
  dfs(0, target);

  function dfs(startindex, target) {
    // è¾¹ç•Œã€‚
    // å¤§äº0ï¼Œè¡¨ç¤º path è¿˜æ²¡æœ‰å¡«æ»¡ï¼Œéœ€è¦å†åŠ æ•°å­—ï¼›
    // ç­‰äº0ï¼Œè¡¨ç¤º path å·²ç»æ˜¯ç›®æ ‡ç»„åˆï¼›
    // å°äº0ï¼Œè¡¨ç¤º path çš„æ€»å’Œè¶…å‡ºtargetï¼Œä¸¢å¼ƒã€‚
    if (target < 0) return;
    else if (target === 0) {
      res.push([...path]);
      return;
    }

    // å‰ªæï¼štarget - candidates[i] <= target åªæœ‰ç¬¦åˆæ¡ä»¶æ‰è¿›ä¸€æ­¥é€’å½’
    for (let i = startindex; i < candidates.length && target - candidates[i] <= target; i++) {
      target -= candidates[i];
      path.push(candidates[i]);
      dfs(i, target);
      path.pop(candidates[i]);
      target += candidates[i];
    }
  }
  return res;
};

```



## 40. ç»„åˆæ€»å’Œ II

- [40. ç»„åˆæ€»å’Œ II](https://leetcode.cn/problems/combination-sum-ii/)
- 0518ï¼Œmidï¼Œanswer
- å›æº¯

æ€è·¯ï¼š

- è¿™é“é¢˜çš„éš¾ç‚¹åœ¨äºå»é‡ï¼š

```js
ç¤ºä¾‹Â 1:
è¾“å…¥: candidates =Â [1,1,2], target =Â 3,
```

å¯ä»¥çœ‹åˆ°ï¼Œ1 åœ¨è¾“å…¥æ˜¯é‡å¤çš„ï¼Œåœ¨åŒä¸€ä¸ª for æ¨ªå‘éå†ä¸­ï¼Œå–ä¸¤æ¬¡ 1 æ•°å­—ã€‚for ä¸­é‡å¤å–çš„ç»“æœä¸€å®šæ˜¯é‡å¤çš„ï¼Œæ¯”å¦‚ç»“æœ [1,2] ä¸­çš„ `1` å¯ä»¥æ˜¯å– `candidates[0]`ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ `candidates[1]`ã€‚

ä½†æ˜¯ï¼Œåœ¨ dfs æ—¶ï¼Œ1 æ˜¯å¯ä»¥é‡å¤å–çš„ï¼š`[1,1,2]` å°±æ˜¯ä¸€ä¸ªé‡å¤å–å‡ºçš„ç»“æœã€‚

![20201123202736384](images/å›æº¯ç®—æ³•.assets/20201123202736384.png)

åœ¨ for å¾ªç¯ä¸­ï¼Œå¯¹é‡å¤å–æ•°å­—è¿›è¡Œå¤„ç†ï¼š

```js
if (i > startIndex && candidates[i] === candidates[i - 1]) continue;
```

- å¦‚æœå½“å‰æ•°å­— `candidates[i]` å’Œ å‰ä¸€ä¸ªæ•° `candidates[i-1]` ç›¸ç­‰ï¼Œåˆ™è¯æ˜å‡ºç°äº†é‡å¤ã€‚æ­¤æ—¶è¿˜éœ€è¦é¢å¤–åˆ¤æ–­æ˜¯å¦æ˜¯ dfs é‡å¤ï¼š
  - å¦‚æœ `i === startIndex` ï¼Œåˆ™è¡¨æ˜å½“å‰çš„ for å¾ªç¯æ˜¯ä¸€ä¸ªå…¨æ–°çš„ä¸€å±‚ã€‚å¯¹æ–°çš„ä¸€å±‚å–æ•°å­—ä¸åº”å½“æœ‰ â€œé‡å¤â€ ä¸èƒ½å–çš„é™åˆ¶ï¼Œæ‰€ä»¥è·³è¿‡ã€‚



**å‰ªæï¼š**

è¿™é‡Œä¸å†ç”¨æ–¹æ³•äºŒï¼ŒæŒ‡å‡ºå‰ªæäº†ã€‚å¦‚æœåœ¨è¿›è¡Œ for å¾ªç¯æ—¶ï¼Œå½“å‰ target - candadies[i] å·²ç»å°äº 0ï¼Œè¡¨æ˜ path ä¸­çš„æˆå‘˜æ€»æ•°å·²ç»è¶…è¿‡ç›®æ ‡å€¼ï¼Œæ‰€ä»¥ä¸å†å¾€ä¸‹é€’å½’ã€‚

```js
var combinationSum2 = function (candidates, target) {
  candidates.sort((x, y) => x - y);   // æ’åº
  const res = [], path = [];

  dfs(0, target);
  return res;

  function dfs(startIndex, target) {
    // dfsæˆªæ­¢
    if (target < 0) return;
    else if (target === 0) res.push([...path]);

    // å‰ªæï¼štarget - candidates[i] >= 0
    for (let i = startIndex; i < candidates.length && target - candidates[i] >= 0; i++) {
      // æ•°å­—é‡å¤çš„å¤„ç†ï¼š
      if (i > startIndex && candidates[i] === candidates[i - 1]) continue;

      target -= candidates[i];
      path.push(candidates[i]);
      dfs(i + 1, target);
      path.pop(candidates[i]);
      target += candidates[i];
    }
  }
};
```



## åˆ†å‰²é—®é¢˜

## 131. åˆ†å‰²å›æ–‡ä¸²

- [131. åˆ†å‰²å›æ–‡ä¸²](https://leetcode.cn/problems/palindrome-partitioning/)
- 0518ï¼Œmidï¼Œanswer
- å›æº¯

æ€è·¯å¦‚ä¸‹ï¼š[é“¾æ¥](https://www.programmercarl.com/0131.%E5%88%86%E5%89%B2%E5%9B%9E%E6%96%87%E4%B8%B2.html#%E5%9B%9E%E6%BA%AF%E4%B8%89%E9%83%A8%E6%9B%B2)

- éœ€è¦æ³¨æ„åˆ°æ˜¯ï¼Œæ¯æ¬¡åˆ‡å‰²ååˆ¤æ–­çš„æ˜¯å·¦å­ä¸²ã€‚

![131.åˆ†å‰²å›æ–‡ä¸²](images/å›æº¯ç®—æ³•.assets/1234.jpg)





![image-20220518204715652](images/å›æº¯ç®—æ³•.assets/image-20220518204715652.png)

å¯ä»¥æŠŠåˆ†å‰²çš„è¿‡ç¨‹ï¼Œæƒ³è±¡ä¸ºå›æº¯ä¸­é€‰å–ç»„åˆçš„è¿‡ç¨‹ã€‚

- startIndex ä¸ºä¸Šä¸€è½®åˆ‡å‰²çº¿ï¼Œ
  - æ¯åˆ‡å‰²ä¸€æ¬¡ï¼Œéƒ½è¦åˆ¤æ–­åˆ‡ä¸‹çš„å·¦å­ä¸²æ˜¯å¦ç¬¦åˆä¸€ä¸ªå›æ–‡ä¸²ï¼š
    - å¦‚æœç¬¦åˆï¼Œåˆ™è¿›è¡Œé€’å½’ï¼Œè¿›è¡Œååºçš„åˆ‡å‰²ï¼›
    - å¦‚æœä¸ç¬¦åˆï¼Œåˆ™ä¸èƒ½è¿™æ ·åˆ‡å‰²ï¼Œè·³è¿‡æœ¬æ¬¡é€’å½’ï¼›
  - ç›´åˆ°åˆ‡å‰²åˆ° s å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªä½ç½®ã€‚è¯æ˜æ‰€æœ‰çš„å­ä¸²éƒ½æ˜¯å›æ–‡çš„ï¼Œåˆ™æŠŠ path æ”¾å…¥ç»“æœä¸­ã€‚
- for å¾ªç¯ï¼šæ¯æ¬¡åˆ‡å‰²ï¼Œéƒ½æŠŠå­—ç¬¦ä¸²åˆ‡å‰²ä¸ºï¼š`[startIndex, i]` å’Œ `[3, s.length - 1]` çš„ä¸¤ä¸ªå›æ–‡ä¸²ã€‚
- dfs é€’å½’ï¼šç»“æŸçš„æ ‡å¿—å°±æ˜¯åˆ‡å‰²åˆ°æœ€åä¸€ä¸ªæ•°å­—ï¼Œä¹Ÿå°±æ˜¯ä¸å†æœ‰å³å­ä¸²ä»¥ä¾›åˆ‡å‰²äº†ï¼Œåˆ™ç»“æŸéå†ï¼ŒåŒæ—¶ `res.push()`ã€‚

```js
var partition = function (s) {
  const res = [];
  const path = [];

  dfs(0);
  return res;

	// ä¸‹ä¸€æ­¥åˆ‡å‰²çš„èŒƒå›´ï¼š[startIndex, s.length - 1];
  function dfs(startIndex) {
    // åˆ‡å‰²ç»“æŸï¼Œç™»è®°ç»“æœ
    if (startIndex >= s.length) {
      res.push([...path]);
      return;
    }
    
    // i å°±æ˜¯åˆ‡å‰²çº¿ï¼Œi == 2ï¼Œè¡¨ç¤ºåˆ‡å‰²å‡ºï¼š[startIndex, 2] å’Œ [3, s.length - 1] çš„ä¸¤ä¸ªå›æ–‡ä¸²ã€‚
    for (let i = startIndex; i < s.length; i++) {
			// å‰ªæï¼šåˆ‡ä¸‹çš„å·¦è¾¹ [startIndex, i] ä¸æ˜¯å­ä¸²ï¼Œåˆ™ä¸è¿›è¡Œé€’å½’ã€‚
      if (!isCorrect(startIndex, i)) continue;
			// é€’å½’
      path.push(s.substr(startIndex, i - startIndex + 1));
      dfs(i + 1);
      path.pop();
    }
  }

  // åˆ¤æ–­å›æ–‡: åŒæŒ‡é’ˆ
  function isCorrect(left, right) {
    while (left < right) {
      if (s[left] !== s[right]) return false;
      left++, right--;
    }
    return true;
  }
};
```



## 93. å¤åŸ IP åœ°å€

- [93. å¤åŸ IP åœ°å€](https://leetcode.cn/problems/restore-ip-addresses/)
- 0521ï¼Œmidï¼Œnormal
  - å›æº¯ã€å‰ªæ	

æˆ‘çš„å›æº¯åšé¢˜æ€è·¯ï¼š

- å…ˆç¡®å®š 3 æ ¸å¿ƒï¼šdfs çºµå‘é€’å½’ã€for æ¨ªå‘éå†ã€dfs ç»“æŸçš„è¾¹ç•Œï¼›
- ç„¶åæŠŠå›æº¯æ¡†å†™å‡ºæ¥ï¼Œç¡®å®šè‡ªå·±çš„å›æº¯æ¡†æ¶æ­£ç¡®ï¼›
  - startIndex æ˜¯å‰©ä½™æ•°ç»„çš„èµ·å§‹ä½ç½®ï¼›
  - for ä¸­çš„ `i` åˆ‡å‰²å­—ç¬¦ä¸²çš„ä½ç½®ï¼Œ`[startIndex, i]` å’Œ `[i + 1, s.length - 1]`  åˆ‡å‰²å‡ºå·¦è¾¹ä¸€ä¸ªæ•°å­—
- æ¥ç€ç¡®å®šç‰¹æ®Šæ¡ä»¶ï¼Œæ¯”å¦‚æœ¬æ–‡ä¸­çš„æ¡ä»¶ï¼š
  1. è¿™åŒºé—´ `[startIndex, i]` å½¢æˆçš„æ•°å­—ï¼Œå¿…é¡»å°äº255ï¼Œä¸”å¤§äº1ä½çš„æ•°å­—ä¸èƒ½ä»¥0å¼€å¤´ï¼›
  2. å½“åˆ‡å‰²å®Œä¼šäº§ç”Ÿ 4 ä¸ªæ•°å­—æ—¶ï¼Œè¡¨æ˜åˆ‡å‰²ç»“æŸï¼ˆdfs ç»“æŸè¾¹ç•Œï¼‰ï¼Œæ­¤æ—¶ä¹Ÿè¦åˆ¤æ–­  `[i + 1, s.length - 1]`   ç¬¦åˆæ ‡å‡†ï¼›
- ç¡®å®šç‰¹æ®Šæ¡ä»¶çš„ä½ç½®ï¼šåœ¨ for å¾ªç¯å†…åˆ¤æ–­ï¼Œå¦‚æœä¸æ»¡è¶³å°±è·³è¿‡æœ¬è½®å¾ªç¯ã€‚

```js
var restoreIpAddresses = function (s) {
  // å›æº¯ç®—æ³•
  // dfsï¼šstartindexä¸ºå‰©ä½™æ•°ç»„çš„ç¬¬ä¸€ä¸ªæ•°å­—
  // for: å¯åˆ‡å‰²çš„æ•°å­—
  // è¾¹ç•Œï¼šdfsçš„å±‚æ•°ä¸º4ï¼Œå³åˆ‡å‰²å‡ºå››ä¸ªæ•°å­—
  const path = [], res = [];
  dfs(0);
  return res;

  function dfs(startIndex) {
    if (path.length === 3) {
      res.push([...path , s.substring(startIndex)].join("."));
      return;
    }

    // [å¼€å¤´ï¼ŒstartIndex, startIndex + 1, ç»“å°¾]
    for (let i = startIndex; i < s.length - 1; i++) {
      // å¦‚æœä¸ç¬¦åˆæ ‡å‡†ï¼Œåˆ™è·³è¿‡
      if (isNotTure(startIndex, i)) continue;
      // å¦‚æœæ˜¯æœ€åä¸€åˆ€ï¼Œéœ€è¦åˆ¤æ–­å³ä¾§æ˜¯å¦ç¬¦åˆ
      if (path.length === 2 && isNotTure(i + 1, s.length - 1)) continue;
      // è¿™é‡Œåˆ‡åˆ†çš„ä¸€å®šç¬¦åˆ
      path.push(s.substring(startIndex, i + 1));
      dfs(i + 1);
      path.pop();
    }
  }

  // åˆ¤æ–­æ•°å­—æ˜¯å¦ç¬¦åˆæ ‡å‡†:åŒºé—´ [left, right] å³é—­;
  function isNotTure(left, right) {
    // å‰ªæ‰ä¸æ»¡è¶³çš„ï¼Œå¼€å¤´æ˜¯0çš„æ•°å­—1ä½ä»¥ä¸Šã€æ•°å­—æ€»å’Œå¿…é¡»å¤§äº255çš„
    return Number(s[left]) === 0 && right - left >= 1 || 
      		 Number(s.substring(left, right + 1) > 255);
  }
};
```



## 78. å­é›†

- [78. å­é›†](https://leetcode.cn/problems/subsets/)
- 0522ï¼Œmidï¼Œquick
- å›æº¯

#### æ–¹æ³•ä¸€ï¼šæˆ‘çš„æ€è·¯

ç¡®å®šå›æº¯çš„ä¸‰ä¸ªæ ¸å¿ƒï¼š

- for å¾ªç¯éå†ï¼šfor å¾ªç¯åªæœ‰ä¸¤ä¸ªé€‰é¡¹ï¼Œå¯¹å½“å‰æ•°å­— **é€‰æ‹©**ï¼Œæˆ–è€… **ä¸é€‰æ‹©**ï¼›
- dfs æ·±åº¦é€’å½’ï¼šå¯¹ nums æ•°ç»„çš„æ¯ä¸ªæˆå‘˜ä¾æ¬¡æ‰§è¡Œ dfs é€’å½’ï¼›
- dfs è¾¹ç•Œï¼Œå½“ `é€’å½’æ·±åº¦ === nums.length` æ•°ç»„çš„é•¿åº¦æ—¶ï¼Œè¡¨æ˜æ— æ³•æ¥ç€å¾€ä¸‹é€’å½’ï¼Œè¿”å›ç­”æ¡ˆã€‚

![81cfbc53d8401e7562b1fab8aca2ebf](images/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95.assets/81cfbc53d8401e7562b1fab8aca2ebf.jpg)

```js
var subsets = function(nums) {
  const path = [], res = [];
  dfs(0);
  return res;

  function dfs(startIndex){
    if (startIndex === nums.length) {      
      res.push([...path]);
      return;
    }

    // ä¸é€‰
    dfs(startIndex + 1);
    // é€‰æ‹©
    path.push(nums[startIndex]);
    dfs(startIndex + 1);
    path.pop();
  }
};
```

#### æ–¹æ³•äºŒï¼šå€Ÿç”¨ startIndex

å¦‚ä¸‹å›¾ï¼Œ

- dfsï¼šå’Œä¹‹å‰ä¸€æ ·ï¼Œå°±æ˜¯ nums çš„é•¿åº¦ï¼Œä¸€æ—¦éå†å®Œæ‰€æœ‰ nums æˆå‘˜ï¼Œå°±ç»“æŸé€’å½’ã€‚
- forï¼šéå†å‰©ä½™çš„æ‰€æœ‰æ•°å­—ï¼›
- è¾¹ç•Œï¼šè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œres ä¸æ˜¯åœ¨è¾¾åˆ°è¾¹ç•Œæ—¶æ‰è·å¾—ï¼Œè€Œæ˜¯æ¯å½“è¿›è¡Œä¸€æ¬¡ dfs é€’å½’ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ª resã€‚
  - æ‰€ä»¥åœ¨æ¯è½® dfs æ—¶ï¼Œéƒ½å…ˆ res.push([...path])ï¼ŒåŒæ—¶ä¹Ÿä¸éœ€è¦å¯¹è¾¹ç•Œè¿›è¡Œåˆ¤æ–­å› ä¸º for å¾ªç¯å°±é™åˆ¶äº†èŒƒå›´ä¸å¯èƒ½è¶…è¿‡ nums.length

![78.å­é›†](images/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95.assets/202011232041348.png)

```js
var subsets = function (nums) {
  const path = [], res = [];
  dfs(0);
  return res;

  function dfs(startIndex) {
    res.push([...path]);
    for (let i = startIndex; i < nums.length; i++) {
      path.push(nums[i]);
      dfs(i + 1);
      path.pop();
    }
  }
};
```



## 90. å­é›† II

- [90. å­é›† II](https://leetcode.cn/problems/subsets-ii/)
- 0521ï¼Œmidï¼Œquick
- å›æº¯ï¼Œå‰ªæ

æ€è·¯å’Œä¸Šä¸€é¢˜çš„æ–¹æ³•äºŒç›¸åŒï¼Œæ˜¯æ–¹æ³•äºŒçš„å‰ªæã€‚

- è¿™é“é¢˜çš„ä¸åŒç‚¹åœ¨äºï¼Œnums ä¸­æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½†è¿”å›çš„å­é›† res ä¸­ï¼Œä¸èƒ½æœ‰é‡å¤çš„ç»“æœã€‚
- è¿™å°±é€ æˆäº†æˆ‘ä»¬éœ€è¦å¯¹å¯èƒ½å‡ºç°çš„é‡å¤ç»“æœè¿›è¡Œå¤„ç†ã€‚
  - å»é‡æ€è·¯è§ï¼šã€40. ç»„åˆæ€»å’Œ IIã€‘
  - å¦‚æœ `nums = [1,2,2,3]`ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥æœ‰å­é›† `[1,2,2]`ï¼Œä½†ä¸èƒ½æœ‰ä¸¤ä¸ª `[1,2,3], [1,2,3]`
    - å¯ä»¥æœ‰ `[1,2,2]` è¡¨æ˜åœ¨ dfs çš„çºµè½´é€’å½’æ–¹å‘ä¸Šå¯ä»¥é‡å¤é€‰æ‹©ï¼›
    - ä¸å¯ä»¥æœ‰ä¸¤ä¸ª `[1,2,3]` è¡¨æ˜åœ¨æ¨ªå‘çš„ for å¾ªç¯ä¸Šï¼Œä¸å¯ä»¥é‡å¤é€‰æ‹©ä¸¤ä¸ªï¼›
    - æ‰€ä»¥ï¼Œfor å¾ªç¯çš„ç¬¬ä¸€ä¸ªæ•°ä¸€å®šæ˜¯å¯ä»¥é€‰æ‹©çš„ï¼Œä½†é™¤ç¬¬ä¸€ä¸ªæ•°ä¹‹å¤–ï¼Œå¦‚æœå‡ºç°é‡å¤ï¼Œå°±è·³è¿‡ã€‚

![90.å­é›†II](images/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95.assets/20201124195411977.png)

```js
var subsetsWithDup = function (nums) {
  nums.sort((x, y) => x - y);   // å…ˆæ’åºï¼Œè®©é‡å¤çš„æ•°å­—åœ¨ä¸€èµ·
  const res = [], path = [];
  dfs(0);
  return res;

  function dfs(startIndex) {
      res.push([...path]);

    for (let i = startIndex; i < nums.length; i++) {
      // å‰ªæï¼Œéç¬¬ä¸€ä¸ªæ•°ä»¥å¤–ï¼Œä¸èƒ½é‡å¤é€‰
      if (i !== startIndex && nums[i] === nums[i - 1]) continue;
      path.push(nums[i]);
      dfs(i + 1);
      path.pop();
    }
  }
};
```



## 491. é€’å¢å­åºåˆ—

- [491. é€’å¢å­åºåˆ—](https://leetcode.cn/problems/increasing-subsequences/)
- 0522ï¼Œmidï¼Œanswer
- å›æº¯ï¼Œå‰ªæ

æœ¬é¢˜æ€è·¯å¤§é¢˜ä¸Šå’Œä¸Šä¸¤é“é¢˜ä¸€æ ·ï¼ˆ78ã€90 å­é›†ï¼‰ã€‚æ³¨æ„è¿™é‡Œçš„éš¾ç‚¹æ˜¯å¯¹å»é‡çš„å¤„ç†ï¼Œæœ¬é¢˜æ¶‰åŠåˆ°ä¸¤ä¸ªå‰ªæï¼š

- å‰ªæä¸€ï¼šç»“æœå¿…é¡»æ˜¯é€’å¢çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ path æ–°åŠ å…¥çš„æ•°å­—ï¼Œå¿…é¡»æ˜¯ >= path æ•°ç»„ä¸­æœ€åä¸€ä¸ªæ•°å­—ï¼›
- å‰ªæäºŒï¼šç»“æœä¸èƒ½æ˜¯é‡å¤çš„ï¼Œåœ¨ res ä¸­ä¸èƒ½æœ‰ä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„ç»“æœã€‚

å‰ªæäºŒçš„æƒ…å†µï¼Œä»”ç»†æ€è€ƒï¼Œå®é™…ä¸Šæ„å‘³ç€ dfs æ·±åº¦é€’å½’æ—¶ï¼Œå¯ä»¥é€‰æ‹©é‡å¤çš„æ•°å­—ï¼š `[1,2,2]` ï¼›ä½† for æ¨ªå‘éå†æ—¶ï¼Œä¸å¯ä»¥é€‰é¡¹è¯¥å±‚ for å·²ç»é€‰æ‹©è¿‡çš„é‡å¤æ•°å­—ï¼Œè¯¦ç»†è§ä¸‹å›¾ï¼š

![491. é€’å¢å­åºåˆ—1](images/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95.assets/20201124200229824.png)

ä¸Šä¸€é¢˜å­é›†ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬é¢„å…ˆè¿›è¡Œäº† sortï¼Œæ‰€ä»¥åªéœ€è¦åˆ¤æ–­ nums[i] ä¸ mus[i - 1] æ˜¯å¦ç›¸ç­‰ï¼Œå³å¯æ˜ç™½åŒä¸€å±‚æ˜¯å¦å‡ºç°é‡å¤é€‰æ‹©ï¼Œä½†è¿™é‡Œæœ‰å¯èƒ½å‡ºç° `[6,7,6]` çš„æƒ…å†µï¼Œå³ä¸¤ä¸ªæ•°å­—å¹¶ä¸æ˜¯å¹¶æ’æŒ¨ç€ã€‚æ‰€ä»¥æˆ‘ä»¬ç»™æ¯ä¸ª for å¾ªç¯å®šä¹‰ä¸€ä¸ª setï¼Œå»ä¿å­˜å·²ç»ç”¨è¿‡çš„æ•°å­—ï¼Œè§£å†³è¯¥é—®é¢˜ã€‚

```js
var findSubsequences = function (nums) {
  const path = [], res = [];
  dfs(0);
  return res;

  function dfs(startIndex) {
    // å¾—åˆ°ç»“æœ
    if (path.length > 1) res.push([...path]);

    const set = new Set();  // å»é‡ï¼Œä¿å­˜ç”¨è¿‡çš„å€¼
    for (let i = startIndex; i < nums.length; i++) {
      // å‰ªæä¸€ï¼Œå½“å‰æ•°å­—éé€’å¢ï¼Œåˆ™è·³è¿‡
      if (path.length && path[path.length - 1] > nums[i]) continue;
      // å‰ªæäºŒï¼ŒåŒä¸€å±‚å–è¿‡çš„å…ƒç´ ä¸èƒ½å†å–
      if (set.has(nums[i])) continue;
      else set.add(nums[i]);
			// dfs
      path.push(nums[i]);
      dfs(i + 1);
      path.pop();
    }
  }
};
```



## 46. å…¨æ’åˆ—

- [46. å…¨æ’åˆ—](https://leetcode.cn/problems/permutations/)
- 0522ï¼Œmidï¼Œquick
- å›æº¯ï¼Œå‰ªæ

è¿™é‡Œä¸‰ä¸ªæ ¸å¿ƒï¼š

- dfs éå†çš„æ·±åº¦ï¼Œä»ç»“æœå­é›†æ¥çœ‹ï¼Œæ¯ä¸ªæˆå‘˜çš„é•¿åº¦éƒ½æ˜¯å›ºå®šçš„ï¼Œ `nums.length - 1`ã€‚
  - dfs éå†ä¸€å®šæ˜¯ nums çš„æ¯ä¸€ä¸ªæˆå‘˜ã€‚ä¹Ÿå°±æ˜¯ç”¨ startIndex æ§åˆ¶ dfs é€’å½’çš„æ·±åº¦
- for éå†çš„å®½åº¦ï¼Œå› ä¸ºé¢˜ç›®è¦æ±‚çš„æ˜¯å…¨æ’åˆ—ï¼Œæ‰€ä»¥æ¯æ¬¡ for å¾ªç¯éƒ½è¦ä» 0  å¼€å§‹ã€‚
  - ä½†é¢˜ç›®ä¸­è¦æ±‚ä¸èƒ½é‡å¤é€‰æ‹©ï¼Œæ‰€ä»¥å¦‚æœå½“å‰å­é›† setPath ä¸­å‡ºç°äº†å³å°†é€‰æ‹©çš„å€¼ï¼Œå°±è·³è¿‡ã€‚
- è¾¹ç•Œï¼Œdfs çš„è¿”å›ã€‚å½“é€’å½’åˆ° nums çš„è¾¹ç•Œæ—¶ï¼Œå³é€’å½’ç»“æŸã€‚ä½†ä¸éœ€è¦é¢å¤–åˆ¤æ–­ï¼Œå› ä¸º for å¾ªç¯éå†ç»“æŸä¹Ÿæ˜¯ nums çš„è¾¹ç•Œï¼Œæ‰€ä»¥ for è¿™é‡Œå°±ç»“æŸäº†é€’å½’ã€‚

`setPath`ï¼Œè¿™é‡Œç”¨ set ç»“æ„ä»£æ›¿äº†ä¹‹å‰çš„ pathï¼Œå°±æ˜¯å› ä¸ºåœ¨æ¯æ¬¡æ–°åŠ å…¥ä¸€ä¸ªå€¼æ—¶ï¼Œè¦æ±‚ä¸èƒ½æœ‰ä¹‹å‰å·²ç»ç”¨è¿‡çš„ï¼Œæ‰€ä»¥è¿™é‡Œç”¨ `set.has()` æ¥æŸ¥æ‰¾ï¼Œå¦‚æœç”¨ `array.include()` æ—¶é—´å¤æ‚åº¦æ˜¯ *O(n)*ã€‚

å¤æ‚åº¦ï¼š

- æ—¶é—´ï¼š*O(n x n!)*ã€‚
  - dfs é€’å½’æ·±åº¦æ˜¯ n å±‚ï¼›for å¾ªç¯çš„éå†æ¬¡æ•°æ˜¯ n! æ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦åº”è¯¥æ˜¯ *O(n x n!)*ã€‚
- ç©ºé—´ï¼š*O(n)* ã€‚
  - resï¼Œç»“æœæ•°ç»„æœ¬èº«ä¸åœ¨æ ˆä¸­é€’å½’ï¼Œåªæœ‰è¿™ä¸€ä¸ªï¼Œé•¿åº¦ä¸ç¡®å®šä½†è‚¯å®šæ˜¯ *O(n)* çº§åˆ«çš„ï¼›
  - setPathï¼ŒsetPath ä¹Ÿæ˜¯æ‰€æœ‰ dfs å…±ç”¨çš„ä¸€ä¸ª setï¼Œ*O(n)*  çº§åˆ«ã€‚

```js
var permute = function (nums) {
  const res = [];
  const setPath = new Set();
  dfs(0);
  return res;

  function dfs(startIndex) {
    //  if (setPath.size === nums.length)
    if (startIndex === nums.length)  res.push([...setPath]);

    for (let i = 0; i < nums.length; i++ ) {
      // å»æ‰å·²ç»ç”¨è¿‡çš„
      if (setPath.has(nums[i])) continue;

      setPath.add(nums[i]);
      dfs(startIndex + 1);
      setPath.delete(nums[i]);
    }
  }
};
```



## 47. å…¨æ’åˆ— II

- [47. å…¨æ’åˆ— II](https://leetcode.cn/problems/permutations-ii/)
- 0522ï¼Œmidï¼Œanswer
- å›æº¯ï¼Œå‰ªæ

ä½¿ç”¨ used æ¥è®°å½•ä¹‹å‰çš„æ•°å€¼æ˜¯å¦è¢«ç”¨è¿‡ã€‚

#### æ–¹æ³•ä¸€ï¼šused + `nums[i-1]` å»é‡

- å…¨æ’åˆ—ä¸­çš„æ•°ç»„ nums ä¸­ï¼Œæ¯å±‚çš„ for å¾ªç¯éƒ½æ˜¯ä» 1 åˆ° len çš„æ•´ä¸ªéå† nums æ•°ç»„ã€‚è¿™é‡Œé¢æœ‰ä¸¤ç§é‡å¤ï¼š
  1. å¦‚æœå½“å‰æ•°å­—å·²ç»åœ¨ path ä¸­ï¼ˆä¸‹æ ‡ç›¸åŒï¼‰ï¼Œåˆ™è·³è¿‡ã€‚
     - åˆ©ç”¨ used æ•°ç»„å¯ä»¥è§£å†³ï¼Œåªéœ€è¦åˆ¤æ–­å½“å‰ index åœ¨ used ä¸­æ˜¯ trueï¼Œåˆ™è·³è¿‡ã€‚
  2. å¦‚æœå½“å‰æ•°å­—é€‰æ‹©åï¼Œç»§ç»­ dfs é€’å½’äº§ç”Ÿçš„æ ‘ï¼Œå·²ç»å­˜åœ¨ã€‚ä¹Ÿå°±æ˜¯è¯´æœ€åäº§ç”Ÿçš„reså­é›†é‡å¤ï¼Œåˆ™è·³è¿‡ã€‚

é¢å¯¹ç¬¬äºŒä¸ªæƒ…å†µï¼Œè¦åˆ†æ¸…æ¥šï¼š

- dfs é€’å½’çš„ `[1,1,2]`ï¼Œæ˜¯å¯ä»¥é‡å¤é€‰æ‹© 1 çš„ï¼›è€Œ for æ¨ªå‘çš„ [1. ...] æ˜¯ä¸èƒ½æ—¢é€‰æ‹©è¿‡ä¸‹æ ‡0çš„æ•°å­—1ï¼Œä¹Ÿæƒ³é€‰æ‹©ä¸‹æ ‡1çš„æ•°å­—1ã€‚

æ‰€ä»¥ç”¨ `i > 0 && nums[i] === nums[i-1]` æ¥åˆ¤æ–­è¿™ä¸ªæƒ…å†µã€‚

ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå¦‚æœåªç”¨ä¸Šè¿°æ¡ä»¶ï¼Œ`[1,1,2]` è¿™ç»“æœä¹Ÿä¼šè¢«å‰ªææ‰ã€‚å› ä¸ºæ¯å±‚ for å¾ªç¯éƒ½æ˜¯ä» 0 å¼€å§‹çš„ã€‚å½“æˆ‘ä»¬å·²ç»éå†äº† [1, ....] æ—¶ï¼Œè¿›å…¥ç¬¬äºŒå±‚ï¼Œ

1. åˆ¤æ–­ä¸‹æ ‡0ï¼Œæ­¤æ—¶å› ä¸ºå·²ç»é€‰æ‹©è¿‡ï¼ˆ`used[0] === false`ï¼‰ï¼Œä¼šè·³è¿‡ã€‚
2. åˆ¤æ–­ä¸‹æ ‡1ï¼Œæ­¤æ—¶å› ä¸º `i > 0 && nums[i] === nums[i-1]` è¿™ä¸ªæ¡ä»¶æˆç«‹ï¼Œä¹Ÿä¼šè·³è¿‡ã€‚æ‰€ä»¥æˆ‘æ·»åŠ ä¸€ä¸ªé¢å¤–çš„æ¡ä»¶ï¼Œè®©è¿™ä¸ªæƒ…å†µä¸è¦è·³è¿‡ï¼š`used[i-1] === false` ï¼Œå› ä¸ºå‰ä¸€ä½æˆ‘ä»¬ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸ä¼šè·³è¿‡äº†ã€‚
   - **`used[i-1]` è¡¨æ˜åŒä¸€ä¸ªåˆ†æ”¯(dfs)ä¸Šï¼Œå‰ä¸€ä¸ªæ•°å­—è¯»å–è¿‡ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥é€‰æ‹©å½“å‰ i çš„å€¼ `nums[i]`ï¼Œä¸º [1,1,2] è¿™ä¸ªæƒ…å†µã€‚**



![img](images/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95.assets/20201124201331223.png)

- è¿™ä¸ªè§†é¢‘å¯èƒ½æœ‰æ‰€å¯å‘ï¼š([å›æº¯æœç´¢ + å‰ªæï¼ˆJavaã€Pythonï¼‰ - å…¨æ’åˆ— II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/permutations-ii/solution/hui-su-suan-fa-python-dai-ma-java-dai-ma-by-liwe-2/))

```js
var permuteUnique = function (nums) {
  nums.sort((x, y) => x - y);
  const res = [], path = [];
  dfs([]);
  return res;

  function dfs(used) {
    // è¿”å›ç»“æœ+è¾¹ç•Œ
    if (path.length === nums.length) {
      res.push([...path]);
      return;
    }

    for (let i = 0; i < nums.length; i++) {
      // åŒä¸€è¡Œä¸­ï¼Œé‡å¤çš„ä¸å†é€‰æ‹©ï¼Œ
      // used[i-1]åˆ¤æ–­å‰ä¸€ä¸ªå€¼ç›¸ç­‰çš„æ•°æ˜¯å¦è¢«ç”¨è¿‡ï¼Œå¦‚æœå‰ä¸€ä¸ªç”¨è¿‡ï¼Œè¿™é‡Œæ˜¯ä¸èƒ½è¿›è¡Œå‰ªæçš„ï¼š[1,1,2]
      if (i > 0 && nums[i] === nums[i - 1] && used[i - 1] === false) {
        console.log(i, nums[i])
        continue
      };
      // é€‰æ‹©è¿‡çš„ä¸å†é€‰æ‹©
      if (used[i]) continue;

      used[i] = true;
      path.push(nums[i]);
      dfs(used);
      path.pop()
      used[i] = false;
    }
  }
};
```

#### æ–¹æ³•äºŒï¼šset å»é‡

`set` å»é‡å¤æ›´å¥½ç†è§£ï¼Œä½†å¢åŠ äº†ç©ºé—´å¤æ‚åº¦ã€‚

- å› ä¸ºæˆ‘ä»¬è¦å»é™¤çš„é‡å¤å…ƒç´ æ˜¯ for å¾ªç¯ä¸­ï¼ŒåŠæ¯ä¸€å±‚ä¸­ä¸èƒ½å–é‡å¤çš„æ•°å­—ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨æ¯å±‚ for éå†æ—¶ï¼Œéƒ½æœ‰ä¸€ä¸ª set è®°å½•å·²ç»é€‰æ‹©çš„æ•°å­—ï¼Œä¸€æ—¦å‡ºç°å€¼é‡å¤çš„æƒ…å†µï¼Œå°±è·³è¿‡ã€‚è¿™æ ·æ—¢ç­›é€‰äº†æ¯å±‚é‡å¤çš„æ•°å­—é—®é¢˜ï¼Œä¹Ÿä¸å½±å“çºµå‘ dfs é€’å½’æ—¶å¯ä»¥é‡å¤é€‰æ‹©ã€‚

```js
var permuteUnique = function (nums) {
  nums.sort((x, y) => x - y);
  const res = [], path = [];
  dfs([]);
  return res;

  function dfs(used) {
    // è¿”å›ç»“æœ+è¾¹ç•Œ
    if (path.length === nums.length) {
      res.push([...path]);
      return;
    }

    const set = new Set() // æ¯ä¸€å±‚ï¼Œé‡å¤çš„æ•°å­—ä¸å†é‡å¤é€‰æ‹©
    for (let i = 0; i < nums.length; i++) {
			// é‡å¤çš„ä¸å†é€‰æ‹©
      if (set.has(nums[i])) continue;
      // é€‰æ‹©è¿‡çš„ä¸å†é€‰æ‹©
      if (used[i]) continue;

      set.add(nums[i]);
      used[i] = true;
      path.push(nums[i]);
      dfs(used);
      path.pop()
      used[i] = false;
    }
  }
};
```





## 332. é‡æ–°å®‰æ’è¡Œç¨‹ (hard)

- [332. é‡æ–°å®‰æ’è¡Œç¨‹](https://leetcode.cn/problems/reconstruct-itinerary/)ï¼Œè€ƒçš„å°‘
- 0523ï¼Œhardï¼Œanswer
- æ·±åº¦ä¼˜å…ˆã€å›æº¯

æŒ‰ç…§é¢˜æ„ï¼Œéœ€è¦æŠŠ tickets ä¸­ä¿å­˜çš„æ‰€æœ‰èˆªç¨‹ï¼Œè§„åˆ’ä¸ºä¸€ä¸ªå¯ä»¥å®Œæ•´èµ°ä¸‹æ¥çš„è·¯çº¿ã€‚è¿™ä¸ªè·¯çº¿æ˜¯å”¯ä¸€çš„ï¼Œå¦‚æœæœ‰å¤šä¸ªæ»¡è¶³çš„è·¯çº¿ï¼ŒæŒ‰ç…§å­—å…¸é¡ºåºæ›´é å‰çš„è¿”å›ã€‚æ‰€ä»¥ï¼š

- å®šä¹‰ result ä¸ºæœ€ç»ˆçš„è·¯çº¿ï¼Œè€Œä¸å†éœ€è¦ pathï¼Œå› ä¸ºè¿™å›çš„ç»“æœåªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯åœ¨æ·±åº¦éå†å®Œåçš„å”¯ä¸€æ»¡è¶³æ¡ä»¶çš„è·¯å¾„ã€‚

- å®šä¹‰ map ä¸ºä¸€ä¸ªå­—å…¸ï¼Œä»¥ä¾› dfs æ—¶å¯»æ‰¾å°šæœªä½¿ç”¨çš„ ticketï¼ˆèˆªçº¿ï¼‰ã€‚å­—å…¸çš„ key ä¸ºæ‰€æœ‰èˆªçº¿çš„èµ·ç‚¹ï¼Œvalue ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å¯¹åº”çš„ç»ˆç‚¹ï¼Œä»¥ key èµ·ç‚¹çš„æ‰€æœ‰èˆªçº¿çš„ç»ˆç‚¹ï¼š

  ```js
  map = {
  //  èµ·ç‚¹: [ç»ˆç‚¹1ï¼Œç»ˆç‚¹2ï¼Œç»ˆç‚¹3]
    from1: [to1, to2, to3 ...],
    from2: [to1, to2 ...],
    ...
  }
  ```

`dfs` çºµå‘é€’å½’çš„å°±æ˜¯è·¯çº¿ä¸­çš„èŠ‚ç‚¹èµ·ç‚¹ã€‚æœ€åˆçš„èµ·ç‚¹æ˜¯ JFKï¼Œè¿™æ˜¯å›ºå®šçš„ã€‚ä¸‹ä¸€ä¸ªèµ·ç‚¹å°±æ˜¯ `result[result.length - 1]`ã€‚ å½“ map ä¸ºç©ºæ—¶ï¼Œé€’å½’ç»“æŸï¼Œæ‰€æœ‰çš„èˆªç­éƒ½åœ¨è·¯çº¿ä¸­ç»è¿‡äº†ã€‚

`for` æ¨ªå‘éå†ï¼Œ

- å°±æ˜¯èµ·ç‚¹å¯¹åº”çš„ç»ˆç‚¹ï¼ŒæŒ¨ä¸ªæŸ¥çœ‹å“ªä¸ªç»ˆç‚¹æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶å°±ç»§ç»­å¾€æ·±åº¦éå†ï¼Œä¸æ»¡è¶³æ¡ä»¶å°±å›æº¯æ’æŸ¥ä¸‹ä¸€ä¸ªï¼Œç›´åˆ°æœ€ç»ˆ map ä¸ºç©ºï¼Œæ­¤æ—¶ result å°±æ˜¯æƒ³è¦çš„ç­”æ¡ˆã€‚

è§£å†³æ’åºé—®é¢˜ï¼Œ

- è¿™é‡Œå¿…é¡»å¯¹ map ä¸­ï¼Œæ‰€æœ‰èˆªçº¿ç»ˆç‚¹è¿›è¡Œæ’åºï¼Œè¿™æ ·æŒ‰åºå–å‡ºæ¥çš„ä¸€å®šæ˜¯æ»¡è¶³å­—å…¸é¡ºåºçš„ï¼Œå½“æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„ç»“æœï¼Œå°±åŠæ—¶è¿”å›ï¼Œæ‰€ä»¥è¿”å›çš„æœ€ç»ˆç»“æœä¸€å®šæ˜¯å­—å…¸æœ€å°çš„ã€‚

dfs çš„ç»“æŸï¼Œ

- ä¸Šé¢è¯´åˆ°ï¼Œmap ä¸ºç©ºï¼Œä¹Ÿå°±å­—å…¸ä¸­æ²¡æœ‰èˆªç­ä¿¡æ¯çš„æ—¶å€™ result å°±æ˜¯ç­”æ¡ˆï¼Œä½†æ•²ä»£ç çš„æ—¶å€™ï¼Œå‘ç° map ä¸ºç©ºå¾ˆéš¾å®ç°ï¼Œå› ä¸º map ä¸­æ¯ä¸ª value éƒ½æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„æ¸…ç©ºè¿˜è¦é¡ºå¸¦åˆ æ‰ keyã€‚ä½†æ¯æ¬¡å›æº¯çš„æ—¶å€™åˆéœ€è¦æŠŠåˆ æ‰çš„ value åŠ å›æ¥ï¼Œæ­¤æ—¶è¿˜è¦åˆ¤æ–­æ˜¯å¦è¦åŠ å…¥ key ....
  - è§£å†³ï¼šè§„å¾‹å‘ç° `result.length` ä¸€å®šæ¯” `tickets.length` å¤š 1ã€‚åˆ¤æ–­ `result.length` çš„å¤§å°å³å¯ã€‚
- æˆ‘ä»¬ä»…ä»…åªéœ€è¦ä¸€ä¸ª é€’å½’çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ã€ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚é‚£ä¹ˆä¸€æ—¦å‘ç°è¿™ä¸ªè·¯å¾„ï¼Œå°±ç»“æŸé€’å½’ï¼Œåæ‚” trueã€‚åœ¨æ¯æ¬¡è¿›è¡Œé€’å½’çš„æ—¶å€™ï¼Œç”¨ if åˆ¤æ–­ï¼Œ`if (dfs()) return true` å¦‚æœè¿™ä¸ªé€’å½’è¿”å›äº†ä¸€ä¸ª `true`ï¼Œé‚£è¡¨æ˜å·²ç»æ‰¾åˆ°ç­”æ¡ˆï¼Œéœ€è¦ç»“æŸé€’å½’äº†ï¼Œè¯¥å±‚é€’å½’ç»ˆæ­¢åç»­çš„éå†ï¼Œç»§ç»­å‘ä¸Šè¿”å› `true`ï¼Œè¿™æ ·ä¸€ä¸ª dfs å°±ç»“æŸäº†ã€‚

![332.é‡æ–°å®‰æ’è¡Œç¨‹1](images/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95.assets/2020111518065555.png)

```js
var findItinerary = function (tickets) {
    const result = ['JFK'];
    const map = {};

    // åˆ›å»ºmap
    for (const ticket of tickets) {
        if (!map[ticket[0]]) map[ticket[0]] = [];
        map[ticket[0]].push(ticket[1]);
    }
    // æ’åºmapä¸­çš„å€¼
    for (const ticket in map) {
        map[ticket].sort();
    }
    // dfsé€’å½’
    dfs('JFK');
    return result;

    function dfs(start) {
        // å­—å…¸ä¸ºç©ºï¼Œæ‰¾åˆ°äº†ç»“æœï¼Œä½†æ˜¯å­—å…¸ä¸ºç©ºä¸å¥½åˆ¤æ–­ã€‚
        // å¦ä¸€ä¸ªè§’åº¦æƒ³ï¼Œå¦‚æœ result å·²ç»æœ‰ èˆªç­æ•° + 1 çš„èŠ‚ç‚¹ä¹Ÿæ˜¯æ‰¾åˆ°äº†ç»“æœã€‚
        if (result.length === tickets.length + 1) return true;
        // æ²¡æœ‰è¯¥èµ·ç‚¹å¯¹åº”çš„èˆªç­ï¼Œè¯¥åˆ†æ”¯é”™è¯¯ï¼Œè¿”å›ã€‚
        if (!map[start]) return false;

        // å­—å…¸ä¸­æœ‰èˆªç­ä¿¡æ¯ï¼Œæ¨ªå‘éå†
        for (let i = 0; i < map[start].length; i++){
            const city = map[start][i];
            // æ¯æ¬¡å–å‡ºä¸€ä¸ªèˆªç­ï¼Œå°±åœ¨å­—å…¸ä¸­åˆ é™¤ä¸€ä¸ªèˆªç­
            map[start].splice(i, 1);
            result.push(city);
            if (dfs(city)) return true;
            result.pop();
            map[start].splice(i, 0, city);
        }
    }
};
```



## 51. N çš‡å

- [51. N çš‡å](https://leetcode.cn/problems/n-queens/)
- 0528ï¼Œhardï¼Œanswer
- å›æº¯

æ€è·¯ï¼Œæ–‡ç« å·²ç»å†™çš„éå¸¸å¥½äº†ï¼š[é“¾æ¥](https://www.programmercarl.com/0051.N%E7%9A%87%E5%90%8E.html)

![51.Nçš‡å](images/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95.assets/20210130182532303-16537724964272.jpg)

å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™é“é¢˜éœ€è¦ç”¨å›æº¯è§£å†³ï¼š

- dfs è¿­ä»£æ·±åº¦ï¼šå°±æ˜¯æ•°ç»„çš„è¡Œï¼›
- for éå†å®½åº¦ï¼šå°±æ˜¯æ•°ç»„çš„åˆ—ï¼Œæ¯ä¸€è¡Œä¸­çš„æ‰€æœ‰æˆå‘˜ï¼›
- å˜é‡ï¼š
  - pathï¼šæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œè®°å½•ç€é€’å½’æ—¶çš„æ£‹ç›˜æƒ…å†µã€‚
  - resï¼šå½“å®Œæˆä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ£‹ç›˜æ—¶ï¼Œå¯¹æ£‹ç›˜è¿›è¡Œ deepClone ç„¶åå†™å…¥åˆ° path ä¸­ã€‚
- è¿”å›ï¼šå½“æ·±åº¦è¾¾åˆ° n æ—¶ï¼Œåˆ™è¯æ˜éå†åˆ°æœ€åä¸€è¡Œï¼Œä¸”æ»¡è¶³æ¡ä»¶ï¼Œåˆ™æŠŠç»“æœ push åˆ° res ä¸­ã€‚
- åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼š
  - åœ¨ for å¾ªç¯å†…ï¼Œéœ€è¦åˆ¤æ–­æ¯ä¸ªå…ƒç´ æ˜¯å¦å¯ä»¥æ”¾å…¥æ£‹ç›˜ä¸­ï¼Œæ¡ä»¶éœ€è¦æ»¡è¶³ï¼š
    - æ‰€æœ‰ Q ä¸èƒ½æ”¾å…¥åŒä¸€è¡Œã€åŒä¸€åˆ—ï¼›
    - æ‰€æœ‰ Q ä¸èƒ½æ”¾å…¥æ–œå¯¹è§’ï¼ˆ45Â°ã€135Â°ï¼‰ï¼›
    - åˆ©ç”¨ `isValid()` å»åˆ¤æ–­ï¼Œå› ä¸º for å¾ªç¯ä¸­ï¼Œæ¯ä¸€è¡Œåªä¼šé€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼Œæ‰€ä»¥å‡½æ•°ä¸­åªéœ€è¦åˆ¤æ–­ æ˜¯å¦åŒä¸€åˆ—ã€45Â°ã€135Â° ä¸‰ä¸ªæ¡ä»¶å³å¯ã€‚

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ï¼š*O(N!)*ï¼Œå…¶ä¸­ *N* æ˜¯çš‡åæ•°é‡ã€‚å›æº¯çš„å¤æ‚åº¦å¾€å¾€å¯ä»¥è€ƒè™‘æ˜¯å¦æ˜¯ **é˜¶ä¹˜** å…³ç³»ã€‚
  - å› ä¸ºæ‰€æœ‰çš‡åä¸èƒ½åŒåˆ—ï¼Œæ‰€ä»¥éšç€é€’å½’æ·±åº¦çš„å¢åŠ ï¼Œfor ä¸­å¯é€‰çš„è¡Œä¹Ÿåœ¨ç›¸åº”å‡å°‘ï¼Œæ˜¯é˜¶ä¹˜å…³ç³»ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š*O(N^2)*ï¼Œå…¶ä¸­ *N* æ˜¯çš‡åæ•°é‡ã€‚
  - é€’å½’è°ƒç”¨å±‚æ•°ä¸ä¼šè¶…è¿‡ *N*ï¼ŒäºŒç»´æ•°ç»„çš„é•¿åº¦ä¸º *N*ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°ä¹Ÿä¸º *N*ã€‚

```js
var solveNQueens = function (n) {
  // å›æº¯
  // dfs:æ£‹ç›˜çš„æ‰€æœ‰è¡Œ row
  // for: æ£‹ç›˜çš„æŸä¸€è¡Œä¸­çš„åˆ— col
  const path = new Array(n).fill().map(() => new Array(n).fill('.'));
  const res = [];
  dfs(0);
  return res;

  function dfs(row) {
    if (row === n) {
      res.push(deepClone(path));
      return;
    };

    for (let col = 0; col < n; col++) {
      if (!isValid(row, col)) continue;
      path[row][col] = 'Q';
      dfs(row + 1);
      path[row][col] = '.';
    }
  }

  // éªŒè¯ path[row][col] ä½ç½®æ˜¯å¦åˆæ³•
  function isValid(row, col) {
    // ä¸èƒ½åŒåˆ—
    for (let i = row - 1; i >= 0; i--)
      if (path[i][col] === 'Q') return false;
    // ä¸èƒ½åŒ45Â°
    for (let i = row - 1, j = col - 1; i >= 0 && j >= 0; i--, j--)
      if (path[i][j] === 'Q') return false;
    // ä¸èƒ½åŒ135Â°
    for (let i = row - 1, j = col + 1; i >= 0 && j < n; i--, j++)
      if (path[i][j] === 'Q') return false;

    return true;
  }

  // æ·±æ‹·è´ä¸€ä»½äºŒç»´æ•°ç»„
  function deepClone(arr) {
    const newArr = new Array(arr.length);
    for (let i = 0; i < newArr.length; i++) {
      newArr[i] = arr[i].join("");
    }
    return newArr;
  }
};
```





## 37. è§£æ•°ç‹¬

- [37. è§£æ•°ç‹¬](https://leetcode.cn/problems/sudoku-solver/)
- 0531ï¼Œhardï¼Œanswer
- å›æº¯ï¼ŒäºŒç»´æ•°ç»„çš„ for å¾ªç¯

å¾ˆæ¸…æ™°çš„æ€è·¯ï¼š[ğŸ”—](https://www.programmercarl.com/0037.%E8%A7%A3%E6%95%B0%E7%8B%AC.html#%E6%80%9D%E8%B7%AF)ã€‚

![2020111720451790](images/å›æº¯ç®—æ³•.assets/2020111720451790.png)

è¿™é“é¢˜çš„è§£é¢˜é€»è¾‘å’Œ n çš‡åä¸€æ¨¡ä¸€æ ·ï¼Œéœ€è¦ä¸¤ä¸ªå‡½æ•°ï¼š

1. dfs é€’å½’ï¼Œéå†æ‰€æœ‰å¯èƒ½çš„ç»“æœï¼›
2. `isValid` åˆ¤æ–­å½“å‰é€‰ä¸­çš„ç‚¹ `board[i][j]`ï¼Œæ˜¯å¦å¯ä»¥æ”¾å…¥å€¼ valï¼Œæ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼š
   - åŒä¸€è¡Œä¸èƒ½é‡å¤ï¼›
   - åŒä¸€åˆ—ä¸èƒ½é‡å¤ï¼›
   - åŒä¸€ä¸ª 9 å®«æ ¼å†…ä¸èƒ½é‡å¤ï¼›

å›æº¯ç®—æ³•ï¼š

1. for å¾ªç¯ï¼š
   - ä½ç½®ï¼šå› ä¸ºæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œè¦ç¡®å®š i å’Œ j ä¸¤ä¸ªä½ç½®ï¼Œæ‰€ä»¥éœ€è¦ä¸¤ä¸ª for å¾ªç¯åµŒå¥—ï¼›
   - å€¼ï¼šç¡®å®šä½ç½®åï¼Œæ‰å¼€å§‹é€‰æ‹©è¦æ”¾å…¥çš„å€¼ï¼Œfor å¾ªç¯éå† 1- 9 ï¼Œç„¶åé€šè¿‡  `isValid` åˆ¤æ–­æ˜¯å¦æ»¡è¶³è¦æ±‚ã€‚
2. dfs é€’å½’ï¼šæ¯å½“ `isValid` è¿”å› true æ—¶ï¼Œè¡¨æ˜è¯¥ä½ç½®å¯ä»¥æ”¾å…¥ä¸€ä¸ª valï¼Œç„¶åé€’å½’è¿›å…¥ä¸‹ä¸€å±‚ï¼Œç›´åˆ°æ‰€æœ‰çš„æ•°å­—å…¨éƒ¨å¡«æ”¾å®Œæ¯•ã€‚
3. å‰ªæï¼šåœ¨ä¸¤å±‚ for å¾ªç¯é”å®šä¸€ä¸ªä½ç½®æ—¶ï¼Œè¦ç¡®è®¤è¿™ä¸ªä½ç½®çš„å€¼å¿…é¡»æ˜¯ `"."` ï¼Œå¦åˆ™å·²ç»å¡«å…¥ä¸€ä¸ªå€¼ï¼Œè·³è¿‡ã€‚
4. è¿”å›çš„æ—¶æœºï¼š
   1. å› ä¸ºæ¯ä¸ªåæ ‡ä½ç½®å¿…é¡»ä¼šå¡«å…¥ä¸€ä¸ªå€¼ï¼Œå½“æŸä¸€å±‚ dfs é€’å½’æ—¶ï¼Œ1-9 éƒ½ä¸èƒ½å¡«å…¥è¿™ä¸ªä½ç½®ä¸­ï¼Œè¯æ˜è¯¥åˆ†æ”¯ä»¥åŠä¸åˆæ³•ï¼Œè¿”å› falseã€‚
   2. åœ¨ä¸¤å±‚ for å¾ªç¯æ‰¾åæ ‡æ—¶ï¼Œå¦‚æœä¸¤å±‚ for å¾ªç¯éƒ½æ‰§è¡Œå®Œäº†ï¼Œè¯æ˜æ‰€æœ‰ä½ç½®éƒ½å·²ç»æ”¾å¥½äº†å€¼ï¼Œåˆ™è¿”å› trueï¼Œè¡¨æ˜é€’å½’éœ€è¦ç»“æŸã€‚
      - æ³¨æ„ï¼Œèƒ½æ‰§è¡Œåˆ°è¿™é‡Œï¼Œä¸€å®šæ˜¯ä¸€ä¸ª **å¶å­ç»“ç‚¹**ã€‚
   3. æŸä¸€å±‚ dfs ä¸­ï¼Œ
      1. å½“å®ƒé€’å½’çš„ dfs è¿”å›äº† trueï¼Œåˆ™è¯æ˜ï¼Œå·²ç»æ‰¾åˆ°äº†ä¸€ä¸ªç»“æœï¼ˆå¶å­ç»“ç‚¹è¿”å›çš„ï¼‰ï¼Œåˆ™å‘ä¸Šç»§ç»­å‘ŠçŸ¥ï¼Œæ‰€æœ‰é€’å½’ç»“æŸã€‚
      2. å½“å®ƒé€’å½’çš„ dfs è¿”å›äº† falseï¼Œåˆ™è¯æ˜è¯¥åˆ†æ”¯ç»“ç‚¹ä¸æ»¡è¶³æ¡ä»¶ï¼Œé€’å½’ä¸èƒ½ç»“æŸï¼Œç»§ç»­æ¥ä¸‹æ¥çš„é€’å½’ã€‚

```js
var solveSudoku = function (board) {
  const len = board.length;
  dfs();
  return board;

  function dfs() {
    // éå†æ‰€æœ‰å°šæœªå¡«å……çš„[ç©ºä½]
    for (let i = 0; i < len; i++) {
      for (let j = 0; j < len; j++) {
        // å‰ªæï¼Œå¦‚æœä½ç½®å·²ç»æœ‰æ•°å­—ï¼Œåˆ™è·³è¿‡
        if (board[i][j] !== '.') continue;
        // éå†å¯å¡«ç©ºæ•°å­—
        for (let val = 1; val <= 9; val++) {
          if (isValid(i, j, val.toString())) {
            // å¦‚æœåˆæ³•ï¼Œé€’å½’
            board[i][j] = val.toString();
            if (dfs()) //ã€è¿”å›æ—¶æœº 3ã€‘å¦‚æœè¿”å›äº†tureï¼Œè¯æ˜æ‰¾åˆ°äº†ä¸€ä¸ªç¬¦åˆçš„ç»“æœï¼Œä¸éœ€è¦å†ä¸‹é€’å½’äº†ï¼Œæå‰è¿”å›ï¼›
              return true; 
            board[i][j] = '.';
          }
        }
        return false;  // ã€è¿”å›æ—¶æœº 1ã€‘å¦‚æœéƒ½ä¸åˆæ³•ï¼Œè¯æ˜ä¸å­˜åœ¨æ»¡è¶³æ•°ç‹¬çš„ç»“æœï¼Œæå‰ç»“æŸï¼ˆç­”æ¡ˆä¸€å®šæœ‰è§£ï¼‰
      }
    }
    return true; //ã€è¿”å›æ—¶æœº 2ã€‘å¶å­ç»“ç‚¹ï¼Œæ‰€æœ‰ä½ç½®éƒ½å¡«å…¥äº†æ•°å­—ï¼Œè¯æ˜æ‰¾åˆ°äº†ä¸€ä¸ªç»“æœ
  }

  // éªŒè¯ä½ç½®æ˜¯å¦åˆæ³•
  function isValid(row, col, val) {
    // ä¸èƒ½åŒè¡Œ
    for (let i = 0; i < len; i++)
      if (board[row][i] === val)
        return false;

    // ä¸èƒ½åŒåˆ—
    for (let i = 0; i < len; i++)
      if (board[i][col] === val)
        return false;

    // ä¸èƒ½åœ¨ä¸€ç»„9å®«æ ¼é‡Œæœ‰é‡å¤
    const startRow = Math.floor(row / 3) * 3;
    const startCol = Math.floor(col / 3) * 3;
    for (let i = startRow; i < startRow + 3; i++)
      for (let j = startCol; j < startCol + 3; j++)
        if (board[i][j] === val)
          return false;

    return true;
  }
};
```





===== Q & A =================================

1. å›æº¯çš„ æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ æ€ä¹ˆè®¡ç®—ï¼Ÿ

å‚è€ƒï¼š[æœ¬å‘¨å°ç»“ï¼ï¼ˆå›æº¯ç®—æ³•ç³»åˆ—ä¸‰ï¼‰ | ä»£ç éšæƒ³å½• (programmercarl.com)](https://programmercarl.com/å‘¨æ€»ç»“/20201112å›æº¯å‘¨æœ«æ€»ç»“.html#æ€§èƒ½åˆ†æ)

å¯¹äºç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ä¹Ÿå¯ä»¥ç®€å•çš„è¿›è¡Œæ€»ç»“ä¸€ä¸‹ï¼š

- å¦‚æœç”³è¯·çš„æ˜¯æœ‰é™ä¸ªæ•°ï¼ˆå¸¸é‡ï¼‰çš„å˜é‡ï¼Œç©ºé—´å¤æ‚åº¦ä¸º `O(1)`ã€‚
- å¦‚æœç”³è¯·çš„æ˜¯ä¸€ç»´æ•°ç»„ï¼Œé˜Ÿåˆ—æˆ–è€…é“¾è¡¨ç­‰ï¼Œé‚£ä¹ˆç©ºé—´å¤æ‚åº¦ä¸º `O(n)`ã€‚
- å¦‚æœç”³è¯·çš„æ˜¯äºŒç»´æ•°ç»„ï¼Œé‚£ä¹ˆç©ºé—´å¤æ‚åº¦ä¸º `O(nÂ²)`ã€‚
- å¦‚æœæ˜¯åœ¨å¾ªç¯ä½“ä¸­ç”³è¯·çš„æ•°ç»„ç­‰ï¼Œå¯èƒ½å°±éœ€è¦å–åµŒå¥—çš„ä¹˜ç§¯æ¥ä½œä¸ºç©ºé—´å¤æ‚åº¦ï¼Œè¿™ç§å°±éœ€è¦å…·ä½“çš„è¿›ä¸€æ­¥åˆ†æã€‚



====== summary ============================

å›æº¯æ¨¡ç‰ˆï¼š

- ä¸‰ä¸ªæ ¸å¿ƒï¼šé€’å½’è¾¹ç•Œã€for å¾ªç¯ã€dfs é€’å½’ã€‚

```js
var xxx = function (s) {
  const res = [];   // å­˜æ”¾ç»“æœ
  const path = [];  // å­˜æ”¾é€’å½’æ—¶çš„ç»„åˆ
  dfs(0)
  return res;

  function dfs(startIndex) {
    // ç»“æœï¼šåˆ¤æ–­ path æ˜¯å¦ç¬¦åˆ
    if (xxxx) res.push([...path]);

    // è¾¹ç•Œï¼šåˆ¤æ–­ dfs é€’å½’çš„è¿”å›
    if (xxxx) return;;

    for (let i = startIndex; i < s.length; i++) {
      // å‰ªæï¼šé˜»æ­¢è¿›ä¸€æ­¥é€’å½’ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨ for å¾ªç¯çš„åˆ¤æ–­ä¸­
      if (xxxx) continue;
      // é€’å½’
      path.push(s[i]);
      dfs(i + 1);
      path.pop();
    }
  }
}
```



2. `Array` å’Œ `Set` çš„åŒºåˆ«

```js
// æ•°ç»„ä¸­ï¼ŒæŸ¥æ‰¾æŸä¸ªå€¼ï¼Œç”¨:
[1,2,3].include(2)  // true
// å®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)

// Setä¸­ï¼ŒæŸ¥æ‰¾æŸä¸ªå€¼ï¼Œç”¨:
const set = new Set([1,2,3]);
set.has(2) /// true
// å®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)
// ç¼ºç‚¹ï¼šéœ€è¦å¯¹æ•°ç»„è¿›è¡Œä¸€æ¬¡ copyï¼Œå¹¶åˆ›å»ºä¸€ä¸ª setï¼Œè¿™ä¸ªçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n);
```










<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-frontEnd/JavaScript/Promise">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="ninjee RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="ninjee Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="ninjee JSON Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Ninjeeçš„å‰ç«¯ç¯®å­" href="/opensearch.xml">
<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?0930342e569f854bebdeb485c0eac7f8",e.defer=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<meta name="baidu-site-verification" content="code-rqLUw5reVS">
<link rel="icon" href="/img/ninjee.jpeg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(51 139 255)"><title data-rh="true">13. Promise - Ninjeeçš„å‰ç«¯ç¯®å­</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ninjee.netlify.app/img/ninjee.jpeg"><meta data-rh="true" name="twitter:image" content="https://ninjee.netlify.app/img/ninjee.jpeg"><meta data-rh="true" property="og:url" content="https://ninjee.netlify.app/docs/frontEnd/JavaScript/Promise"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="keywords" content="Moxy, Ninjee, blog, javascript, typescript, python ,node, react, vue, web, å‰ç«¯, åç«¯"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="13. Promise - Ninjeeçš„å‰ç«¯ç¯®å­"><meta data-rh="true" name="description" content="1 åŸºç¡€"><meta data-rh="true" property="og:description" content="1 åŸºç¡€"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ninjee.netlify.app/docs/frontEnd/JavaScript/Promise"><link data-rh="true" rel="alternate" href="https://ninjee.netlify.app/docs/frontEnd/JavaScript/Promise" hreflang="zh"><link data-rh="true" rel="alternate" href="https://ninjee.netlify.app/docs/frontEnd/JavaScript/Promise" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://AJRH2JRXVY-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.cb2f47c4.css">
<link rel="preload" href="/assets/js/runtime~main.39264a03.js" as="script">
<link rel="preload" href="/assets/js/main.d7c6ac8e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ninjee-icon.png" alt="ninjee" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/ninjee-icon.png" alt="ninjee" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Ninjee</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">å‰ç«¯çŸ¥è¯†</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/frontEnd/JavaScript">JavaScript</a></li><li><a class="dropdown__link" href="/docs/frontEnd/HTML&amp;CSS">HTML &amp; CSS</a></li><li><a class="dropdown__link" href="/docs/frontEnd/React">React</a></li><li><a class="dropdown__link" href="/docs/frontEnd/æµè§ˆå™¨åŸç†">æµè§ˆå™¨åŸç†</a></li><li><a class="dropdown__link" href="/docs/frontEnd/other">other</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">æ•²ä»£ç </a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/code/algorithm">ç®—æ³•</a></li><li><a class="dropdown__link" href="/docs/code/writtenJs">æ‰‹å†™Js</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">é¢è¯•</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/interview/summary">æ€»ç»“</a></li><li><a class="dropdown__link" href="/docs/interview/iot">ç‰©è”ç½‘</a></li></ul></div><a class="navbar__item navbar__link" href="/project">æˆ‘çš„é¡¹ç›®</a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/javascript">JavaScript</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒJavaScriptã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript">æ¦‚è¿°</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/frontEnd/JavaScript/DOM&amp;BOM/1 Document &amp; äº‹ä»¶">BOM &amp; DOM</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/JavaScriptçš„æ‰§è¡Œè¿‡ç¨‹">1. JavaScriptçš„æ‰§è¡Œè¿‡ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/æ‰§è¡Œä¸Šä¸‹æ–‡">2. æ‰§è¡Œä¸Šä¸‹æ–‡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/ä½œç”¨åŸŸé“¾å’Œé—­åŒ…">3. ä½œç”¨åŸŸé“¾å’Œé—­åŒ…</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/thisä¸ç®­å¤´å‡½æ•°">4. thisä¸ç®­å¤´å‡½æ•°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/æå‡ä¸æš‚æ—¶æ€§æ­»åŒº">5. æå‡ä¸æš‚æ—¶æ€§æ­»åŒº</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/å‡½æ•°ä¸å‡½æ•°å¼ç¼–ç¨‹">6. å‡½æ•°ä¸å‡½æ•°å¼ç¼–ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/å¯¹è±¡">7. å¯¹è±¡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/åŸå‹é“¾">8. åŸå‹é“¾</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/ç»§æ‰¿å’Œç±»">9. ç»§æ‰¿å’Œç±»</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/ES6+åŸºç¡€">10. ES6+ åŸºç¡€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/Symbol, Set, Map">11. Symbol, Set, Map</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/Proxy, Reflect">12. Proxy, Reflect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/frontEnd/JavaScript/Promise">13. Promise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/async:await, å¼‚æ­¥ç¼–ç¨‹">15. è¿­ä»£, å¼‚æ­¥ç¼–ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/æ¨¡å—åŒ–">16. æ¨¡å—åŒ–</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/z-ArrayAPI">Array API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/z-ç±»å‹åˆ¤æ–­">ç±»å‹åˆ¤æ–­ä¸ç±»å‹è½¬æ¢</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontEnd/JavaScript/z-æ‰§è¡Œä¸Šä¸‹æ–‡-ES3">æ‰§è¡Œä¸Šä¸‹æ–‡(ES3)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/html--css">HTML &amp; CSS</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒHTML &amp; CSSã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/react">React</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€ŒReactã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/æµè§ˆå™¨åŸç†">æµè§ˆå™¨åŸç†</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œæµè§ˆå™¨åŸç†ã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/other">other</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œotherã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/algorithm">algorithm</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œalgorithmã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/æ‰‹å†™-js">æ‰‹å†™ Js</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œæ‰‹å†™ Jsã€" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/æ€»ç»“">æ€»ç»“</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œæ€»ç»“ã€" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="æ”¶èµ·ä¾§è¾¹æ " aria-label="æ”¶èµ·ä¾§è¾¹æ " class="button button--secondary button--outline collapseSidebarButton_FykI"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_DTRl"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">ğŸ </a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/javascript"><span itemprop="name">JavaScript</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">13. Promise</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>13. Promise</h1></header><h2 class="anchor anchorWithStickyNavbar_mojV" id="1-åŸºç¡€">1 åŸºç¡€<a class="hash-link" href="#1-åŸºç¡€" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="11-å¼•å­">1.1 å¼•å­<a class="hash-link" href="#11-å¼•å­" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ²¡æœ‰ Promise æ—¶ï¼šå¼‚æ­¥ç½‘ç»œè¯·æ±‚æ–¹å¼</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// request.js å®šä¹‰è¯·æ±‚æ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">url</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> successCallback</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> failtureCallback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ‹¿åˆ°è¯·æ±‚çš„ç»“æœ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// urlä¼ å…¥çš„æ˜¯coderwhy, è¯·æ±‚æˆåŠŸ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;200&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// æˆåŠŸ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;abc&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cba&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;nba&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">successCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">names</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// å¦åˆ™è¯·æ±‚å¤±è´¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> errMessage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;è¯·æ±‚å¤±è´¥, urlé”™è¯¯&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">failtureCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">errMessage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// main.js åœ¨ç»„ä»¶ä¸­è°ƒç”¨ç½‘ç»œè¯·æ±‚APIï¼ŒåŒæ—¶è¦è‡ªå®šä¹‰ä¼ å…¥ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">requestData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>è¿™ç§å›è°ƒçš„æ–¹å¼æœ‰å¾ˆå¤šçš„å¼Šç«¯:</p><ol><li>éœ€è¦å®šä¹‰æˆåŠŸå’Œå¤±è´¥çš„ callbackï¼š<ol><li>å¦‚æœæ˜¯è‡ªå·±å°è£…çš„ requestDataï¼Œåœ¨å°è£…æ—¶å¿…é¡»è¦è‡ªå·±è‡ªå®šä¹‰å‡½æ•°åç§° / è°ƒç”¨å‡½æ•°ï¼›</li><li>å¦‚æœä½¿ç”¨çš„æ˜¯åˆ«äººå°è£…çš„requestData / ç¬¬ä¸‰æ–¹åº“ï¼Œé‚£å¿…é¡»å»çœ‹åˆ«äººçš„æºç æˆ–è€…æ–‡æ¡£ï¼Œ æ‰çŸ¥é“è¿™ä¸ªå‡½æ•°çš„ä½¿ç”¨æ–¹å¼ã€‚</li></ol></li><li>æ¥æ”¶åˆ°ç½‘ç»œè¯·æ±‚çš„æ•°æ®åï¼Œå‰©ä½™çš„å¤„ç†é€»è¾‘è¢«æ”¾åœ¨äº†å›è°ƒå‡½æ•°ä¸­ï¼Œè¿™å¯¼è‡´ï¼š<ol><li>å¤±å»æ§åˆ¶æƒã€‚è°ƒç”¨å›è°ƒå‡½æ•°çš„æ—¶æœºä¸åœ¨è‡ªå·±æ‰‹é‡Œï¼Œè€Œæ˜¯åœ¨è¯·æ±‚å‡½æ•°ä¸­ã€‚</li><li>å›è°ƒåœ°ç‹±ã€‚ä¹¦å†™æ–¹å¼ä¸æ˜¯è‡ªä¸Šè€Œä¸‹çš„ä¹ æƒ¯æ€§æ€ç»´ï¼Œè€Œæ˜¯å˜æˆå±‚å±‚åµŒå¥—çš„ç»“æ„ï¼Œå¢åŠ ç¼–ç å’Œé˜…è¯»å›°éš¾ã€‚</li></ol></li></ol><h3 class="anchor anchorWithStickyNavbar_mojV" id="12-promise">1.2 Promise<a class="hash-link" href="#12-promise" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Promise æ˜¯ä¸€ä¸ªç±»ï¼š</p><ul><li>åœ¨é€šè¿‡ new åˆ›å»º Promise å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç§°ä¹‹ä¸º executorã€‚<ul><li>Promise ä¼šç«‹å³æ‰§è¡Œ executorï¼ŒåŒæ—¶ä¼šç»™ executor ä¼ å…¥å›è°ƒ resolveã€rejectï¼›</li></ul></li></ul><p>Promise çš„ executor æ‰§è¡Œæƒ…å†µï¼Œæœ‰ä¸‰ä¸ªçŠ¶æ€ï¼š</p><ul><li>å¾…å®šï¼ˆpendingï¼‰:  executor å°šæœªæ‰§è¡Œå®Œæ¯•ï¼Œåˆå§‹çŠ¶æ€ï¼Œæ—¢æ²¡æœ‰è¢«å…‘ç°ï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç»ï¼›</li><li>å·²å…‘ç°ï¼ˆfulfilled / resolvedï¼‰:  executor è°ƒç”¨äº† resolveï¼Œæ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆï¼›</li><li>å·²æ‹’ç»ï¼ˆrejectedï¼‰: æ„å‘³ç€æ“ä½œå¤±è´¥ï¼Œå…·ä½“æƒ…å†µæœ‰<ol><li>å¤±è´¥ï¼šexecutor è°ƒç”¨äº† rejectï¼›</li><li>é”™è¯¯ï¼šexecutor å‡½æ•°åœ¨æ‰§è¡Œæ—¶ï¼Œå‘ç”Ÿäº†é”™è¯¯ï¼ˆæŠ›å‡ºå¼‚å¸¸ï¼‰ï¼Œç«‹å³å˜ä¸ºé”™è¯¯å†³è®®ï¼Œä¸å†æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç ã€‚</li></ol></li></ul><p><code>promise.then()</code> å¯ä»¥æ¥æ”¶åˆ° executor çš„å®Œæˆæƒ…å†µï¼Œ<code>.then</code> æœ‰ä¸¤ä¸ªå‚æ•°ï¼ˆå›è°ƒå‡½æ•°ï¼‰</p><ul><li>å¦‚æœæ˜¯æˆåŠŸï¼Œåˆ™è°ƒç”¨ <code>then()</code> ä¸­ç¬¬ä¸€ä¸ªå›è°ƒï¼›</li><li>å¦‚æœæ˜¯å¤±è´¥ï¼Œåˆ™è°ƒç”¨ <code>then()</code> ä¸­ç¬¬äºŒä¸ªå›è°ƒï¼›</li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> promise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// resolve(res) or reject(err)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;æˆåŠŸ:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;å¤±è´¥:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æœ‰ Promise æ—¶ï¼šå¼‚æ­¥ç½‘ç»œè¯·æ±‚æ–¹å¼</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// request.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å¼‚æ­¥è¯·æ±‚çš„ä»£ç ä¼šè¢«æ”¾å…¥åˆ°executorä¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// æ‹¿åˆ°è¯·æ±‚çš„ç»“æœ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;200&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// æˆåŠŸ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;abc&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cba&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;nba&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">names</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å¤±è´¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> errMessage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;è¯·æ±‚å¤±è´¥, urlé”™è¯¯&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">errMessage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// main.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> promise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;200&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;è¯·æ±‚æˆåŠŸ:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;è¯·æ±‚å¤±è´¥:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// è¯·æ±‚æˆåŠŸ: [&#x27;abc&#x27;, &#x27;cba&#x27;, &#x27;nba&#x27;]</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="13-resolve-reject-å›è°ƒ">1.3 resolve, reject å›è°ƒ<a class="hash-link" href="#13-resolve-reject-å›è°ƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li><strong><code>resolve()</code> è¿”å›çš„ <code>promise</code>ï¼Œæ—¢å¯èƒ½å®Œæˆï¼Œä¹Ÿå¯èƒ½æ‹’ç»ï¼Œè¦æ ¹æ®ä¼ å…¥å‚æ•°è€Œå®šã€‚</strong></li><li><code>reject()</code> ä¼šè¿”å›ä¸€ä¸ªæ‹’ç»çš„ <code>Promise</code>ã€‚</li><li>åœ¨ executor ä¸­ï¼Œæ‰§è¡Œåˆ° <code>resolve()</code> æˆ– <code>reject()</code> åï¼Œexecutor ä¸ä¼šæå‰ç»ˆæ­¢ï¼Œè€Œæ˜¯æŠŠå‰©ä½™çš„ä»£ç å…¨éƒ¨æ‰§è¡Œç»“æŸã€‚</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="131-resolve">1.3.1 resolve<a class="hash-link" href="#131-resolve" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>Promise ä¸­ï¼Œexecutor ä¸­çš„å›è°ƒå‡½æ•° <code>resolve()</code> å¯ä»¥ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯ï¼š</p><ul><li>æ™®é€šå¯¹è±¡ã€åŸºæœ¬æ•°æ®ç±»å‹</li><li>promise å¯¹è±¡<ul><li>å¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼Œé‚£ä¹ˆæ­¤æ—¶åŸ promis å¯¹è±¡çš„çŠ¶æ€ä¸å†å—åˆ° <code>resolve()</code> å†³å®šï¼Œè€Œæ˜¯ç”±ä¼ å…¥çš„è¿™ä¸ª promise å¯¹è±¡å†³å®šã€‚</li></ul></li></ul><p>ä¸‹é¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼ŒåŸæœ¬ promise çš„è¿”å› resolve æ˜¯è¡¨ç¤ºæˆåŠŸï¼Œä½†å› ä¸ºä¼ å…¥çš„ newPromise çŠ¶æ€æ˜¯å¤±è´¥ï¼Œæ‰€ä»¥æœ€ç»ˆ promise çš„çŠ¶æ€å— newPromise å†³å®šï¼Œå˜æˆå¤±è´¥ã€‚</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> promise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newPromise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;newPromise error&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newPromise</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;æˆåŠŸ:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;å¤±è´¥:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å¤±è´¥: newPromise error</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="132-reject">1.3.2 reject<a class="hash-link" href="#132-reject" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><code>reject</code> å¤±è´¥çš„çŠ¶æ€ä¸ä¼šæ›´æ”¹ï¼Œä¸€æ—¦å†³å®šï¼Œ<code>then</code> ä¸­ä¸€å®šæ˜¯å¤±è´¥çš„ã€‚</p><p>ä¸åŒçš„æ˜¯ï¼Œ<code>reject(message)</code> ä¸­ä¼ é€’çš„æ°¸è¿œæ˜¯ä¸€ä¸ªå¤±è´¥çš„ messageï¼Œä¸è®ºå…¶å†…å®¹ä¼ é€’çš„æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€æ™®é€šå¯¹è±¡ï¼Œè¿˜æ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼Œéƒ½ä¼šåŸå°ä¸åŠ¨çš„ä¼ é€’åˆ° <code>then</code> çš„ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ä¸­ï¼Œå½“ä½œå¤±è´¥çš„ messageã€‚</p><ul><li>æ‰€ä»¥ï¼Œå³ä½¿ <code>reject(Promise.solve())</code> reject ä¸­ä¼ é€’ä¸€ä¸ªæˆåŠŸçš„ promiseï¼Œä¹Ÿä¸å½±å“ reject çš„å¤±è´¥å†³è®®ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªæˆåŠŸçš„ promise ç›´æ¥å½“ä½œé”™è¯¯çš„ message ä¼ é€’åˆ° then ä¸­ã€‚</li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> promise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newPromise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;success!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newPromise</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;æˆåŠŸ:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;å¤±è´¥:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ture</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å¤±è´¥: PromiseÂ {&lt;fulfilled&gt;: &#x27;success!&#x27;}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="14-thenable-å¯¹è±¡">1.4 thenable å¯¹è±¡<a class="hash-link" href="#14-thenable-å¯¹è±¡" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å…·æœ‰ then æ–¹æ³•çš„é¸­å­ç±»å‹ï¼šä¸€ä¸ªå…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡ï¼Œå¾ˆå®¹æ˜“è¢«è¯†åˆ«ä¸ºä¸€ä¸ª Promiseã€‚è¿™ç§å¯¹è±¡è¢«ç§°ä¸º <code>thenable</code> å¯¹è±¡ã€‚Promise API åœ¨é¢å¯¹ <code>thenable</code> æ—¶ï¼Œä¼šæœ‰ä¸åŒçš„è¡¨ç°ï¼Œæ€»çš„æ¥è¯´ï¼Œthenable å¯¹è±¡ä¼šå¹²æ‰° Promise çš„æ­£å¸¸ä½¿ç”¨ï¼Œå°½é‡é¿å…ä½¿ç”¨ thenable å½±å“ Promiseã€‚</p><p>åœ¨æ­¤ä¸¾ä¾‹ä¸€ä¸ª <code>thenable</code>ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// p æ˜¯ä¸€ä¸ªthenableå¯¹è±¡ï¼Œæ‹¥æœ‰thenæ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">then</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">cb</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">cb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// è°ƒç”¨ p.thenï¼Œå¯ä»¥çœ‹åˆ°ï¼Œresolve æ–¹æ³•å¯ä»¥è¢«ä½¿ç”¨ï¼Œä½†æ˜¯ reject æ˜¯æ— æ³•ä½¿ç”¨çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;resolved&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// è¾“å‡ºï¼šresolved 42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;rejected&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="15-promise-æ–¹æ³•">1.5 Promise æ–¹æ³•<a class="hash-link" href="#15-promise-æ–¹æ³•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ‰“å° Promise çš„å…¨éƒ¨å¯¹è±¡æ–¹æ³•ï¼š</p><p>å…±æœ‰ä¸‰ä¸ªï¼šthenã€catchã€finally</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// é»˜è®¤ä¸å¯æšä¸¾ï¼Œè¿™é‡Œæ˜¾ç¤ºçš„æ–¹æ³•åç§°ä¼šå˜æ·¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">prototype</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ç”¨getOwnPropertyDescriptorså¯ä»¥æ‰“å°å…¨éƒ¨è‡ªæœ‰æ–¹æ³•ï¼Œä¸è®ºæ˜¯å¦å¯æšä¸¾ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getOwnPropertyDescriptors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">prototype</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// catch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// finally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// consturctorï¼šæŒ‡å‘æ„é€ å‡½æ•°Promise</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Symbol(Symbol.toStringTag)ï¼šè§„èŒƒpromiseå¯¹è±¡çš„æ‰“å°æ ¼å¼</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><img loading="lazy" alt="æˆªå±2022-07-30 17.07.28" src="/assets/images/æˆªå±2022-07-30 17.07.28-edd759cffe00a48d4cbb3973a40ec0ab.png" width="1678" height="280" class="img_E7b_"></p><p>æ‰“å° Promise çš„å…¨éƒ¨é™æ€æ–¹æ³•ï¼š</p><p>å…±æœ‰ 6 ä¸ªï¼šresolveã€rejectã€anyã€raceã€allã€allSettled</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getOwnPropertyDescriptors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Promise</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// resolve</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// reject</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// any</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// race</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// all</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// allSettled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// name: Promiseçš„ç±»å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// length: ï¼Ÿï¼Ÿï¼Ÿ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// prototype: Promiseçš„åŸå‹å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Symbol(Symbol.species): getterå‡½æ•°ï¼Œè¡ç”Ÿå¯¹è±¡åœ¨è¢«åˆ›å»ºæ—¶ï¼Œä¼šè°ƒç”¨</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><img loading="lazy" alt="æˆªå±2022-07-30 17.12.35" src="/assets/images/æˆªå±2022-07-30 17.12.35-fbd8fce27c2a4834f5ae41bcc2c67b40.png" width="1506" height="444" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="2-å¯¹è±¡æ–¹æ³•-3">2 å¯¹è±¡æ–¹æ³• (3)<a class="hash-link" href="#2-å¯¹è±¡æ–¹æ³•-3" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="21-then">2.1 .then<a class="hash-link" href="#21-then" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>then è°ƒç”¨é“¾åŸåˆ™ï¼š</p><ul><li>Promise çš„æˆåŠŸæ˜¯å¯ä»¥è¿ç»­ä¼ é€’çš„ï¼›</li><li>Promise çš„å¤±è´¥å¦‚æœæ²¡æœ‰è¢«æ•è·ï¼Œå°±ä¼šè¿ç»­å¾€ä¸‹ä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·æ‰ï¼›</li><li>Promise çš„å¤±è´¥ä¸€æ—¦è¢«æ•è·æ‰ï¼Œå°±ä¼šåˆè½¬å˜ä¸ºæˆåŠŸçŠ¶æ€ã€‚</li></ul><blockquote><p>å½“ <code>then(..)</code> çš„ <strong>å®Œæˆå›è°ƒå‡½æ•°</strong> æˆ– <strong>å¤±è´¥å›è°ƒå‡½æ•°</strong> çš„è¿”å›å€¼æ˜¯ï¼š</p><ul><li>ä¸€ä¸ªç«‹å³å€¼ï¼Œå®ƒä¼šè¢«ä¼šè¢«åŒ…è£…ä¸ºä¸€ä¸ª <code>Promise</code>ï¼Œç„¶åè¿”å›ï¼›</li><li>ä¸€ä¸ª <code>thenable</code> æˆ–è€… <code>Promise</code>ï¼Œä¼šä¸€ç›´ <strong>å±•å¼€</strong>(æ‰§è¡Œ)ã€‚ç›´åˆ°å¾—åˆ°ä¸€ä¸ªç«‹å³å€¼ï¼Œç„¶ååŒ…è£…ä¸ºä¸€ä¸ª Promise å¹¶è¿”å›ã€‚</li><li><strong>æ‰€ä»¥ï¼Œå›è°ƒå‡½æ•°çš„ <code>return</code> åï¼Œæ€»ä¼šç­‰å¾…ä¸€ä¸ªç«‹å³å€¼ï¼Œè¿”å›åŒ…è£…å¥½è¿™ä¸ªç«‹å³å€¼çš„ <code>promise</code>ã€‚</strong></li></ul></blockquote><p>then æ–¹æ³•ï¼š</p><ul><li>then æ–¹æ³•æ¥å—ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªæˆåŠŸæ—¶ä¼šæ‰§è¡Œï¼Œç¬¬äºŒä¸ªå¤±è´¥æ—¶ä¼šæ‰§è¡Œã€‚</li><li>then æ–¹æ³•å¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨ï¼Œå½¢æˆè¿ç»­çš„ promise è°ƒç”¨ã€‚</li><li>then æ–¹æ³•æœ€ç»ˆä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promise å¯¹è±¡ã€‚<ul><li>then æ–¹æ³•ä¼šå¯¹è¿”å›çš„å†…å®¹è¿›è¡Œï¼š<code>Promise.resolve(xxx)</code> è°ƒç”¨ã€‚</li></ul></li></ul><p>æ³¨ï¼š</p><ul><li>then æ–¹æ³•ä¼šå¯¹è¿”å›çš„å†…å®¹ xxxï¼Œè¿›è¡Œ <code>Promise.resolve(xxx)</code> åŒ…è£…ï¼Œä»è€Œè¾¾åˆ°è¿”å›æ–° promise å¯¹è±¡çš„æ•ˆæœï¼Œè¿™å¯¼è‡´ï¼š</li><li>å¦‚æœç¼–å†™ä»£ç æ—¶ï¼Œè¿”å›ä¸€ä¸ªé promise å¯¹è±¡ï¼ˆ obj æ™®é€šå¯¹è±¡ / åŸºæœ¬æ•°æ®ç±»å‹ / <code>unefined</code>ï¼‰ï¼Œé‚£ä¹ˆ then ä¼šåŒ…è£…ä¸ºä¸€ä¸ª <code>Promise.resolve(è¿”å›å€¼)</code>ï¼ŒæˆåŠŸçŠ¶æ€çš„ promiseï¼ŒæˆåŠŸçš„å‚æ•°ä¸º åŸæ¥è¿”å›çš„å€¼ã€‚	</li><li>å¦‚æœç¼–å†™ä»£ç æ—¶ï¼Œè¿”å›ä¸€ä¸ª promise å¯¹è±¡ï¼Œé‚£ä¹ˆ <code>Promise.reslove(promsise)</code> çš„ç»“æœå–å†³äº promise çš„çŠ¶æ€ã€‚è¿™ç›¸å½“äºç›´æ¥è¿”å›äº†è¿™ä¸ª promise å¯¹è±¡ã€‚</li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;success 1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;success 2&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// è¿”å›épromiseå¯¹è±¡ï¼Œthenä¼šåŒ…è£…ä¸ºæˆåŠŸçš„promiseå¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;error&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// è¿”å›promiseå¯¹è±¡ï¼ŒçŠ¶æ€ä¸å˜ï¼Œç›¸å½“äºç›´æ¥è¿”å›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter">res</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;never executed&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">err</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;é”™è¯¯ï¼š&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// success 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// success 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// é”™è¯¯ï¼š error</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ª thenable å¯¹è±¡ï¼š</p><ul><li>then ç…§å¸¸æ‰§è¡Œ <code>Promise.resolve()</code>ï¼Œä½† thenable è¢«è¯¯è®¤ä¸ºæ˜¯ä¸€ä¸ª Promiseï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ª then æ–¹æ³•æœ€ç»ˆä¼šè¿”å›è¿™ä¸ª thenable å¯¹è±¡ã€‚ç„¶åç¬¬äºŒä¸ª then æ–¹æ³•å®é™…ä¸Šæ‰§è¡Œçš„æ˜¯ thenable ä¸­è‡ªå®šä¹‰çš„ then æ–¹æ³•ã€‚</li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> promise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">then</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;thenable æˆ‘è¢«æ‰§è¡Œäº†&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">222222</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;æ‰§è¡Œç»“æœ&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;res:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// thenable æˆ‘è¢«æ‰§è¡Œäº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ‰§è¡Œç»“æœ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// res: 222222</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="12-catch">1.2 .catch<a class="hash-link" href="#12-catch" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>catch</code> æ–¹æ³•ï¼Œåªæ¥å—ä¸€ä¸ªå¤±è´¥å›è°ƒå‡½æ•°ã€‚å°±ç›¸å½“äº then æ–¹æ³•ä¸å®šä¹‰ç¬¬ä¸€ä¸ªæˆåŠŸå›è°ƒå‡½æ•°ï¼Œåªå®šä¹‰ç¬¬äºŒä¸ªå¤±è´¥å›è°ƒå‡½æ•°ã€‚</p><ul><li><code>catch</code> åœ¨ executor è¿”å›å¤±è´¥ / å†…éƒ¨æŠ›é”™ æ—¶è§¦å‘ã€‚</li><li><code>catch</code> çš„è¿”å›å€¼ï¼šcatch æˆåŠŸæ•è·äº†é”™è¯¯ï¼Œè¿”å›çš„ promise å¯¹è±¡ä¼šæ¢å¤æˆåŠŸçŠ¶æ€ã€‚<ul><li><code>catch</code> ä¾ç„¶ä¼šè¿”å›ä¸€ä¸ª promise å¯¹è±¡ã€‚å…¶é€»è¾‘å’Œ <code>then()</code> çš„è¿”å›å€¼ç›¸åŒã€‚ä¼šå¯¹è¿”å›å€¼è¿›è¡Œ <code>Promise.resolve()</code> è¿›è¡ŒåŒ…è£¹ã€‚å¦‚æœè¿”å›å€¼æ˜¯é promise å¯¹è±¡ï¼Œåˆ™è¿”å›æˆåŠŸï¼›å¦‚æœè¿”å›å€¼æ˜¯ promise å¯¹è±¡ï¼Œåˆ™è¿”å›çŠ¶æ€éµå¾ªè¿™ä¸ª promise å¯¹è±¡è¿”å›çš„çŠ¶æ€ã€‚</li></ul></li></ul><p><code>catch</code> æ˜¯è¿åäº† Promise A+ çš„å®šä¹‰ï¼Œå½“å®ƒå‡ºç°åœ¨ then è°ƒç”¨é“¾ä¸­æ—¶ï¼Œæ˜¯ä¸€ä¸ªå…œåº•çš„ä½œç”¨ã€‚æœªè¢«æ•è·çš„é”™è¯¯ä¼š å†’æ³¡ / é¡ºå»¶  åˆ°ä¸‹ä¸€ä¸ª <code>then</code> ä¸­ã€‚ä¸è®ºåœ¨ <code>then</code> è°ƒç”¨é“¾ä¸­çš„å“ªä¸€ä¸ª <code>then</code> ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œéƒ½ä¼šè¢«æœ€å <code>catch</code> æ•è·åˆ°è¿™ä¸ªé”™è¯¯ã€‚</p><p>æ¯”å¦‚ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>catch</code> ä¼š â€œç›‘å¬â€ promise å’Œ 3 ä¸ª then æ˜¯å¦æŠ›å‡ºé”™è¯¯ï¼Œå¦‚æœå‰é¢çš„ then ä¸­å®šä¹‰äº†é”™è¯¯æ•è·å›è°ƒï¼ˆç¬¬äºŒä¸ªå›è°ƒï¼‰ï¼Œæ²¡æœ‰é”™è¯¯æµåˆ° catchï¼Œcatch å°±ä¸ä¼šè§¦å‘ï¼›å¦‚æœ then ä¸­æ²¡æœ‰æ•è·æ‰é”™è¯¯ï¼Œå°±ä¼šè®©é”™è¯¯é¡ºç€ then é“¾ä¾æ¬¡æŠ›å‡ºï¼Œç›´åˆ°è¢« catch æ•è·ã€‚</p><ul><li>catch å…œåº• promise å’Œå‰é¢ä¸‰ä¸ª then å‡ºç°çš„é”™è¯¯ï¼Œæ‰€ä»¥ then è°ƒç”¨é“¾å¹¶ä¸æ˜¯ä¾æ¬¡é¡ºç€æ‰§è¡Œçš„ã€‚</li><li>å¦‚æœ promise å’Œå‰é¢ä¸‰ä¸ª then æ²¡æœ‰å‡ºç°é”™è¯¯ï¼Œcatch ä¸ä¼šè¢«æ‰§è¡Œã€‚</li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> promise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">err</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// err é€»è¾‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// catch è¯­æ³•ç³–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// eeré€»è¾‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ³¨æ„ï¼š<code>catch</code> è¿åäº† Promise A* çš„å®šä¹‰ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> promise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;é”™è¯¯&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;success&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ‰“å°ï¼šé”™è¯¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// then ä¸­æ²¡æœ‰å®šä¹‰é”™è¯¯æ•è·å›è°ƒï¼Œæ‰€ä»¥ç»§ç»­æŠ›å‡ºé”™è¯¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// catch è¢«æ‰§è¡Œï¼Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;success&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">err</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;then err:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;catch err:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ‰“å°ï¼šthen err: é”™è¯¯ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// then ä¸­å®šä¹‰äº†é”™è¯¯æ•è·å›è°ƒï¼Œæ²¡æœ‰é”™è¯¯ä¼ é€’ç»™ catch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// catch æ²¡æœ‰æ‰§è¡Œ</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="23-finally">2.3 .finally<a class="hash-link" href="#23-finally" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ˜¯ ES9ï¼ˆES2018ï¼‰çš„æ–°ç‰¹æ€§ï¼š</p><ul><li>æ— è®º Promise å¯¹è±¡æ— è®ºå˜æˆ fulfilled è¿˜æ˜¯ reject çŠ¶æ€ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«æ‰§è¡Œçš„ä»£ç ã€‚</li><li>ä¸æ¥æ”¶å‚æ•°ï¼Œé€šå¸¸åšæ”¶å°¾çš„ <strong>æ¸…é™¤å·¥ä½œ</strong>ã€‚</li><li>finally ä¹Ÿä¸éµå¾ª Promise A+ è§„èŒƒã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="3-ç±»æ–¹æ³•-6">3 ç±»æ–¹æ³• (6)<a class="hash-link" href="#3-ç±»æ–¹æ³•-6" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="31-promiseresolve">3.1 Promise.resolve<a class="hash-link" href="#31-promiseresolve" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é€šå¸¸æŠŠä¸€ä¸ªé Promise å¯¹è±¡è½¬åŒ–ä¸º Promise å¯¹è±¡ã€‚</p><blockquote><p><code>Promise.resolve(...)</code> æ–¹æ³•å¯ä»¥æŠŠä¸€ä¸ªå¾…éªŒè¯çš„ã€å°†è¦ä½¿ç”¨çš„ promiseï¼Œæ£€æµ‹å¹¶åŒ…è£…ä¸ºä¸€ä¸ªå¯ä»¥ä¿¡ä»»çš„ <code>Promise</code> å¯¹è±¡ã€‚</p></blockquote><p>resolve å‚æ•°çš„å½¢æ€ï¼š</p><ul><li>å‚æ•°æ˜¯ä¸€ä¸ª åŸºæœ¬ç±»å‹æˆ–å¯¹è±¡ï¼ˆç«‹å³å€¼ï¼ˆé Promiseã€é thenable ï¼‰ï¼‰ï¼ŒåŒ…è£…ä¸ºä¸€ä¸ª promise å¯¹è±¡å¹¶è¿”å›ã€‚</li><li>å‚æ•°æœ¬èº«æ˜¯ Promiseï¼Œå°±ä¼šè¿”å›è¿™ä¸ª promise æœ¬èº«ã€‚</li><li>å‚æ•°æ˜¯ä¸€ä¸ª thenable å¯¹è±¡ï¼Œå°±ä¼šè¯•å›¾ <strong>å±•å¼€</strong>(æ‰§è¡Œå¯¹è±¡çš„ then æ–¹æ³•) ï¼Œå±•å¼€è¿‡ç¨‹ç›´åˆ°è·å¾—ä¸€ä¸ªå…·ä½“çš„ç«‹å³å€¼ï¼ˆé Promiseï¼‰ï¼Œç„¶åè¿”å›ä¸€ä¸ªç”¨è¿™ä¸ªå€¼å¡«å……çš„ promiseã€‚</li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">then</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;thenable æˆ‘è¢«æ‰§è¡Œäº†&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">222222</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ä¼ é€’ä¸€ä¸ª thenableï¼Œå°±ä¼šå±•å¼€è¿™ä¸ªthenableï¼Œå±•å¼€ä¸ºä¸€ä¸ªæœ€ç»ˆå€¼ï¼ŒåŒ…è£…åˆ°ä¸€ä¸ª Promise ä¸­ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// è¾“å‡ºï¼š2222222</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// thenable æˆ‘è¢«æ‰§è¡Œäº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 222222</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="32-promisereject">3.2 Promise.reject<a class="hash-link" href="#32-promisereject" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç”Ÿæˆä¸€ä¸ª rejected çŠ¶æ€çš„ promise å¯¹è±¡ã€‚</p><p>rejected çš„å‚æ•°ä¸è®ºä¼ é€’çš„æ˜¯ä»€ä¹ˆï¼Œéƒ½ä¼šå½“ä½œ rejected çŠ¶æ€çš„é”™è¯¯ message è¿”å›ã€‚ä¸ä¼šå’Œ <code>Promise.resolve</code> ä¸€æ ·è¿›è¡ŒåŒ…è£…ã€‚</p><ul><li>å³ä½¿æ˜¯ promise å¯¹è±¡ï¼Œæˆ– thenable å¯¹è±¡ï¼Œéƒ½ä¼šåŸå°ä¸åŠ¨å½“ä½œé”™è¯¯ message è¿”å›ã€‚ä¸ä¼šå¯¹å…¶è¿›è¡Œ â€œå±•å¼€â€ã€‚</li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> promise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;rejected message&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> promise2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promsie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;rejected message&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="33-promiseall">3.3 Promise.all<a class="hash-link" href="#33-promiseall" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç­‰å¾…æ‰€æœ‰ promise å¯¹è±¡éƒ½ä¸ºå®ŒæˆçŠ¶æ€åæ‰ä¼šè¿”å›ã€‚ä¸€æ—¦æœ‰ä¸€ä¸ª promise å¯¹è±¡ä¸ºå¤±è´¥çŠ¶æ€ï¼Œå°±ä¼šç«‹å³è¿”å› è¿™ä¸ªå¤±è´¥çŠ¶æ€ï¼Œä¸¢å¼ƒå…¶ä»– promise å¯¹è±¡çŠ¶æ€ã€‚</p><ul><li><p>è¿”å›ä¸€ä¸ªæ–°çš„ promiseã€‚</p></li><li><p>ä¼ ç»™ <code>Promise.all([...])</code> çš„æ•°ç»„ä¸­çš„æˆå‘˜ï¼Œå¯ä»¥æ˜¯ <code>Promise</code> / <code>thenable</code> / ç«‹å³å€¼ã€‚</p><ul><li>æ•°ç»„ä¸­çš„æˆå‘˜å‡ä¼šç»è¿‡ <code>Promise.resolve()</code> è¿‡æ»¤ï¼Œç¡®ä¿å‚æ•°å‡ä¸º <code>Promise</code> å¯¹è±¡ã€‚</li></ul></li><li><p>æ•°ç»„ä¸­çš„æˆå‘˜ä¸­ä¸€æ—¦ <strong>æœ‰</strong> <code>reject</code> å†³è®®ï¼Œå°±ç«‹å³æŠŠè¿™ä¸ª <code>reject</code> å†³è®®è®¾ç½®ä¸ºæ‹’ç»ç†ç”±ï¼Œå¹¶è¿”å›ï¼Œä¸å†ç†ä¼šå…¶ä»–æˆå‘˜çš„å†³è®®ã€‚</p></li><li><p>æ•°ç»„ä¸­çš„æˆå‘˜å¦‚æœ <strong>æ²¡æœ‰</strong> <code>reject</code> å†³è®®ï¼Œå°±ä¸€ç›´ç­‰å¾…æ‰€æœ‰æˆå‘˜å…¨éƒ¨ <code>fulfill</code>ï¼ŒæŠŠå®ƒä»¬æˆåŠŸå†³è®®ä¼ é€’çš„å€¼æ‰“åŒ…æˆä¸€ä¸ªæ•°ç»„ï¼Œç„¶åå†åŒ…è£…ä¸ºä¸€ä¸ªæˆåŠŸå†³è®®çš„ <code>Promise</code> å¹¶è¿”å›ã€‚</p><ul><li>æ•°ç»„ä¸­æˆå‘˜é¡ºåº æŒ‰ç…§ä¼ é€’ <code>Promise.all([...])</code> æ—¶çš„æˆå‘˜é¡ºåºï¼Œä¸æ˜¯å†³è®®å®Œæˆçš„å…ˆåé¡ºåºã€‚</li></ul></li><li><p>âš ï¸ å¦‚æœä¼ å…¥çš„æ˜¯ç©ºæ•°ç»„ <code>[]</code>ï¼Œå°±ä¼šç«‹å³ä¸ºå®ŒæˆçŠ¶æ€ã€‚</p></li></ul><p>ä½¿ç”¨ä¸¾ä¾‹ï¼š</p><p>å…ˆå®šä¹‰ 3 ä¸ªä¸åŒæ—¶é—´çš„æˆåŠŸå†³è®®ï¼Œ1 ä¸ªå¤±è´¥å†³è®®ã€‚</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 1000 æ¯«ç§’åæˆåŠŸå†³è®®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;resolve1, done!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;resolve 1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 8000 æ¯«ç§’åæˆåŠŸå†³è®®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;resolve2, done!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;resolve 2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 4000 æ¯«ç§’åæˆåŠŸå†³è®®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;resolve3, done!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;resolve 3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å¤±è´¥å†³è®®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;reject, done!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;reject 4&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœ <code>Promise.all([...])</code>  çš„å‚æ•°æ•°ç»„ä¸­ï¼Œå…¨éƒ¨ä¼šæˆåŠŸå†³è®®ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Promise.all reject!&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æœ€ç»ˆçš„è¿”å›ç»“æœå¯ä»¥çœ‹åˆ°ï¼š</p><ul><li>æ‰€æœ‰æˆå‘˜å…¨éƒ¨æˆåŠŸå†³è®®ï¼Œ<code>Promise.all</code> æ‰ä¼šæˆåŠŸå†³è®®ï¼›</li><li><code>Promise.all</code> è¿”å›çš„ <code>Promise</code> ä¿¡æ¯æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„å°±æ˜¯æ‰€æœ‰ä¼ å…¥ <code>promise</code> çš„å®Œæˆæ¶ˆæ¯æ‰€ç»„æˆçš„æ•°ç»„ã€‚</li><li>è¿™ä¸ªæ•°ç»„çš„æˆå‘˜çš„é¡ºåºï¼Œå’Œå®Œæˆæ—¶é—´é¡ºåºæ— å…³ï¼Œå’Œä¼ å…¥æ—¶çš„é¡ºåºä¸€è‡´ã€‚</li></ul><p><img loading="lazy" alt="image-20220701114602878" src="/assets/images/image-20220701114602878-b18db5e0ccfb28c1363e4d6b0d756b0a.png" width="618" height="132" class="img_E7b_"></p><p>å¦‚æœ <code>Promise.all([...])</code>  çš„å‚æ•°æ•°ç»„ä¸­ï¼Œæœ‰å¤±è´¥å†³è®®ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Promise.all reject!&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸€æ—¦æœ‰æˆå‘˜å¤±è´¥ï¼Œ <code>Promise.all([...])</code>  å°±æ‹¿ç€è¿™ä¸ªå¤±è´¥æˆå‘˜çš„å†³è®®ï¼Œç›´æ¥è¿”å›ä¸ºå¤±è´¥å†³è®®ã€‚ä¸å†ç†ä¼šå…¶ä»–æˆå‘˜çš„å†³è®®ã€‚</p><p><img loading="lazy" alt="image-20220701114607767" src="data:image/png;base64,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" width="407" height="132" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="34-promiseallsettled">3.4 Promise.allSettled<a class="hash-link" href="#34-promiseallsettled" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>all æ–¹æ³•æœ‰ä¸€ä¸ªç¼ºé™·ï¼šå½“å…¥å‚æ•°ç»„ä¸­æœ‰ä¸€ä¸ª Promise å˜æˆ reject çŠ¶æ€æ—¶ï¼Œall å°±ä¼šç«‹å³è¿”å› reject çŠ¶æ€çš„æ–° Promiseã€‚</p><p>è¿™å¯¼è‡´å…¥å‚æ•°ç»„ä¸­å…¶ä»– resolved çŠ¶æ€ï¼Œä»¥åŠä¾ç„¶å¤„äº pending çŠ¶æ€çš„ Promiseï¼Œæ— æ³•è·å–å¯¹åº”ç»“æœã€‚</p><p>åœ¨ES11ï¼ˆES2020ï¼‰ä¸­ï¼Œæ·»åŠ äº†æ–°çš„ API <code>Promise.allSettled</code>ï¼š</p><ul><li>è¯¥æ–¹æ³•ä¼šåœ¨æ‰€æœ‰çš„ Promise éƒ½æœ‰ç»“æœï¼ˆsettledï¼‰ï¼Œè¿”å›çš„ promise å¯¹è±¡æ‰æœ‰å®ŒæˆçŠ¶æ€ã€‚</li><li>è¿”å›çš„ Promise ä¸€å®šæ˜¯ resolved çš„ï¼Œä¸å†æœ‰ rejected çŠ¶æ€ï¼›</li><li>allSettled è¿”å›çš„ promise å¯¹è±¡çš„å†³è®®å€¼æ˜¯ä¾ç„¶æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶æˆå‘˜ä¸å†æ˜¯å…·ä½“çš„å†³è®®å€¼ï¼Œè€Œå˜æˆä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä»£è¡¨äº†å…¥å‚çš„ promise æˆå‘˜è¿”å›çš„çŠ¶æ€ + å†³è®®å€¼ï¼š<ul><li>statusï¼špromise æˆå‘˜çš„è¿”å›çŠ¶æ€</li><li>value / reasonï¼šæˆå‘˜è¿”å›çš„å†³è®®å€¼ã€‚å¦‚æœçŠ¶æ€æ˜¯ fulfilled å°±ä¸º valueï¼›å¦‚æœæ˜¯ rejected å°±æ˜¯ reasonã€‚</li></ul></li><li>allSettled è¿”å›çš„ promise å¯¹è±¡æºå¸¦çš„å†³è®®å€¼ï¼Œä¸å†æ˜¯ <code>Promise.all</code> æ–¹æ³•ä¸­æ¯ä¸ªå…¥å‚ promise æˆå‘˜çš„å…·ä½“æˆåŠŸå€¼ã€‚</li></ul><p>ä¸¾ä¾‹ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">allSettled</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;allsettled reject!&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><img loading="lazy" alt="æˆªå±2022-07-30 19.01.10" src="/assets/images/æˆªå±2022-07-30 19.01.10-ddd6963e836aa906788153f08b152d1b.png" width="1128" height="406" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="35-promiserace">3.5 Promise.race<a class="hash-link" href="#35-promiserace" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li><p>é—¨é—©ã€é™æ€ã€‚è¿”å›ç¬¬ä¸€ä¸ªè·¨è¿‡ç»ˆç‚¹çº¿çš„ Promise å¯¹è±¡ï¼Œè€ŒæŠ›å¼ƒå…¶ä»– Promiseã€‚</p><ul><li>ä¸€æ—¦æœ‰ä»»ä½•ä¸€ä¸ª Promise å†³è®®ä¸ºå®Œæˆï¼Œ <code>Promise.race([...])</code> å°±ä¼šå®Œæˆï¼›</li><li>ä¸€æ—¦æœ‰ä»»ä½•ä¸€ä¸ª Promise å†³è®®ä¸ºæ‹’ç»ï¼Œå®ƒå°±ä¼šæ‹’ç»ã€‚</li></ul></li><li><p>ä¼ ç»™ <code>Promise.race([...])</code> çš„æ•°ç»„ä¸­çš„æˆå‘˜ï¼Œå¯ä»¥æ˜¯ <code>Promise</code> / <code>thenable</code> / ç«‹å³å€¼ã€‚</p><ul><li><p>å¦‚æœä¼ å…¥äº†ä¸€ä¸ªç©ºæ•°ç»„ï¼Œåˆ™ <code>Promise.race([...])</code> æ°¸è¿œä¸ä¼šå†³è®®ï¼›</p></li><li><p>å¦‚æœæ•°ç»„ä¸­æœ‰æˆå‘˜æ˜¯ç«‹å³å€¼ï¼Œåˆ™æˆå‘˜ä¸­ç¬¬ä¸€ä¸ªç«‹å³å€¼èƒœå‡ºã€‚</p></li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_mojV" id="36-promiseany">3.6 Promise.any<a class="hash-link" href="#36-promiseany" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ES2021ï¼ˆES12ï¼‰çš„æ–°ç‰¹æ€§ã€‚è¿”å›ç¬¬ä¸€ä¸ªå†³è®®ä¸ºæˆåŠŸçš„ Promise å¯¹è±¡ï¼Œä¸å…³å¿ƒ promise çš„é”™è¯¯ç»“æœã€‚</p><ul><li>å’Œ rece ç±»ä¼¼ï¼Œæœ€ç»ˆæŠŠå…¥å‚æ•°ç»„ä¸­çš„æŸä¸ª promise å¯¹è±¡çš„å†³è®®ï¼Œåšä¸ºæœ€ç»ˆå†³è®®è¿”å›ã€‚</li><li>é—¨é—©ã€é™æ€ã€‚ä¸åŒçš„æ˜¯ï¼Œany ä¼šç­‰å¾…ç¬¬ä¸€ä¸ªè·¨è¿‡ç»ˆç‚¹çº¿çš„ï¼Œä¸”å†³è®®ä¸º <strong>fulfilled æˆåŠŸ</strong> çš„ promise å¯¹è±¡ã€‚</li><li>å¦‚æœæ‰€æœ‰æˆå‘˜éƒ½æ˜¯è¿”å›äº† rejectedï¼Œé‚£ä¹ˆæœ€ç»ˆä¼šè¿”å› rejected çŠ¶æ€ï¼Œä¸” error é”™è¯¯å¹¶ä¸æ˜¯ promise æˆå‘˜è¿”å›çš„é”™è¯¯å†³è®®å€¼ï¼Œè€Œæ˜¯ any è‡ªå®šä¹‰çš„é”™è¯¯ã€‚<ul><li>å¯ä»¥é€šè¿‡ <code>err.errors</code> æ‹¿åˆ°æ‰€æœ‰çš„é”™è¯¯å†³è®®å€¼ï¼š</li></ul></li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;reject, done!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;reject 4&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p5 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;reject 5&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">any</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;res:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// AggregateError: All promises were rejected</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">errors</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;reject 4&#x27;, &#x27;reject 5&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><img loading="lazy" alt="æˆªå±2022-07-30 19.15.53" src="/assets/images/æˆªå±2022-07-30 19.15.53-e74c3c5f906044cb3244ebf3ec6384db.png" width="1016" height="96" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="4-é—®é¢˜">4 é—®é¢˜<a class="hash-link" href="#4-é—®é¢˜" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="é—®é¢˜2promise-è§£å†³çš„ç—›ç‚¹æ˜¯ä»€ä¹ˆ">é—®é¢˜2ï¼šPromise è§£å†³çš„ç—›ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ<a class="hash-link" href="#é—®é¢˜2promise-è§£å†³çš„ç—›ç‚¹æ˜¯ä»€ä¹ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Web é¡µé¢æ˜¯å•çº¿ç¨‹æ¶æ„æ¨¡å‹ï¼Œè¿™ç§æ¨¡å‹å†³å®šäº†æˆ‘ä»¬ç¼–å†™ä»£ç çš„å½¢å¼â€”â€”å¼‚æ­¥ç¼–ç¨‹ã€‚</p><p>åŸºäºå¼‚æ­¥ç¼–ç¨‹æ¨¡å‹æ˜¯åŸºäºé¡µé¢çš„äº‹ä»¶å¾ªç¯ç³»ç»Ÿå®ç°çš„ï¼š</p><p>å½“æˆ‘ä»¬éœ€è¦è·å–ä¸€äº›éå¸¸è€—æ—¶çš„ä»»åŠ¡æ—¶ï¼Œæ¯”å¦‚ç½‘ç»œä¸‹è½½ä»»åŠ¡ã€è·å–ç”¨æˆ·è¾“å…¥ä¿¡æ¯ç­‰ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡éƒ½ä¼šæ”¾åˆ°é¡µé¢ä¸»çº¿ç¨‹ä¹‹å¤–çš„è¿›ç¨‹ï¼ˆIOè¿›ç¨‹ã€ç½‘ç»œè¿›ç¨‹ï¼‰ä¸­å»æ‰§è¡Œï¼Œç­‰å¾…æœ‰äº†ç»“æœåï¼Œä¸»çº¿ç¨‹å†æ¥ç€å¤„ç†è¿™äº›ä»»åŠ¡ã€‚</p><p>è¿™æ ·å°±é¿å…äº†è€—æ—¶ä»»åŠ¡ä¸€ç›´å ç”¨é¡µé¢ä¸»çº¿ç¨‹çš„æƒ…å†µã€‚</p><p><img loading="lazy" alt="image-20220701114535535" src="/assets/images/image-20220701114535535-aaef9a3b20ef6cacf8c5d4042c4e980e.png" width="1142" height="731" class="img_E7b_"></p><p>ä¸Šå›¾å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å¼‚æ­¥ä»»åŠ¡ã€‚ä¸»çº¿ç¨‹å‘èµ·ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡åï¼Œå°±ä¸¢ç»™å…¶ä»–è¿›ç¨‹å»å¤„ç†ã€‚æ­¤æ—¶ä¸»è¿›ç¨‹å¯ä»¥ç€æ‰‹å¤„ç†å…¶ä»–ä»»åŠ¡ã€‚ç­‰è¿™ä¸ªå¼‚æ­¥ä»»åŠ¡æœ‰äº†ç»“æœï¼Œå°±æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œç„¶åä¸»çº¿ç¨‹å»å¤„ç†è¿™ä¸ªç»“æœã€‚</p><p><strong>è¿™å°±æ˜¯é¡µé¢ç¼–ç¨‹çš„æœ€å¤§ç‰¹ç‚¹ â€”â€” å¼‚æ­¥å›è°ƒã€‚</strong></p><p>å†™å‡ºæ¥çš„ä»£ç ä¼šæŠŠä¸€äº›å…³é”®çš„é€»è¾‘ç‚¹æ‰“ä¹±ï¼ŒçœŸæ­£æ‰§è¡Œçš„èµ·æ¥ï¼Œä¸æ˜¯æŒ‰ç…§å†™ä»£ç çš„é¡ºåºå»å¾€ä¸‹æ‰§è¡Œã€‚æ‰€ä»¥è¿™ç§é£æ ¼çš„ä»£ç ä¸ç¬¦åˆäººçš„çº¿æ€§æ€ç»´æ–¹å¼ã€‚</p><p>æµç¨‹å¦‚ä¸‹ï¼Œä¸»çº¿ç¨‹ï¼š</p><ol><li>è¯·æ±‚èµ„æºï¼Œè¯·æ±‚ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œè°ƒç”¨ <code>a</code> ï¼›</li><li>ç­‰å¾…ç»“æœï¼Œæ‰§è¡Œåˆ«çš„ä»»åŠ¡ï¼›</li><li>å¾—åˆ°ç»“æœï¼Œæ ¹æ®ç»“æœè°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚</li></ol><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">è¯·æ±‚a</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">è¯·æ±‚ç»“æœa</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å¤„ç†è¯·æ±‚ç»“æœa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœè¦è¿ç»­çš„è¯·æ±‚èµ„æºï¼Œæ¯”å¦‚è·å¾— <code>a</code> èµ„æºåï¼Œæ¥ç€è·å¾— <code>b</code> èµ„æºï¼›ç­‰ <code>b</code> èµ„æºå¾—åˆ°åï¼Œå»è·å¾— <code>c</code> èµ„æº ...</p><p>æµç¨‹å¦‚ä¸‹ï¼Œä¸»çº¿ç¨‹ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">è¯·æ±‚a</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">è¯·æ±‚ç»“æœa</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">è¯·æ±‚b</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">è¯·æ±‚ç»“æœb</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">è¯·æ±‚c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">è¯·æ±‚ç»“æœc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœå›è°ƒå‡½æ•°åµŒå¥—å¤ªå¤šï¼Œå°±ä¼šå½¢æˆ <strong>å›è°ƒåœ°ç‹±</strong>ã€‚</p><p><strong>å½¢æˆå›è°ƒåœ°ç‹±çš„åŸå› ï¼š</strong></p><ol><li><strong>åµŒå¥—è°ƒç”¨ã€‚</strong>ä¸‹ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡çš„å¼€å§‹ï¼Œä¾èµ–ä¸Šä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡çš„è¯·æ±‚ç»“æœã€‚è¿™ä¼šéœ€è¦<strong>åœ¨ä¸Šä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡çš„å›è°ƒå‡½æ•°å†…éƒ¨å»æ‰§è¡Œæ–°çš„ä¸šåŠ¡é€»è¾‘ã€‚</strong></li><li><strong>ä»»åŠ¡çš„ä¸ç¡®å®šæ€§ã€‚</strong>æ¯ä¸ªå¼‚æ­¥ä»»åŠ¡éƒ½ä¼šæœ‰å¤šç§å¯èƒ½çš„ç»“æœï¼ˆæˆåŠŸã€å¤±è´¥ç­‰ï¼‰ï¼Œè¿™åœ¨ä»£ç ä¸­å°±éœ€è¦ä¸ºæ¯ä¸ªä»»åŠ¡å‡†å¤‡è‡³å°‘ä¸¤å¥—å›è°ƒå‡½æ•°ï¼Œå¢åŠ äº†ä»£ç çš„æ··ä¹±ç¨‹åº¦ã€‚</li></ol><p><strong>å›è°ƒå‡½æ•°å¸¦æ¥çš„é—®é¢˜ï¼š</strong></p><ol><li>ä»£ç æ··ä¹±ï¼Œå¯è¯»æ€§å·®ï¼›</li><li>è€¦åˆåº¦è¿‡é«˜ï¼Œå¯ç»´æŠ¤æ€§å·®ï¼Œå¤ç”¨æ€§å·®ã€‚</li></ol><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¸Œæœ›çš„å¼‚æ­¥å¤„ç†æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">è¯·æ±‚1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">è¯·æ±‚2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">æˆåŠŸçš„å›è°ƒï¼Œè¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">å¤±è´¥çš„å›è°ƒ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">è¯·æ±‚3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">æˆåŠŸçš„å›è°ƒï¼Œè¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">å¤±è´¥çš„å›è°ƒ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">è¯·æ±‚2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">3</span><span class="token plain">æˆåŠŸçš„å›è°ƒï¼Œè¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">3</span><span class="token plain">å¤±è´¥çš„å›è°ƒ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">è¯·æ±‚3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">4</span><span class="token plain">æˆåŠŸçš„å›è°ƒï¼Œè¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">4</span><span class="token plain">å¤±è´¥çš„å›è°ƒ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>è¿™éœ€è¦è§£å†³å½¢æˆå›è°ƒåœ°ç‹±çš„ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>æ¶ˆç­åµŒå¥—è°ƒç”¨ï¼›</li><li>åˆå¹¶å¤šä¸ªä»»åŠ¡çš„é”™è¯¯å¤„ç†ã€‚</li></ol><p>Promise æ˜¯å¦‚ä½•è§£å†³è¿™å›è°ƒåœ°ç‹±çš„è¿™ä¸¤ä¸ªé—®é¢˜çš„ï¼š</p><p><strong>é¦–å…ˆï¼ŒPromise å®ç°äº†å›è°ƒå‡½æ•°çš„å»¶æ—¶ç»‘å®šæŠ€æœ¯ã€‚</strong></p><ol><li><code>new Promise(...)</code> åœ¨åˆ›å»ºçš„åŒæ—¶ï¼Œä¼šç«‹å³æ‰§è¡Œï¼ˆåŒæ­¥è°ƒç”¨ï¼‰å‚æ•°ä¸­çš„ä»»åŠ¡ï¼Œç„¶åä¼šå¼‚æ­¥ç­‰å¾…ä¸€ä¸ªç»“æœã€‚äº§ç”Ÿçš„ç»“æœï¼ˆå®Œæˆ / å¤±è´¥ï¼‰ä¼šä¿å­˜åœ¨è¿”å›çš„ <code>Promise</code> ä¸­ã€‚</li><li>å½“æˆ‘ä»¬é€šè¿‡è°ƒç”¨ <code>.then(...)</code> å¤„ç†è¿™ä¸ªç»“æœæ—¶ï¼Œæ‰ä¼šåŠ¨æ€ç»‘å®šå›è°ƒå‡½æ•°ã€‚ç»‘å®šå¥½åï¼Œæ‰ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</li><li>ä¸ºäº†å®ç°å»¶æ—¶ç»‘å®šï¼ŒV8 å¼•æ“æŠŠè°ƒç”¨å›è°ƒå‡½æ•°æ”¹æˆäº†å¾®ä»»åŠ¡ã€‚è¿™æ ·æ—¢å¯ä»¥è®©å›è°ƒå‡½æ•°å»¶æ—¶è¢«è°ƒç”¨ï¼Œåˆæå‡äº†ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚</li></ol><p><strong>å…¶æ¬¡ï¼ŒPromise å®ç°äº†å°†å›è°ƒå‡½æ•°çš„è¿”å›å€¼ç©¿é€åˆ°æœ€å¤–å±‚</strong></p><p>æŠŠæ¯æ¬¡æ‰§è¡Œå›è°ƒå‡½æ•°åçš„å¤„ç†ç»“æœï¼Œç©¿é€åˆ°æœ€å¤–å±‚ï¼Œå°±èƒ½é¿å…å›è°ƒåœ°ç‹±çš„å±‚å±‚åµŒå¥—ç»“æ„ã€‚</p><p>ä¸‹é¢æ˜¯ Promise çš„è°ƒç”¨é€»è¾‘ï¼š</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">è¯·æ±‚</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">è¯·æ±‚2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">æˆåŠŸçš„å›è°ƒ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">è¯·æ±‚3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">æˆåŠŸçš„å›è°ƒ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">è¯·æ±‚4</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">3</span><span class="token plain">æˆåŠŸçš„å›è°ƒ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">è¯·æ±‚5</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">è¯·æ±‚ç»“æœ</span><span class="token number" style="color:#36acaa">4</span><span class="token plain">æˆåŠŸçš„å›è°ƒ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">å¤„ç†å¼‚å¸¸</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">å¼‚å¸¸ä¿¡æ¯</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// è‡ªå·±å®šä¹‰çš„ä¸€ä¸ªBromiseï¼Œä¼ é€’å‚æ•°ä¸ºä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡executor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Bromise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">executor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å›è°ƒå‡½æ•°åˆå§‹åŒ–æ—¶ä¸º null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> onResolve_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> onReject_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ¨¡æ‹Ÿå®ç° .thenã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ¨¡æ‹Ÿå®ç°è°ƒç”¨æ—¶ç»‘å®šã€‚åªæœ‰åœ¨è°ƒç”¨ then æ—¶ï¼Œæ‰ä¼šç»‘å®šæˆåŠŸå›è°ƒå‡½æ•°ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function-variable function" style="color:#d73a49">then</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">onResolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> onReject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        onResolve_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> onResolve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å»¶è¿Ÿå®šä¹‰ resolve å›è°ƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// åœ¨è°ƒç”¨åˆ° onResolve_ å‡½æ•°çš„æ—¶å€™ï¼ŒBromise.then è¿˜æ²¡æœ‰æ‰§è¡Œï¼Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ‰€ä»¥è¦åˆ©ç”¨ setTimoutå»¶è¿Ÿè°ƒç”¨ã€‚è€ŒV8 å¼•æ“æ˜¯é€šè¿‡å¾®ä»»åŠ¡æ¥å»¶è¿Ÿè°ƒç”¨çš„ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">onResolve_</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// åœ¨åˆ›å»ºBromiseçš„æ—¶å€™ï¼Œå°±ä¼šåŒæ­¥ç«‹å³æ‰§è¡Œä¼ é€’çš„executorä»»åŠ¡ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">executor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resolve</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ä½¿ç”¨ Bromise</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å®šä¹‰ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ executor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">executor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è¿™é‡Œæ˜¯ä»»åŠ¡å†…å®¹...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å®šä¹‰å¼‚æ­¥ä»»åŠ¡æˆåŠŸæ—¶çš„å›è°ƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onResolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> demo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Bromise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">executor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">onResolve</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="é—®é¢˜3promise-ä¸­ä¸ºä»€ä¹ˆè¦å»¶æ—¶ç»‘å®šå›è°ƒå‡½æ•°">é—®é¢˜3ï¼šPromise ä¸­ä¸ºä»€ä¹ˆè¦å»¶æ—¶ç»‘å®šå›è°ƒå‡½æ•°ï¼Ÿ<a class="hash-link" href="#é—®é¢˜3promise-ä¸­ä¸ºä»€ä¹ˆè¦å»¶æ—¶ç»‘å®šå›è°ƒå‡½æ•°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸ºäº†è§£å†³å›è°ƒåœ°ç‹±çš„å±‚å±‚åµŒå¥—é—®é¢˜ã€‚è§ä¸Šæ–‡ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="é—®é¢˜4promise-ä¸­ä¸ºä»€ä¹ˆè¦å¼•å…¥å¾®ä»»åŠ¡">é—®é¢˜4ï¼šPromise ä¸­ä¸ºä»€ä¹ˆè¦å¼•å…¥å¾®ä»»åŠ¡ï¼Ÿ<a class="hash-link" href="#é—®é¢˜4promise-ä¸­ä¸ºä»€ä¹ˆè¦å¼•å…¥å¾®ä»»åŠ¡" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>promise</code> é‡‡ç”¨ <code>.then</code> å»¶æ—¶ç»‘å®šå›è°ƒæœºåˆ¶ã€‚</p><p>è€Œ <code>new Promise</code> æ—¶ï¼Œåˆéœ€è¦ç›´æ¥æ‰§è¡Œ <code>promise</code> ä¸­çš„ä»»åŠ¡ï¼Œå¹¶æ‰§è¡Œç›¸åº”ç»“æœçš„å›è°ƒå‡½æ•°ã€‚å³å‘ç”Ÿäº†å…ˆæ‰§è¡Œæ–¹æ³•åæ·»åŠ å›è°ƒçš„ç°è±¡ã€‚</p><p>æ­¤æ—¶éœ€ç­‰å¾… <code>then</code> æ–¹æ³•ç»‘å®šä¸¤ä¸ªå›è°ƒåï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œæ–¹æ³•ä¸­çš„å›è°ƒå‡½æ•°ã€‚æŠŠæ‰§è¡Œå›è°ƒçš„æ—¶æœºæ·»åŠ åˆ°å½“å‰ä»»åŠ¡ä¹‹åï¼Œå¯ä»¥é‡‡ç”¨å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ä¸¤ç§æ–¹æ³•ã€‚ç”±äºå®ä»»åŠ¡æœ‰æ•ˆç‡é—®é¢˜ï¼Œåˆ™é‡‡ç”¨äº†å¾®ä»»åŠ¡ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/docs/tags/java-script">JavaScript</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/frontEnd/JavaScript/Proxy, Reflect"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">12. Proxy, Reflect</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/frontEnd/JavaScript/async:await, å¼‚æ­¥ç¼–ç¨‹"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">15. è¿­ä»£, å¼‚æ­¥ç¼–ç¨‹</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-åŸºç¡€" class="table-of-contents__link toc-highlight">1 åŸºç¡€</a><ul><li><a href="#11-å¼•å­" class="table-of-contents__link toc-highlight">1.1 å¼•å­</a></li><li><a href="#12-promise" class="table-of-contents__link toc-highlight">1.2 Promise</a></li><li><a href="#13-resolve-reject-å›è°ƒ" class="table-of-contents__link toc-highlight">1.3 resolve, reject å›è°ƒ</a><ul><li><a href="#131-resolve" class="table-of-contents__link toc-highlight">1.3.1 resolve</a></li><li><a href="#132-reject" class="table-of-contents__link toc-highlight">1.3.2 reject</a></li></ul></li><li><a href="#14-thenable-å¯¹è±¡" class="table-of-contents__link toc-highlight">1.4 thenable å¯¹è±¡</a></li><li><a href="#15-promise-æ–¹æ³•" class="table-of-contents__link toc-highlight">1.5 Promise æ–¹æ³•</a></li></ul></li><li><a href="#2-å¯¹è±¡æ–¹æ³•-3" class="table-of-contents__link toc-highlight">2 å¯¹è±¡æ–¹æ³• (3)</a><ul><li><a href="#21-then" class="table-of-contents__link toc-highlight">2.1 .then</a></li><li><a href="#12-catch" class="table-of-contents__link toc-highlight">1.2 .catch</a></li><li><a href="#23-finally" class="table-of-contents__link toc-highlight">2.3 .finally</a></li></ul></li><li><a href="#3-ç±»æ–¹æ³•-6" class="table-of-contents__link toc-highlight">3 ç±»æ–¹æ³• (6)</a><ul><li><a href="#31-promiseresolve" class="table-of-contents__link toc-highlight">3.1 Promise.resolve</a></li><li><a href="#32-promisereject" class="table-of-contents__link toc-highlight">3.2 Promise.reject</a></li><li><a href="#33-promiseall" class="table-of-contents__link toc-highlight">3.3 Promise.all</a></li><li><a href="#34-promiseallsettled" class="table-of-contents__link toc-highlight">3.4 Promise.allSettled</a></li><li><a href="#35-promiserace" class="table-of-contents__link toc-highlight">3.5 Promise.race</a></li><li><a href="#36-promiseany" class="table-of-contents__link toc-highlight">3.6 Promise.any</a></li></ul></li><li><a href="#4-é—®é¢˜" class="table-of-contents__link toc-highlight">4 é—®é¢˜</a><ul><li><a href="#é—®é¢˜2promise-è§£å†³çš„ç—›ç‚¹æ˜¯ä»€ä¹ˆ" class="table-of-contents__link toc-highlight">é—®é¢˜2ï¼šPromise è§£å†³çš„ç—›ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#é—®é¢˜3promise-ä¸­ä¸ºä»€ä¹ˆè¦å»¶æ—¶ç»‘å®šå›è°ƒå‡½æ•°" class="table-of-contents__link toc-highlight">é—®é¢˜3ï¼šPromise ä¸­ä¸ºä»€ä¹ˆè¦å»¶æ—¶ç»‘å®šå›è°ƒå‡½æ•°ï¼Ÿ</a></li><li><a href="#é—®é¢˜4promise-ä¸­ä¸ºä»€ä¹ˆè¦å¼•å…¥å¾®ä»»åŠ¡" class="table-of-contents__link toc-highlight">é—®é¢˜4ï¼šPromise ä¸­ä¸ºä»€ä¹ˆè¦å¼•å…¥å¾®ä»»åŠ¡ï¼Ÿ</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">åˆ†äº«</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/frontEnd/JavaScript">å‰ç«¯</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/code/algorithm">ç®—æ³•ç¬”è®°</a></li><li class="footer__item"><a class="footer__link-item" href="/project">æˆ‘çš„é¡¹ç›®</a></li></ul></div><div class="col footer__col"><div class="footer__title">ç¤¾äº¤åª’ä½“</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/about">å…³äºæˆ‘</a></li><li class="footer__item"><a href="https://github.com/moxyNJ" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://juejin.cn/user/2005151873514024" target="_blank" rel="noopener noreferrer" class="footer__link-item">æ˜é‡‘<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items"><li class="footer__item"><a href="https://www.ninjee.co" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ninjee çš„å‰ç«¯ç¯®å­</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p>Copyright Â© 2022 Ninjee Built with Docusaurus.</p><p><a href="http://beian.miit.gov.cn/">æ™‹ICPå¤‡2021017941å·-2</a></p></div></div></div></footer></div>
<script src="/assets/js/runtime~main.39264a03.js"></script>
<script src="/assets/js/main.d7c6ac8e.js"></script>
</body>
</html>
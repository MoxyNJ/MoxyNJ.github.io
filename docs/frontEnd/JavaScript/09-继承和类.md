---
title: 9. ç»§æ‰¿å’Œç±»
sidebar_position: 9
date: 2022-07-25
tags: [JavaScript]
---



## ç»§æ‰¿

ä¸‹é¢æ•´ç†å¸¸è§çš„ç»§æ‰¿æ–¹å¼ï¼š

1. ç»å…¸ç»§æ‰¿  / å€Ÿç”¨æ„é€ å‡½æ•°
2. ç»„åˆç»§æ‰¿
3. åŸå‹ç»§æ‰¿
4. å¯„ç”Ÿç»§æ‰¿
5. å¯„ç”Ÿç»„åˆç»§æ‰¿
6. æœ€ä½³å®è·µ



ç®€å•æ•´ç†ï¼š

```js
// 1 åŸå‹é“¾ç»§æ‰¿:å­ç±»åŸå‹ç»§æ‰¿çˆ¶ç±»å±æ€§
Son.prototype = new Father();
// 2 ç»å…¸ç»§æ‰¿ / å€Ÿç”¨æ„é€ å‡½æ•°:åœ¨Sonå†…ä¸ç”¨newç›´æ¥è°ƒç”¨Fatheræ„é€ å‡½æ•°
Function Son(name) {Father.call(this, arguments);}
// 1å’Œ2ä¼˜ç¼ºç‚¹æ˜¯äº’æ–¥çš„ï¼Œç”±æ­¤å¼•å‡ºæ–¹æ³•3ï¼š
// 	 ã€ŒåŸå‹é“¾ç»§æ‰¿ã€è§£å†³äº†çˆ¶ç±» **æ–¹æ³•å¤ç”¨** çš„é—®é¢˜ï¼Œå‡ºç°äº†çˆ¶ç±» **å±æ€§ä¸ç‹¬ç«‹** çš„é—®é¢˜ã€‚
// 	 ã€Œå€Ÿç”¨æ„é€ å‡½æ•°ã€è§£å†³çˆ¶ç±» **å±æ€§ç‹¬ç«‹** çš„é—®é¢˜ï¼Œå‡ºç°äº†çˆ¶ç±» **æ–¹æ³•æ— æ³•å¤ç”¨** çš„é—®é¢˜ã€‚

// 3 ç»„åˆç»§æ‰¿:è°ƒç”¨2æ¬¡ new Father() => Sonå†…éƒ¨è°ƒç”¨(ç»§æ‰¿å±æ€§), Son.prototypeç»‘å®šè°ƒç”¨(ç»§æ‰¿æ–¹æ³•)
function Son(name,age){ Father.call(this,name) }
Son.prototype = new Father()

// 4 åŸå‹å¼ç»§æ‰¿:è‡ªå®šä¹‰objetï¼Œçˆ¶ç±»å­ç±»æ‰€æœ‰æ–¹æ³•éƒ½å…±ç”¨
// ES5-
function object(obj) {
  function Son() {}
  Son.prototype = obj;
  return new Son() 
}
// ES5
Student.prototype = Object.create(Person.prototype)   // StudentåŸå‹è¢«é‡å®šä¹‰ï¼Œconstructoréœ€è¦é‡æ–°æŒ‡å‘ã€‚
// ES6
Object.setPrototypeOf(Son.prototype, Father.prototype)

// 5 å¯„ç”Ÿå¼ç»§æ‰¿ï¼šæ˜¯åŸå‹å¼çš„å‡çº§ç‰ˆï¼Œæœ‰object()çš„åŸºç¡€ä¸Šï¼Œåˆ©ç”¨ createSon()å®ç°Sonå¢æ·»æ–°å±æ€§å’Œæ–¹æ³•ã€‚
function createSon(original) {
    // let Son = Object.create(original); 
    let son = object(original);
    son.sayHi = function () {
        console.log('hi')
    }
    return son
}

// 4 å’Œ 5 éƒ½ä¸ä¼šç”Ÿæˆæ„é€ å‡½æ•°å’Œç±»çš„æ¦‚å¿µï¼Œè€Œæ˜¯ç›´æ¥æ„é€ äº†å®ä¾‹å¯¹è±¡ï¼š
let son1 = object(father);      // åŸå‹å¼
let son1 = createSon(father);   // å¯„ç”Ÿå¼

// 6 å¯„ç”Ÿç»„åˆå¼ï¼Œç»§æ‰¿çˆ¶ç±»æ–¹æ³•è°ƒç”¨inheritePrototypeç»‘å®šåŸå‹é“¾ï¼Œç»§æ‰¿çˆ¶ç±»æ–¹æ³•ç”¨new Father()è°ƒç”¨æ„é€ å‡½æ•°ã€‚
function inheritPrototype(Sub, Super) {
    let subPrototype = Object.create(Super.prototype)
    subPrototype.constructor = Sub
    Sub.prototype = subPrototype
}
```



### å¼•å­1ï¼šnew è¿ç®—ç¬¦

new ä¸€ä¸ªæ–°å¯¹è±¡çš„è¿‡ç¨‹ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

```js
let person1 = new Person("Moxy", 15);
```

è¦åˆ›å»º Person çš„æ–°å®ä¾‹ï¼Œå¿…é¡»ä½¿ç”¨ new æ“ä½œç¬¦ã€‚ä»¥è¿™ç§æ–¹å¼è°ƒç”¨æ„é€ å‡½æ•°å®é™…ä¸Šä¼šç»å†ä»¥ä¸‹ 5 ä¸ªæ­¥éª¤ï¼š

1. åˆ›å»ºä¸€ä¸ª **æ–°å¯¹è±¡** `{}`ï¼›
2. ä¸ºæ–°å¯¹è±¡ç»‘å®š **åŸå‹é“¾**ï¼š`{}.__proto__ = Person.prototype`ï¼›
3. å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸ **`this`** èµ‹ç»™æ–°å¯¹è±¡ `{}`ï¼›
4. æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼Œä¸º `{}` æ·»åŠ å±æ€§ï¼š`Person.call(this)`ï¼›
5. å¦‚æœæ„é€ å‡½æ•°æœ€ç»ˆä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå°±è¿”å› **æ„é€ å‡½æ•°ä¸­çš„å¯¹è±¡**ã€‚
6. å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œå°±ä¼šè¿”å› **æ–°å¯¹è±¡**ã€‚

æœ€ç»ˆï¼Œä»£ç ä¸­å·¦ä¾§çš„ `person1` å˜é‡æ¥æ”¶åˆ°äº†æ–°åˆ›å»ºçš„é‚£ä¸ªå¯¹è±¡ã€‚



### å¼•å­2ï¼šåˆ†æè§’åº¦

ä¸åŒç»§æ‰¿æ–¹æ³•çš„åŒºåˆ«ï¼Œä¸»è¦ä»ä»¥ä¸‹å‡ ä¸ªè§’åº¦åˆ†æï¼š

1. ç»§æ‰¿çš„ç±»å‹ä¸»è¦æœ‰ 3 ç§ï¼šåŸºæœ¬æ•°æ®ç±»å‹ã€å¼•ç”¨æ•°æ®ç±»å‹ã€æ–¹æ³•ï¼›
2. å®ç°ç»§æ‰¿çš„æ–¹å¼ä¸»è¦æœ‰ 3 ç§ï¼šåŸå‹é“¾å¼ã€æ„é€ å‡½æ•°å¼ã€åŸå‹å¼ã€‚
   é€šè¿‡è¿™ 3 ç§çš„ç›¸äº’å€Ÿé‰´ / å¼•ç”³ ï¼Œè¡ç”Ÿäº†ï¼š
   - ç»„åˆå¼ï¼ˆåŸå‹é“¾ + æ„é€ å‡½æ•°ï¼‰ï¼›
   - å¯„ç”Ÿå¼ï¼ˆåŸå‹å¼è¡ç”Ÿï¼‰ï¼›
   - å¯„ç”Ÿç»„åˆå¼ï¼ˆå¯„ç”Ÿ + åŸå‹é“¾ + æ„é€ å‡½æ•°ï¼‰ã€‚
3. ç»§æ‰¿æ–¹æ³•çš„è®°å¿†é¡ºåºï¼šåŸå‹é“¾ã€æ„é€ å‡½æ•°ã€åŸå‹ã€ç»„åˆã€å¯„ç”Ÿã€å¯„ç”Ÿç»„åˆã€‚ä¸€å…±æœ‰ 6 ç§ã€‚



ä¸‹é¢ä»‹ç»çš„å„ç§ç»§æ‰¿å½¢å¼çš„æ•´ä½“æ¨¡å‹ï¼Œå­ç±» Son å»ç»§æ‰¿çˆ¶ç±» Fatherï¼š

çˆ¶ç±» `Father`ï¼š

- åŸºæœ¬å±æ€§ï¼š`name`
- å¼•ç”¨å±æ€§ï¼š`color`
- æ–¹æ³•ï¼š`sayName()`

å­ç±» `Son`ï¼š

- åŸºæœ¬å±æ€§ï¼š`age`
- æ–¹æ³•ï¼š`sayAge()`

äº‹å®ä¸Šï¼Œæ²¡æœ‰å¿…è¦å»åŒºåˆ†å¼•ç”¨å±æ€§å’ŒåŸºæœ¬å±æ€§ã€‚å¼•ç”¨å±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¿å­˜çš„æ˜¯ä¸€ä¸ªåœ°å€å€¼ï¼Œè¿™ä¸€ç‚¹å’Œç±»ä¸­çš„æ–¹æ³•ä¸€æ ·ã€‚ä¸æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œé€šå¸¸å¼•ç”¨å±æ€§ï¼ˆæ¯”å¦‚æ•°ç»„ï¼‰æ˜¯å®ä¾‹å±æ€§ï¼Œè¦åœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™åˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ç‹¬æœ‰çš„å±æ€§ï¼›è€Œæ–¹æ³•åˆ™æ˜¯è¦é€šè¿‡åŸå‹é“¾å…±äº«ï¼Œä¸ä¼šåœ¨å®ä¾‹åŒ–å¯¹è±¡ä¸­é‡æ–°å†åˆ›å»ºä¸€éã€‚



### å¼•å­3ï¼šå…¶ä»–æ¦‚å¿µ

#### 1. å¤šæ€

> Javaç­‰è¯­è¨€ä¸­çš„å¤šæ€ï¼š
>
> ä¸åŒçš„æ•°æ®ç±»å‹ï¼ˆè¾“å…¥ï¼‰ï¼Œè¿›è¡ŒåŒä¸€ä¸ªæ“ä½œï¼ˆæ–¹æ³•ï¼‰ï¼Œä¼šäº§ç”Ÿä¸åŒçš„è¡Œä¸ºï¼ˆè¾“å‡ºï¼‰ï¼Œå°±æ˜¯å¤šæ€ã€‚
>
> JavaScript çš„å¤šæ€ï¼š
>
> Js ä¸­å¹¶ä¸èƒ½å®Œå…¨å®ç°å¤šæ€ï¼Œ
>
> çˆ¶ç±»çš„é€šç”¨è¡Œä¸ºï¼Œå¯ä»¥è¢«å­ç±»ç”¨æ›´ç‰¹æ®Šçš„è¡Œä¸ºé‡å†™ï¼Œè¿™å°±æ˜¯å¤šæ€ã€‚
>
> å®é™…ä¸Šï¼Œç›¸å¯¹å¤šæ€æ€§å…è®¸æˆ‘ä»¬ä»é‡å†™è¡Œä¸ºä¸­å¼•ç”¨åŸºç¡€è¡Œä¸ºã€‚

æ‰€ä»¥ï¼Œå½“å­ç±»ä½¿ç”¨å’Œçˆ¶ç±»ç›¸åŒçš„åç§°å‘½åä¸€ä¸ªæ–°æ–¹æ³•æ—¶ï¼Œå°±å‘ç”Ÿäº†å¤šæ€ã€‚

- æ¯”å¦‚çˆ¶ç±»æœ‰ä¸€ä¸ªæ–¹æ³•ï¼š`Person.prototype.callName()`ï¼Œå­ç±»æ‹¥æœ‰ä¸€ä¸ªç›¸åŒçš„æ–¹æ³•ï¼š`Student.prototype.callName()`ï¼Œå°±ä¼šå‘ç”Ÿè¦†ç›–ï¼Œè¿™å°±æ˜¯å¤šæ€ã€‚

```js
// js ä¸éœ€è¦ç»§æ‰¿ï¼Œä¹Ÿèƒ½æœ‰å¤šæ€çš„ä½“ç°
function sum(m, n) {
  return m + n;
}

// ä¼ å…¥ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œå¾—å‡ºçš„ç»“æœä¹Ÿä¸ç›¸åŒï¼Œè¿™ä¹Ÿæ˜¯å¤šæ€çš„ä½“ç°ã€‚
sum(20, 30);
sum('ninjee', 'moxy');
```



é™„ï¼šä¼ ç»Ÿé¢å‘å¯¹è±¡è¯­è¨€å¯¹å¤šæ€çš„ 3 ä¸ªå‰æï¼š

1. å¿…é¡»æœ‰ç»§æ‰¿ï¼ˆå¤šæ€çš„å‰æï¼‰
2. å¿…é¡»æœ‰é‡å†™ï¼ˆå­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼‰
3. å¿…é¡»æœ‰çˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»çš„å¯¹è±¡



#### 2. æ„é€ å‡½æ•°

ç±»çš„å®ä¾‹åŒ–æ˜¯é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„ **æ–¹æ³•** æ„é€ çš„ï¼Œè¿™ä¸ªæ–¹æ³•çš„åç§°é€šå¸¸å’Œç±»åç›¸åŒï¼Œè¢«ç§°ä¸º **æ„é€ å‡½æ•°**ã€‚

æ„é€ å‡½æ•°çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯åˆå§‹åŒ–å®ä¾‹éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯å’ŒçŠ¶æ€ã€‚

#### 3. ç»§æ‰¿

å®šä¹‰å¥½ä¸€ä¸ªå­ç±»ä¹‹åï¼Œç›¸å¯¹äºçˆ¶ç±»æ¥è¯´å®ƒå°±æ˜¯ä¸€ä¸ªç‹¬ç«‹å¹¶ä¸”å®Œå…¨ä¸åŒçš„ç±»ã€‚

å­ç±»ä¼šåŒ…å«çˆ¶ç±»è¡Œä¸ºçš„åŸå§‹å‰¯æœ¬ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥é‡å†™æ‰€æœ‰ç»§æ‰¿çš„è¡Œä¸ºç”šè‡³å®šä¹‰æ–°çš„è¡Œä¸ºã€‚

#### 4. æ··å…¥ mixin

å®šä¹‰ï¼šæŠŠå¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„éƒ¨åˆ†æ–¹æ³•å’Œå±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ä¸­ï¼Œè¾¾åˆ°å¢å¼ºç›®æ ‡å¯¹è±¡åŠŸèƒ½çš„æ•ˆæœã€‚

æœ€å…¸å‹çš„æ··å…¥ï¼Œå°±æ˜¯ `Object.assign(targetObj, ...sourcesObj)` æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¼šå°† source å¯¹è±¡é‡Œé¢çš„**å¯æšä¸¾å±æ€§**å¤åˆ¶åˆ°`targetObj`ã€‚å¦‚æœå’Œ target å¯¹è±¡å·²æœ‰å±æ€§é‡åï¼Œåˆ™ä¼šè¦†ç›–ã€‚åŒæ—¶åç»­çš„ sourceå¯¹è±¡ ä¼šè¦†ç›–å‰é¢çš„ source å¯¹è±¡çš„åŒåå±æ€§ã€‚



### å¼•å­4ï¼šåŸå‹å¯¹è±¡

ç±»ä¸­åŸå‹å¯¹è±¡ä¸»è¦æœ‰ 3 ä¸ªä½œç”¨ï¼š

- é€šè¿‡åŸå‹å¯¹è±¡çš„ `.constructor`ï¼Œè®©å®ä¾‹åŒ–å¯¹è±¡æ‰¾åˆ°æ„é€ å®ƒçš„å‡½æ•°ï¼›
- å®ä¾‹å¯¹è±¡å…¬ç”¨çš„æ–¹æ³•ï¼Œä¼šç»‘å®šåœ¨å®ƒçš„åŸå‹å¯¹è±¡ä¸Šã€‚
- é€šè¿‡åŸå‹å¯¹è±¡ï¼Œå½¢æˆä¸€æ¡æœ€ç»ˆé€šå‘ `Object.prototype` çš„å®Œæ•´åŸå‹é“¾ï¼Œå®ç°å…¶ä»–æ–¹æ³•çš„ç»§æ‰¿ã€‚



## 1 åŸå‹é“¾ç»§æ‰¿

åŸºæœ¬æ€æƒ³ï¼šç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œå…¨éƒ¨ä¾èµ–åŸå‹é“¾å®ç°ã€‚

æ ¸å¿ƒä»£ç ï¼š`Son.prototype = new Father();` 

1. å¾—åˆ°çˆ¶ç±»çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œ
2. æŠŠå­ç±»åŸå‹å¯¹è±¡ä¿®æ”¹ä¸ºç¬¬ä¸€æ­¥å¾—åˆ°çš„å®ä¾‹åŒ–å¯¹è±¡ã€‚

Sonçš„åŸå‹å¯¹è±¡ `Son.prototype` ä¸å†æ˜¯åŸé…ï¼Œè€Œå˜æˆ Fatherçš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œæ‰€ä»¥æ­¤æ—¶ Son åŸå‹å¯¹è±¡çš„æ„é€ å‡½æ•°å±æ€§`Son.prototype.constructor`  ä¸¢å¤±ï¼Œéœ€è¦é‡æ–°ç»‘å®šã€‚

![æˆªå±2022-07-26 15.57.02](images/09-%E7%BB%A7%E6%89%BF%E5%92%8C%E7%B1%BB.assets/%E6%88%AA%E5%B1%8F2022-07-26%2015.57.02.png)

ä¼˜ç‚¹ï¼š

- **æ–¹æ³•å¤ç”¨**ï¼Œçˆ¶ç±»çš„æ–¹æ³•ç»‘å®šåœ¨åŸå‹é“¾ä¸Šï¼Œå¯ä»¥è¢«æ­£ç¡®çš„å¤ç”¨ã€‚

ç¼ºç‚¹ï¼š

- **å±æ€§ä¸ç‹¬ç«‹**ï¼ŒåŸå‹é“¾ç»§æ‰¿ï¼Œçˆ¶ç±»çš„å±æ€§æ— æ³•å®ä¾‹åŒ–åˆ°å¯¹è±¡ä¸Šï¼Œè€Œæ˜¯å’Œæ–¹æ³•ä¸€æ ·è¢«å¤ç”¨ã€å…±ç”¨ã€‚
  1. **ä¸å¯åˆå§‹åŒ–**ã€‚å­ç±»å®ä¾‹å¯¹è±¡æ— æ³•å¯¹ç»§æ‰¿çš„çˆ¶ç±»å±æ€§è¿›è¡Œåˆå§‹åŒ–ï¼Œåªèƒ½åˆå§‹åŒ–å­ç±»çš„å±æ€§ã€‚
  2. **å†…å®¹ä¿®æ”¹**ã€‚å­ç±»å®ä¾‹å¯¹è±¡ï¼ˆinstance1 å’Œ instance2ï¼‰ä¼šæŒ‡å‘åŒä¸€ä¸ªå¼•ç”¨å±æ€§ï¼ˆå¦‚ arrayï¼‰ï¼Œè¿™å¯¼è‡´å¦‚æœå…¶ä¸­ä¸€ä¸ªå®ä¾‹å¯¹è±¡å¯¹å¼•ç”¨å±æ€§çš„ **å†…å®¹** è¿›è¡Œä¿®æ”¹ `instance1.color.push('pink')`ï¼Œinstance2 çš„ color ä¹Ÿä¼šè·Ÿç€æ”¹å˜ã€‚
  3. **æ˜¾å¼æ‰“å°**ã€‚ç»§æ‰¿çš„çˆ¶ç±»å±æ€§ï¼Œæ— æ³•æ˜¾å¼é€šè¿‡ `console.log(instance1)` æ‰“å°å‡ºæ¥ã€‚
- å­ç±»åŸå‹å¯¹è±¡çš„æ„é€ å‡½æ•°å±æ€§ä¸¢å¤±ï¼Œéœ€è¦é‡æ–°ç»‘å®š `.constructor`ã€‚

```js
// çˆ¶ç±»æ„é€ å‡½æ•°ã€çˆ¶ç±»å±æ€§
function Father() {
    this.name = "Moxy";
    this.color = ['red', 'yellow', 'black'];
}
// çˆ¶ç±»åŸå‹ã€çˆ¶ç±»æ–¹æ³•
Father.prototype.sayName = function () {
    console.log(this.name);
};	

// å­ç±»æ„é€ å‡½æ•°ã€å­ç±»å±æ€§
function Son(age) {
    this.age = age;
};
// å­ç±»åŸå‹ã€ç»§æ‰¿çˆ¶ç±»å±æ€§
Son.prototype = new Father();
// å­ç±»æ–¹æ³•
Son.prototype.sonFunc = function() {
	console.log("Son Function");
}

// å®ä¾‹åŒ–æµ‹è¯•ï¼š 
let instance1 = new Son("12");
let instance2 = new Son("18");
console.log(instance1.__proto__.color === instance2.__proto__.color) 
											// trueï¼Œçˆ¶ç±»å±æ€§è¢«å­ç±»å®ä¾‹åŒ–å¯¹è±¡å…¬ç”¨
instance1.sayName(); 	// Moxyï¼Œæ–¹æ³•æˆåŠŸç»§æ‰¿


// å…³äºå…¬ç”¨å±æ€§æµ‹è¯•ï¼š
instance1.color.push('pink');   // 4
instance2.color;      // ['red', 'yellow', 'black', 'pink'] å¯¹å¼•ç”¨å±æ€§çš„æ“ä½œï¼Œä¸ä¼šå‘ç”Ÿèµ‹å€¼å±è”½

instance1.name = "ninjee"   // 'ninjee' å¯¹åŸå‹é“¾ä¸Šçš„å±æ€§ name èµ‹å€¼å±è”½ï¼Œ
instance2.name;       // 'Moxy' è€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸå‹é“¾çš„åŸå±æ€§å€¼

instance1.color = "hello world";  //'hello world' è¿™é‡Œå‘ç”Ÿäº†èµ‹å€¼å±è”½ã€‚
instance2.color;   // ['red', 'yellow', 'black', 'pink']
```



## 2 ç»å…¸ç»§æ‰¿ / å€Ÿç”¨æ„é€ å‡½æ•°

åŸºæœ¬æ€æƒ³ï¼šåœ¨å­ç±»çš„æ„é€ å‡½æ•°å†…ï¼Œè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä»è€Œå¼•å…¥çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚

æ€»ä½“è¯„ä»·ï¼šæ€»ä½“æ¥è¯´ï¼Œç»å…¸ç»§æ‰¿å’ŒåŸå‹é“¾ç»§æ‰¿çš„ä¼˜ç¼ºç‚¹æ˜¯ç›¸åçš„ã€‚ç»å…¸ç»§æ‰¿è§£å†³äº†åŸå‹é“¾ç»§æ‰¿çš„ç¼ºç‚¹ï¼ŒåŸå‹é“¾ç»§æ‰¿è§£å†³äº†ç»å…¸ç»§æ‰¿çš„ç¼ºç‚¹ã€‚åŒæ—¶ï¼Œçˆ¶ç±»çš„æ‰€æœ‰å±æ€§ï¼ˆæ–¹æ³•ï¼‰ï¼Œå…¨éƒ¨é‡æ–°åˆ›å»ºåˆ°äº†å­ç±»ä¸­ã€‚

![æˆªå±2022-07-26 15.57.22](images/09-%E7%BB%A7%E6%89%BF%E5%92%8C%E7%B1%BB.assets/%E6%88%AA%E5%B1%8F2022-07-26%2015.57.22.png)

ä¼˜ç‚¹ï¼š

- **å±æ€§ç‹¬ç«‹**ï¼ŒåŸå‹é“¾ä¸­å¼•ç”¨ç±»å‹å€¼ç‹¬ç«‹ï¼Œä¸è¢«æ‰€æœ‰å®ä¾‹å…±äº«;
- **å¯ä¼ é€’å‚æ•°**ï¼Œå­ç±»å‹åˆ›å»ºæ—¶ä¹Ÿèƒ½å¤Ÿå‘çˆ¶ç±»å‹ä¼ é€’å‚æ•°ï¼Œç”¨äºä¸åŒå®ä¾‹å±æ€§å€¼çš„åˆå§‹åŒ–ã€‚

Ã¥ç¼ºç‚¹ï¼š

- **æ–¹æ³•æ— æ³•å¤ç”¨ã€‚**
  - è¦ç»§æ‰¿çš„æ–¹æ³•å¿…é¡»åœ¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°åï¼Œå®ä¾‹åŒ–å¯¹è±¡å†…éƒ¨ä¹Ÿåˆ›å»ºäº†å¯¹åº”çš„æ–¹æ³•ï¼Œæ²¡æœ‰å¤ç”¨å‡½æ•°ã€‚
  - çˆ¶ç±»å®šä¹‰çš„æ–¹æ³•ï¼ˆä¸åœ¨æ„é€ å‡½æ•°å†…éƒ¨çš„ï¼‰ï¼Œå¯¹å­ç±»ä¸å¯è§ï¼Œå› ä¸ºæ­¤å¤„ **æ²¡æœ‰æ¶‰åŠåˆ°åŸå‹é“¾**ã€‚

```js
function Father(name){
  this.name = name;
	this.colors = ["red","blue","green"];
}
function Son(name){
	Father.call(this, arguments);  //ç»§æ‰¿äº†Father,ä¸”å‘çˆ¶ç±»å‹ä¼ é€’å‚æ•°
}

// å®ä¾‹åŒ–æµ‹è¯•ï¼š
let instance1 = new Son("Moxy");
let instance2 = new Son("Ninjee");

instance1.colors.push("black");
console.log(instance1.colors);  //"red,blue,green,black"
console.log(instance2.colors);  //"red,blue,green" å¼•ç”¨ç±»å‹å€¼æ˜¯ç‹¬ç«‹çš„
```

### å°æ€»ç»“ï¼š

åŸå‹é“¾ç»§æ‰¿å’Œå€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿ï¼Œå®Œå…¨åˆ°äº†ä¸¤ç§ä¸åŒçš„æ€è·¯ï¼Œä¼˜ç¼ºç‚¹å‡ ä¹å¯ä»¥è®¤ä¸ºæ˜¯äº’æ–¥çš„ï¼š

åŸå‹é“¾ç»§æ‰¿è§£å†³äº†çˆ¶ç±» **æ–¹æ³•å¤ç”¨** çš„é—®é¢˜ï¼Œå‡ºç°äº†çˆ¶ç±» **å±æ€§ä¸ç‹¬ç«‹** çš„é—®é¢˜ã€‚

å€Ÿç”¨æ„é€ å‡½æ•°è§£å†³äº†çˆ¶ç±» **å±æ€§ç‹¬ç«‹** çš„é—®é¢˜å‡ºç°äº†çˆ¶ç±» **æ–¹æ³•æ— æ³•å¤ç”¨** çš„é—®é¢˜ã€‚

- å°¤å…¶æ³¨æ„ï¼šå¼•ç”¨æ•°æ®ç±»å‹çš„å¤ç”¨é—®é¢˜ã€‚



æ ¸å¿ƒï¼šæ„é€ å‡½æ•°å†…éƒ¨ï¼Œåªé€‚ç”¨äºå­˜æ”¾æœªæ¥ä¼šå®ä¾‹åŒ–çš„å±æ€§ï¼›åŸå‹é“¾ï¼Œåªé€‚ç”¨äºç»‘å®šå¤ç”¨çš„æ–¹æ³•ã€‚



## 3 ç»„åˆç»§æ‰¿

æ€»ä½“è¯„ä»·ï¼šåŸå‹é“¾ + ç»å…¸ç»§æ‰¿ã€‚JavaScript ä¸­ **æœ€å¸¸ç”¨** çš„ç»§æ‰¿æ¨¡å¼ã€‚

åŸºæœ¬æ€æƒ³ï¼š

1. åˆ©ç”¨æ„é€ å‡½æ•°ï¼šå­ç±»å€Ÿç”¨æ„é€ å‡½æ•°ï¼Œæ¥å®ç°å¯¹çˆ¶ç±»å±æ€§çš„ç»§æ‰¿ã€‚

   `Father.call(this,name); `

2. åˆ©ç”¨åŸå‹é“¾ï¼šå­ç±»åŸå‹æŒ‡å‘å®ä¾‹åŒ–çš„çˆ¶ç±»ï¼Œæ¥å®ç°å¯¹çˆ¶ç±»æ–¹æ³•çš„ç»§æ‰¿ã€‚
   `Son.prototype = new Father();`

![æˆªå±2022-07-26 15.57.38](images/09-%E7%BB%A7%E6%89%BF%E5%92%8C%E7%B1%BB.assets/%E6%88%AA%E5%B1%8F2022-07-26%2015.57.38.png)

ä¼˜ç‚¹

é¿å…äº†åŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°çš„å„è‡ªçš„ç¼ºé™·ï¼Œèåˆäº†å®ƒä»¬çš„ä¼˜ç‚¹ã€‚

1. åŸå‹é“¾ä¼˜ç‚¹ï¼šçˆ¶ç±»çš„æ–¹æ³•å¾—åˆ°äº†å¤ç”¨ï¼›

2. æ„é€ å‡½æ•°ä¼˜ç‚¹ï¼šçˆ¶ç±»å±æ€§éƒ½å¯ä»¥é‡å®šä¹‰åœ¨å®ä¾‹åŒ–å¯¹è±¡ä¸­ã€‚

3. æ­¤å¤–ï¼Œ`instanceof` å’Œ `isPrototypeOf( )` å¯æ­£ç¡®ä½¿ç”¨ï¼Œè¡¨æ˜å®ä¾‹åŒ–å¯¹è±¡çš„ç±»å‹ã€‚

ç¼ºç‚¹ï¼š

**é¢å¤–çš„å¼€é”€**ã€‚åœ¨å®šä¹‰å­ç±»ç»§æ‰¿çˆ¶ç±»æ–¹æ³•çš„æ—¶å€™ï¼Œç›´æ¥è°ƒç”¨ `Son.prototype = new Father()` è¿™é€ æˆäº†ä¸¤ä¸ªåæœï¼š

1. é¢å¤–è°ƒç”¨äº† 1 æ¬¡ `Father()`ï¼Œé€ æˆäº†é¢å¤–çš„å¼€é”€ã€‚å¦‚æœæœ‰å®ä¾‹åŒ– n ä¸ªå¯¹è±¡ï¼Œä¸€å…±è°ƒç”¨äº† 1 + n æ¬¡ã€‚
2. `new Father()` é™„å¸¦äº†çˆ¶ç±»æ„é€ å‡½æ•°çš„å±æ€§ï¼Œè¿™äº›å±æ€§ä¹Ÿç»‘å®šåœ¨äº† `Son.prototype` å­ç±»åŸå‹ä¸Šï¼Œå¤šäº†é¢å¤–æ— ç”¨çš„å˜é‡ã€‚
3. Son çš„æ–°åŸå‹å¯¹è±¡ï¼ˆFather å®ä¾‹å¯¹è±¡ï¼‰ï¼Œéœ€è¦é‡æ–°æŒ‡å‘`.constructor`ã€‚

```js
// çˆ¶ç±»æ„é€ å‡½æ•°ã€çˆ¶ç±»å±æ€§
function Father(name){
	this.name = name;
	this.colors = ["red","blue","green"];
}
// çˆ¶ç±»åŸå‹ã€çˆ¶ç±»æ–¹æ³•
Father.prototype.sayName = function(){
	console.log(this.name);
};

// å­ç±»æ„é€ å‡½æ•°ã€å­ç±»å±æ€§ã€ç»§æ‰¿çˆ¶ç±»å±æ€§
function Son(name,age){
	Father.call(this,name);   //ç»§æ‰¿çˆ¶ç±»å±æ€§ã€‚å®ä¾‹åŒ–1æ¬¡ï¼Œå°±è°ƒç”¨1æ¬¡Father()
	this.age = age;
}
// å­ç±»åŸå‹ã€ç»§æ‰¿çˆ¶ç±»æ–¹æ³•
Son.prototype = new Father(); //åªåœ¨å®šä¹‰å­ç±»æ—¶ï¼Œè°ƒç”¨1æ¬¡Father()
Son.prototype.sayAge = function(){
	console.log(this.age);
}


// å®ä¾‹åŒ–æµ‹è¯•ï¼š
let instance1 = new Son("Moxy",16);
let instance2 = new Son("Ninjee",26);
instance1.colors.push("black");

instance1  // SonÂ {name: "Moxy", colors: Array(4), age: 16}
instance2  // SonÂ {name: "Ninjee", colors: Array(3), age: 26}
```



## 4 åŸå‹å¼ç»§æ‰¿

åœºæ™¯ï¼šå½“ä½ æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œæƒ³åœ¨å®ƒçš„åŸºç¡€ä¸Šå†åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç„¶åå†å¯¹æ–°å¯¹è±¡è¿›è¡Œé€‚å½“çš„ä¿®æ”¹ï¼Œä½¿ç”¨æ­¤æ–¹å¼ç»§æ‰¿ã€‚

åŸºæœ¬æ€æƒ³ï¼šåˆ©ç”¨ä¸€ä¸ªè‡ªå®šä¹‰çš„ `object()` æ–¹æ³•ï¼Œå°†æ—§å¯¹è±¡ï¼ˆçˆ¶å¯¹è±¡ï¼‰ç»‘å®šåˆ°å®ä¾‹åŒ–å¯¹è±¡ï¼ˆå­å¯¹è±¡ï¼‰ä¸­ã€‚è¿™é‡Œæ²¡æœ‰äº†çˆ¶ç±»å’Œå­ç±»çš„æ¦‚å¿µï¼Œè€Œæ˜¯åªæœ‰çˆ¶å¯¹è±¡å’Œå­å¯¹è±¡ã€‚



#### å½¢å¼ä¸€ï¼šè‡ªå®šä¹‰ `object()`ï¼›

1. åˆ›å»ºä¸€ä¸ªç©ºçš„å­ç±»æ„é€ å‡½æ•° `Son`ï¼›
2. æŠŠè¦å®šä¹‰çš„çˆ¶ç±»å¯¹è±¡å’Œæ–¹æ³•ï¼Œç»‘å®šåœ¨å­ç±»åŸå‹çš„åŸå‹é“¾ä¸Šã€‚
3. è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œå®ä¾‹åŒ–å¯¹è±¡ã€‚
4. è¿”å›å®ä¾‹åŒ–çš„å¯¹è±¡ã€‚

![æˆªå±2022-07-26 15.58.12](images/09-%E7%BB%A7%E6%89%BF%E5%92%8C%E7%B1%BB.assets/%E6%88%AA%E5%B1%8F2022-07-26%2015.58.12.png)

ä¼˜ç‚¹ï¼š

1. å¼±åŒ–äº†å­ç±»å’Œçˆ¶ç±»çš„æ¦‚å¿µï¼Œåªæ˜¯æŠŠ"å­ç±»"çš„æ„é€ å‡½æ•°å½“ä½œä¸€ä¸ªå£³å­ï¼Œç”¨äºæŠŠåŸæœ‰å¯¹è±¡ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ä¸Šï¼Œç›¸å½“äºï¼š`son1.__proto__` æŒ‡å‘ `father`ã€‚
2. å³ä½¿ä¸è‡ªå®šä¹‰ç±»å‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŸå‹å®ç°å¯¹è±¡ä¹‹é—´çš„å±æ€§ã€æ–¹æ³•å…±äº«ï¼Œå°±åƒä½¿ç”¨åŸå‹æ¨¡å¼ä¸€æ ·ã€‚
3. æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œæƒ³åœ¨å®ƒçš„åŸºç¡€ä¸Šå†åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚åˆ™åˆ©ç”¨ `object()` ä¾¿å¯ä»¥å®ç°ã€‚

ç¼ºç‚¹ï¼š

1. **å±æ€§å’Œæ–¹æ³•å…¨éƒ¨å…±ç”¨**ã€‚è¿™å…¶å®ç›¸å½“äºæŠŠåŸæœ‰å¯¹è±¡ï¼ˆä»£ç ä¸­çš„ `father`ï¼‰çš„å…¨éƒ¨å±æ€§å’Œæ–¹æ³•ï¼Œå…¨ç»‘å®šåˆ°å®ä¾‹åŒ–å¯¹è±¡çš„ **åŸå‹é“¾** ä¸Šã€‚è¿™å¯¼è‡´æ‰€æœ‰å®ä¾‹åŒ–å¯¹è±¡ï¼ˆ`son1`, `son2`ï¼‰éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œè€Œä¸”å±æ€§å’Œæ–¹æ³•å…¨éƒ¨å…±ç”¨ã€‚
2. çˆ¶å¯¹è±¡çš„æ–¹æ³•ã€å±æ€§åŸå°ä¸åŠ¨çš„ç…§æ¬ã€‚æ— æ³•åœ¨å®ä¾‹åŒ–å­å¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œåˆ›å»ºæ–°çš„å±æ€§å’Œæ–¹æ³•ï¼ˆ`object` ä¸­ï¼Œå­å¯¹è±¡çš„æ„é€ å‡½æ•°æ˜¯ç©ºçš„ï¼‰ã€‚

```js
// å½¢å¼ä¸€ï¼šè‡ªå®šä¹‰object()
function object(obj) {
    function Son() {}
    Son.prototype = obj;
    return new Son();
}

// or ES6
function object2(obj) {
		const son = {};	
  	Object.setPrototypeOf(son, obj);
  	return son;
}

// or ES5
// Object.create(obj) å°±æ˜¯è§„èŒƒåŒ–äº†çš„ object å‡½æ•°ï¼Œç›´æ¥ä½¿ç”¨

// å®šä¹‰çˆ¶å¯¹è±¡ï¼ˆæ— æ„é€ å‡½æ•°ã€æ— åŸå‹é“¾ï¼‰
const father = {
    name: "Moxy",
    colors: ["red", "blue", "green"],
    sayName: function () {
        console.log(this.name)
    }
};

// å®ä¾‹åŒ–æµ‹è¯•ï¼š
const son1 = object(father);
const son2 = object(father);
son1.colors.push("black");
son2.colors.push("pink");
console.log(father.colors); //(5)Â ["red", "blue", "green", "black", "pink"]
```



#### å½¢å¼äºŒï¼šES5 çš„æ–¹æ³• `object.create()`

åœ¨ ECMAScript5 ä¸­,é€šè¿‡æ–°å¢ `object.create()` æ–¹æ³•è§„èŒƒåŒ–äº†ä¸Šé¢çš„åŸå‹å¼ç»§æ‰¿ï¼Œåœ¨å®ç°åŸç†ä¸Šæ˜¯ä¸€æ‘¸ä¸€æ ·çš„ã€‚



`object.create()` ä¼šè¿”å›ä¸€ä¸ªç»‘å®šå¥½åŸå‹é“¾çš„æ–°å¯¹è±¡ï¼Œå¯ä»¥æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š

1. ä¸€ä¸ªå¯¹è±¡ï¼šæ–°å¯¹è±¡åŸå‹é“¾æŒ‡å‘çš„å¯¹è±¡ï¼›

2. ä¸€ä¸ªå¯¹è±¡ï¼ˆå¯é€‰ï¼‰ï¼šä¸ºæ–°å¯¹è±¡å®šä¹‰é¢å¤–å±æ€§ã€‚


- ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¸ `Object.defineProperties()` æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ ¼å¼ç›¸åŒ: 
  1. æ¯ä¸ªå±æ€§éƒ½æ˜¯é€šè¿‡è‡ªå·±çš„æè¿°ç¬¦å®šä¹‰çš„ï¼›
  2. ä»¥è¿™ç§æ–¹å¼æŒ‡å®šçš„ **ä»»ä½•å±æ€§** éƒ½ä¼šè¦†ç›–åŸå‹å¯¹è±¡ä¸Šçš„åŒåå±æ€§ã€‚

![æˆªå±2022-07-26 16.22.07](images/09-%E7%BB%A7%E6%89%BF%E5%92%8C%E7%B1%BB.assets/%E6%88%AA%E5%B1%8F2022-07-26%2016.22.07.png)

ä¼˜ç‚¹ï¼š

1. è§„èŒƒäº†å½¢å¼ä¸€ï¼ˆå¼•å­ï¼‰ï¼Œè¿™é‡Œé¢å¤–å¢åŠ äº†ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»ã€‚
2. å®ä¾‹å±æ€§å’Œå…±ç”¨æ–¹æ³•éƒ½å¯ä»¥æ­£ç¡®çš„è¢«å®šä¹‰ï¼šçˆ¶ç±»çš„æ–¹æ³•å¯ä»¥è¢«å­ç±»å¤ç”¨ï¼Œçˆ¶ç±»çš„å®ä¾‹å±æ€§å­ç±»å¯ä»¥å•ç‹¬åˆ›å»ºå‡ºæ¥ã€‚

ç¼ºç‚¹ï¼šè°ƒç”¨ `Student.prototype = Object.create(Person.prototype)` ï¼š

- `Object.create()` ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼ŒåŸæœ‰çš„ Student åŸå‹å¯¹è±¡è¢«æ›¿æ¢æ‰äº†ã€‚è¿™å¯¼è‡´ 3 ä¸ªé—®é¢˜ï¼š
  1. **`.constructor` ä¸¢å¤±** ï¼Œå­ç±»æ–°çš„åŸå‹å¯¹è±¡çš„ `.constructor` å±æ€§éœ€è¦é‡æ–°æŒ‡å‘å…¶æ„é€ å‡½æ•°ã€‚
  2. **å­ç±»æ–¹æ³•é¡ºåº** ï¼Œéœ€è¦å…ˆæ›¿æ¢å­ç±»çš„åŸå‹å¯¹è±¡ `Student.prototype` ï¼Œååœ¨æ–°åŸå‹å¯¹è±¡ä¸Šå®šä¹‰å­ç±»çš„å…¬æœ‰æ–¹æ³•ã€‚
  3. **æ€§èƒ½æŸå¤±**ã€‚å­ç±»çš„æ—§åŸå‹å¯¹è±¡æ²¡æœ‰å®é™…ç”¨å¤„ï¼Œå‡ºç”Ÿå°±è¢«å¼ƒç”¨ï¼Œé€ æˆé¢å¤–çš„å†…å­˜å’Œä»»åŠ¡å¼€é”€ã€‚

```js
// å®šä¹‰çˆ¶ç±»ï¼šå®ä¾‹å±æ€§ + å…¬æœ‰æ–¹æ³•
function Father(name) {
    this.name = name
    this.colors = ["red", "blue", "green"]
}
Father.prototype.printName = function () {
    console.log(this.name)
}

// å®šä¹‰å­ç±»ï¼šå®ä¾‹å±æ€§
function Son(name, age) {
    Father.call(this, name)
    this.age = age
};
// æ–¹æ³•äºŒï¼šåŸå‹å¼ç»§æ‰¿ã€‚å­ç±»é‡æ–°åˆ›å»ºä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œç„¶åæ¢å¤constructorçš„æ­£ç¡®æŒ‡å‘ã€‚
Son.prototype = Object.create(Father.prototype);
Son.prototype.constructor = Son;

// å®šä¹‰å­ç±»ï¼šå…¬æœ‰æ–¹æ³•ï¼Œåªæœ‰åœ¨æ›´æ¢äº†åŸå‹å¯¹è±¡åï¼Œå­ç±»æ‰èƒ½å®šä¹‰å…¬æœ‰æ–¹æ³•
Son.prototype.printAge = function () {
    console.log(this.age)
}

// å®ä¾‹åŒ–æµ‹è¯•ï¼š
let instance1 = new Son("Moxy", 99);	// SonÂ {name: "Moxy", colors: Array(3), age: 99}
let instance2 = new Son("Ninjee", 5);	// SonÂ {name: "Ninjee", colors: Array(3), age: 5}
instance1.printName === instance2.printName // true
Son.prototype.__proto__ === Father.prototype  // true
```



#### å½¢å¼ä¸‰ï¼šES6 æ–¹æ³•ï¼š`Object.setPrototypeOf(Son, Father)`

**ğŸŒŸæœ€ä½³å®è·µ**ï¼šè¯¥æ–¹æ³•æ˜¯ ES6çš„æœ€ä½³å®è·µï¼Œä¹Ÿæ˜¯å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ã€‚

æ­£å› ä¸º ES5 `Object.create()` ä¼šæœ‰é‡æ–°å®šä¹‰å­ç±»åŸå‹å¯¹è±¡çš„é—®é¢˜ã€‚æ‰€ä»¥ ES6 çš„æ–°æ–¹æ³• `Object.setPrototypeOf(Son.prototype, Father.prototype)` åº”è¿è€Œç”Ÿã€‚

å®ƒçš„å®é™…ä½œç”¨å°±æ˜¯ï¼š`Son.prototype.__proto__ == Father.prototype`

- ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ `__proto__` å±æ€§å‘¢ï¼Ÿå› ä¸ºç›´æ¥ä½¿ç”¨ `__proto__` ä¸å®‰å…¨ï¼Œå®ƒä¸æ˜¯ JS å®˜æ–¹æ ‡å‡†ï¼Œè€Œæ˜¯ä¸»æµæµè§ˆå™¨ä¸ºäº†æ–¹ä¾¿å»å®šä¹‰çš„ä¸€ä¸ªå±æ€§ã€‚è¿™ä¸ªå±æ€§å¹¶ä¸èƒ½å®Œå…¨çš„å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ç­‰å…¶ä»–ç¯å¢ƒã€‚

![æˆªå±2022-07-26 16.25.18](images/09-%E7%BB%A7%E6%89%BF%E5%92%8C%E7%B1%BB.assets/%E6%88%AA%E5%B1%8F2022-07-26%2016.25.18.png)

ä¼˜ç‚¹ï¼šè§£å†³ä¸Šå½¢å¼äºŒçš„ 3 ä¸ªç¼ºç‚¹ã€‚

1. æ²¡æœ‰ `Object.Object()` çš„æ€§èƒ½æŸå¤±ã€‚å› ä¸ºä¸éœ€è¦æŠ›å¼ƒå­ç±»çš„æ—§åŸå‹å¯¹è±¡ï¼Œè€Œä¸ä¼šå¯¼è‡´åƒåœ¾å›æ”¶ï¼›
2. æ²¡æœ‰ `Object.Object()` çš„æ··ä¹±ä»£ç é¡ºåºå’Œ `.constroctor` çš„é‡å®šå‘é—®é¢˜ã€‚

ç¼ºç‚¹ï¼š

1. çœŸçœ‹ä¸å‡ºæœ‰ä»€ä¹ˆç¼ºç‚¹ã€‚å¯èƒ½æœ€é‡è¦çš„ç¼ºç‚¹å°±æ˜¯ï¼Œè¯¥æ–¹æ³•æ˜¯ ES6 æ–¹æ³•ï¼Œéœ€è¦ JS æ”¯æŒ ES6 ç¯å¢ƒã€‚

```js
// å®šä¹‰çˆ¶ç±»ï¼šå®ä¾‹å±æ€§ + å…¬æœ‰æ–¹æ³•
function Father(name) {
    this.name = name
    this.colors = ["red", "blue", "green"]
}
Father.prototype.printName = function () {
    console.log(this.name)
}

// å®šä¹‰å­ç±»ï¼šå®ä¾‹å±æ€§ + å…¬æœ‰æ–¹æ³•ã€‚ç°åœ¨å…¬æœ‰æ–¹æ³•å¯ä»¥ç´§æ¥ç€å®ä¾‹å±æ€§å»å®šä¹‰äº†
function Son(name, age) {
    Father.call(this, name)
    this.age = age
};
Son.prototype.printAge = function () {
    console.log(this.age)
}
// æ–¹æ³•ä¸‰ï¼šåŸå‹å¼ç»§æ‰¿ã€‚ä½¿ç”¨ES6æ–¹æ³•ï¼Œ
Object.setPrototypeOf(Son.prototype, Father.prototype)

// å®ä¾‹åŒ–æµ‹è¯•ï¼š
let instance1 = new Son("Moxy", 99);	// SonÂ {name: "Moxy", colors: Array(3), age: 99}
let instance2 = new Son("Ninjee", 5);	// SonÂ {name: "Ninjee", colors: Array(3), age: 5}
instance1.printName === instance2.printName // true
Son.prototype.__proto__ === Father.prototype  // true
```



## 5 å¯„ç”Ÿå¼ç»§æ‰¿

åŸºæœ¬æ€æƒ³ï¼š

1. â€œå¯„â€ï¼šåˆ©ç”¨åŸå‹å¼ï¼Œåœ¨æœ‰ä¸€ä¸ªå¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œåˆ›å»ºå‡ºå­å¯¹è±¡ã€‚è®©å­å¯¹è±¡é€šè¿‡åŸå‹é“¾ç»§æ‰¿çˆ¶å¯¹è±¡çš„å…¨éƒ¨å±æ€§å’Œæ–¹æ³•ã€‚
2. â€œç”Ÿâ€ï¼šå¢å¼ºå­å¯¹è±¡ï¼Œä¸ºå­å¯¹è±¡åˆ›å»ºè‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ã€‚



ä¼˜ç‚¹ï¼š

1. åŸå‹å¼ç»§æ‰¿çš„å…¨éƒ¨ä¼˜ç‚¹ï¼šä¸å®šä¹‰ç±»å‹ï¼Œä¾¿å¯ä»¥é€šè¿‡åŸå‹å®ç°å¯¹è±¡ä¹‹é—´çš„å±æ€§ã€æ–¹æ³•å…±äº«ã€‚
2. é¿å…äº†åŸå‹å¼ç»§æ‰¿çš„ç¬¬äºŒä¸ªç¼ºç‚¹ã€‚å¯„ç”Ÿå¼ç»§æ‰¿å¯ä»¥åœ¨å®ä¾‹åŒ–å­å¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œåˆ›å»ºæ–°çš„å±æ€§å’Œæ–¹æ³•ã€‚

ç¼ºç‚¹ï¼š

1. çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•å…¨éƒ¨å¤ç”¨ã€‚
1. å­ç±»çš„å±æ€§æ— æ³•åœ¨åˆ›å»ºæ—¶åˆå§‹åŒ–

```js
// å½¢å¼äºŒï¼šè‡ªå®šä¹‰object()
function object(obj) {
    function Son() {}
    Son.prototype = obj;
    return new Son();
}

// å®šä¹‰çˆ¶å¯¹è±¡ï¼ˆæ— æ„é€ å‡½æ•°ã€æ— åŸå‹é“¾ï¼‰
const father = {
    name: "Moxy",
    colors: ["red", "blue", "green"],
    sayName: function () {
        console.log(this.name)
    }
};

// ã€å·¥å‚å‡½æ•°ã€‘å¢å¼ºå­å¯¹è±¡ã€ä¸ºå­å¯¹è±¡æ·»åŠ è‡ªå·±çš„æ–¹æ³•
function createSon(original, age) {
    // å½¢å¼ä¸€ï¼šES5çš„Object.create()
    // const Son = Object.create(original);
  
    const son = object(original);
    // ã€å¯„ç”Ÿã€‘å¢å¼ºå¯¹è±¡ï¼Œæ·»åŠ å±äºè‡ªå·±çš„å±æ€§+æ–¹æ³•
  	son.age = age;
    son.sayHi = function () {
        console.log('hi')
    };
    return son
}

/// å®ä¾‹åŒ–æµ‹è¯•
const son1 = createSon(father, 12);
const son2 = createSon(father, 18);
son1  // SonÂ {age: 12, sayHi: Æ’}
son2  // SonÂ {age: 18, sayHi: Æ’}
son1.colors.push("black");
son2.colors.push("pink");
console.log(father.colors); // (5)Â ["red", "blue", "green", "black", "pink"]

son1 // SonÂ {sayHi: Æ’}
```



### å°æ€»ç»“

**æ€»ç»“1ï¼š**åŸå‹å¼ç»§æ‰¿ã€å¯„ç”Ÿå¼ç»§æ‰¿å’Œæµ…æ‹·è´å¯¹è±¡ï¼š

é—®é¢˜ï¼šä¸Šæ–‡è¯´è¿‡ï¼ŒåŸå‹å¼ç»§æ‰¿çš„ä¼˜ç‚¹æ˜¯å³ä½¿ä¸è‡ªå®šä¹‰ç±»å‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŸå‹å®ç°å¯¹è±¡ä¹‹é—´çš„å±æ€§ã€æ–¹æ³•å…±äº«ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ–°å¯¹è±¡ç›´æ¥æµ…æ‹·è´åŸå¯¹è±¡ï¼Œç„¶ååœ¨ç»™è‡ªå·±æ·»åŠ é¢å¤–çš„æ–¹æ³•ï¼Œä¸ä¹Ÿå®ç°äº†å±æ€§å’Œæ–¹æ³•çš„å…±äº«å—ï¼Ÿ

è§£ç­”ï¼šæµ…æ‹·è´ä¸æ˜¯ â€œåŠ¨æ€çš„â€ã€‚æ–°å¯¹è±¡é€šè¿‡åŸå‹å¼ç»§æ‰¿ï¼Œè·å¾—äº†æ—§å¯¹è±¡çš„å…¨éƒ¨å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚æœæ­¤åæ—§å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•å‘ç”Ÿå˜åŠ¨ï¼Œå› ä¸ºåŸå‹é“¾çš„å…³ç³»ï¼Œæ–°å¯¹è±¡ç»§æ‰¿çš„å±æ€§å’Œæ–¹æ³•ä¹Ÿä¼š â€œåŠ¨æ€â€ çš„å‘ç”Ÿå˜åŠ¨ã€‚è€Œå•çº¯çš„æµ…æ‹·è´æ˜¯é™æ€çš„ï¼Œæ—§å¯¹è±¡çš„åŸºæœ¬æ•°æ®å±æ€§å‘ç”Ÿå˜åŠ¨ï¼Œæ–°å¯¹è±¡ä¸ä¼šæ›´æ–°ã€‚ï¼ˆæ—§å¯¹è±¡çš„å¼•ç”¨æ•°æ®æºç±»å‹å’Œæ–¹æ³•éƒ½æ˜¯åœ°å€å€¼ä¼ é€’ï¼Œæ–°å¯¹è±¡ä¹Ÿä¼šå¾—åˆ°æ›´æ–°ï¼‰



**æ€»ç»“ 2ï¼š**åŸå‹å¼ç»§æ‰¿å’Œå¯„ç”Ÿå¼ç»§æ‰¿çš„åŒºåˆ«ï¼š

åŸå‹å¼ç»§æ‰¿ï¼šåŸºäºå·²æœ‰çš„å¯¹è±¡ï¼ˆåŸå‹å¯¹è±¡ï¼‰åˆ›å»ºæ–°å¯¹è±¡

- åŸå‹å¼ç»§æ‰¿å®ç°äº† `Object.create()` çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼›

å¯„ç”Ÿå¼ç»§æ‰¿ï¼šåˆ›å»ºä¸€ä¸ªç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ã€‚å‡½æ•°å†…éƒ¨ä¸ä»…å®ç°äº† â€åŸºäºå·²æœ‰çš„å¯¹è±¡ï¼ˆåŸå‹å¯¹è±¡ï¼‰åˆ›å»ºæ–°å¯¹è±¡â€œ çš„åŸå‹å¼ç»§æ‰¿ï¼Œä¹Ÿå®ç°äº†å¯¹æ–°å¯¹è±¡çš„å¢å¼ºï¼Œæ·»åŠ æ›´å¤šå±æ€§å’Œæ–¹æ³•

- å¯„ç”Ÿå¼ç»§æ‰¿å®ç°äº†`Object.create()` çš„ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‚æ•°ï¼›



## 6 å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿

å¯„ç”Ÿç»„åˆå¼çš„æœ¬è´¨åŸç†å°±æ˜¯åŸå‹å¼ç»§æ‰¿ï¼Œåªæ˜¯æŠŠåŸå‹å¼ç»§æ‰¿çš„å¤šè¡Œä»£ç ï¼Œé€šè¿‡ `inheritPrototype` ğŸ“¦ å°è£…èµ·æ¥ï¼Œæ›´ç®€æ´äº†ã€‚

```js
// ã€ğŸ“¦ã€‘ä¸­é—´å‡½æ•°ã€ä¼ å…¥å­ç±»ã€çˆ¶ç±»ä¸¤ä¸ªæ„é€ å‡½æ•°
function inheritPrototype(Sub, Super) {
//é‡å®šä¹‰ä¸€ä¸ª[å­ç±»åŸå‹å¯¹è±¡]subPrototypeï¼Œæ­¤æ—¶æœ‰__proto__å’Œconstructorä¸¤ä¸ªå±æ€§ï¼Œå³ï¼š
    //Sub.prototype.__proto__ æŒ‡å‘ Super.prototype çˆ¶ç±»åŸå‹å¯¹è±¡
    //Sub.prototype.constructor æŒ‡å‘ Sub å­ç±»æ„é€ å‡½æ•°
  // è¿™é‡Œä½¿ç”¨äº†ç°æˆçš„Object.createï¼Œæœ€åŸå§‹åº”è¯¥æ˜¯è‡ªå®šä¹‰çš„3è¡Œobjectå‡½æ•°
	  Sub.prototype = Object.create(Super.prototype);
    Sub.prototype.constructor = Sub;
}

// çˆ¶ç±»æ„é€ å‡½æ•°ï¼šå±æ€§+æ–¹æ³•
function Father(name) {
    this.name = name;
    this.color = ["red", "green", "blue"];
}
Father.prototype.sayName = function () {
    console.log(this.name);
}

// å­ç±»æ„é€ å‡½æ•°ï¼šç»§æ‰¿çˆ¶ç±»å±æ€§+å­ç±»å±æ€§
function Son(name, age) {
    Father.call(this, name); // åªè°ƒç”¨ä¸€æ¬¡çˆ¶ç±»æ„é€ æ–¹æ³•
    this.age = age;
}

// å­ç±»ç»§æ‰¿çˆ¶ç±»æ–¹æ³•
inheritPrototype(Son, Father);
// or æ–¹æ³•ä¸‰ï¼šåŸå‹å¼ç»§æ‰¿ã€‚ä½¿ç”¨ES6æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ²¡æœ‰é¡ºåºè§„å®š
// Object.setPrototypeOf(Son.prototype, Father.prototype)

// å­ç±»æ–¹æ³•ï¼Œåœ¨Son.prototypeè¢«æ­£ç¡®å®šä¹‰åæ‰èƒ½æ·»åŠ 
Son.prototype.sayAge = function () {
    console.log(this.age);
}

// å®ä¾‹åŒ–æµ‹è¯•ï¼š
let instance1 = new Son("Moxy", 18)
let instance2 = new Son("Ninjee", 28)
instance1.color.push("pink")
console.log(instance1.color) // (4)Â ["red", "green", "blue", "pink"]
console.log(instance2.color) // (3)Â ["red", "green", "blue"]

instance1 // SonÂ {name: "Moxy", color: Array(4), age: 18}
console.log(instance1.__proto__) // FatherÂ {constructor: Æ’, sayAge: Æ’}
console.log(instance1.__proto__.__proto__) // {sayName: Æ’, constructor: Æ’}
```

ç»„åˆå¼ç»§æ‰¿åŸæœ¬éœ€è¦è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼š

1. åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨ï¼Œç›®çš„æ˜¯æŠŠ **çˆ¶ç±»çš„å±æ€§** å¤åˆ¶åˆ°å­ç±»çš„å®ä¾‹åŒ–å¯¹è±¡ä¸­ï¼›
2. åœ¨è®¾ç½®å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶è°ƒç”¨ï¼Œç›®çš„æ˜¯ç»§æ‰¿ **çˆ¶ç±»çš„æ–¹æ³•** ï¼Œç”±æ­¤äº§ç”Ÿçš„ä»£ä»·å°±æ˜¯åœ¨å­ç±»çš„åŸå‹é“¾ä¸Šï¼Œå¤šäº†ä¸€ç»„ çˆ¶ç±»çš„å±æ€§ã€‚

è€Œå¯„ç”Ÿç»„åˆå¼ï¼Œåªè°ƒç”¨ä¸€æ¬¡çˆ¶ç±»æ„é€ æ–¹æ³•ï¼Œä¸ºäº†æŠŠ **çˆ¶ç±»çš„å±æ€§** å¤åˆ¶åˆ°å®ä¾‹åŒ–å¯¹è±¡ä¸­ã€‚å­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•ï¼Œé€šè¿‡å¯„ç”Ÿæ–¹å¼è¿›è¡Œã€‚å³çˆ¶ç±»æ–¹æ³•ç›´æ¥è®¾ç½®åœ¨å­ç±»å®ä¾‹åŒ–å¯¹è±¡çš„ prototype åŸå‹é“¾ä¸Šã€‚

- çˆ¶ç±»æ–¹æ³•çš„ç»§æ‰¿ï¼šé€šè¿‡åŸå‹é“¾åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ç»‘å®šã€‚
- çˆ¶ç±»å±æ€§çš„ç»§æ‰¿ï¼šé€šè¿‡æ„é€ å‡½æ•°åœ¨å®ä¾‹åŒ–çš„æ—¶å€™é‡æ–°åˆ›å»ºã€‚



### `Object.create()` 

`Object.create()`æ–¹æ³•çš„å®è´¨æ˜¯ï¼šæ–°å»ºä¸€ä¸ªç©ºçš„æ„é€ å‡½æ•° `F`ï¼Œç„¶åè®© `F.prototype` å±æ€§æŒ‡å‘å‚æ•°å¯¹è±¡`o`ï¼Œæœ€åè¿”å›ä¸€ä¸ª `F` çš„å®ä¾‹ï¼Œä»è€Œå®ç°è®©è¯¥å®ä¾‹ç»§æ‰¿ `obj` çš„å±æ€§ã€‚

å®é™…ä¸Šï¼Œ`Object.create()` æ–¹æ³•å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç ä»£æ›¿ã€‚ 

```js
Object.create = function (o) {
  function F() {}
  F.prototype = o;
  return new F();
};

// å› ä¸ºæ„é€ å‡½æ•°Fä¸­æ²¡æœ‰ä»»ä½•ä»£ç ï¼Œ new F() è¿”å›äº†ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¹Ÿç›¸å½“äºï¼š
Object.create = function (o) {
  let newObj = {};
  nreObj.__proto__ = o;
  return newObj;
}
```



åœ¨å¯„ç”Ÿå¼ç»§æ‰¿ä¸­ï¼Œ`Object.create()` å®é™…ä¸Šåšäº†å¦‚ä¸‹æ“ä½œï¼š

```js
let obj = Object.create(superType)

// æ›¿æ¢ä¸ºï¼š
let obj = {}
obj.__proto__ = superType
```



åœ¨å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ä¸­ï¼Œ`Object.create()` å®é™…ä¸Šåšäº†å¦‚ä¸‹æ“ä½œï¼š

```js
let subPrototype = Object.create(Super.prototype)
 
// æ›¿æ¢ä¸ºï¼š
let subPrototype = {}
subPrototype.__proto__ = Super.prototype
```



## 7 ç»§æ‰¿çš„æœ€ä½³å®è·µï¼š

1. ES5 ç‰ˆæœ¬æœ€ä½³å®è·µï¼šå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼Œä½¿ç”¨ `Object.create()`ï¼›
2. ES6 ç‰ˆæœ¬æœ€ä½³å®è·µï¼šåŸå‹å¼ç»§æ‰¿çš„å½¢å¼ä¸‰ï¼š`Object.setPrototypeOf(Son.prototype, Father.prototype)`
3. ES5 ä»¥ä¸‹æœ€ä½³å®è·µï¼šå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼Œä½¿ç”¨ object è‡ªå®šä¹‰å‡½æ•°ï¼›



ï¼ˆ3ï¼‰ES5 æœ€åŸå§‹ç‰ˆæœ¬å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼š

```js
// ğŸ“¦ä¸­é—´å‡½æ•°
function inheritPrototype(Sub, Super) {
	  Sub.prototype = object(Super.prototype);
    Sub.prototype.constructor = Sub;

    function object(o) {
    function F() {}
    F.prototype = o;
    return new F();
  };
}

// çˆ¶ç±»
function Father(name) {
    this.name = name;
    this.color = ["red", "green", "blue"];
}
Father.prototype.sayName = function () {
    console.log(this.name);
}

// å­ç±»
function Son(name, age) {
    Father.call(this, name);
    this.age = age;
}
inheritPrototype(Son, Father);
Son.prototype.sayAge = function () {
    console.log(this.age);
}


// å®ä¾‹åŒ–æµ‹è¯•ï¼š
let instance1 = new Son("Moxy", 18)
let instance2 = new Son("Ninjee", 28)
instance1.color.push("pink")
console.log(instance1.color) // (4)Â ["red", "green", "blue", "pink"]
console.log(instance2.color) // (3)Â ["red", "green", "blue"]

instance1 // SonÂ {name: "Moxy", color: Array(4), age: 18}
console.log(instance1.__proto__) // FatherÂ {constructor: Æ’, sayAge: Æ’}
console.log(instance1.__proto__.__proto__) // {sayName: Æ’, constructor: Æ’}
```

ï¼ˆ2ï¼‰ES5 çš„ä¸­é—´å‡½æ•°ï¼š

```js
// ğŸ“¦ä¸­é—´å‡½æ•°
function inheritPrototype(Sub, Super) {
	  Sub.prototype = Object.create(Super.prototype);
    Sub.prototype.constructor = Sub;
}
```

ï¼ˆ1ï¼‰ES6 çš„ç»§æ‰¿ï¼š

```js
// çˆ¶ç±»
function Father(name) {
    this.name = name;
    this.colors = ["red", "blue", "green"];
}
Father.prototype.printName = function () {
    console.log(this.name);
}

// å­ç±»ï¼š
function Son(name, age) {
    Father.call(this, name);
    this.age = age;
};
Son.prototype.printAge = function () {
    console.log(this.age);
}

Object.setPrototypeOf(Son.prototype, Father.prototype);

// å®ä¾‹åŒ–æµ‹è¯•ï¼š
let instance1 = new Son("Moxy", 99);	// SonÂ {name: "Moxy", colors: Array(3), age: 99}
let instance2 = new Son("Ninjee", 5);	// SonÂ {name: "Ninjee", colors: Array(3), age: 5}
instance1.printName === instance2.printName // true
Son.prototype.__proto__ === Father.prototype  // true
```



> å¼•ç”¨ï¼š
>
> - [jså¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ - SegmentFault æ€å¦](https://segmentfault.com/a/1190000037433122)
>
> - [JSåŸå‹é“¾ä¸ç»§æ‰¿åˆ«å†è¢«é—®å€’äº† (juejin.cn)](https://juejin.cn/post/6844903475021627400#heading-5)
>





## 8 Class ç±»

class Person ç›¸å½“äº `function Person()`ï¼Œæ˜¯ä¸€ä¸ª function Person çš„è¯­æ³•ç³–ã€‚

### 8.1 ç±»çš„ç»“æ„

åŒ…å«ï¼šæ„é€ å‡½æ•° (ç±»å)ã€æ„é€ å™¨ `constructor`ã€å®ä¾‹æ–¹æ³•ã€è·å–å‡½æ•° `get`ã€è®¾ç½®å‡½æ•° `set`ã€é™æ€æ–¹æ³• `static`ã€‚

```js
// æ„é€ å‡½æ•°
class Person {
    // æ„é€ å™¨
    constructor(name, age){
        this.name = name;
        this.age = age;
        this.nickname_ = "none";
    }
    // å®ä¾‹æ–¹æ³•ï¼šåœ¨ç±»çš„åŸå‹å¯¹è±¡ä¸Šå®šä¹‰
    callName(){
        console.log(this.name)
    }
    // é™æ€æ–¹æ³•ï¼šåœ¨ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰ä¸Šå®šä¹‰
    static callHello() {
        console.log("Hello")
    }
    // get å‡½æ•°ï¼šåœ¨ç±»çš„åŸå‹å¯¹è±¡ä¸Šå®šä¹‰
    get nickname() {
        return this.nickname_;
    }
    // set å‡½æ•°ï¼šåœ¨ç±»çš„åŸå‹å¯¹è±¡ä¸Šå®šä¹‰
    set nickname(newName) {
        if(newName !== this.nickname_) {
            this.nickname_ = newName;
        } else {
            console.log("Cannot duplicate the original nickname")
        }      
    }
    
    // åœ¨constructorå¤–è®¾ç½®å±æ€§ï¼Œå’Œåœ¨ constructor å†…ä¸€æ ·ï¼Œä¼šèµ‹å€¼åˆ°å®ä¾‹åŒ–å¯¹è±¡ä¸­ï¼Œä¸è®ºæ˜¯ å±æ€§ è¿˜æ˜¯ æ–¹æ³•ã€‚
		//	- é€šè¿‡å±æ€§åçš„æ–¹å¼å®šä¹‰çš„æ–¹æ³•ï¼Œå°±ä¼šç»‘å®šåˆ°å®ä¾‹åŒ–å¯¹è±¡ä¸Šï¼Œè€Œä¸æ˜¯åœ¨åŸå‹ä¸Šã€‚
    perName = "Happy";
	  callPerName = function() {  // å‡½æ•°è¡¨è¾¾å¼
		    console.log(this.perName)
    };
}

// æµ‹è¯•ï¼š
// ç±»çš„å®ä¾‹åŒ–ï¼š
let p = new Person("Moxy", 18)
// å®ä¾‹æ–¹æ³•
p.callName()	 	  // Moxy
// é™æ€æ–¹æ³•
Person.callHello()	  // Hello
// get å‡½æ•°
p.nickname = "Ninjee" // 'Ninjee'
// set å‡½æ•°
p.nickname;			  // 'Ninjee'
// å®ä¾‹åŒ–å±æ€§ + æ–¹æ³•
p1.perName			  // 'Happy'
p1.callPerName()	  // Happy
// typeof 
typeof Person 		// functionï¼Œclass Person å®é™…ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°
```

**æ³¨æ„ï¼š**

- åœ¨ constructor å¤–å®šä¹‰æ–¹æ³•ï¼šæœ€åä¼šåœ¨ `Person.prototype` ç±»çš„åŸå‹ä¸Šå®šä¹‰ï¼Œæ˜¯å…¬æœ‰æ–¹æ³•ï¼›
- åœ¨ constructor å¤–å®šä¹‰å±æ€§ï¼šæœ€åä¼šåœ¨ "ç±»çš„å®ä¾‹åŒ–å¯¹è±¡" ä¸Šå®šä¹‰ï¼Œæ˜¯å®ä¾‹åŒ–å±æ€§çš„ç§æœ‰æ–¹æ³•ï¼›
  - å®šä¹‰å±æ€§ä¹Ÿå¯ä»¥èµ‹å€¼ä¸ºä¸€ä¸ªæ–¹æ³•ï¼ˆå‡½æ•°è¡¨è¾¾å¼ï¼‰ï¼Œè¿™æ ·å°±æ‹¥æœ‰ä¸€ä¸ªå®ä¾‹åŒ–æ–¹æ³•äº†ï¼›
  - **è¿™å…¶å®å’Œåœ¨ constructor ä¸­å®šä¹‰æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚**



##### 1.1.1 ç±»çš„å®ä¾‹åŒ–

```js
let p = new Person()
```

ä½¿ç”¨ `new` è°ƒç”¨ class ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š

1. åˆ›å»ºä¸€ä¸ª **æ–°å¯¹è±¡** `{}`ï¼›
2. ä¸ºæ–°å¯¹è±¡ç»‘å®š **åŸå‹é“¾**ï¼š`{}.__proto__ = Person.prototype`ï¼›
3. å°† class çš„ä½œç”¨åŸŸ **`this`** èµ‹ç»™æ–°å¯¹è±¡ `{}`ï¼›
4. æ‰§è¡Œ class ä¸­çš„ä»£ç ï¼Œä¸º `{}` æ·»åŠ å±æ€§ï¼š `constructor.call(this, params...);`
   - åœ¨ constructor å¤–çš„ã€æ²¡æœ‰ `get`ï¼Œ`set`ï¼Œ`static` æ ‡è¯†ç¬¦çš„å±æ€§ï¼Œå…¨éƒ¨å®šä¹‰åˆ° `{}` ä¸­ã€‚
5. å¦‚æœæ„é€ å‡½æ•°æœ€ç»ˆä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå°±è¿”å› **æ„é€ å‡½æ•°ä¸­çš„å¯¹è±¡**ã€‚
6. å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œå°±ä¼šè¿”å› **æ–°å¯¹è±¡**ã€‚

æœ€ç»ˆï¼Œä»£ç ä¸­å·¦ä¾§çš„ `p` å˜é‡æ¥æ”¶åˆ°äº†æ–°åˆ›å»ºçš„é‚£ä¸ªå¯¹è±¡ã€‚



#### 1.1.2 static é™æ€æ–¹æ³•

é™æ€æ–¹æ³•ï¼Œä¼šæŠŠè¿™ä¸ªæ–¹æ³•æ·»åŠ åˆ° `class` æ„é€ å‡½æ•°è‡ªèº«ï¼ˆç±»åä¸Šï¼‰ï¼Œè€Œä¸æ˜¯å…¶ `.prototype` åŸå‹é“¾ä¸Šã€‚æ‰€ä»¥å®ä¾‹åŒ–å¯¹è±¡æ— æ³•ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯é€šè¿‡ ç±»åç›´æ¥è°ƒç”¨ã€‚

```js
class Foo{
    constructor(){}
    static callHello(){
        console.log("Hello")
    }
}

Foo.callHello() // Hello

let f = new Foo()
f.callHello()	// f.callHello is not a function
```

static çš„ä¸€ç§å¸¸è§ç”¨æ³•ï¼Œå¯ä»¥éšæœºå®ä¾‹åŒ–å¯¹è±¡ï¼Œä¸‹é¢å°±æ˜¯éšæœºåŒ–ç”Ÿæˆ Person å®ä¾‹åŒ–çš„ä¾‹å­ï¼š

```js
class Person {
  constructor(name, age){
    this.name = name;
    this.age = age;
    this.nickname_ = "none";
  }

  callName(){
    console.log(this.name)
  }
  
  static randomPerson() {
    const names = ["Jack", "Marry", "Bob", "Jobs", "Happy", "Moon", "Ted"];
		const nameIndex = Math.floor(Math.random() * names.length);
		const name = names[nameIndex];
    const age = Math.floor(Math.random() * 30);
    return new Person(name, age);
	}
}

for (let i = 0; i < 10; i++)
  console.log(Person.randomPerson());
// PersonÂ {name: 'Ted', age: 21, nickname_: 'none'}
// PersonÂ {name: 'Moon', age: 15, nickname_: 'none'}
// PersonÂ {name: 'Marry', age: 6, nickname_: 'none'}
// PersonÂ {name: 'Ted', age: 14, nickname_: 'none'}
// PersonÂ {name: 'Ted', age: 26, nickname_: 'none'}
// PersonÂ {name: 'Happy', age: 20, nickname_: 'none'}
// PersonÂ {name: 'Bob', age: 22, nickname_: 'none'}
// PersonÂ {name: 'Jack', age: 5, nickname_: 'none'}
// PersonÂ {name: 'Ted', age: 20, nickname_: 'none'}
// PersonÂ {name: 'Happy', age: 3, nickname_: 'none'}
```



#### 1.1.3 å¯è¿­ä»£çš„ç±»

å¯ä»¥åœ¨ç±»ä¸­å®šä¹‰ generatorï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŠŠç±»æ”¹ä¸ºä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚

```js
class Person {
    constructor() {
        this.nicknames = ["Moxy", "Ninjee", "walnut"];
    }

    *[Symbol.iterator]() {
        yield* this.nicknames.entries();
    }
}

let p = new Person()
for (let [idx, v] of p) {
    console.log(`id: ${idx}, nickName: ${v}`)
}
// id: 0, nickName: Moxy
// id: 1, nickName: Ninjee
// id: 2, nickName: walnut
```

æˆ–è€…ç›´æ¥è¿”å›ä¸€ä¸ª iterator å®ä¾‹ã€‚

```js
class Person {
    constructor() {
        this.nicknames = ["Moxy", "Ninjee", "walnut"];
    }

    [Symbol.iterator]() {
        return this.nicknames.entries(); // entriesä¼šè¿”å›ä¸€ä¸ªiterator
    }
}

let p = new Person()
for (let [idx, v] of p) {
    console.log(`id: ${idx}, nickName: ${v}`)
}
// id: 0, nickName: Moxy
// id: 1, nickName: Ninjee
// id: 2, nickName: walnut
```



#### 1.1.4 å¤‡æ³¨ï¼š

ç±»æ–¹æ³•æ˜¯ä¸å¯æšä¸¾çš„ï¼Œå¯¹è±¡çš„æ–¹æ³•æ˜¯é»˜è®¤å¯æšä¸¾çš„ã€‚



ä¸ `function Foo` ç›¸æ¯”ï¼Œ`class Foo` çš„ç‰¹ç‚¹æ˜¯ï¼š

- ä¸æå‡ã€‚`function Foo` å­˜åœ¨å˜é‡æå‡ï¼Œè€Œ `class` ç±»ä¸å­˜åœ¨å˜é‡æå‡ã€‚
- æ— æ³•ç›´æ¥è°ƒç”¨ã€‚`class Foo` æ— æ³•ç›´æ¥è°ƒç”¨ï¼Œå¿…é¡» `new` å®ä¾‹åŒ–æœ‰æ‰å¯ä»¥è°ƒç”¨ã€‚è€Œ `function Foo` çš„å¯ä»¥å½“ä½œä¸€ä¸ªæ™®é€šå‡½æ•°é‚£æ ·ä½¿ç”¨ï¼š `Foo.call(obj)` 



### 8.2 extends ç»§æ‰¿

- `extends` ç»§æ‰¿ï¼Œæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œç”¨æ¥åœ¨ä¸¤ä¸ªå‡½æ•°åŸå‹ä¹‹é—´å»ºç«‹ `[[Prototype]]` é“¾æ¥ã€‚
- `static` ï¼Œå­ç±»ä¹Ÿç»§æ‰¿äº†çˆ¶ç±»çš„ static é™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ `Son.fatherStaticMethod` è°ƒç”¨ã€‚
- `super` è‡ªåŠ¨æŒ‡å‘çˆ¶æ„é€ å™¨ï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘çˆ¶å¯¹è±¡ã€‚
- `super` æœ‰ä¸¤ç§ç”¨æ³•ï¼š
  - `super` æŒ‡å‘çˆ¶æ„é€ å™¨ constructorï¼Œä¸»è¦æ˜¯ä¸ºäº†å®ç°çˆ¶ç±»å±æ€§çš„ç»§æ‰¿ï¼›
  - `super` æŒ‡å‘çˆ¶å¯¹è±¡ classï¼Œä¸»è¦æ˜¯ä¸ºäº†è®©å­ç±»å¯ä»¥åœ¨è‡ªå®šä¹‰æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»æ–¹æ³•ã€‚



ç”¨æ³•ä¸€ï¼š`super` å®ç°ç»§æ‰¿

```js
class Foo {
    constructor(a, b) {
        this.x = a;
        this.y = b;
    }
    gimmeXY() {
        return this.x * this.y;
    }
}

class Bar extends Foo {
    constructor(a, b, c) {
        super(a, b);
        this.z = c;
    }
    gimmeXYZ() {
        return super.gimmeXY() * this.z;
    }
}

let b = new Bar(5, 15, 25);
b.x;            // 5
b.y;            // 15
b.z;            // 25
b.gimmeXYZ()    // 1875

Foo.prototype === Bar.prototype.__proto__	// true
```

- `class Bar extends Foo` è¡¨ç¤ºæŠŠ `Bar.prototype` çš„ `[[Prototype]]` æŒ‡å‘äº† `Foo.prototype`ã€‚
- `super` æ˜¯é™æ€ç»‘å®šçš„ã€‚
- å­ç±»æ„é€ å™¨ `constructor` ä¸­ï¼Œå¿…é¡»å…ˆä½¿ç”¨ `super`ï¼Œæ‰èƒ½ä½¿ç”¨ `this`ã€‚
- å¦‚æœåœ¨ç»§æ‰¿çˆ¶ç±»åï¼Œæ²¡æœ‰å®šä¹‰ `constructor`ï¼Œåˆ™å¼•æ“ä¼šé»˜è®¤å¸®ä½ è°ƒä¸€æ¬¡ `constructor`ï¼Œå¹¶åœ¨å…¶ä¸­ä¹Ÿè°ƒç”¨ä¸€æ¬¡ `super`ï¼Œä¼ é€’æ‰€æœ‰å€¼ç»™ `super`ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š

```js
// é»˜è®¤çš„ constructor
constructor(...args){
    super(...args);
}
```



ç”¨æ³•äºŒï¼š`super` å­ç±»è°ƒç”¨çˆ¶ç±»æ–¹æ³•

ä¸‹ä¾‹ä¸­ï¼Œå­ç±»é‡è½½äº†çˆ¶ç±»çš„ func æ–¹æ³•ï¼Œä½¿ç”¨ superï¼Œå­ç±»çš„ func æ–¹æ³•å…ˆæ‰§è¡Œäº†çˆ¶ç±»åŸæ–¹æ³•ï¼Œå†é¢å¤–æ–°å¢é€»è¾‘ï¼š

```js
class Father {
	func() {
		console.log('é€»è¾‘1');
    console.log('é€»è¾‘2');
    console.log('é€»è¾‘3');
  }
  
  static StaticMethod() {
   	console.log('Father StaticMethod');
	}
  
  static FatherStaticMethod() {
   	console.log('Father FatherStaticMethod');
	}
}

class Son extends Father {
  constructor(){
    super();
  }
  
  // é‡å†™çˆ¶ç±»æ–¹æ³•
  func() {
    super.func();  // å¤ç”¨çˆ¶ç±»æ–¹æ³•
		console.log('æ–°å¢ï¼šé€»è¾‘4');
    console.log('æ–°å¢ï¼šé€»è¾‘5');
	}
  
  // é‡å†™çˆ¶ç±»é™æ€æ–¹æ³•
  static StaticMethod() {
    super.StaticMethod() // å¤ç”¨çˆ¶ç±»é™æ€æ–¹æ³•ï¼Œâš ï¸è¿™é‡Œé™æ€æ–¹æ³•çš„è°ƒç”¨é‡‡ç”¨ super.ï¼Œè€Œä¸æ˜¯ç±»å Father.
   	console.log('son static method');
	}
}

const s = new Son();

// çˆ¶ç±»æ–¹æ³•çš„å¤ç”¨å’Œé‡è½½
s.func() 
	// é€»è¾‘1
	// é€»è¾‘2
	// é€»è¾‘3
	// æ–°å¢ï¼šé€»è¾‘4
	// æ–°å¢ï¼šé€»è¾‘5


// çˆ¶ç±»é™æ€æ–¹æ³•çš„å¤ç”¨å’Œé‡è½½
Son.StaticMethod()
	// Father StaticMethod
	// son static method


// çˆ¶ç±»é™æ€æ–¹æ³•çš„ç»§æ‰¿
Son.FatherStaticMethod()
	// Father FatherStaticMethod
```



#### 8.2.1 new.target

`new.target` æ˜¯ä¸€ä¸ªå…ƒå±æ€§ï¼ˆmeta propertyï¼‰ï¼Œå®ƒæ€»æ˜¯æŒ‡å‘ new å®é™…ä¸Šç›´æ¥è°ƒç”¨çš„æ„é€ å™¨ã€‚

```js
class Foo {
    constructor() {
        console.log("Foo:", new.target.name)
    }
}

class Bar extends Foo {
    constructor() {
        super()
        console.log("Bar:", new.target.name)
    }
    baz() {
        console.log("baz:", new.target)
    }
}
let a = new Bar()
// Foo: Bar
// Bar: Bar
a.baz()
// baz: undefined
```

å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿åœ¨å­ç±»ä¸­é€šè¿‡ `super` å»è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œ`new.target` ä¹Ÿä¼šæ­£ç¡®çš„æŒ‡å‘å­ç±»æ„é€ å™¨ï¼š `new`  è°ƒç”¨çš„æ˜¯è° (`Bar`)ï¼Œ`new.target` å°±æ°¸è¿œæŒ‡å‘è°çš„æ„é€ å™¨  (`Bar` çš„ `constructor`)ã€‚

å¦‚æœ `new.target` å€¼ä¸º `undefined` ï¼Œåˆ™è¡¨æ˜è¿™ä¸ªå‡½æ•°ä¸æ˜¯é€šè¿‡ `new` æ¥è°ƒç”¨çš„ã€‚



#### 8.2.2 æŠ½è±¡åŸºç±»ï¼ˆæ¥å£ï¼‰

æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒå¯ä»¥ä¾›å…¶ä»–ç±»ç»§æ‰¿ï¼Œä½†æœ¬èº«ä¸ä¼šè¢«å®ä¾‹åŒ–ã€‚å¯ä»¥é€šè¿‡ `new.target` æ¥å®ç°ã€‚

é€šè¿‡åœ¨å®ä¾‹åŒ–æ—¶ï¼Œæ£€æµ‹ `new.target`ï¼Œåˆ¤æ–­è¯¥ç±»æ˜¯å¦ä¸ºä¸€ä¸ªæŠ½è±¡ç±»ï¼Œç„¶åé˜»æ­¢å¯èƒ½çš„å®ä¾‹åŒ–åŠ¨ä½œã€‚

```js
// æ¥å£
class Vehicle {
    constructor() {
        console.log(new.target.name);
        if (new.target === Vehicle) 
            throw new Error('Vehicle cannot be derectly instantiated')
    }
}
// æ´¾ç”Ÿç±»ï¼ˆå­ç±»ï¼‰
class Bus extends Vehicle {}

// å®ä¾‹åŒ–æµ‹è¯•
new Vehicle()	// Vehicle
							// Uncaught Error: Vehicle cannot be derectly instantiated
new Bus()	 // Bus
```



### 8.3 ä½¿ç”¨ Bebel è½¬åŒ–

> ğŸ”—é“¾æ¥ï¼š
>
> [Babel å®˜ç½‘](https://babeljs.io)
>
> [Babel ä»£ç è½¬åŒ–æµ‹è¯•](https://babeljs.io/repl)
>
> - Targetsï¼šnot ie 10 è®©æµè§ˆå™¨æ”¯æŒ ie 10 ä»¥ä¸Šç‰ˆæœ¬ï¼ˆES6ä»¥ä¸‹ï¼‰



è®©ä¸€ä¸ªå‡½æ•°åªèƒ½é€šè¿‡ `new` è°ƒç”¨ï¼š

```js
// es6 è¯­æ³•ï¼š
Person {}

// bebel è½¬åŒ–çš„ es5è¯­æ³•ï¼š
function _classCallCheck(instance, Constructor) { 
  if (!(instance instanceof Constructor)) {  // åˆ¤æ–­ instance å®ä¾‹åŸå‹é“¾ä¸Šæ˜¯å¦æœ‰ Constructor
    throw new TypeError("Cannot call a class as a function"); 
  } 
}

var Person = /*#__PURE__*/(function() {
  function Person() {
  // å¦‚æœæ˜¯ new è°ƒç”¨ï¼Œthisæ˜¯ä¸€ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œå…¶åŸå‹é“¾æŒ‡å‘äº†Person
  _classCallCheck(this, Person);
  }
  return Person;
})();

// test
new Person()  // PersonÂ {}
Person()			// Uncaught TypeError: Cannot call a class as a function
```

- ä½¿ç”¨ `var Person = (function() {}) ... `
  - è¿™é‡Œä½¿ç”¨ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œéš”ç»äº†å¤–éƒ¨ä½œç”¨åŸŸï¼Œä½¿å†…éƒ¨å˜é‡çš„åç§°ä¸ä¼šæ³„éœ²åˆ°å¤–éƒ¨ã€‚
  - `/*#__PURE__#*/` è¡¨æ˜äº†è¿™ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°æ˜¯ä¸€ä¸ª **çº¯å‡½æ•°**ï¼Œè¿™å¯ä»¥è®© webpack åœ¨æ‰“åŒ…æ—¶çš„ tree shaking ç¯èŠ‚æ—¶åˆ¤æ–­ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°æ²¡æœ‰å®é™…ä½¿ç”¨è¿‡ï¼Œåˆ™ä¼šåˆ æ‰è¿™ä¸ªçº¯å‡½æ•°ï¼Œä»è€Œå‡å°æ‰“åŒ…ä½“ç§¯ã€‚



å®ç° class Personï¼š

```js
// ğŸ  es6 æºä»£ç 
class Person {
  constructor(name, age) {
    this.name = name
    this.age = age
  }

  eating() {
    console.log(this.name + " eating~")
  }
}

// ğŸ”¥ babel è½¬æ¢
"use strict";

// åˆ¤æ–­æ˜¯å¦ç”¨ new è°ƒç”¨ï¼Œå¦‚æœä¸æ˜¯åˆ™æŠ›å‡ºé”™è¯¯
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

// éå†æ‰€æœ‰çš„å±æ€§ï¼Œç„¶åè®¾ç½®æ¯ä¸ªå±æ€§çš„ç‰¹æ€§enumerable, configurable, writable
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

// ç»™æ„é€ å‡½æ•°æ·»åŠ æ–¹æ³•ï¼ˆå…¬æœ‰æ–¹æ³•+é™æ€æ–¹æ³•ï¼‰
function _createClass(Constructor, protoProps, staticProps) {
	// å®šä¹‰æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  // å®šä¹‰æ„é€ å‡½æ•°ä¸Šçš„é™æ€æ–¹æ³•ï¼ˆå¦‚æœæœ‰ï¼‰
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}


var Person = /*#__PURE__*/ (function () {
  // æ„é€ å‡½æ•°
  function Person(name, age) {
    this.name = name;
    this.age = age;
  }
	// åŸå‹å¯¹è±¡ä¸Šæ·»åŠ æ–¹æ³• + æ„é€ å‡½æ•°ä¸Šæ·»åŠ é™æ€æ–¹æ³•
  _createClass(Person, [
    {
      key: "eating",
      value: function eating() {
        console.log(this.name + " eating~");
      }
    }
  ]);

  return Person;
})();
```



### 8.4 æŠ€å·§ï¼šå†…ç½®ç»§æ‰¿

å¦‚æœåˆ›å»ºä¸€ä¸ª class Personï¼Œjs ä¼šè‡ªåŠ¨ç»§æ‰¿ Objectï¼š

```js
class Person {}
// js è‡ªåŠ¨ç»§æ‰¿ï¼š
class Person extends Object {}
```



æŠ€å·§ï¼šå¯ä»¥ç»§æ‰¿å†…ç½®ç±»ï¼Œæ¥å¯¹å†…ç½®ç±»è¿›è¡Œå¢å¼º

å¦‚ï¼Œç»§æ‰¿ Array ç±»ï¼Œç„¶åæ‰©å±•å‡ºè‡ªå·±æƒ³è¦çš„é¢å¤–åŠŸèƒ½ï¼Œå¢å¼º Array ç±»ï¼š

```js
// é¢å¤–æ·»åŠ  firstItem å’Œ lastItem æ–¹æ³•ï¼š
class MyArray extends Array {
  firstItem() {
    return this.length ? this[0] : null;
	}
  
  lastItem() {
    return this.length ? this[this.length - 1] : null;
  }
}

const arr1 = new MyArray(1,2,3,4);
console.log(arr1.firstItem());  // 1
console.log(arr1.lastItem());   // 4

const arr2 = new MyArray();
console.log(arr2.firstItem());	// null
console.log(arr2.lastItem());		// null
```



### 8.5 æŠ€å·§ï¼šç±»çš„æ··å…¥mixin

Js åªæ”¯æŒç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œä¸æ”¯æŒå¤šç»§æ‰¿ã€‚ä½†å¦‚ä½•å®ç°å¤šç»§æ‰¿å‘¢ï¼Ÿ

ä¸‹ä¾‹ä¸­ï¼ŒStudent ç±»ç»§æ‰¿è‡ª Personï¼Œåˆå¸Œæœ›æ··å…¥ï¼ˆmixinï¼‰Runner å’Œ Eaterç±»ã€‚

- æœ¬è´¨ï¼Œè™½ç„¶ä¸èƒ½æ”¯æŒå¤šç»§æ‰¿ï¼Œä½†å¯ä»¥è®© Runner å’Œ Eater ä¸ Student ä¸²è”èµ·æ¥ç»§æ‰¿ï¼Œä¹Ÿå°±æ˜¯è¯´ç›¸å½“äº â€œStuedent extends Person extends Eater extends Runner â€

```js
class Person{}

class Student extends Person {}

function mixinRunner(BaseClass) {
  // è¿”å›åŒ¿åç±»ï¼ˆRunnerï¼‰
	return class extends BaseClass {
    running() {console.log('running~')};
  }
}

function mixinEater(BaseClass) {
  // è¿”å›åŒ¿åç±»ï¼ˆEatingï¼‰
	return class extends BaseClass {
    eating() {console.log('eating~')};
  }
}

const NewStudent = mixinEater(mixinRunner(Student));
const student = new NewStudent();
student.running(); // running~
student.eating();  // eating~
```



#### react é«˜é˜¶ç»„ä»¶

åœ¨ react çš„ç±»ç»„ä»¶ç¼–å†™æ—¶ï¼Œå¯¼å‡ºä¸€ä¸ªç±»é€šå¸¸æ˜¯è¿™æ ·çš„å½¢å¼ï¼š

```js
// Banner ç±»
export default connect(props, dispatch)(Banner);
```

è¿™å…¶å®å°±æ˜¯å¯¹åŸæœ¬çš„ Banner ç±»è¿›è¡Œäº† mixin å¢å¼ºã€‚

- connect å‡½æ•°å®ç°äº†æŸ¯é‡ŒåŒ–ï¼›
- connect çš„ props å’Œ dispatch å¢å¼ºäº† Banner ç»„ä»¶ï¼ŒæŠŠ redux çš„ API æ³¨å…¥äº† Banner ç»„ä»¶ä¸­ï¼Œè®© Banner ç»„ä»¶å¯ä»¥è°ƒç”¨ dispatch å’Œè·å– props æ•°æ®ã€‚
- æ‰€ä»¥ï¼Œåœ¨æœ€åå¯¼å‡ºçš„ç»„ä»¶å·²ç»ä¸å†æ˜¯ Banner ç»„ä»¶äº†ï¼Œè€Œæ˜¯ç»è¿‡ mixin çš„æ–°ç»„ä»¶ã€‚



















